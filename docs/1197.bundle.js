"use strict";(self.webpackChunkabaplint_playground=self.webpackChunkabaplint_playground||[]).push([[1197,2230],{52230(e,t,r){r.r(t),r.d(t,{ILanguageFeaturesService:()=>n});const n=(0,r(82399).u1)("ILanguageFeaturesService")},66726(e,t,r){r.d(t,{N:()=>getSingletonServiceDescriptors,v:()=>registerSingleton});var n=r(83312);const i=[];function registerSingleton(e,t,r){t instanceof n.d||(t=new n.d(t,[],Boolean(r))),i.push([e,t])}function getSingletonServiceDescriptors(){return i}},74403(e,t,r){r.d(t,{f:()=>score});var n=r(83958),i=r(18019);function score(e,t,r,s,a,o){if(Array.isArray(e)){let n=0;for(const i of e){const e=score(i,t,r,s,a,o);if(10===e)return e;e>n&&(n=e)}return n}if("string"==typeof e)return s?"*"===e?5:e===r?10:0:0;if(e){const{language:u,pattern:c,scheme:l,hasAccessToAllModels:h,notebookType:g}=e;if(!s&&!h)return 0;g&&a&&(t=a);let d=0;if(l)if(l===t.scheme)d=10;else{if("*"!==l)return 0;d=5}if(u)if(u===r)d=10;else{if("*"!==u)return 0;d=Math.max(d,5)}if(g)if(g===o)d=10;else{if("*"!==g||void 0===o)return 0;d=Math.max(d,5)}if(c){let e;if(e="string"==typeof c?c:{...c,base:(0,i.S8)(c.base)},e!==t.fsPath&&!(0,n.YW)(e,t.fsPath))return 0;d=10}return d}return 0}},78518(e,t,r){r.d(t,{No:()=>hasDriveLetter,TH:()=>toSlashes,Zn:()=>getRoot,_1:()=>isEqualOrParent,kb:()=>toPosixPath});var n=r(18019),i=r(63339),s=r(16844);function isPathSeparator(e){return 47===e||92===e}function toSlashes(e){return e.replace(/[\\/]/g,n.SA.sep)}function toPosixPath(e){return-1===e.indexOf("/")&&(e=toSlashes(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function getRoot(e,t=n.SA.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(isPathSeparator(i)){if(isPathSeparator(e.charCodeAt(1))&&!isPathSeparator(e.charCodeAt(2))){let n=3;const i=n;for(;n<r&&!isPathSeparator(e.charCodeAt(n));n++);if(i!==n&&!isPathSeparator(e.charCodeAt(n+1)))for(n+=1;n<r;n++)if(isPathSeparator(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(isWindowsDriveLetter(i)&&58===e.charCodeAt(1))return isPathSeparator(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<r;s++)if(isPathSeparator(e.charCodeAt(s)))return e.slice(0,s+1);return""}function isEqualOrParent(e,t,r,i=n.Vn){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(r){if(!(0,s.ns)(e,t))return!1;if(t.length===e.length)return!0;let r=t.length;return t.charAt(t.length-1)===i&&r--,e.charAt(r)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function isWindowsDriveLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function hasDriveLetter(e,t=i.uF){return!!t&&(isWindowsDriveLetter(e.charCodeAt(0))&&58===e.charCodeAt(1))}},81197(e,t,r){r.r(t),r.d(t,{LanguageFeaturesService:()=>LanguageFeaturesService});var n=r(2106),i=r(10998),s=r(66055),a=r(74403);function isExclusive(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(isExclusive):!!e.exclusive)}class MatchCandidate{constructor(e,t,r,n,i){this.uri=e,this.languageId=t,this.notebookUri=r,this.notebookType=n,this.recursive=i}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class LanguageFeatureRegistry{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new n.vl,this.onDidChange=this._onDidChange.event}register(e,t){let r={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(r),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,i.s)((()=>{if(r){const e=this._entries.indexOf(r);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),r=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e,t=!1){const r=[];return this._orderedForEach(e,t,(e=>r.push(e.provider))),r}orderedGroups(e){const t=[];let r,n;return this._orderedForEach(e,!1,(e=>{r&&n===e._score?r.push(e.provider):(n=e._score,r=[e.provider],t.push(r))})),t}_orderedForEach(e,t,r){this._updateScores(e,t);for(const e of this._entries)e._score>0&&r(e)}_updateScores(e,t){const r=this._notebookInfoResolver?.(e.uri),n=r?new MatchCandidate(e.uri,e.getLanguageId(),r.uri,r.type,t):new MatchCandidate(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(n)){this._lastCandidate=n;for(const r of this._entries)if(r._score=(0,a.f)(r.selector,n.uri,n.languageId,(0,s.vd)(e),n.notebookUri,n.notebookType),isExclusive(r.selector)&&r._score>0){if(!t){for(const e of this._entries)e._score=0;r._score=1e3;break}r._score=0}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:isBuiltinSelector(e.selector)&&!isBuiltinSelector(t.selector)?1:!isBuiltinSelector(e.selector)&&isBuiltinSelector(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function isBuiltinSelector(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(isBuiltinSelector):Boolean(e.isBuiltin))}var o=r(52230),u=r(66726);class LanguageFeaturesService{constructor(){this.referenceProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.newSymbolNamesProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.multiDocumentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentDropEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentPasteEditProvider=new LanguageFeatureRegistry(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}(0,u.v)(o.ILanguageFeaturesService,LanguageFeaturesService,1)},82399(e,t,r){var n;r.d(t,{_$:()=>n,_Y:()=>i,u1:()=>createDecorator}),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function getServiceDependencies(t){return t[e.DI_DEPENDENCIES]||[]}}(n||(n={}));const i=createDecorator("instantiationService");function createDecorator(e){if(n.serviceIds.has(e))return n.serviceIds.get(e);const id=function(e,t,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function storeServiceDependency(e,t,r){t[n.DI_TARGET]===t?t[n.DI_DEPENDENCIES].push({id:e,index:r}):(t[n.DI_DEPENDENCIES]=[{id:e,index:r}],t[n.DI_TARGET]=t)}(id,e,r)};return id.toString=()=>e,n.serviceIds.set(e,id),id}},83312(e,t,r){r.d(t,{d:()=>SyncDescriptor});class SyncDescriptor{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}}},83958(e,t,r){r.d(t,{YW:()=>match,qg:()=>parse});var n=r(65958),i=r(78518),s=r(27992),a=r(18019),o=r(63339),u=r(16844);const c="**",l="[/\\\\]",h="[^/\\\\]",g=/\//g;function starsToRegExp(e,t){switch(e){case 0:return"";case 1:return`${h}*?`;default:return`(?:${l}|${h}+${l}${t?`|${l}${h}+`:""})*?`}}function splitGlobAware(e,t){if(!e)return[];const r=[];let n=!1,i=!1,s="";for(const a of e){switch(a){case t:if(!n&&!i){r.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1}s+=a}return s&&r.push(s),r}function parseRegExp(e){if(!e)return"";let t="";const r=splitGlobAware(e,"/");if(r.every((e=>e===c)))t=".*";else{let e=!1;r.forEach(((n,i)=>{if(n===c){if(e)return;t+=starsToRegExp(2,i===r.length-1)}else{let e=!1,s="",a=!1,o="";for(const r of n)if("}"!==r&&e)s+=r;else if(!a||"]"===r&&o)switch(r){case"{":e=!0;continue;case"[":a=!0;continue;case"}":{const r=`(?:${splitGlobAware(s,",").map((e=>parseRegExp(e))).join("|")})`;t+=r,e=!1,s="";break}case"]":t+="["+o+"]",a=!1,o="";break;case"?":t+=h;continue;case"*":t+=starsToRegExp(1);continue;default:t+=(0,u.bm)(r)}else{let e;e="-"===r?r:"^"!==r&&"!"!==r||o?"/"===r?"":(0,u.bm)(r):"^",o+=e}i<r.length-1&&(r[i+1]!==c||i+2<r.length)&&(t+=l)}e=n===c}))}return t}const d=/^\*\*\/\*\.[\w\.-]+$/,f=/^\*\*\/([\w\.-]+)\/?$/,p=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,v=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,_=/^\*\*((\/[\w\.-]+)+)\/?$/,b=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,y=new s.qK(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(e,t){if(!e)return NULL;let r;r="string"!=typeof e?e.pattern:e,r=r.trim();const n=`${r}_${!!t.trimForExclusions}`;let i,s=y.get(n);return s||(s=d.test(r)?function trivia1(e,t){return function(r,n){return"string"==typeof r&&r.endsWith(e)?t:null}}(r.substr(4),r):(i=f.exec(trimForExclusions(r,t)))?function trivia2(e,t){const r=`/${e}`,n=`\\${e}`,parsedPattern=function(i,s){return"string"!=typeof i?null:s?s===e?t:null:i===e||i.endsWith(r)||i.endsWith(n)?t:null},i=[e];return parsedPattern.basenames=i,parsedPattern.patterns=[t],parsedPattern.allBasenames=i,parsedPattern}(i[1],r):(t.trimForExclusions?v:p).test(r)?function trivia3(e,t){const r=aggregateBasenameMatches(e.slice(1,-1).split(",").map((e=>parsePattern(e,t))).filter((e=>e!==NULL)),e),n=r.length;if(!n)return NULL;if(1===n)return r[0];const parsedPattern=function(t,n){for(let i=0,s=r.length;i<s;i++)if(r[i](t,n))return e;return null},i=r.find((e=>!!e.allBasenames));i&&(parsedPattern.allBasenames=i.allBasenames);const s=r.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);s.length&&(parsedPattern.allPaths=s);return parsedPattern}(r,t):(i=_.exec(trimForExclusions(r,t)))?trivia4and5(i[1].substr(1),r,!0):(i=b.exec(trimForExclusions(r,t)))?trivia4and5(i[1],r,!1):function toRegExp(e){try{const t=new RegExp(`^${parseRegExp(e)}$`);return function(r){return t.lastIndex=0,"string"==typeof r&&t.test(r)?e:null}}catch(e){return NULL}}(r),y.set(n,s)),wrapRelativePattern(s,e)}function wrapRelativePattern(e,t){if("string"==typeof t)return e;const wrappedPattern=function(r,n){return(0,i._1)(r,t.base,!o.j9)?e((0,u.NB)(r.substr(t.base.length),a.Vn),n):null};return wrappedPattern.allBasenames=e.allBasenames,wrappedPattern.allPaths=e.allPaths,wrappedPattern.basenames=e.basenames,wrappedPattern.patterns=e.patterns,wrappedPattern}function trimForExclusions(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function trivia4and5(e,t,r){const n=a.Vn===a.SA.sep,i=n?e:e.replace(g,a.Vn),s=a.Vn+i,o=a.SA.sep+e;let u;return u=r?function(r,a){return"string"!=typeof r||r!==i&&!r.endsWith(s)&&(n||r!==e&&!r.endsWith(o))?null:t}:function(r,s){return"string"!=typeof r||r!==i&&(n||r!==e)?null:t},u.allPaths=[(r?"*/":"./")+e],u}function match(e,t,r){return!(!e||"string"!=typeof t)&&parse(e)(t,void 0,r)}function parse(e,t={}){if(!e)return FALSE;if("string"==typeof e||function isRelativePattern(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)){const r=parsePattern(e,t);if(r===NULL)return FALSE;const resultPattern=function(e,t){return!!r(e,t)};return r.allBasenames&&(resultPattern.allBasenames=r.allBasenames),r.allPaths&&(resultPattern.allPaths=r.allPaths),resultPattern}return function parsedExpression(e,t){const r=aggregateBasenameMatches(Object.getOwnPropertyNames(e).map((r=>function parseExpressionPattern(e,t,r){if(!1===t)return NULL;const i=parsePattern(e,r);if(i===NULL)return NULL;if("boolean"==typeof t)return i;if(t){const r=t.when;if("string"==typeof r){const result=(t,s,a,o)=>{if(!o||!i(t,s))return null;const u=o(r.replace("$(basename)",(()=>a)));return(0,n.Qg)(u)?u.then((t=>t?e:null)):u?e:null};return result.requiresSiblings=!0,result}}return i}(r,e[r],t))).filter((e=>e!==NULL))),i=r.length;if(!i)return NULL;if(!r.some((e=>!!e.requiresSiblings))){if(1===i)return r[0];const resultExpression=function(e,t){let i;for(let s=0,a=r.length;s<a;s++){const a=r[s](e,t);if("string"==typeof a)return a;(0,n.Qg)(a)&&(i||(i=[]),i.push(a))}return i?(async()=>{for(const e of i){const t=await e;if("string"==typeof t)return t}return null})():null},e=r.find((e=>!!e.allBasenames));e&&(resultExpression.allBasenames=e.allBasenames);const t=r.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return t.length&&(resultExpression.allPaths=t),resultExpression}const resultExpression=function(e,t,i){let s,o;for(let u=0,c=r.length;u<c;u++){const c=r[u];c.requiresSiblings&&i&&(t||(t=(0,a.P8)(e)),s||(s=t.substr(0,t.length-(0,a.LC)(e).length)));const l=c(e,t,s,i);if("string"==typeof l)return l;(0,n.Qg)(l)&&(o||(o=[]),o.push(l))}return o?(async()=>{for(const e of o){const t=await e;if("string"==typeof t)return t}return null})():null},s=r.find((e=>!!e.allBasenames));s&&(resultExpression.allBasenames=s.allBasenames);const o=r.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(resultExpression.allPaths=o);return resultExpression}(e,t)}function aggregateBasenameMatches(e,t){const r=e.filter((e=>!!e.basenames));if(r.length<2)return e;const n=r.reduce(((e,t)=>{const r=t.basenames;return r?e.concat(r):e}),[]);let i;if(t){i=[];for(let e=0,r=n.length;e<r;e++)i.push(t)}else i=r.reduce(((e,t)=>{const r=t.patterns;return r?e.concat(r):e}),[]);const aggregate=function(e,t){if("string"!=typeof e)return null;if(!t){let r;for(r=e.length;r>0;r--){const t=e.charCodeAt(r-1);if(47===t||92===t)break}t=e.substr(r)}const r=n.indexOf(t);return-1!==r?i[r]:null};aggregate.basenames=n,aggregate.patterns=i,aggregate.allBasenames=n;const s=e.filter((e=>!e.basenames));return s.push(aggregate),s}}}]);