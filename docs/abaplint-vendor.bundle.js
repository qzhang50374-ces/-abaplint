"use strict";(self.webpackChunkabaplint_playground=self.webpackChunkabaplint_playground||[]).push([[933],{13(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransaction=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallTransaction=class{getMatcher(){const e=(0,s.seq)("OPTIONS FROM",o.Source),t=(0,s.seq)("MESSAGES INTO",o.Target),n=(0,s.seq)((0,s.altPrio)("WITH","WITHOUT"),"AUTHORITY-CHECK"),r=(0,s.per)((0,s.seq)("UPDATE",o.Source),"AND SKIP FIRST SCREEN",e,t,(0,s.seq)("MODE",o.Source)),a=(0,s.seq)("CALL TRANSACTION",o.Source,(0,s.optPrio)(n),(0,s.optPrio)((0,s.seq)("USING",o.Source)),(0,s.opt)(r));return(0,s.verNot)(i.Version.Cloud,a)}}},117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Help=void 0;const s=n(75457),o=n(75584),i=n(52424),r=n(12620),a=n(30699),c=n(297),l=n(84383),d=n(89978);t.Help=class{static find(e,t,n){const s=o.LSPUtils.getABAPFile(e,t.uri);if(void 0!==s)return this.dumpABAP(s,e,t,n);const i=e.getFileByName(t.uri);if(void 0===i)return"File not found: "+t.uri;const r=e.findObjectForFile(i);return r instanceof l.DataDefinition?this.dumpDDLS(r,e):"Unhandled object type: "+r.getType()}static dumpDDLS(e,t){let n="";n+="<h1>"+e.getType()+" "+e.getName()+"</h1>\n",n+=e.getDescription()+"\n",n+=e.getParsingIssues().map((e=>e.getMessage())).join("<br>\n"),n+="<hr>\n";const s=e.getParsedData();null==s||delete s.tree,n+="<pre>"+JSON.stringify(s,null,2)+"</pre>\n",n+="<hr>\n",n+="<pre>"+e.parseType(t).toText(0)+"</pre>\n",n+="<hr>\n";const o=e.findSourceFile();if(o){const e=d.CDSLexer.run(o);n+="<h3>Tokens</h3>\n<pre>\n";for(const t of e)n+=JSON.stringify(t)+" "+t.constructor.name+"\n";n+="</pre>\n"}return n}static dumpABAP(e,t,n,s){let o="";return o='\n    <a href="#_tokens" rel="no-refresh">Tokens</a> |\n    <a href="#_statements" rel="no-refresh">Statements</a> |\n    <a href="#_structure" rel="no-refresh">Structure</a> |\n    <a href="#_files" rel="no-refresh">Files</a> |\n    <a href="#_info" rel="no-refresh">Info Dump</a>\n    <hr>\n    <tt>'+n.uri+" ("+(s.line+1)+", "+(s.character+1)+")</tt>",o+="<hr>",o+=this.cursorInformation(t,n,s,e),o+=this.fileInformation(e),o+="<hr>",o+=this.dumpFiles(t),o+="<hr>",o+=this.dumpInfo(e),o}static dumpInfo(e){const t=e.getInfo(),n={classDefinitions:t.listClassDefinitions(),classImplementations:t.listClassImplementations(),interfaceDefinitions:t.listInterfaceDefinitions(),forms:t.listFormDefinitions()};return'<h3 id="_info">Info Dump</h3><pre>'+JSON.stringify(n,null,2)+"</pre>"}static cursorInformation(e,t,n,s){let c="";const l=o.LSPUtils.findCursor(e,{textDocument:t,position:n});c=void 0!==l?"Statement: "+this.linkToStatement(l.snode.get())+"<br>\nToken: "+l.token.constructor.name+"<br>\n"+this.fullPath(s,l.token).value:"No token found at cursor position";const d=e.getObject(s.getObjectType(),s.getObjectName());if(d instanceof r.ABAPObject){const n=new i.SyntaxLogic(e,d).run().spaghetti;if(c+=a.DumpScope.dump(n),void 0!==l){c+="<hr>Spaghetti Scope by Cursor Position:<br><br>\n";const e=n.lookupPosition(l.token.getStart(),t.uri);if(e){const t=e.getIdentifier();c=c+"<u>"+t.stype+", <tt>"+t.sname+"</tt>, "+t.filename,c=c+", ("+t.start.getRow()+", "+t.start.getCol()+")</u><br>"}else c+="Not found"}}return c}static fullPath(e,t){const n=e.getStructure();if(void 0===n)return{value:"",keyword:!1};const s=this.traverse(n,"",t);return void 0===s?{value:"",keyword:!1}:{value:"\n\n"+s.value,keyword:s.keyword}}static traverse(e,t,n){let o=t;if(""!==o&&(o+=" -> "),e instanceof s.StructureNode)o=o+"Structure: "+this.linkToStructure(e.get());else if(e instanceof s.StatementNode)o=o+"Statement: "+this.linkToStatement(e.get());else if(e instanceof s.ExpressionNode)o=o+"Expression: "+this.linkToExpression(e.get());else{if(!(e instanceof s.TokenNode))throw new Error("hover, traverse, unexpected node type");{o=o+"Token: "+e.get().constructor.name;const t=e.get();if(t.getStr()===n.getStr()&&t.getCol()===n.getCol()&&t.getRow()===n.getRow())return{value:o,keyword:!(e instanceof s.TokenNodeRegex)}}}for(const t of e.getChildren()){const e=this.traverse(t,o,n);if(e)return e}}static fileInformation(e){let t="";t+='<hr><h3 id="_tokens">Tokens</h3>\n',t+=this.tokens(e),t+='<hr><h3 id="_statements">Statements</h3>\n',t+=this.buildStatements(e),t+='<hr><h3 id="_structure">Structure</h3>\n';const n=e.getStructure();return t+=void 0!==n?this.buildStructure([n]):"structure undefined",t}static escape(e){return(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#039;")}static linkToStatement(e){return`<a href="https://syntax.abaplint.org/#/statement/${e.constructor.name}" target="_blank">${e.constructor.name}</a>\n`}static linkToStructure(e){return`<a href="https://syntax.abaplint.org/#/structure/${e.constructor.name}" target="_blank">${e.constructor.name}</a>\n`}static linkToExpression(e){return`<a href="https://syntax.abaplint.org/#/expression/${e.constructor.name}" target="_blank">${e.constructor.name}</a>\n`}static outputNodes(e){let t="<ul>";for(const n of e){let e="";switch(n.constructor.name){case"TokenNode":case"TokenNodeRegex":e=n.get().constructor.name+', "'+n.get().getStr()+'"';break;case"ExpressionNode":e=this.linkToExpression(n.get())+this.outputNodes(n.getChildren())}t=t+"<li>"+n.constructor.name+", "+e+"</li>"}return t+"</ul>"}static tokens(e){let t="<table><tr><td><b>String</b></td><td><b>Type</b></td>\n    <td><b>Row</b></td><td><b>Column</b></td>\n    <td><b>vRow</b></td><td><b>vColumn</b></td>\n    </tr>";for(const n of e.getTokens()){const e=n.getStart();t+="<tr><td><tt>"+this.escape(n.getStr())+"</tt></td><td>"+n.constructor.name+'</td><td align="right">'+e.getRow()+'</td><td align="right">'+e.getCol()+"</td>",e instanceof c.VirtualPosition?t+=`<td>${e.vcol}</td><td>${e.vrow}</td>`:t+="<td></td><td></td>",t+="</tr>"}return t+="</table>",t}static buildStatements(e){let t="";for(const n of e.getStatements())t=t+n.getStart().getRow()+": "+this.linkToStatement(n.get())+"</div></b>\n"+this.outputNodes(n.getChildren());return t}static buildStructure(e){let t="<ul>";for(const n of e)n instanceof s.StructureNode?t=t+"<li>"+this.linkToStructure(n.get())+", Structure "+this.buildStructure(n.getChildren())+"</li>":n instanceof s.StatementNode&&(t=t+"<li>"+this.linkToStatement(n.get())+", Statement</li>");return t+"</ul>"}static dumpFiles(e){let t='<h3 id="_files">Files</h3><table>\n';for(const n of e.getObjects())if(!0!==e.isDependency(n)){t=t+'<tr><td valign="top">'+n.getType()+" "+n.getName()+"</td><td>";for(const e of n.getFiles())t=t+e.getFilename()+"<br>";t+="</td></tr>\n"}return t+"</table>\n"}}},131(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenNodeRegex=void 0;const s=n(80387);class o extends s.TokenNode{}t.TokenNodeRegex=o},137(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefReturning=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("VALUE",(0,s.tok)(i.ParenLeft),o.MethodParamName,(0,s.tok)(i.ParenRightW));return(0,s.seq)("RETURNING",e,o.TypeParam)}}t.MethodDefReturning=r},213(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLTarget=void 0;const s=n(3125),o=n(49028),i=n(89301),r=n(82245);class a extends s.Expression{getRunnable(){const e=(0,s.ver)(o.Version.v754,"NEW"),t=(0,s.ver)(o.Version.v740sp05,(0,s.seq)((0,s.opt)(e),(0,s.altPrio)((0,s.tok)(i.WAt),(0,s.tok)(i.At)),r.Target),o.Version.OpenABAP);return(0,s.altPrio)(t,r.Target)}}t.SQLTarget=a},215(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchAssignmentHierarchy=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SHI8"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.SwitchAssignmentHierarchy=o},262(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalClass=t.GlobalClassConf=void 0;const s=n(71759),o=n(99732),i=n(84383),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.GlobalClassConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"global_class",title:"Global class checks",shortDescription:"Checks related to global classes",extendedInformation:"* global classes must be in own files\n\n* file names must match class name\n\n* file names must match interface name\n\n* global classes must be global definitions\n\n* global interfaces must be global definitions",tags:[a.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];for(const o of e.getInfo().listClassDefinitions()){if(o.isLocal&&t instanceof i.Class&&e.getFilename().match(/\.clas\.abap$/)){const e=s.Issue.atIdentifier(o.identifier,"Global classes must be global",this.getMetadata().key,this.conf.severity);n.push(e)}if(o.isGlobal&&t instanceof i.Class&&o.name.toUpperCase()!==t.getName().toUpperCase()){const e=s.Issue.atIdentifier(o.identifier,"Class definition name must match filename",this.getMetadata().key,this.conf.severity);n.push(e)}if(o.isGlobal&&!(t instanceof i.Class)){const e=s.Issue.atIdentifier(o.identifier,"Class must be local",this.getMetadata().key,this.conf.severity);n.push(e)}}for(const o of e.getInfo().listClassImplementations())if(e.getFilename().match(/\.clas\.abap$/)&&t instanceof i.Class&&o.identifier.getName().toUpperCase()!==t.getName().toUpperCase()){const e=s.Issue.atIdentifier(o.identifier,"Class implementation name must match filename",this.getMetadata().key,this.conf.severity);n.push(e)}for(const o of e.getInfo().listInterfaceDefinitions())if(e.getFilename().match(/\.intf\.abap$/)&&t instanceof i.Interface&&o.identifier.getName().toUpperCase()!==t.getName().toUpperCase()){const e=s.Issue.atIdentifier(o.identifier,"Interface implementation name must match filename",this.getMetadata().key,this.conf.severity);n.push(e)}for(const o of e.getInfo().listInterfaceDefinitions())if(o.isLocal&&t instanceof i.Interface&&e.getFilename().match(/\.intf\.abap$/)){const e=s.Issue.atIdentifier(o.identifier,"Global interface must be global",this.getMetadata().key,this.conf.severity);n.push(e)}return n}}t.GlobalClass=l},297(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualPosition=void 0;const s=n(86789);class o extends s.Position{constructor(e,t,n){super(e.getRow(),e.getCol()),this.vrow=t,this.vcol=n}equals(e){if(!(e instanceof o))return!1;const t=e;return super.equals(this)&&this.vrow===t.vrow&&this.vcol===t.vcol}isAfter(e){return e instanceof o?this.getRow()>e.getRow()||this.getRow()===e.getRow()&&this.getCol()>e.getCol()||this.getRow()===e.getRow()&&this.getCol()===e.getCol()&&this.vrow>e.vrow||this.getRow()===e.getRow()&&this.getCol()===e.getCol()&&this.vrow===e.vrow&&this.vcol>e.vcol:super.isAfter(e)}}t.VirtualPosition=o},329(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MacroReferences=void 0,t.MacroReferences=class{constructor(){this.definitions={},this.references={}}addDefinition(e,t,n){if(void 0===this.definitions[e.filename])this.definitions[e.filename]=[];else if(this.definitions[e.filename].find((t=>t.token.getStart().equals(e.token.getStart()))))return;this.definitions[e.filename].push({token:e.token,start:t,end:n})}getDefinitionRange(e,t){for(const n of this.definitions[e]||[])if(n.token.getStart().equals(t.getStart()))return{start:n.start,end:n.end}}addReference(e){void 0===this.references[e.filename]&&(this.references[e.filename]=[]),this.references[e.filename].push(e)}listDefinitionsByFile(e){const t=[];for(const n of this.definitions[e]||[])t.push(n.token);return t}listUsagesbyMacro(e,t){const n=[],s=t.getStr().toUpperCase();for(const t of this.references[e]||[])t.token.getStr().toUpperCase()===s&&n.push(t);return n}clear(e){delete this.definitions[e],delete this.references[e]}findDefinitionByUsage(e,t){const n=t.getStr().toUpperCase();for(const s of this.references[e]||[])if(s.token.getStart().equals(t.getStart()))for(const e of this.definitions[s.filename]||[])if(e.token.getStr().toUpperCase()===n)return{filename:s.filename,token:e.token}}}},376(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLInclude=void 0;const s=n(3125),o=n(80997);class i extends s.Expression{getRunnable(){return(0,s.seq)("INCLUDE",o.DDLName,";")}}t.DDLInclude=i},484(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldGroup=void 0;const s=n(3125),o=n(82245),i=n(49028);t.FieldGroup=class{getMatcher(){const e=(0,s.seq)("FIELD-GROUPS",(0,s.plus)(o.Field));return(0,s.verNot)(i.Version.Cloud,e)}}},493(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Punctuation=void 0;const s=n(61785);class o extends s.AbstractToken{}t.Punctuation=o},504(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ElseIf=void 0;const s=n(3125),o=n(82245);t.ElseIf=class{getMatcher(){return(0,s.seq)("ELSEIF",o.Cond)}}},511(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetPermissions=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetPermissions=class{getMatcher(){const e=(0,s.altPrio)("GLOBAL AUTHORIZATION","INSTANCE"),t=(0,s.seq)("FROM",o.Source),n=(0,s.seq)("GET PERMISSIONS ONLY",e,"ENTITY",o.SimpleName,(0,s.optPrio)(t),"REQUEST",o.Source,"RESULT",o.Target,"FAILED",o.Target,"REPORTED",o.Target);return(0,s.ver)(i.Version.v754,n)}}},536(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassImplementation=void 0;const s=n(50612),o=n(94967),i=n(58720);t.ClassImplementation=class{getMatcher(){const e=(0,i.star)((0,i.alt)((0,i.sub)(o.Define),(0,i.sta)(s.Include),(0,i.sub)(o.Method)));return(0,i.beginEnd)((0,i.sta)(s.ClassImplementation),e,(0,i.sta)(s.EndClass))}}},560(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumericGenericType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```NUMERIC```"}isGeneric(){return!0}toABAP(){throw new Error("NumericGenericType, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_NUMERICGENERIC"}}t.NumericGenericType=o},574(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetUserCommand=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetUserCommand=class{getMatcher(){const e=(0,s.seq)("SET USER-COMMAND",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},731(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageClass=void 0;const s=n(80300),o=n(9614),i=n(86219);class r extends s.AbstractObject{constructor(){super(...arguments),this.xml=void 0}getType(){return"MSAG"}getDescription(){var e;return this.parseXML(),null===(e=this.xml)||void 0===e?void 0:e.description}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getParsed(){return this.parseXML(),this.xml}setDirty(){this.xml=void 0,super.setDirty()}getMessages(){var e;this.parseXML();return(null===(e=this.xml)||void 0===e?void 0:e.parsedMessages)||[]}getByNumber(e){this.parseXML();for(const t of this.getMessages())if(t.getNumber()===e)return t}parseXML(){var e,t,n,s,r,a,c,l;if(void 0!==this.xml)return;this.xml={topName:void 0,description:void 0,parsedMessages:[]};const d=super.parseRaw2();if(void 0===d)return;this.xml.topName=null===(n=null===(t=null===(e=null==d?void 0:d.abapGit)||void 0===e?void 0:e["asx:abap"]["asx:values"])||void 0===t?void 0:t.T100A)||void 0===n?void 0:n.ARBGB,this.xml.description=null===(a=null===(r=null===(s=null==d?void 0:d.abapGit)||void 0===s?void 0:s["asx:abap"]["asx:values"])||void 0===r?void 0:r.T100A)||void 0===a?void 0:a.STEXT;const u=null===(l=null===(c=null==d?void 0:d.abapGit)||void 0===c?void 0:c["asx:abap"]["asx:values"])||void 0===l?void 0:l.T100;if(void 0!==u)for(const e of(0,i.xmlToArray)(u.T100))this.xml.parsedMessages.push(new o.Message(e.MSGNR,(0,i.unescape)(e.TEXT),e.ARBGB))}}t.MessageClass=r},768(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetPFStatus=void 0;const s=n(82245),o=n(93170);t.SetPFStatus=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},980(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationLogObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"APLO"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.ApplicationLogObject=o},1005(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallScreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallScreen=class{getMatcher(){const e=(0,s.seq)("STARTING AT",o.Source,o.Source),t=(0,s.seq)("ENDING AT",o.Source,o.Source),n=(0,s.seq)("CALL SCREEN",o.Source,(0,s.optPrio)((0,s.seq)(e,(0,s.optPrio)(t))));return(0,s.verNot)(i.Version.Cloud,n)}}},1385(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Symbols=void 0;const s=n(46203),o=n(2088),i=n(75584),r=n(50612),a=n(50612),c=n(82245);t.Symbols=class{constructor(e){this.reg=e}find(e){const t=i.LSPUtils.getABAPFile(this.reg,e);if(void 0===t)return[];const n=[];return n.push(...this.outputClasses(t)),n.push(...this.outputForms(t)),n.push(...this.outputModules(t)),n}selectionRange(e){const t=e.getStart(),n=e.getName();return s.Range.create(t.getRow()-1,t.getCol()-1,t.getRow()-1,t.getCol()-1+n.length)}range(e){const t=e.getStart(),n=e.getEnd();return s.Range.create(t.getRow()-1,t.getCol()-1,n.getRow()-1,n.getCol()-1)}newSymbolRanged(e,t,n,s){return{name:e.getName(),kind:t,range:s,selectionRange:this.selectionRange(e),children:n}}newSymbol(e,t,n){return{name:e.getName(),kind:t,range:this.range(e),selectionRange:this.selectionRange(e),children:n}}outputForms(e){const t=[];for(const n of e.getInfo().listFormDefinitions()){const e=this.newSymbol(n.identifier,s.SymbolKind.Function,[]);t.push(e)}return t}outputModules(e){var t;const n=[];for(const i of e.getStatements())if(i.get()instanceof a.Module){const r=null===(t=i.findFirstExpression(c.FormName))||void 0===t?void 0:t.getFirstToken();if(void 0===r)continue;const a=new o.Identifier(r,e.getFilename()),l=this.newSymbol(a,s.SymbolKind.Module,[]);n.push(l)}return n}outputClasses(e){const t=[];for(const n of e.getInfo().listClassDefinitions()){const e=[];e.push(...this.outputClassAttributes(n.attributes));const o=this.newSymbol(n.identifier,s.SymbolKind.Class,e);t.push(o)}for(const n of e.getInfo().listClassImplementations()){const o=[];o.push(...this.outputMethodImplementations(n.methods,e));const i=this.newSymbol(n.identifier,s.SymbolKind.Class,o);t.push(i)}return t}outputMethodImplementations(e,t){const n=[];for(const o of e){const e=o.getStart();let i;for(const n of t.getStatements())if(!n.getFirstToken().getStart().isBefore(e)&&n.get()instanceof r.EndMethod){i=n.getLastToken().getEnd();break}if(void 0===i)continue;const a=s.Range.create(e.getRow()-1,e.getCol()-1,i.getRow()-1,i.getCol()-1),c=this.newSymbolRanged(o,s.SymbolKind.Method,[],a);n.push(c)}return n}outputClassAttributes(e){if(void 0===e)return[];const t=[];for(const n of e)t.push(this.newSymbol(n.identifier,s.SymbolKind.Property,[]));return t}}},1561(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.QueryUserGroup=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AQBG"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.QueryUserGroup=o},1626(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const s=n(3125),o=n(82245);t.Data=class{getMatcher(){return(0,s.seq)("DATA",o.DataDefinition,(0,s.optPrio)("%_PREDEFINED"))}}},1643(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LineLength=t.LineLengthConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696);class a extends i.BasicRuleConfig{constructor(){super(...arguments),this.length=120,this.maxIssuesPerFile=10}}t.LineLengthConf=a;class c extends o.ABAPRule{constructor(){super(...arguments),this.conf=new a}getMetadata(){return{key:"line_length",title:"Line length",shortDescription:"Detects lines exceeding the provided maximum length.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#stick-to-a-reasonable-line-length\nhttps://docs.abapopenchecks.org/checks/04/",tags:[r.RuleTag.Styleguide,r.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=this.getConfig().maxIssuesPerFile;(void 0===n||n<1)&&(n=10);const o=e.getRawRows();for(let i=0;i<o.length;i++){const r=o[i].replace("\r","");if(r.length>255){const n=`Maximum allowed line length of 255 exceeded, currently ${r.length}`;t.push(s.Issue.atRow(e,i+1,n,this.getMetadata().key,this.conf.severity))}else if(r.length>this.conf.length){const n=`Reduce line length to max ${this.conf.length}, currently ${r.length}`;t.push(s.Issue.atRow(e,i+1,n,this.getMetadata().key,this.conf.severity))}if(t.length>=n)break}return t}}t.LineLength=c},1805(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertInternal=void 0;const s=n(82245),o=n(67886),i=n(93170),r=n(9646),a=n(25037),c=n(20572),l=n(14365),d=n(3240),u=n(82054);t.InsertInternal=class{runSyntax(e,t){let n;const p=e.findDirectExpression(s.Target);if(p&&(n=r.Target.runSyntax(p,t)),!(n instanceof c.TableType||n instanceof c.VoidType||n instanceof c.AnyType||n instanceof c.UnknownType||void 0===n)){const n="INSERT target must be a table";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}n instanceof c.TableType&&void 0===e.findDirectTokenByText("LINES")&&(n=n.getRowType());let f=e.findDirectExpression(s.SimpleSource4);void 0===f&&(f=e.findDirectExpression(s.Source));const g=f?i.Source.runSyntax(f,t,n):n;if(!(void 0!==n||g instanceof c.TableType||g instanceof c.VoidType||g instanceof c.AnyType||g instanceof c.UnknownType)){const n="INSERT target must be a table";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}const h=e.findExpressionAfterToken("ASSIGNING");if((null==h?void 0:h.get())instanceof s.FSTarget){const e=null==h?void 0:h.findDirectExpression(s.InlineFS);e?o.InlineFS.runSyntax(e,t,g):a.FSTarget.runSyntax(h,t,g)}if(void 0===e.findDirectTokenByText("INITIAL")){let s=!1;if((g instanceof c.IntegerType&&n instanceof c.Integer8Type||!1===new d.TypeUtils(t.scope).isAssignable(g,n)||g instanceof c.CharacterType&&n instanceof c.StringType)&&(s=!0),!0===s){const n="Types not compatible";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}const T=e.findExpressionAfterToken("INTO");if((null==T?void 0:T.get())instanceof s.Target&&g)if(T.findDirectExpression(s.InlineData))l.InlineData.runSyntax(T,t,new c.DataReference(g));else{const n=r.Target.runSyntax(T,t);if(n instanceof c.TableType&&n.getAccessType()===c.TableAccessType.hashed){const n="Implicit or explicit index operation on hashed table is not possible";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}for(const o of e.findDirectExpressions(s.Source))o!==f&&i.Source.runSyntax(o,t,n)}}},1854(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticBegin=void 0;const s=n(3125),o=n(82245);t.StaticBegin=class{getMatcher(){const e=(0,s.seq)("OCCURS",o.Integer);return(0,s.seq)((0,s.alt)("STATIC","STATICS"),"BEGIN OF",o.DefinitionName,(0,s.opt)(e))}}},1948(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransformationParameters=void 0;const s=n(82245),o=n(3125),i=n(17808),r=n(12741),a=n(26967);class c extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.alt)(r.Field,a.Integer),"=",s.SimpleSource3);return(0,o.alt)((0,o.plus)(e),i.Dynamic)}}t.CallTransformationParameters=c},2056(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.References=void 0;const s=n(12620),o=n(75584),i=n(52424),r=n(77959),a=n(2403);t.References=class{constructor(e){this.reg=e}references(e){const t=o.LSPUtils.getABAPFile(this.reg,e.textDocument.uri);if(void 0===t)return[];const n=this.reg.getObject(t.getObjectType(),t.getObjectName());if(!(n instanceof s.ABAPObject))return[];const i=o.LSPUtils.findCursor(this.reg,e);if(void 0===(null==i?void 0:i.identifier))return[];const a=r.LSPLookup.lookup(i,this.reg,n);return void 0===(null==a?void 0:a.definitionId)||void 0===(null==a?void 0:a.scope)?[]:this.search(a.definitionId,a.scope).map(o.LSPUtils.identiferToLocation)}search(e,t,n=!1,o=!0){let r=[];const c=t.getIdentifier().stype;if(c!==a.ScopeType.Method&&c!==a.ScopeType.FunctionModule&&c!==a.ScopeType.Form||(r=this.findReferences(t,e)),r.length>1&&!0===n)return r;for(const t of this.reg.getObjects())if(t instanceof s.ABAPObject){if(this.reg.isDependency(t))continue;r.push(...this.findReferences(new i.SyntaxLogic(this.reg,t).run().spaghetti.getTop(),e))}return!0===o?this.removeDuplicates(r):r}removeDuplicates(e){const t={};return e.filter((e=>{const n=e.getStart().getCol()+"_"+e.getStart().getRow()+"_"+e.getFilename(),s=t[n];return t[n]=!0,!s}))}findReferences(e,t){var n;const s=[];if(e.getIdentifier().stype!==a.ScopeType.BuiltIn){const o=t.getName().toUpperCase(),i=e.getData().vars[o];(null==i?void 0:i.equals(t))&&s.push(i);const r=e.getData().types[o];(null==r?void 0:r.equals(t))&&s.push(r);for(const o of e.getData().references)(null===(n=o.resolved)||void 0===n?void 0:n.equals(t))&&s.push(o.position)}for(const n of e.getChildren())s.push(...this.findReferences(n,t));return s}}},2066(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndCatch=void 0;const s=n(3125),o=n(49028);t.EndCatch=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"ENDCATCH")}}},2068(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Sort=void 0;const s=n(82245),o=n(9646),i=n(53414),r=n(20572),a=n(82054),c=n(56478);t.Sort=class{runSyntax(e,t){var n,l;for(const n of e.findDirectExpressions(s.Dynamic))i.Dynamic.runSyntax(n,t);const d=e.findDirectExpression(s.Target);if(d){const i=o.Target.runSyntax(d,t);if(i instanceof r.TableType){if((null===(l=null===(n=i.getOptions())||void 0===n?void 0:n.primaryKey)||void 0===l?void 0:l.type)===r.TableAccessType.sorted){const e="Sorted table, already sorted";return void t.issues.push((0,a.syntaxIssue)(t,d.getFirstToken(),e))}const o=i.getRowType();if(!(o instanceof r.VoidType||o instanceof r.UnknownType||o instanceof r.AnyType))for(const n of e.findAllExpressions(s.ComponentChain))c.ComponentChain.runSyntax(o,n,t)}else if(!(void 0===i||i instanceof r.VoidType||i instanceof r.UnknownType||i instanceof r.AnyType)){const e="SORT, must be a internal table";return void t.issues.push((0,a.syntaxIssue)(t,d.getFirstToken(),e))}}}}},2088(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Identifier=void 0,t.Identifier=class{constructor(e,t){this.token=e,this.filename=t}getName(){let e=this.token.getStr();return"!"===e.substr(0,1)&&(e=e.substr(1)),e}equals(e){return e.getStart().equals(this.getStart())&&e.getFilename()===this.getFilename()}getToken(){return this.token}getFilename(){return this.filename}getStart(){return this.token.getStart()}getEnd(){return this.token.getEnd()}}},2129(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPSnippetProvider=void 0,t.ABAPSnippetProvider=class{provideCompletionItems(e,t,n,s){return{suggestions:[{label:"method",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Empty method implementation",insertText:"METHOD ${1:method_name}.\r\n\t$0\r\nENDMETHOD.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"tbo",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Type definition (types begin of)",insertText:"TYPES BEGIN OF ${1:type_name},\r\n\tcomponent TYPE string,\r\nEND OF ${1:type_name}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"bool",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"abap_bool",insertText:"abap_bool",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"true",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"abap_true",insertText:"abap_true",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"false",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"abap_false",insertText:"abap_false",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"imp",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"importing parameter",insertText:"IMPORTING\r\n\t$0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"exp",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"exporting parameter",insertText:"EXPORTING\r\n\t$0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"cha",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"changing parameter",insertText:"CHANGING\r\n\t$0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ret",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"returning parameter",insertText:"RETURNING VALUE(${1:name}) TYPE $0.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"trycatch",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Try/Catch block",insertText:'TRY.\r\n\t${TM_SELECTED_TEXT}$0\r\n\tCATCH cx_root INTO DATA(cx).\r\n\t" handle error\r\nENDTRY.',insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"alias",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Interface method alias",insertText:"${1:method_name} FOR ${2:if_name}~${1:method_name},",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"trt",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Type ref to",insertText:"TYPE REF TO $0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"tt",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"General table snippet",insertText:"TYPE ${1|STANDARD,SORTED,HASHED|} TABLE OF ${2:type} WITH ${3|UNIQUE,NON-UNIQUE|} KEY ${4:table_line}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ttt",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Standard table definition",insertText:"TYPE STANDARD TABLE OF ${1:type} WITH KEY ${2:table_line}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"tst",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Sorted table definition",insertText:"TYPE SORTED TABLE OF ${1:type} WITH UNIQUE KEY ${2:table_line}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"tht",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Hashed table definition",insertText:"TYPE HASHED TABLE OF ${1:type} WITH UNIQUE KEY ${2:table_line}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ii",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Is initial",insertText:"IS INITIAL",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ini",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Is not initial",insertText:"IS NOT INITIAL",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ib",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Is bound",insertText:"IS BOUND",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"inb",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Is not bound",insertText:"IS NOT BOUND",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"loop",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Loop into data",insertText:"LOOP AT ${1:itab} INTO DATA(x).\r\n\t$0\r\nENDLOOP.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"loopfs",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Loop into field symbol",insertText:"LOOP AT ${1:itab} ASSIGNING FIELD-SYMBOL(<x>).\r\n\t$0\r\nENDLOOP.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"assert",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Assert (ABAP Unit)",insertText:"cl_abap_unit_assert=>$0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"if",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"IF block",insertText:"IF ${1:log_exp}.\r\n\t${TM_SELECTED_TEXT}$0\r\nENDIF.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"cond",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"COND expression",insertText:"COND #( WHEN ${1:log_exp}\r\n\tTHEN ${2:abap_true}\r\n\tELSE ${3:abap_false} )",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"forw",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"FOR expression with where clause",insertText:"FOR x IN ${1:itab} WHERE ( ${2:cond} )\r\n\t( x$0 )",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"for",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"FOR expression",insertText:"FOR x IN ${1:itab}\r\n\t( x$0 )",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"value",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"VALUE expression",insertText:"VALUE ${1:#}( $0 )",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"var",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Variable declaration (inline data style)",insertText:"DATA(${1:x}) = $0.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"data",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Variable declaration (legacy style)",insertText:"DATA: ${1:x} $0",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"class",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Class declaration",insertText:"CLASS ${1:class_name} DEFINITION PUBLIC FINAL.\n\tPUBLIC SECTION.\n\t$0\nENDCLASS.\n\nCLASS ${1:class_name} IMPLEMENTATION.\nENDCLASS.\n          ",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"case",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Case block",insertText:"CASE ${1:var_name}.\n\tWHEN ${2:value}.\n\t\t${TM_SELECTED_TEXT}$0\n\tWHEN OTHERS.\nENDCASE.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"throw",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Raise exception new",insertText:"RAISE EXCEPTION NEW ${1:cx_type}( $2 ).",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ro",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Read-only",insertText:"READ-ONLY.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"this",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"me->",insertText:"me->",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"self",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"me->",insertText:"me->",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"gwt",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Test method template (given-when-then)",insertText:'METHOD test.\n\t" given\n\t$0\n\t" when\n\t" then\nENDMETHOD.',insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"ctor",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Constructor definition",insertText:"METHODS constructor.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"cctor",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Class constructor definition",insertText:"CLASS-METHODS class_constructor.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet},{label:"enum",kind:monaco.languages.CompletionItemKind.Snippet,documentation:"Enum definition",insertText:"TYPES:\r\n\tBEGIN OF ENUM ${1:enum_name},\r\n\t\t${2:value},\r\n\tEND OF ENUM ${1:enum_name}.",insertTextRules:monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet}]}}}},2198(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.With=void 0;const s=n(3125),o=n(49028),i=n(82245),r=n(89301);t.With=class{getMatcher(){const e=(0,s.seq)(i.WithName,"AS",(0,s.tok)(r.WParenLeftW),i.SelectLoop,(0,s.tok)(r.WParenRightW));return(0,s.ver)(o.Version.v751,(0,s.seq)("WITH",(0,s.plus)(e),i.Select))}}},2212(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ATCCheckVariant=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CHKV"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ATCCheckVariant=o},2252(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Ranges=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Ranges=class{getMatcher(){const e=(0,s.seq)("OCCURS",o.Source),t=(0,s.seq)("RANGES",o.DefinitionName,"FOR",o.SimpleFieldChain2,(0,s.optPrio)(e),(0,s.optPrio)(o.FieldLength));return(0,s.verNot)(i.Version.Cloud,t)}}},2328(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.For=void 0;const s=n(82245),o=n(49769),i=n(93170),r=n(25551),a=n(2403),c=n(45931),l=n(60635),d=n(20572),u=n(15838),p=n(36453),f=n(31666);t.For=class{static runSyntax(e,t){var n;let g=!1;const h=e.findDirectExpressions(s.InlineLoopDefinition),T=e.findDirectExpressions(s.InlineFieldDefinition),m=null===(n=e.findExpressionAfterToken("GROUPS"))||void 0===n?void 0:n.getFirstToken(),y=e.findDirectExpression(s.Let);(h.length>0||T.length>0||void 0!==y||void 0!==m)&&(t.scope.push(a.ScopeType.For,"FOR",e.getFirstToken().getStart(),t.filename),g=!0);for(const e of h)r.InlineLoopDefinition.runSyntax(e,t);for(const e of T)o.InlineFieldDefinition.runSyntax(e,t);if(void 0!==m){const e=d.VoidType.get("todoGroupBy"),n=new u.TypedIdentifier(m,t.filename,e,["inline"]);t.scope.addIdentifier(n),t.scope.addReference(m,n,p.ReferenceType.DataWriteReference,t.filename)}for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.ComponentCond))c.ComponentCond.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Cond))l.Cond.runSyntax(n,t);return y&&f.Let.runSyntax(y,t,!0),g}}},2376(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CondSub=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.optPrio)("NOT"),(0,s.altPrio)((0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeft)),i.Cond,(0,s.altPrio)((0,s.tok)(o.WParenRightW),(0,s.tok)(o.ParenRightW)))}}t.CondSub=r},2403(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeType=void 0,function(e){e.BuiltIn="_builtin",e.Dummy="_dummy",e.Global="_global",e.Program="_program",e.TypePool="_type_pool",e.FunctionGroup="_function_group",e.ClassDefinition="class_definition",e.Interface="interface",e.ClassImplementation="class_implementation",e.Form="form",e.FunctionModule="function",e.Method="method",e.MethodInstance="method_instance",e.MethodDefinition="method_definition",e.For="for",e.Let="let",e.OpenSQL="open_sql"}(n||(t.ScopeType=n={}))},2416(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectOriented=void 0;const s=n(50612),o=n(82245),i=n(67240),r=n(20941);t.ObjectOriented=class{constructor(e){this.scope=e}fromInterfaceByName(e,t){const n=this.scope.findInterfaceDefinition(e);if(void 0===n||t.includes(e.toUpperCase()))return[];const s=[e.toUpperCase()];for(const t of n.getTypeDefinitions().getAll()){const n=e+"~"+t.type.getName();this.scope.addTypeNamed(n,t.type)}this.scope.addListPrefix(n.getAttributes().getConstants(),e+"~"),this.scope.addListPrefix(n.getAttributes().getStatic(),e+"~"),this.scope.addListPrefix(n.getAttributes().getInstance(),e+"~");for(const e of n.getImplementing())t.includes(e.name.toUpperCase())||(s.push(...this.fromInterfaceByName(e.name,t)),t.push(e.name.toUpperCase()),s.push(e.name.toUpperCase()));return s}addAliasedAttributes(e){for(const t of e.getAliases()||[]){const e=t.getComponent(),n=this.scope.findInterfaceDefinition(e.split("~")[0]);if(n){const s=n.getAttributes().findByName(e.split("~")[1]);s&&this.scope.addNamedIdentifier(t.getName(),s)}}const t=e.getSuperClass();if(void 0!==t){const e=this.scope.findClassDefinition(t);e&&this.addAliasedAttributes(e)}}addAliasedTypes(e){for(const t of e.getAliases()||[]){const e=t.getComponent(),n=this.scope.findInterfaceDefinition(e.split("~")[0]);if(n){const t=n.getTypeDefinitions().getByName(e.split("~")[1]);t&&this.scope.addType(t)}}const t=e.getSuperClass();if(void 0!==t){const e=this.scope.findClassDefinition(t);e&&this.addAliasedTypes(e)}}findMethodInInterface(e,t){const n=this.scope.findInterfaceDefinition(e);if(n){const e=n.getMethodDefinitions().getAll();for(const s of e)if(s.getName().toUpperCase()===t.toUpperCase())return{method:s,def:n};return this.findMethodViaAlias(t,n)}}findMethodViaAlias(e,t){for(const n of t.getAliases()||[])if(n.getName().toUpperCase()===e.toUpperCase()){const e=n.getComponent(),t=this.findMethodInInterface(e.split("~")[0],e.split("~")[1]);if(t)return t}}methodReferenceExtras(e,t){return void 0===e?{ooName:t,ooType:void 0}:{ooName:null==e?void 0:e.getName(),ooType:e instanceof r.ClassDefinition?"CLAS":"INTF"}}findClassName(e){if(!(e.get()instanceof s.ClassImplementation||e.get()instanceof s.ClassDefinition))throw new Error("findClassName, unexpected node type");const t=e.findFirstExpression(o.ClassName);if(void 0===t)throw new Error("findClassName, unexpected node type");return t.getFirstToken().getStr()}findInterfaces(e){var t;const n=[...e.getImplementing()];for(const e of n){const s=null===(t=this.scope.findInterfaceDefinition(e.name))||void 0===t?void 0:t.getImplementing();s&&n.push(...s)}const s=e.getSuperClass();if(s)try{n.push(...this.findInterfaces(this.findSuperDefinition(s)))}catch(e){}return n}searchEvent(e,t){if(void 0===e||void 0===t)return;const n=e.getEvents().find((e=>e.getName().toUpperCase()===(null==t?void 0:t.toUpperCase())));if(n)return n;for(const n of e.getAliases()||[])if(n.getName().toUpperCase()===t.toUpperCase()){const e=n.getComponent(),t=this.searchEvent(this.scope.findObjectDefinition(e.split("~")[0]),e.split("~")[1]);if(t)return t}const s=e.getSuperClass();return s?this.searchEvent(this.findSuperDefinition(s),t):void 0}searchAttributeName(e,t){if(void 0===e||void 0===t)return;const n=t.toUpperCase(),s=e.getAttributes();if(s)for(const e of s.getAll())if(e.getName().toUpperCase()===n)return e;for(const t of e.getAliases()||[])if(t.getName().toUpperCase()===n){const e=t.getComponent(),n=this.searchAttributeName(this.scope.findObjectDefinition(e.split("~")[0]),e.split("~")[1]);if(n)return n}if(t.includes("~")){const s=n.split("~")[0];if(this.listInterfacesRecursive(e).includes(s))return this.searchAttributeName(this.scope.findInterfaceDefinition(s),t.split("~")[1])}const o=e.getSuperClass();return o?this.searchAttributeName(this.findSuperDefinition(o),t):void 0}searchTypeName(e,t){if(void 0===e||void 0===t)return;const n=e.getTypeDefinitions().getByName(t);if(n)return n;for(const n of e.getAliases())if(n.getName().toUpperCase()===t.toUpperCase()){const e=n.getComponent(),t=this.searchTypeName(this.scope.findObjectDefinition(e.split("~")[0]),e.split("~")[1]);if(t)return t}if(t.includes("~")){const n=t.split("~")[0];if(e.getImplementing().some((e=>e.name.toUpperCase()===n.toUpperCase())))return this.searchTypeName(this.scope.findInterfaceDefinition(n),t.split("~")[1])}const s=e.getSuperClass();return s?this.searchTypeName(this.findSuperDefinition(s),t):void 0}searchConstantName(e,t){if(void 0===e||void 0===t)return;const n=t.toUpperCase();for(const t of e.getAttributes().getConstants())if(t.getName().toUpperCase()===n)return t;for(const t of e.getAliases())if(t.getName().toUpperCase()===n){const e=t.getComponent(),n=this.searchConstantName(this.scope.findObjectDefinition(e.split("~")[0]),e.split("~")[1]);if(n)return n}if(t.includes("~")){const s=n.split("~")[0];if(e.getImplementing().some((e=>e.name.toUpperCase()===s)))return this.searchConstantName(this.scope.findInterfaceDefinition(s),t.split("~")[1])}const s=e.getSuperClass();return s?this.searchConstantName(this.findSuperDefinition(s),t):void 0}searchMethodName(e,t){if(void 0===e||void 0===t)return{method:void 0,def:void 0};const n=this.findMethod(e,t);if(n)return{method:n,def:e};let s;if(t.includes("~")&&(s=t.split("~")[0],s&&!1===this.findInterfaces(e).some((e=>e.name.toUpperCase()===(null==s?void 0:s.toUpperCase())))))return{method:void 0,def:void 0};if(void 0===n&&s){t=t.split("~")[1];const e=this.findMethodInInterface(s,t);if(e)return e}else if(void 0===n){const n=this.findMethodViaAlias(t,e);if(n)return n}const o=e.getSuperClass();return void 0===n&&o?this.searchMethodName(this.findSuperDefinition(o),t):{method:void 0,def:void 0}}findMethod(e,t){const n=e.getMethodDefinitions();if(void 0!==n)for(const s of n.getAll())if(s.getName().toUpperCase()===t.toUpperCase())return s.isRedefinition()?this.findMethodInSuper(e,t):s}findMethodInSuper(e,t){let n=e.getSuperClass();for(;void 0!==n;){const e=this.findSuperDefinition(n),s=this.findMethod(e,t);if(s)return s;n=e.getSuperClass()}}findSuperDefinition(e){const t=this.scope.findClassDefinition(e);if(void 0===t)throw new Error('Super class "'+e+'" not found or contains errors');return t}fromSuperClassesAndInterfaces(e){const t=this.fromSuperClasses(e);this.fromInterfaces(e,t)}fromSuperClasses(e){let t=e.getSuperClass();const n=[];for(;void 0!==t;){const e=this.findSuperDefinition(t);for(const t of e.getAttributes().getAll())t.getVisibility()!==i.Visibility.Private&&this.scope.addIdentifier(t);for(const t of e.getAttributes().getConstants())t.getVisibility()!==i.Visibility.Private&&this.scope.addIdentifier(t);for(const t of e.getTypeDefinitions().getAll())t.visibility!==i.Visibility.Private&&this.scope.addType(t.type);n.push(...this.fromInterfaces(e,n)),t=e.getSuperClass()}return n}listInterfacesRecursive(e){const t=[];for(const n of e.getImplementing()){const e=n.name.toUpperCase();t.push(e);const s=this.scope.findInterfaceDefinition(e);s&&t.push(...this.listInterfacesRecursive(s))}return[...new Set(t)]}fromInterfaces(e,t){const n=[];for(const s of e.getImplementing())n.push(...this.fromInterfaceByName(s.name,n.concat(t||[])));return n}}},2425(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameDomain=void 0;const s=n(84383),o=n(33073);t.RenameDomain=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof s.Domain))throw new Error("RenameDomain, not a domain");let i=[];const r=new o.RenamerHelper(this.reg);return i=i.concat(r.buildXMLFileEdits(e,"DOMNAME",t,n)),i=i.concat(r.renameFiles(e,t,n)),i=i.concat(r.renameDDICDTELReferences(e,t,n)),{documentChanges:i}}}},2455(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WPlusW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" + "}}t.WPlusW=o},2509(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnnecessaryPragma=t.UnnecessaryPragmaConf=void 0;const s=n(71759),o=n(50612),i=n(82245),r=n(99732),a=n(77465),c=n(52024),l=n(86696),d=n(71249);class u extends a.BasicRuleConfig{constructor(){super(...arguments),this.allowNoTextGlobal=!1}}t.UnnecessaryPragmaConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"unnecessary_pragma",title:"Unnecessary Pragma",shortDescription:"Finds pragmas which can be removed",extendedInformation:"* NO_HANDLER with handler\n\n* NEEDED without definition\n\n* NO_TEXT without texts\n\n* SUBRC_OK where sy-subrc is checked\n\nNO_HANDLER inside macros are not checked",tags:[l.RuleTag.SingleFile],badExample:'TRY.\n    ...\n  CATCH zcx_abapgit_exception ##NO_HANDLER.\n    RETURN. " it has a handler\nENDTRY.\nMESSAGE w125(zbar) WITH c_foo INTO message ##NEEDED ##NO_TEXT.\nSELECT SINGLE * FROM tadir INTO @DATA(sdfs) ##SUBRC_OK.\nIF sy-subrc <> 0.\nENDIF.',goodExample:"TRY.\n    ...\n  CATCH zcx_abapgit_exception.\n    RETURN.\nENDTRY.\nMESSAGE w125(zbar) WITH c_foo INTO message.\nSELECT SINGLE * FROM tadir INTO @DATA(sdfs).\nIF sy-subrc <> 0.\nENDIF.\n\nDATA: BEGIN OF blah ##NEEDED,\n        test1 TYPE string,\n        test2 TYPE string,\n      END OF blah."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=!1,r=!1;const a=e.getStatements();for(let l=0;l<a.length;l++){const d=a[l],u=a[l+1];if(d.get()instanceof o.EndTry)n=!1;else if(d.get()instanceof o.ClassDefinition||d.get()instanceof o.Interface)d.findDirectExpression(i.ClassGlobal)&&(r=!0);else if(d.get()instanceof o.EndClass||d.get()instanceof o.EndInterface)r=!1;else{if(d.get()instanceof c.Comment)continue;if(!0!==n||d.get()instanceof o.Catch)n=this.containsNoHandler(d,a[l+1]);else{const o="NO_HANDLER pragma or pseudo comment can be removed",i=s.Issue.atStatement(e,d,o,this.getMetadata().key,this.conf.severity);t.push(i),n=!1}}!0===this.getConfig().allowNoTextGlobal&&!0===r||t.push(...this.checkText(d,e)),t.push(...this.checkNeeded(d,e)),!1===r&&t.push(...this.checkSubrc(d,u,e))}return t}checkText(e,t){const n=e.getPragmas().find((e=>"##NO_TEXT"===e.getStr().toUpperCase()));if(void 0===n)return[];if(void 0===e.findFirstExpression(i.ConstantString)&&void 0===e.findFirstExpression(i.StringTemplate)){const e="There is no text, NO_TEXT can be removed",o=d.EditHelper.deleteToken(t,n);return[s.Issue.atToken(t,n,e,this.getMetadata().key,this.getConfig().severity,o)]}return[]}checkSubrc(e,t,n){const o=e.getPragmas().find((e=>"##SUBRC_OK"===e.getStr().toUpperCase()));if(void 0===o)return[];if(((null==t?void 0:t.concatTokens().toUpperCase())||"").includes(" SY-SUBRC")){const e="SUBRC_OK can be removed as sy-subrc is checked",t=d.EditHelper.deleteToken(n,o);return[s.Issue.atToken(n,o,e,this.getMetadata().key,this.getConfig().severity,t)]}return[]}checkNeeded(e,t){const n=e.getPragmas().find((e=>"##NEEDED"===e.getStr().toUpperCase()));if(void 0===n)return[];if(!(void 0!==e.findFirstExpression(i.InlineData)||e.get()instanceof o.Parameter||e.get()instanceof o.Data||e.get()instanceof o.DataBegin||e.get()instanceof o.ClassData||e.get()instanceof o.ClassDataBegin||e.get()instanceof o.Type||e.get()instanceof o.Form||e.get()instanceof o.Tables||e.get()instanceof o.TypeBegin||e.get()instanceof o.Constant||e.get()instanceof o.ConstantBegin||e.get()instanceof o.TypeEnum||e.get()instanceof o.TypeEnumBegin||e.get()instanceof o.MethodImplementation||e.get()instanceof o.MethodDef||void 0!==e.findFirstExpression(i.InlineFS))){const e="There is no data definition, NEEDED can be removed",o=d.EditHelper.deleteToken(t,n);return[s.Issue.atToken(t,n,e,this.getMetadata().key,this.getConfig().severity,o)]}return[]}containsNoHandler(e,t){for(const t of e.getPragmas())if("##NO_HANDLER"===t.getStr().toUpperCase())return!0;return!(!(t&&t.get()instanceof c.Comment)||e.get()instanceof c.MacroContent||!t.concatTokens().toUpperCase().includes("#EC NO_HANDLER"))}}t.UnnecessaryPragma=p},2546(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Replace=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Replace=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},2550(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectReferenceType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){super(t),this.identifier=e}getIdentifierName(){return this.identifier.getName()}toText(){return"```REF TO "+this.identifier.getName()+"```"}toABAP(){return"REF TO "+this.identifier.getName()}isGeneric(){return!1}containsVoid(){return!1}getIdentifier(){return this.identifier}toCDS(){return"abap.TODO_OBJECTREF"}}t.ObjectReferenceType=o},2595(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Else=void 0;const s=n(3125);t.Else=class{getMatcher(){return(0,s.str)("ELSE")}}},2656(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndDo=void 0;const s=n(3125);t.EndDo=class{getMatcher(){return(0,s.str)("ENDDO")}}},2698(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMeshEnd=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeMeshEnd=class{getMatcher(){return(0,s.ver)(i.Version.v740sp05,(0,s.seq)("TYPES","END OF MESH",o.NamespaceSimpleName))}}},2912(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCase=void 0;const s=n(82245),o=n(49028),i=n(89301),r=n(3125),a=n(28377),c=n(69656),l=n(37210),d=n(14933);class u extends r.Expression{getRunnable(){const e=(0,r.seq)((0,r.tok)(i.WAt),s.SimpleFieldChain2),t=(0,r.altPrio)(s.SQLAggregation,u,s.SQLFunction,s.SQLPath,l.SQLFieldName,a.Constant),n=(0,r.seq)((0,r.altPrio)("+","-","*","/","&&"),(0,r.optPrio)((0,r.tok)(i.WParenLeftW)),t,(0,r.optPrio)((0,r.tok)(i.WParenRightW))),p=(0,r.altPrio)(u,s.SQLAggregation,s.SQLFunction,l.SQLFieldName,d.SQLSource,a.Constant),f=(0,r.altPrio)(c.SQLCond,a.Constant,e),g=(0,r.seq)("WHEN",f,"THEN",p,(0,r.starPrio)(n)),h=(0,r.seq)("ELSE",p);return(0,r.ver)(o.Version.v740sp05,(0,r.seq)("CASE",(0,r.opt)((0,r.altPrio)(l.SQLFieldName,e)),(0,r.plusPrio)(g),(0,r.optPrio)(h),"END"))}}t.SQLCase=u},2948(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateSection=void 0;const s=n(50612),o=n(58720),i=n(21585);t.PrivateSection=class{getMatcher(){return(0,o.seq)((0,o.sta)(s.Private),(0,o.opt)((0,o.sub)(i.SectionContents)))}}},2974(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CyclicOO=t.CyclicOOConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(52424),a=n(36453),c=n(56727),l=n(12620);class d extends o.BasicRuleConfig{constructor(){super(...arguments),this.skip=[],this.skipSharedMemory=!0,this.skipTestclasses=!0}}t.CyclicOOConf=d,t.CyclicOO=class{constructor(){this.conf=new d,this.edges={}}getMetadata(){return{key:"cyclic_oo",title:"Cyclic OO",shortDescription:"Finds cyclic/circular OO references",extendedInformation:"Runs for global INTF + CLAS objects\n\nObjects must be without syntax errors for this rule to take effect\n\nReferences in testclass includes are ignored"}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skip&&(this.conf.skip=[])}initialize(e){var t;this.reg=e,this.edges={};for(const e of this.reg.getObjectsByType("CLAS")){if(this.reg.isDependency(e))continue;const n=e.getName().toUpperCase();if(!(e instanceof i.Class))continue;if(this.conf.skip.indexOf(n)>=0)continue;if(!0===this.conf.skipSharedMemory&&!0===(null===(t=e.getClassDefinition())||void 0===t?void 0:t.isSharedMemory))continue;const s=new r.SyntaxLogic(this.reg,e).run();s.issues.length>0||this.buildEdges(n,s.spaghetti.getTop())}for(const e of this.reg.getObjectsByType("INTF")){if(this.reg.isDependency(e))continue;const t=e.getName().toUpperCase();if(!(e instanceof l.ABAPObject))continue;if(this.conf.skip.indexOf(t)>=0)continue;const n=new r.SyntaxLogic(this.reg,e).run();n.issues.length>0||this.buildEdges(t,n.spaghetti.getTop())}return this}run(e){if(!(e instanceof i.Interface||e instanceof i.Class))return[];const t=e.getIdentifier();if(void 0===t)return[];const n={};n[e.getName()]=!0;const o=this.findCycle(e.getName(),e.getName(),n);if(o){const n="Cyclic definition/usage: "+e.getName()+" -> "+o;return[s.Issue.atIdentifier(t,n,this.getMetadata().key,this.conf.severity)]}return[]}findCycle(e,t,n){if(void 0!==this.edges[t])for(const s of this.edges[t]){if(s===e)return s;if(void 0===n[s]){n[s]=!0;const t=this.findCycle(e,s,n);if(t)return s+" -> "+t}}}buildEdges(e,t){var n;for(const s of t.getData().references)if(void 0!==s.resolved&&t.getIdentifier().filename!==s.resolved.getFilename()&&s.resolved.getFilename()!==c.BuiltIn.filename&&(!0!==this.conf.skipTestclasses||!s.position.getFilename().includes(".testclasses.")&&!s.resolved.getFilename().includes(".testclasses."))&&s.referenceType===a.ReferenceType.ObjectOrientedReference&&(null===(n=s.extra)||void 0===n?void 0:n.ooName)){void 0===this.edges[e]&&(this.edges[e]=[]);const t=s.extra.ooName.toUpperCase();if(t!==e&&this.edges[e].indexOf(t)<0){const n=this.reg.getObject("INTF",t)||this.reg.getObject("CLAS",t);if(n&&this.reg.isDependency(n))continue;this.edges[e].push(t)}}for(const n of t.getChildren())this.buildEdges(e,n)}}},3114(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SyModification=t.SyModificationConf=void 0;const s=n(71759),o=n(82245),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.SyModificationConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"sy_modification",title:"Modification of SY fields",shortDescription:"Finds modification of sy fields",extendedInformation:"https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abensystem_fields.htm\n\nChanges to SY-TVAR* fields are not reported\n\nModification of SY fields is not allwed in ABAP Cloud language version,\nhttps://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/ABENSYSTEM_FIELDS.html",tags:[a.RuleTag.SingleFile],badExample:"sy-uname = 2.\nsy = sy."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n;const i=[];if("INTF"===t.getType())return[];for(const t of(null===(n=e.getStructure())||void 0===n?void 0:n.findAllExpressions(o.Target))||[]){const n=t.getChildren()[0];if(n.get()instanceof o.TargetField&&"SY"===n.getFirstToken().getStr().toUpperCase()){if(t.concatTokens().toUpperCase().startsWith("SY-TVAR"))continue;const o="Modification of SY field",r=s.Issue.atToken(e,n.getFirstToken(),o,this.getMetadata().key,this.conf.severity);i.push(r)}}return i}}t.SyModification=l},3125(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Combi=t.Expression=void 0,t.str=A,t.regex=function(e){return new a(e)},t.tok=function(e){return new l(e.name)},t.seq=function(e,t,...n){const s=[R(e),R(t)];return s.push(...n.map(R)),new y(s)},t.alt=function(e,t,...n){const s=[R(e),R(t)];return s.push(...n.map(R)),new D(s)},t.altPrio=function(e,t,...n){const s=[R(e),R(t)];return s.push(...n.map(R)),new x(s)},t.opt=function(e){return new f(R(e))},t.optPrio=function(e){return new p(R(e))},t.per=function(e,t,...n){const s=[R(e),R(t)];return s.push(...n.map(R)),new v(s)},t.star=function(e){return new g(R(e))},t.starPrio=function(e){return new h(R(e))},t.plus=function(e){return new T(R(e))},t.plusPrio=function(e){return new m(R(e))},t.ver=function(e,t,n){return new d(e,R(t),n)},t.verNot=function(e,t){return new u(e,R(t))},t.failCombinator=function(){return new b},t.failStar=function(){return new I};const s=n(89301),o=n(75457),i=n(49028),r=n(36532);class a{constructor(e){this.regexp=e}listKeywords(){return[]}getUsing(){return[]}run(e){const t=[];for(const n of e){if(0===n.remainingLength())continue;const e=n.peek();!0===this.regexp.test(e.getStr())&&t.push(n.shift(new o.TokenNodeRegex(e)))}return t}railroad(){return'Railroad.Terminal("'+this.regexp.source.replace(/\\/g,"\\\\")+'")'}toStr(){return this.regexp.toString()}first(){return[""]}}class c{constructor(e){this.s=e.toUpperCase()}listKeywords(){return[this.s]}getUsing(){return[]}run(e){const t=[];for(const n of e)0!==n.remainingLength()&&n.peek().getStr().toUpperCase()===this.s&&t.push(n.shift(new o.TokenNode(n.peek())));return t}railroad(){return"Railroad.Terminal('\""+this.s+"\"')"}toStr(){return'"'+this.s+'"'}first(){return[this.s]}}class l{constructor(e){this.name=e.toUpperCase()}listKeywords(){return[]}getUsing(){return[]}run(e){const t=[];for(const n of e)0!==n.remainingLength()&&n.peek().constructor.name.toUpperCase()===this.name&&t.push(n.shift(new o.TokenNode(n.peek())));return t}railroad(){let e=this.name;const t=s;for(const n in s)if(n.toUpperCase()===this.name&&t[n].railroad){e=t[n].railroad();break}return"Railroad.Terminal('!\""+e+"\"')"}toStr(){return'Token "'+this.name+'"'}first(){return[""]}}class d{constructor(e,t,n){this.version=e,this.runnable=t,this.or=n}listKeywords(){return this.runnable.listKeywords()}run(e){const t=P.getVersion();return this.or&&t===this.or?this.runnable.run(e):t===i.Version.OpenABAP?this.version>i.Version.v702?[]:this.runnable.run(e):t>=this.version||t===i.Version.Cloud?this.runnable.run(e):[]}getUsing(){return this.runnable.getUsing()}railroad(){let e=this.version;return this.or&&(e+=" or "+this.or),'Railroad.Sequence(Railroad.Comment("'+e+'", {}), '+this.runnable.railroad()+")"}toStr(){return"Version("+this.runnable.toStr()+")"}first(){return this.runnable.first()}}class u{constructor(e,t){this.version=e,this.runnable=t}listKeywords(){return this.runnable.listKeywords()}getUsing(){return this.runnable.getUsing()}run(e){return P.getVersion()!==this.version?this.runnable.run(e):[]}railroad(){return'Railroad.Sequence(Railroad.Comment("not '+this.version+'", {}), '+this.runnable.railroad()+")"}toStr(){return"VersionNot("+this.runnable.toStr()+")"}first(){return this.runnable.first()}}class p{constructor(e){this.optional=e}listKeywords(){return this.optional.listKeywords()}getUsing(){return this.optional.getUsing()}run(e){const t=[];for(const n of e){const e=this.optional.run([n]);e.length>1?t.push(...e):0===e.length?t.push(n):e[0].remainingLength()<n.remainingLength()?t.push(...e):t.push(n)}return t}railroad(){return"Railroad.Optional("+this.optional.railroad()+")"}toStr(){return"opt("+this.optional.toStr()+")"}first(){return[""]}}class f{constructor(e){this.optional=e}listKeywords(){return this.optional.listKeywords()}getUsing(){return this.optional.getUsing()}run(e){const t=[];for(const n of e){t.push(n);const e=this.optional.run([n]);t.push(...e)}return t}railroad(){return"Railroad.Optional("+this.optional.railroad()+")"}toStr(){return"opt("+this.optional.toStr()+")"}first(){return[""]}}class g{constructor(e){this.sta=e}listKeywords(){return this.sta.listKeywords()}getUsing(){return this.sta.getUsing()}run(e){let t=e;try{let n=e,s=[];for(;s=n,n=this.sta.run(s),0!==n.length;)n.length>1e3?t=t.concat(n):t.push(...n)}catch(e){if(e instanceof C)return t;throw e}return t}railroad(){return"Railroad.ZeroOrMore("+this.sta.railroad()+")"}toStr(){return"star("+this.sta.toStr()+")"}first(){return[""]}}class h{constructor(e){this.sta=e}listKeywords(){return this.sta.listKeywords()}getUsing(){return this.sta.getUsing()}run(e){let t,n=e,s=e;for(;;){if(s=this.sta.run(s),0===s.length){if(void 0!==t){let e=Number.MAX_SAFE_INTEGER;for(const s of t)s.remainingLength()<e&&(n=[s],e=s.remainingLength())}break}t=s}return n}railroad(){return"Railroad.ZeroOrMore("+this.sta.railroad()+")"}toStr(){return"star("+this.sta.toStr()+")"}first(){return[""]}}class T{constructor(e){this.plu=e,this.sub=new y([this.plu,new g(this.plu)])}listKeywords(){return this.plu.listKeywords()}getUsing(){return this.plu.getUsing()}run(e){return this.sub.run(e)}railroad(){return"Railroad.OneOrMore("+this.plu.railroad()+")"}toStr(){return"plus("+this.plu.toStr()+")"}first(){return this.plu.first()}}class m{constructor(e){this.plu=e,this.sub=new y([this.plu,new h(this.plu)])}listKeywords(){return this.plu.listKeywords()}getUsing(){return this.plu.getUsing()}run(e){return this.sub.run(e)}railroad(){return"Railroad.OneOrMore("+this.plu.railroad()+")"}toStr(){return"plus("+this.plu.toStr()+")"}first(){return this.plu.first()}}class y{constructor(e){if(e.length<2)throw new Error("Sequence, length error");this.list=e}listKeywords(){const e=[];for(const t of this.list)e.push(...t.listKeywords());return e}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}run(e){let t=[];for(const n of e){let e=[n],s=!0;for(const t of this.list)if(e=t.run(e),0===e.length){s=!1;break}!0===s&&(e.length>1e3?t=t.concat(e):t.push(...e))}return t}railroad(){return"Railroad.Sequence("+this.list.map((e=>e.railroad())).join()+")"}toStr(){let e="";for(const t of this.list)e=e+t.toStr()+",";return"seq("+e+")"}first(){return this.list[0].first()}}class S{constructor(e){this.words=[],this.stri=e;const t=this.stri.replace(/-/g," - ").split(" ");for(const e of t)this.words.push(new c(e));this.seq=new y(this.words)}listKeywords(){return[this.stri.toString()]}getUsing(){return[]}run(e){return this.seq.run(e)}railroad(){return"Railroad.Terminal('\""+this.stri+"\"')"}toStr(){return"str("+this.stri+")"}first(){return this.words[0].first()}}t.Expression=class{constructor(){this.runnable=void 0}run(e){const t=[];void 0===this.runnable&&(this.runnable=this.getRunnable());for(const n of e){const e=this.runnable.run([n]);for(const s of e){let e=n.remainingLength()-s.remainingLength();if(e>0){const t=s.getNodes().length,n=[];for(;e>0;){const t=s.popNode();t&&(n.push(t),e-=t.countTokens())}const i=new o.ExpressionNode(this);i.setChildren(n.reverse());const r=s.getNodes().slice(0,t-e);r.push(i),s.setNodes(r)}t.push(s)}}return t}listKeywords(){return[]}getUsing(){return["expression/"+this.getName()]}getName(){return this.constructor.name}railroad(){return"Railroad.NonTerminal('"+this.getName()+"', {href: '#/expression/"+this.getName()+"'})"}toStr(){return"expression("+this.getName()+")"}first(){return this.getRunnable().first()}};class v{constructor(e){if(e.length<2)throw new Error("Permutation, length error, got "+e.length);this.list=e}listKeywords(){const e=[];for(const t of this.list)e.push(...t.listKeywords());return e}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}run(e){const t=[],n=this.list.slice();for(let s=0;s<this.list.length;s++){const o=this.list[s].run(e);if(0!==o.length){t.push(...o);const e=n;e.splice(s,1),1===e.length?t.push(...e[0].run(o)):t.push(...new v(e).run(o))}}return t}railroad(){return"Railroad.MultipleChoice(0, 'any',"+this.list.map((e=>e.railroad())).join()+")"}toStr(){return"per("+this.list.map((e=>e.toStr())).join()+")"}first(){return[""]}}class E extends Error{}class C extends Error{}class b{listKeywords(){return[]}getUsing(){return[]}run(e){throw new E}railroad(){return"Railroad.Terminal('!FailCombinator')"}toStr(){return"fail()"}first(){return[]}}class I{listKeywords(){return[]}getUsing(){return[]}run(e){throw new C}railroad(){return"Railroad.Terminal('!FailStar')"}toStr(){return"fail()"}first(){return[]}}class D{constructor(e){if(e.length<2)throw new Error("Alternative, length error");this.list=e}listKeywords(){const e=[];for(const t of this.list)e.push(...t.listKeywords());return e}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}run(e){const t=[];for(const n of this.list){const s=n.run(e);t.push(...s)}return t}railroad(){return"Railroad.Choice(0, "+this.list.map((e=>e.railroad())).join()+")"}toStr(){let e="";for(const t of this.list)e=e+t.toStr()+",";return"alt("+e+")"}first(){if(2!==this.list.length)return[""];const e=this.list[0].first(),t=this.list[1].first();return 1===e.length&&""===e[0]?e:1===t.length&&""===t[0]?t:(1===e.length&&1===t.length&&e[0]===t[0]||e.push(...t),e)}}class x{constructor(e){if(e.length<2)throw new Error("Alternative, length error");this.list=e}listKeywords(){const e=[];for(const t of this.list)e.push(...t.listKeywords());return e}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}run(e){const t=[];for(const n of this.list){const s=n.run(e);if(s.length>0){t.push(...s);break}}return t}railroad(){return"Railroad.Choice(0, "+this.list.map((e=>e.railroad())).join()+")"}toStr(){let e="";for(const t of this.list)e=e+t.toStr()+",";return"alt("+e+")"}first(){if(2!==this.list.length)return[""];const e=this.list[0].first(),t=this.list[1].first();return 1===e.length&&""===e[0]?e:1===t.length&&""===t[0]?t:(1===e.length&&1===t.length&&e[0]===t[0]||e.push(...t),e)}}class P{static railroad(e,t=!1){let n="Railroad.Diagram(";return!0===t&&(n="Railroad.ComplexDiagram("),"Railroad.Diagram.INTERNAL_ALIGNMENT = 'left';\n"+n+e.railroad()+").toString();"}static listKeywords(e){let t=e.listKeywords();return t=t.filter(((e,t,n)=>n.indexOf(e)===t)),t}static run(e,t,n){this.ver=n;const s=new r.Result(t,0);try{const t=e.run([s]);for(const e of t)if(0===e.remainingLength())return e.getNodes()}catch(e){if(e instanceof E)return;throw e}}static getVersion(){return this.ver}}function A(e){return e.indexOf(" ")>0||e.indexOf("-")>0?new S(e):new c(e)}t.Combi=P;const N={},O={};function R(e){const t=typeof e;if("string"===t)return void 0===O[e]&&(O[e]=A(e)),O[e];if("function"===t){const t=e.name;return void 0===N[t]&&(N[t]=new e),N[t]}return e}},3133(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OmitParameterName=t.OmitParameterNameConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(82245),a=n(12620),c=n(52424),l=n(36453),d=n(52806),u=n(71249),p=n(56727);class f extends o.BasicRuleConfig{}t.OmitParameterNameConf=f,t.OmitParameterName=class{constructor(){this.conf=new f}getMetadata(){return{key:"omit_parameter_name",title:"Omit parameter name",shortDescription:"Omit the parameter name in single parameter calls",extendedInformation:"\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#omit-the-parameter-name-in-single-parameter-calls\n\nEXPORTING must already be omitted for this rule to take effect, https://rules.abaplint.org/exporting/",tags:[i.RuleTag.Styleguide,i.RuleTag.Quickfix],badExample:"method( param = 2 ).",goodExample:"method( 2 )."}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){var t,n;const o=[];if(!(e instanceof a.ABAPObject)||"INTF"===e.getType())return[];const i=new c.SyntaxLogic(this.reg,e).run().spaghetti;for(const a of e.getABAPFiles()){const e=a.getStructure();if(void 0!==e)for(const c of e.findAllExpressions(r.MethodCall)){if(c.findFirstExpression(r.MethodParameters))continue;const e=c.findAllExpressions(r.ParameterS);if(e.length>1||0===e.length)continue;const l=c.findDirectExpression(r.MethodName);if(void 0===l)continue;if(void 0===c.findDirectExpression(r.MethodCallParam))continue;const d=this.findMethodReference(l.getFirstToken(),i,a.getFilename());if(void 0===d)continue;const p=d.getDefaultImporting();if(void 0===p)continue;const f=null===(t=e[0].findDirectExpression(r.ParameterName))||void 0===t?void 0:t.getFirstToken();if((null==f?void 0:f.getStr().toUpperCase())===p.toUpperCase()){const t='Omit default parameter name "'+p+'"',i=null===(n=e[0].findDirectExpression(r.Source))||void 0===n?void 0:n.getFirstToken().getStart();if(i){const e=u.EditHelper.deleteRange(a,f.getStart(),i);o.push(s.Issue.atRange(a,f.getStart(),i,t,this.getMetadata().key,this.getConfig().severity,e))}else o.push(s.Issue.atToken(a,l.getFirstToken(),t,this.getMetadata().key,this.getConfig().severity))}}}return o}findMethodReference(e,t,n){const s=t.lookupPosition(e.getStart(),n);if(void 0!==s)for(const t of s.getData().references)if((t.referenceType===l.ReferenceType.MethodReference||t.referenceType===l.ReferenceType.BuiltinMethodReference)&&t.position.getStart().equals(e.getStart())){if(t.resolved instanceof p.BuiltInMethod)return t.resolved;if(t.resolved instanceof d.MethodDefinition)return t.resolved.getParameters()}}}},3151(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ObsoleteStatement=t.ObsoleteStatementConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(86789),l=n(86696),d=n(49028),u=n(71249),p=n(75457),f=n(82245);class g extends a.BasicRuleConfig{constructor(){super(...arguments),this.refresh=!0,this.compute=!0,this.add=!0,this.subtract=!0,this.multiply=!0,this.divide=!0,this.move=!0,this.requested=!0,this.occurs=!0,this.setExtended=!0,this.withHeaderLine=!0,this.fieldSymbolStructure=!0,this.typePools=!0,this.load=!0,this.parameter=!0,this.ranges=!0,this.communication=!0,this.pack=!0,this.selectWithoutInto=!0,this.freeMemory=!0,this.exitFromSQL=!0,this.sortByFS=!0,this.callTransformation=!0,this.regex=!0,this.occurences=!0,this.clientSpecified=!0,this.formDefinition=!0,this.formImplementation=!0,this.commonPart=!0,this.fieldGroups=!0,this.replaceInto=!0,this.loopExtract=!0,this.sortExtract=!0}}t.ObsoleteStatementConf=g;class h extends r.ABAPRule{constructor(){super(...arguments),this.conf=new g}getMetadata(){return{key:"obsolete_statement",title:"Obsolete statements",shortDescription:"Checks for usages of certain obsolete statements",tags:[l.RuleTag.SingleFile,l.RuleTag.Styleguide,l.RuleTag.Quickfix],extendedInformation:"\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-functional-to-procedural-language-constructs\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-obsolete-language-elements\n\nSET EXTENDED CHECK: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapset_extended_check.htm\n\nIS REQUESTED: https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abenlogexp_requested.htm\n\nWITH HEADER LINE: https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abapdata_header_line.htm\n\nFIELD-SYMBOLS STRUCTURE: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapfield-symbols_obsolete_typing.htm\n\nTYPE-POOLS: from 702, https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abennews-71-program_load.htm\n\nLOAD addition: from 702, https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abennews-71-program_load.htm\n\nCOMMUICATION: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapcommunication.htm\n\nOCCURS: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapdata_occurs.htm\n\nPARAMETER: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapparameter.htm\n\nRANGES: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abapranges.htm\n\nPACK: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abappack.htm\n\nMOVE: https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapmove_obs.htm\n\nSELECT without INTO: https://help.sap.com/doc/abapdocu_731_index_htm/7.31/en-US/abapselect_obsolete.htm\nSELECT COUNT(*) is considered okay\n\nFREE MEMORY: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-us/abapfree_mem_id_obsolete.htm\n\nSORT BY FS: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abapsort_itab_obsolete.htm\n\nCALL TRANSFORMATION OBJECTS: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abapcall_transformation_objects.htm\n\nPOSIX REGEX: https://help.sap.com/doc/abapdocu_755_index_htm/7.55/en-US/index.htm\n\nOCCURENCES: check for OCCURENCES vs OCCURRENCES\n\nCLIENT SPECIFIED, from 754: https://help.sap.com/doc/abapdocu_latest_index_htm/latest/en-US/index.htm?file=abapselect_client_obsolete.htm",badExample:"REFRESH itab.\n\nCOMPUTE foo = 2 + 2.\n\nMULTIPLY lv_foo BY 2.\n\nINTERFACE intf LOAD.\n\nIF foo IS SUPPLIED.\nENDIF."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n,r;const a=[],c=e.getStatements();let l;const g=this.reg.getConfig().getVersion();for(const h of c){const c=h.get();if(c instanceof s.Refresh&&this.conf.refresh||c instanceof s.Compute&&this.conf.compute||c instanceof s.Add&&this.conf.add||c instanceof s.Subtract&&this.conf.subtract||c instanceof s.ClassDefinitionLoad&&this.conf.load&&g>=d.Version.v702||c instanceof s.InterfaceLoad&&this.conf.load&&g>=d.Version.v702||c instanceof s.Multiply&&this.conf.multiply||c instanceof s.Divide&&this.conf.divide||c instanceof s.Move&&this.conf.move&&"MOVE"===h.getTokens()[0].getStr().toUpperCase()&&"-"!==h.getTokens()[1].getStr()&&"EXACT"!==h.getTokens()[1].getStr().toUpperCase()){if(void 0===l||h.getStart().getCol()!==l.getCol()||h.getStart().getRow()!==l.getRow()){const t='Statement "'+h.getFirstToken().getStr()+'" is obsolete',n=this.getFix(e,c,h),s=i.Issue.atStatement(e,h,t,this.getMetadata().key,this.conf.severity,n);a.push(s)}l=h.getStart()}if(this.conf.setExtended&&c instanceof s.SetExtendedCheck){const t=i.Issue.atStatement(e,h,"SET EXTENDED CHECK is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.communication&&c instanceof s.Communication){const t=i.Issue.atStatement(e,h,"COMMUNICATION is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.commonPart&&c instanceof s.DataBegin&&h.findDirectTokenByText("COMMON")){const t=i.Issue.atStatement(e,h,"COMMON PART is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.replaceInto&&c instanceof s.Replace&&h.findDirectTokenByText("INTO")){const t=i.Issue.atStatement(e,h,"REPLACE INTO is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.pack&&c instanceof s.Pack){const t=i.Issue.atStatement(e,h,"PACK is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.fieldGroups&&c instanceof s.FieldGroup){const t=i.Issue.atStatement(e,h,"FIELD-GROUPS is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.parameter&&c instanceof s.Parameter){const t=h.getFirstToken();if("PARAMETER"===t.getStr().toUpperCase()){const n=u.EditHelper.replaceToken(e,t,"PARAMETERS"),s=i.Issue.atStatement(e,h,"Use PARAMETERS instead of PARAMETER",this.getMetadata().key,this.conf.severity,n);a.push(s)}}if(this.conf.ranges&&c instanceof s.Ranges){const t=h.getChildren();let n;if(5===t.length){const s="TYPES "+t[1].concatTokens()+" LIKE RANGE OF "+t[3].concatTokens()+".";n=u.EditHelper.replaceRange(e,h.getStart(),h.getEnd(),s)}const s=i.Issue.atStatement(e,h,"Use LIKE RANGE OF instead of RANGES",this.getMetadata().key,this.conf.severity,n);a.push(s)}if(this.conf.selectWithoutInto&&(c instanceof s.Select||c instanceof s.SelectLoop)&&void 0===h.findFirstExpression(o.SQLIntoStructure)&&void 0===h.findFirstExpression(o.SQLIntoList)&&void 0===h.findFirstExpression(o.SQLIntoTable)){const n=null===(t=h.findFirstExpression(o.SQLFieldList))||void 0===t?void 0:t.concatTokens().toUpperCase();if("COUNT(*)"!==n&&"COUNT( * )"!==n){const t=i.Issue.atStatement(e,h,"SELECT without INTO",this.getMetadata().key,this.conf.severity);a.push(t)}}if(this.conf.requested&&c instanceof s.If)for(const t of h.findAllExpressions(o.Compare)){const n=t.findDirectTokenByText("REQUESTED");if(n){const t=u.EditHelper.replaceToken(e,n,"SUPPLIED"),s=i.Issue.atToken(e,n,"IS REQUESTED is obsolete",this.getMetadata().key,this.conf.severity,t);a.push(s)}}if(this.conf.occurs){if(c instanceof s.Describe||c instanceof s.Ranges||c instanceof s.DataBegin||c instanceof s.TypeBegin){const t=h.findDirectTokenByText("OCCURS");if(t){const n=i.Issue.atToken(e,t,"OCCURS is obsolete",this.getMetadata().key,this.conf.severity);a.push(n)}}for(const t of h.findAllExpressions(o.DataDefinition)){const s=null===(n=t.findDirectExpression(o.TypeTable))||void 0===n?void 0:n.findDirectTokenByText("OCCURS");if(s){const t=i.Issue.atToken(e,s,"OCCURS is obsolete",this.getMetadata().key,this.conf.severity);a.push(t)}}}if(!0===this.conf.withHeaderLine&&c instanceof s.Data&&h.concatTokens().toUpperCase().includes("WITH HEADER LINE")){const t=h.getTokens().find((e=>"WITH"===e.getStr().toUpperCase()));if(t){const n=i.Issue.atToken(e,t,"WITH HEADER LINE is obsolete",this.getMetadata().key,this.conf.severity);a.push(n)}}if(this.conf.fieldSymbolStructure&&c instanceof s.FieldSymbol){const t=h.findDirectTokenByText("STRUCTURE");if(t){const n=i.Issue.atToken(e,t,"FIELD-SYMBOLS ... STRUCTURE is obsolete",this.getMetadata().key,this.conf.severity);a.push(n)}}if(this.conf.typePools&&c instanceof s.TypePools&&g>=d.Version.v702){const t=u.EditHelper.deleteStatement(e,h),n=i.Issue.atStatement(e,h,'Statement "TYPE-POOLS" is obsolete',this.getMetadata().key,this.conf.severity,t);a.push(n)}if(this.conf.freeMemory&&c instanceof s.FreeMemory&&"FREE MEMORY."===h.concatTokens().toUpperCase()){const t=i.Issue.atStatement(e,h,'Statement "FREE MEMORY" without ID is obsolete',this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.exitFromSQL&&c instanceof s.Exit&&"EXIT FROM SQL."===h.concatTokens().toUpperCase()){const t=i.Issue.atStatement(e,h,'Statement "EXIT FROM SQL" is obsolete',this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.sortByFS&&c instanceof s.Sort){const t=h.findExpressionAfterToken("BY");if(t instanceof p.ExpressionNode&&t.get()instanceof f.SourceFieldSymbol){const t=i.Issue.atStatement(e,h,'Statement "SORT itab BY <fs>" is obsolete',this.getMetadata().key,this.conf.severity);a.push(t)}}if(this.conf.callTransformation&&c instanceof s.CallTransformation&&h.findExpressionAfterToken("OBJECTS")){const t=i.Issue.atStatement(e,h,"Use PARAMETERS instead of OBJECTS",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.occurences&&c instanceof s.Replace&&h.concatTokens().toUpperCase().includes(" OCCURENCES ")){const t=i.Issue.atStatement(e,h,'Use "OCCURRENCES"',this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.formDefinition&&c instanceof s.FormDefinition){const t=i.Issue.atStatement(e,h,"FORM DEFINITION",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.formImplementation&&c instanceof s.Form&&h.findDirectTokenByText("IMPLEMENTATION")){const t=i.Issue.atStatement(e,h,"FORM IMPLEMENTATION",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.loopExtract&&c instanceof s.LoopExtract){const t=i.Issue.atStatement(e,h,"LOOP extract",this.getMetadata().key,this.conf.severity);a.push(t)}if(this.conf.sortExtract&&c instanceof s.SortDataset&&2===h.getChildren().length){const t=i.Issue.atStatement(e,h,"SORT extract",this.getMetadata().key,this.conf.severity);a.push(t)}if(g>=d.Version.v754&&this.conf.clientSpecified&&(c instanceof s.Select||c instanceof s.SelectLoop||c instanceof s.DeleteDatabase||c instanceof s.InsertDatabase||c instanceof s.ModifyDatabase||c instanceof s.UpdateDatabase)&&h.concatTokens().toUpperCase().includes(" CLIENT SPECIFIED")){const t=i.Issue.atStatement(e,h,"Use USING CLIENT",this.getMetadata().key,this.conf.severity);a.push(t)}if(g>=d.Version.v756&&this.conf.regex)if(c instanceof s.Find||c instanceof s.Replace){if(null===(r=h.findFirstExpression(o.FindType))||void 0===r?void 0:r.concatTokens().includes("REGEX")){const t=i.Issue.atStatement(e,h,"REGEX obsolete, use PCRE",this.getMetadata().key,this.conf.severity);a.push(t)}}else{const t=h.findAllExpressions(o.ClassName),n=h.findAllExpressions(o.MethodName);if(0!==t.length&&0!==n.length){const s=t[0].concatTokens(),o=n[0].concatTokens();if("cl_abap_regex"===s){if("create_posix"===o){const t=i.Issue.atStatement(e,h,"create_posix obsolete, use create_pcre",this.getMetadata().key,this.conf.severity);a.push(t)}}else if("cl_abap_matcher"===s&&o.includes("posix")){const t=i.Issue.atStatement(e,h,"posix methods obsolete, use pcre methods",this.getMetadata().key,this.conf.severity);a.push(t)}}}}return a}getFix(e,t,n){if(t instanceof s.Refresh){if(6===n.getChildren().length)return;return u.EditHelper.replaceToken(e,n.getFirstToken(),"CLEAR")}if(t instanceof s.Compute){const t=n.getChildren();if(5===t.length){const t=n.getFirstToken();let s=t.getEnd();return s=new c.Position(s.getRow(),s.getCol()+1),u.EditHelper.deleteRange(e,t.getStart(),s)}{const s=t[2].concatTokens()+" = EXACT #( "+t[4].concatTokens()+" ).";return u.EditHelper.replaceRange(e,n.getStart(),n.getEnd(),s)}}if(t instanceof s.Add||t instanceof s.Subtract){const o=n.getChildren(),i=o[1].concatTokens(),r=o[3].concatTokens();let a="";return t instanceof s.Add?a=r+" = "+r+" + "+i+".":t instanceof s.Subtract&&(a=r+" = "+r+" - "+i+"."),u.EditHelper.replaceRange(e,n.getStart(),n.getEnd(),a)}if(t instanceof s.Multiply||t instanceof s.Divide){const o=n.getChildren(),i=o[1].concatTokens(),r=o[3].concatTokens();let a="";return t instanceof s.Multiply?a=i+" = "+i+" * "+r+".":t instanceof s.Divide&&(a=i+" = "+i+" / "+r+"."),u.EditHelper.replaceRange(e,n.getStart(),n.getEnd(),a)}if(t instanceof s.Move){if(void 0!==n.getColon())return;const t=n.getChildren(),s=t[1].concatTokens(),o=t[3].concatTokens();let i=t[2].concatTokens().toUpperCase();i="TO"===i?" = ":" ?= ";const r=o+i+s+".";return u.EditHelper.replaceRange(e,n.getStart(),n.getEnd(),r)}if(t instanceof s.ClassDefinitionLoad||t instanceof s.InterfaceLoad){let o;o=t instanceof s.ClassDefinitionLoad?n.getChildren()[3].getFirstToken():n.getChildren()[2].getFirstToken();let i=o.getStart();return i=new c.Position(i.getRow(),i.getCol()-1),u.EditHelper.deleteRange(e,i,o.getEnd())}}}t.ObsoleteStatement=h},3201(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(46743),a=n(82054),c=n(89301);t.Parameter=class{runSyntax(e,t){var n;const l=null===(n=e.findFirstExpression(s.FieldSub))||void 0===n?void 0:n.getFirstToken();if(l&&l.getStr().length>8){const n="Parameter name too long, "+l.getStr();return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}if(void 0===l)return;if(e.findDirectTokenByText("RADIOBUTTON")&&e.findDirectTokenByText("LENGTH")){const n="RADIOBUTTON and LENGTH not possible together";return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}const d=new r.BasicTypes(t).parseType(e);d?t.scope.addIdentifier(new o.TypedIdentifier(l,t.filename,d)):t.scope.addIdentifier(new o.TypedIdentifier(l,t.filename,new i.UnknownType("Parameter, fallback")));const u="%_"+l.getStr()+"_%_app_%",p=new c.Identifier(l.getStart(),u);t.scope.addIdentifier(new o.TypedIdentifier(p,t.filename,i.VoidType.get("PARAMETER-MAGIC")))}}},3240(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeUtils=void 0;const s=n(20941),o=n(20572),i=n(42647),r=n(82245);t.TypeUtils=class{constructor(e){this.scope=e}isCharLikeStrict(e){if(void 0===e)return!1;if(e instanceof o.StructureType){for(const t of e.getComponents())if(!1===this.isCharLikeStrict(t.type))return!1;return!0}return e instanceof o.TableType&&e.isWithHeader()?this.isCharLikeStrict(e.getRowType()):e instanceof o.StringType||e instanceof o.AnyType||e instanceof o.DataType||e instanceof o.CharacterType||e instanceof o.SimpleType||e instanceof i.CGenericType||e instanceof o.CLikeType||e instanceof o.DateType||e instanceof o.CSequenceType||e instanceof o.NumericGenericType||e instanceof o.NumericType||e instanceof o.TimeType||e instanceof o.UnknownType||e instanceof o.VoidType}isCharLike(e){if(void 0===e)return!1;if(e instanceof o.TableType&&e.isWithHeader())return this.isCharLike(e.getRowType());if(e instanceof o.StructureType){for(const t of e.getComponents())if(!1===this.isCharLike(t.type))return!1;return!0}return e instanceof o.StringType||e instanceof o.CharacterType||e instanceof o.VoidType||e instanceof o.AnyType||e instanceof o.UnknownType||e instanceof o.NumericType||e instanceof o.IntegerType||e instanceof o.Integer8Type||e instanceof o.SimpleType||e instanceof o.FloatType||e instanceof o.FloatingPointType||e instanceof o.DecFloatType||e instanceof o.DecFloat16Type||e instanceof o.DecFloat34Type||e instanceof o.NumericGenericType||e instanceof o.CSequenceType||e instanceof i.CGenericType||e instanceof o.DateType||e instanceof o.DataType||e instanceof o.CLikeType||e instanceof o.PackedType||e instanceof o.TimeType}isHexLike(e){if(void 0===e)return!1;if(e instanceof o.StructureType){for(const t of e.getComponents())if(!1===this.isHexLike(t.type))return!1;return!0}return e instanceof o.TableType&&e.isWithHeader()?this.isHexLike(e.getRowType()):e instanceof o.XStringType||e instanceof o.HexType||e instanceof o.VoidType||e instanceof o.XGenericType||e instanceof o.XSequenceType||e instanceof o.AnyType||e instanceof o.UnknownType}isOOAssignable(e,t){let n=e.getIdentifier(),o=t.getIdentifier();const i=o.getName().toUpperCase(),r=n.getName().toUpperCase();if(i===r)return!0;if(!(n instanceof s.ClassDefinition||n instanceof s.InterfaceDefinition)){const e=this.scope.findObjectDefinition(n.getName());if(!e)return!1;n=e}if(!(o instanceof s.ClassDefinition||o instanceof s.InterfaceDefinition)){const e=this.scope.findObjectDefinition(o.getName());if(!e)return!1;o=e}if(n instanceof s.ClassDefinition&&o instanceof s.ClassDefinition){if(r===i)return!0;if(this.listAllSupers(n).indexOf(i)>=0)return!0}else if(n instanceof s.ClassDefinition&&o instanceof s.InterfaceDefinition){if(n.getImplementing().some((e=>e.name===i)))return!0;if(this.listAllInterfaces(n).indexOf(i)>=0)return!0}else if(n instanceof s.InterfaceDefinition&&o instanceof s.InterfaceDefinition){if(r===i)return!0;if(n.getImplementing().some((e=>e.name===i)))return!0;if(this.listAllInterfaces(n).indexOf(i)>=0)return!0}return!1}listAllInterfaces(e){var t;const n=new Set,o=[];if(e.getImplementing().forEach((e=>o.push(e.name))),e instanceof s.ClassDefinition){const n=this.listAllSupers(e);for(const e of n)null===(t=this.scope.findClassDefinition(e))||void 0===t||t.getImplementing().forEach((e=>o.push(e.name)))}for(;o.length>0;){const e=o.pop().toUpperCase();n.add(e);const t=this.scope.findInterfaceDefinition(e);null==t||t.getImplementing().forEach((e=>o.push(e.name)))}return Array.from(n.values())}listAllSupers(e){var t,n;const s=[];let o=e.getSuperClass();for(;void 0!==o;)s.push(null==o?void 0:o.toUpperCase()),o=null===(n=null===(t=this.scope.findClassDefinition(o))||void 0===t?void 0:t.getSuperClass())||void 0===n?void 0:n.toUpperCase();return s}isConvable(e,t){return e instanceof o.TableType&&t instanceof o.TableType?this.isAssignable(e.getRowType(),t.getRowType()):this.isAssignable(e,t)}isCastable(e,t){return!0}isCompareable(e,t,n,s){return!(void 0!==e&&void 0!==t&&(e instanceof o.HexType&&this.isCalculated(n)&&t instanceof o.IntegerType||t instanceof o.HexType&&this.isCalculated(s)&&e instanceof o.IntegerType))}structureContainsString(e){for(const t of e.getComponents())if(t.type instanceof o.StringType)return!0;return!1}structureContainsVoid(e){for(const t of e.getComponents())if(t.type instanceof o.VoidType)return!0;return!1}isCalculated(e){return void 0!==e.findFirstExpression(r.MethodCallChain)||void 0!==e.findFirstExpression(r.StringTemplate)||void 0!==e.findFirstExpression(r.ArithOperator)}isAssignableNew(e,t,n){return!(void 0!==(null==n?void 0:n.findFirstExpression(r.ArithOperator))&&e instanceof o.HexType&&t instanceof o.IntegerType)&&this.isAssignable(e,t)}isAssignableStrict(e,t,n){var s,r,a,c,l,d,u,p,f;const g=!!n&&this.isCalculated(n);if(g&&e instanceof o.StringType&&t instanceof o.XStringType)return!1;if(g)return this.isAssignable(e,t);if(e instanceof o.CharacterType){if(t instanceof o.CharacterType)return!0===(null===(s=e.getAbstractTypeData())||void 0===s?void 0:s.derivedFromConstant)?e.getLength()<=t.getLength():e.getLength()===t.getLength();if(t instanceof o.IntegerType)return!0===(null===(r=e.getAbstractTypeData())||void 0===r?void 0:r.derivedFromConstant);if(t instanceof o.XStringType)return!0===(null===(a=e.getAbstractTypeData())||void 0===a?void 0:a.derivedFromConstant);if(t instanceof o.StringType)return!0===(null===(c=e.getAbstractTypeData())||void 0===c?void 0:c.derivedFromConstant)}else if(e instanceof o.HexType){if(t instanceof o.HexType)return!0===(null===(l=e.getAbstractTypeData())||void 0===l?void 0:l.derivedFromConstant)?e.getLength()<=t.getLength():e.getLength()===t.getLength();if(t instanceof o.XStringType)return!1;if(t instanceof o.IntegerType||t instanceof o.Integer8Type)return!0===(null===(d=e.getAbstractTypeData())||void 0===d?void 0:d.derivedFromConstant)}else{if(e instanceof o.StringType)return!(t instanceof o.StructureType&&this.structureContainsString(t)||(t instanceof o.IntegerType?!0!==(null===(u=e.getAbstractTypeData())||void 0===u?void 0:u.derivedFromConstant):t instanceof i.CGenericType||t instanceof o.GenericObjectReferenceType||(t instanceof o.XSequenceType||t instanceof o.XStringType)&&!0!==(null===(p=e.getAbstractTypeData())||void 0===p?void 0:p.derivedFromConstant)));if(e instanceof o.StructureType){if(t instanceof o.StructureType){const n=e.getComponents(),s=t.getComponents();if(n.length!==s.length)return!1;for(let e=0;e<n.length;e++)if(!1===this.isAssignableStrict(n[e].type,s[e].type))return!1;return!0}return t instanceof o.SimpleType||t instanceof o.CLikeType?this.isCharLikeStrict(e):t instanceof o.VoidType||t instanceof o.AnyType||t instanceof o.DataType}if(e instanceof o.Integer8Type){if(t instanceof o.IntegerType||t instanceof o.StringType)return!1}else if(e instanceof o.IntegerType){if(t instanceof o.StringType)return!1;if(t instanceof o.Integer8Type||t instanceof o.PackedType)return!0===(null===(f=e.getAbstractTypeData())||void 0===f?void 0:f.derivedFromConstant)}else if(e instanceof o.FloatType){if(t instanceof o.IntegerType)return!1}else if(e instanceof o.GenericObjectReferenceType){if(t instanceof o.ObjectReferenceType||t instanceof o.StringType||t instanceof o.CharacterType||t instanceof o.TableType||t instanceof o.CLikeType)return!1}else if(e instanceof o.ObjectReferenceType){if(t instanceof o.XSequenceType||t instanceof o.IntegerType||t instanceof o.StructureType||t instanceof o.TableType||t instanceof o.XStringType)return!1}else if(e instanceof o.XStringType){if(t instanceof o.CLikeType||t instanceof o.IntegerType||t instanceof o.StringType||t instanceof o.ObjectReferenceType||t instanceof o.HexType)return!1}else if(e instanceof o.TableType){if(t instanceof o.TableType)return this.isAssignableStrict(e.getRowType(),t.getRowType());if(t instanceof o.UnknownType||t instanceof o.AnyType||t instanceof o.VoidType)return!0}}return this.isAssignable(e,t)}isAssignable(e,t){if(void 0===e||void 0===t)return!0;if(t instanceof o.TableType){if(t.isWithHeader())return this.isAssignable(e,t.getRowType());if(e instanceof o.VoidType||e instanceof o.AnyType||e instanceof o.DataType||e instanceof o.UnknownType)return!0;if(e instanceof o.TableType){const n=t.getRowType(),s=e.getRowType();if(n instanceof o.VoidType||n instanceof o.AnyType||n instanceof o.UnknownType)return!0;if(s instanceof o.VoidType||s instanceof o.AnyType||s instanceof o.UnknownType)return!0;if(n instanceof o.StructureType&&this.structureContainsString(n)){if(!(s instanceof o.StructureType))return!1;if(!this.structureContainsString(s)&&!1===this.structureContainsVoid(s))return!1}else if(s instanceof o.StructureType&&this.structureContainsString(s)){if(!(n instanceof o.StructureType))return!1;if(!this.structureContainsString(n)&&!1===this.structureContainsVoid(n))return!1}return!0}return!1}if(t instanceof o.ObjectReferenceType&&e instanceof o.ObjectReferenceType)return this.isOOAssignable(e,t);if(t instanceof o.ObjectReferenceType||t instanceof o.GenericObjectReferenceType)return e instanceof o.ObjectReferenceType||e instanceof o.GenericObjectReferenceType||e instanceof o.VoidType||e instanceof o.DataType||e instanceof o.AnyType||e instanceof o.UnknownType;if(t instanceof o.DataReference)return e instanceof o.DataReference||e instanceof o.VoidType||e instanceof o.DataType||e instanceof o.AnyType||e instanceof o.UnknownType;if(t instanceof o.StructureType){if(e instanceof o.TableType&&e.isWithHeader())return this.isAssignable(e.getRowType(),t);if(e instanceof o.VoidType||e instanceof o.AnyType||e instanceof o.DataType||e instanceof o.UnknownType)return!0;if(e instanceof o.StructureType){const n=this.structureContainsString(t),s=this.structureContainsString(e);if(n&&!s)return!1;const i=t.getComponents(),r=e.getComponents();if(i.length!==r.length&&(!0===n||!0===s))return!1;for(let e=0;e<i.length;e++)if(void 0!==r[e]){if(r[e].type instanceof o.StringType&&!(i[e].type instanceof o.StringType))return!1;if(!(r[e].type instanceof o.StringType)&&i[e].type instanceof o.StringType)return!1}return!0}return!(!0!==t.containsVoid()&&(e instanceof o.StringType&&this.structureContainsString(t)||e instanceof o.IntegerType||!this.isCharLike(t)||!this.isCharLike(e)))}return t instanceof o.IntegerType||t instanceof o.CharacterType||t instanceof o.StringType?!(e instanceof o.TableType&&!1===e.isWithHeader())&&((t instanceof o.StringType||t instanceof o.CharacterType)&&e instanceof o.StructureType&&this.isCharLike(e)?!0!==this.structureContainsString(e):e instanceof o.StructureType?this.isCharLikeStrict(e):!(e instanceof o.DataReference||e instanceof o.ObjectReferenceType||e instanceof o.GenericObjectReferenceType)):!(t instanceof o.SimpleType&&(e instanceof o.ObjectReferenceType||e instanceof o.TableType))}}},3242(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Unassign=void 0;const s=n(82245),o=n(36453),i=n(82054);t.Unassign=class{runSyntax(e,t){const n=null==e?void 0:e.findDirectExpression(s.TargetFieldSymbol);if(n){const s=n.getFirstToken(),r=t.scope.findVariable(s.getStr());if(void 0===r){const n=`"${s.getStr()}" not found, Unassign`;return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}t.scope.addReference(s,r,o.ReferenceType.DataWriteReference,t.filename)}}}},3356(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndOfSelection=void 0;const s=n(3125),o=n(49028);t.EndOfSelection=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"END-OF-SELECTION")}}},3611(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Describe=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Describe=class{getMatcher(){const e=(0,s.seq)("LINES",o.Target),t=(0,s.seq)("KIND",o.Target),n=(0,s.seq)("OCCURS",o.Target),r=(0,s.seq)("TABLE",o.FieldChain,(0,s.opt)((0,s.per)(e,t,n))),a=(0,s.seq)("IN",(0,s.alt)("BYTE","CHARACTER"),"MODE"),c=(0,s.seq)("FIELD",o.Source,(0,s.per)((0,s.seq)("TYPE",o.Target),(0,s.seq)("COMPONENTS",o.Target),(0,s.seq)("LENGTH",o.Target,(0,s.opt)(a)),(0,s.seq)("DECIMALS",o.Target),(0,s.seq)("HELP-ID",o.Target),(0,s.seq)("OUTPUT-LENGTH",o.Target),(0,s.seq)("EDIT MASK",o.Target),(0,s.seq)("INTO",o.Target))),l=(0,s.seq)("DISTANCE BETWEEN",o.Source,"AND",o.Source,"INTO",o.Target,(0,s.opt)(a)),d=(0,s.seq)("NUMBER OF LINES",o.Target),u=(0,s.seq)("NUMBER OF PAGES",o.Target),p=(0,s.seq)("LINE",o.Source),f=(0,s.seq)("PAGE",o.Source),g=(0,s.seq)("INDEX",o.Source),h=(0,s.seq)("TOP-LINES",o.Target),T=(0,s.seq)("LINE-SIZE",o.Target),m=(0,s.seq)("LINE-COUNT",o.Target),y=(0,s.seq)("FIRST-LINE",o.Target),S=(0,s.seq)("LIST",(0,s.per)(d,u,g,p,f,h,y,e,T,m)),v=(0,s.seq)("DESCRIBE",(0,s.altPrio)(r,c,l,S));return(0,s.verNot)(i.Version.Cloud,v)}}},3646(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentScope=void 0;const s=n(56727),o=n(5518),i=n(86789),r=n(69507),a=n(2088),c=n(2403),l=n(52424);class d{static buildDefault(e,t){const n=new d(e,t);n.push(c.ScopeType.BuiltIn,c.ScopeType.BuiltIn,new i.Position(1,1),s.BuiltIn.filename),this.addBuiltIn(n,e.getConfig().getSyntaxSetttings().globalConstants);let o=c.ScopeType.Global;return t&&(o=o+"_"+t.getName()),n.push(c.ScopeType.Global,o,new i.Position(1,1),o),n}static addBuiltIn(e,t){const n=new s.BuiltIn,o=n.get(t);e.addList(o);for(const t of n.getTypes())e.addType(t)}constructor(e,t){this.current=void 0,this.parentObj=t,this.reg=e}getVersion(){return this.reg.getConfig().getVersion()}getRegistry(){return this.reg}addType(e){void 0!==e&&this.addTypeNamed(e.getName(),e)}addTypeNamed(e,t){if(void 0===t)return;if(void 0===this.current)return;const n=e.toUpperCase();if(void 0!==this.current.getData().types[n])throw new Error(`Type name "${e}" already defined`);if(this.isOO()&&void 0!==this.current.getData().vars[n])throw new Error(`"${e}" already defined`);this.current.getData().types[n]=t}addExtraLikeType(e){void 0!==e&&this.addExtraLikeTypeNamed(e.getName(),e)}addExtraLikeTypeNamed(e,t){if(void 0===t)return;if(void 0===this.current)return;const n=e.toUpperCase();if(void 0!==this.current.getData().extraLikeTypes[n])throw new Error(`Type name "${e}" already defined`);this.current.getData().extraLikeTypes[n]=t}addClassDefinition(e){if(void 0===this.current)return;const t=e.getName().toUpperCase();if(void 0!==this.current.getData().cdefs[t])throw new Error(`Class "${t}" already defined`);this.current.getData().cdefs[t]=e}addFormDefinitions(e){void 0!==this.current&&this.current.getData().forms.push(...e)}addInterfaceDefinition(e){if(void 0===this.current)return;const t=e.getName().toUpperCase();if(void 0!==this.current.getData().cdefs[t])throw new Error(`Interface "${t}" already defined`);this.current.getData().idefs[t]=e}addNamedIdentifier(e,t){if(void 0===this.current)return;const n=e.toUpperCase();if(void 0!==this.current.getData().vars[n])throw new Error(`Variable name "${e}" already defined`);if(this.isOO()&&void 0!==this.current.getData().types[n])throw new Error(`"${e}" already defined`);this.current.getData().vars[n]=t}addNamedIdentifierToParent(e,t){if(void 0===this.current)return;const n=this.current.getParent();if(void 0===n)return;const s=e.toUpperCase();if(void 0!==n.getData().vars[s])throw new Error(`Variable name "${e}" already defined`);if(this.isOO()&&void 0!==n.getData().types[s])throw new Error(`"${e}" already defined`);n.getData().vars[s]=t}addIdentifier(e){void 0!==e&&this.addNamedIdentifier(e.getName(),e)}addDeferred(e,t){void 0!==e&&(this.current.getData().deferred[e.getStr().toUpperCase()]={token:e,ooType:t})}addListPrefix(e,t){for(const n of e)this.addNamedIdentifier(t+n.getName(),n)}addList(e){for(const t of e)this.addIdentifier(t)}addReference(e,t,n,s,o){var i,r;if(void 0===e||void 0===n)return;const c=new a.Identifier(e,s);if(Array.isArray(n))for(const e of n)null===(i=this.current)||void 0===i||i.getData().references.push({position:c,resolved:t,referenceType:e,extra:o});else null===(r=this.current)||void 0===r||r.getData().references.push({position:c,resolved:t,referenceType:n,extra:o})}addSQLConversion(e,t,n){var s;null===(s=this.current)||void 0===s||s.getData().sqlConversion.push({fieldName:e,message:t,token:n})}findFunctionModule(e){if(void 0!==e)for(const t of this.reg.getObjectsByType("FUGR")){const n=t.getModule(e);if(void 0!==n)return n}}findObjectDefinition(e){if(void 0===e)return;const t=this.findClassDefinition(e);if(t)return t;return this.findInterfaceDefinition(e)||void 0}isBadiDef(e){const t=e.toUpperCase();for(const e of this.reg.getObjectsByType("ENHS"))for(const n of e.listBadiDefinitions())if(n.name.toUpperCase()===t)return!0;return!1}existsObject(e){var t,n,s;if(void 0===e)return;let o="";"PROG"===this.parentObj.getType()?o="\\PROGRAM="+this.parentObj.getName():"CLAS"===this.parentObj.getType()&&(o="\\CLASS-POOL="+this.parentObj.getName());const i=null===(t=this.current)||void 0===t?void 0:t.findClassDefinition(e);if(i)return!0===i.isGlobal()&&(o=""),{id:i,ooType:"CLAS",RTTIName:o+"\\CLASS="+i.getName()};const r=this.reg.getObject("CLAS",e);if(r)return{id:r.getIdentifier(),ooType:"CLAS",RTTIName:"\\CLASS="+r.getName()};const a=null===(n=this.current)||void 0===n?void 0:n.findInterfaceDefinition(e);if(a)return!0===a.isGlobal()&&(o=""),{id:a,ooType:"INTF",RTTIName:o+"\\INTERFACE="+a.getName()};const c=this.reg.getObject("INTF",e);if(c)return{id:c.getIdentifier(),ooType:"INTF",RTTIName:"\\INTERFACE="+c.getName()};const l=null===(s=this.current)||void 0===s?void 0:s.findDeferred(e);if(void 0!==l){let t=o;return t="INTF"===l.ooType?t+"\\INTERFACE="+e:t+"\\CLASS="+e,{id:l.id,ooType:l.ooType,RTTIName:t}}}findClassDefinition(e){var t;if(void 0===e)return;const n=null===(t=this.current)||void 0===t?void 0:t.findClassDefinition(e);if(n)return n;const s=this.reg.getObject("CLAS",e);return s?s.getDefinition():void 0}findTypePoolConstant(e){var t;if(void 0===e||void 0===e.includes("_"))return;const n=e.split("_")[0];if(n.length<=1||n.length>5)return;if("TYPE"===this.parentObj.getType()&&this.parentObj.getName().toUpperCase()===n.toUpperCase())return;const s=this.reg.getObject("TYPE",n);if(void 0===s)return;const o=null===(t=new l.SyntaxLogic(this.reg,s).run().spaghetti.getFirstChild())||void 0===t?void 0:t.getFirstChild();return null==o?void 0:o.findVariable(e)}findTypePoolType(e){var t;if(void 0===e.includes("_"))return;const n=e.split("_")[0];if(n.length<=2||n.length>5)return;if("TYPE"===this.parentObj.getType()&&this.parentObj.getName().toUpperCase()===n.toUpperCase())return;if(void 0!==new o.DDIC(this.reg).lookupNoVoid(e))return;const s=this.reg.getObject("TYPE",n);if(void 0===s)return;const i=null===(t=new l.SyntaxLogic(this.reg,s).run().spaghetti.getFirstChild())||void 0===t?void 0:t.getFirstChild();return null==i?void 0:i.findType(e)}findInterfaceDefinition(e){var t;if(void 0===e)return;const n=null===(t=this.current)||void 0===t?void 0:t.findInterfaceDefinition(e);if(n)return n;const s=this.reg.getObject("INTF",e);return s?s.getDefinition():void 0}findFormDefinition(e){var t;return null===(t=this.current)||void 0===t?void 0:t.findFormDefinition(e)}findType(e){var t;if(void 0!==e)return null===(t=this.current)||void 0===t?void 0:t.findType(e)}findExtraLikeType(e){var t;if(void 0!==e)return null===(t=this.current)||void 0===t?void 0:t.findExtraLikeType(e)}findVariable(e){var t;if(void 0===e)return;return(null===(t=this.current)||void 0===t?void 0:t.findVariable(e))||this.findTypePoolConstant(e)}findReturningParameter(){var e;for(const t in(null===(e=this.current)||void 0===e?void 0:e.getData().vars)||{}){const e=this.current.getData().vars[t];if(e.getMeta().includes("returning"))return e}}getDDIC(){return new o.DDIC(this.reg)}getDDICReferences(){return this.reg.getDDICReferences()}getMSAGReferences(){return this.reg.getMSAGReferences()}getParentObj(){return this.parentObj}getName(){if(void 0===this.current)throw new Error("error, getName");return this.current.getIdentifier().sname}getType(){if(void 0===this.current)throw new Error("error, getType");return this.current.getIdentifier().stype}push(e,t,n,s){const o={stype:e,sname:t,start:n,filename:s,end:void 0};if(void 0===this.current)this.current=new r.SpaghettiScopeNode(o,void 0);else{const e=this.current;this.current=new r.SpaghettiScopeNode(o,e),e.addChild(this.current)}}isOO(){let e=this.current;for(;void 0!==e;){const t=e.getIdentifier().stype;if(t===c.ScopeType.ClassDefinition||t===c.ScopeType.Interface)return!0;e=e.getParent()}return!1}isAnyOO(){let e=this.current;for(;void 0!==e;){const t=e.getIdentifier().stype;if(t===c.ScopeType.ClassDefinition||t===c.ScopeType.ClassImplementation||t===c.ScopeType.Interface)return!0;e=e.getParent()}return!1}isGlobalOO(){return"INTF"===this.parentObj.getType()||"CLAS"===this.parentObj.getType()}isTypePool(){var e;return!0===(null===(e=this.current)||void 0===e?void 0:e.getIdentifier().filename.endsWith(".type.abap"))||!1}setAllowHeaderUse(e){this.allowHeaderUse=e}isAllowHeaderUse(e){var t;return e.toUpperCase()===(null===(t=this.allowHeaderUse)||void 0===t?void 0:t.toUpperCase())}pop(e){if(this.allowHeaderUse=void 0,void 0===this.current)throw new Error("something wrong, top scope popped");this.current.setEnd(e);const t=this.current;return this.current=this.current.getParent(),new r.SpaghettiScope(t)}}t.CurrentScope=d},3701(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.If=void 0;const s=n(3125),o=n(82245);t.If=class{getMatcher(){return(0,s.seq)("IF",o.Cond)}}},3724(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSource1=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("&&",o.StringTemplate),t=(0,s.seq)(o.StringTemplate,(0,s.star)(e));return(0,s.alt)(o.Constant,o.TextElement,o.MethodCallChain,t,o.FieldChain)}}t.SimpleSource1=i},3765(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Write=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(53414),a=n(3240),c=n(45769),l=n(36453),d=n(82054);t.Write=class{runSyntax(e,t){var n;let u=e.getChildren()[1];u.get()instanceof s.WriteOffsetLength&&(u=e.getChildren()[2]);for(const n of e.findDirectExpressions(s.Source)){const e=o.Source.runSyntax(n,t);if(n===u&&!1===new a.TypeUtils(t.scope).isCharLike(e)&&!1===new a.TypeUtils(t.scope).isHexLike(e)){const e="Source not character like";return void t.issues.push((0,d.syntaxIssue)(t,n.getFirstToken(),e))}}for(const o of(null===(n=e.findDirectExpression(s.WriteOffsetLength))||void 0===n?void 0:n.findDirectExpressions(s.SimpleFieldChain2))||[])c.FieldChain.runSyntax(o,t,l.ReferenceType.DataReadReference);for(const n of e.findAllExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t);const p=e.findDirectExpression(s.Target);p&&i.Target.runSyntax(p,t)}}},3783(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Format=void 0;const s=n(82245),o=n(93170);t.Format=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t)}}},3861(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLValueConversion=t.SQLValueConversionConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(52424),a=n(12620);class c extends o.BasicRuleConfig{}t.SQLValueConversionConf=c,t.SQLValueConversion=class{constructor(){this.conf=new c}getMetadata(){return{key:"sql_value_conversion",title:"Implicit SQL Value Conversion",shortDescription:"Ensure types match when selecting from database",extendedInformation:"\n* Integer to CHAR conversion\n* Integer to NUMC conversion\n* NUMC to Integer conversion\n* CHAR to Integer conversion\n* Source field longer than database field, CHAR -> CHAR\n* Source field longer than database field, NUMC -> NUMC",tags:[]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){return!(e instanceof a.ABAPObject)||e instanceof i.Interface?[]:this.traverse(new r.SyntaxLogic(this.reg,e).run().spaghetti.getTop())}traverse(e){const t=[];for(const n of e.getData().sqlConversion){const o=this.reg.getFileByName(e.getIdentifier().filename);void 0!==o&&t.push(s.Issue.atToken(o,n.token,n.message,this.getMetadata().key,this.getConfig().severity))}for(const n of e.getChildren())t.push(...this.traverse(n));return t}}},3903(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndChain=void 0;const s=n(3125),o=n(49028);t.EndChain=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"ENDCHAIN")}}},3998(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtFirst=void 0;const s=n(3125);t.AtFirst=class{getMatcher(){return(0,s.str)("AT FIRST")}}},4005(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventDefinition=void 0;const s=n(2088),o=n(82245),i=n(45935),r=n(82245),a=n(82956);class c extends s.Identifier{constructor(e,t,n){if(!(e.get()instanceof i.Events))throw new Error("MethodDefinition, expected MethodDef as part of input node");const s=e.findFirstExpression(o.EventName);if(void 0===s)throw new Error("MethodDefinition, expected MethodDef as part of input node");super(s.getFirstToken(),n.filename),this.parameters=[],this.parse(e,n),this.is_static="CLASS"===e.getFirstToken().getStr().toUpperCase()}getParameters(){return this.parameters}isStatic(){return this.is_static}parse(e,t){for(const n of e.findAllExpressions(r.MethodParam))this.parameters.push(a.MethodParam.runSyntax(n,t,[]))}}t.EventDefinition=c},4016(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChapterOfBookStructure=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DSYS"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.ChapterOfBookStructure=o},4080(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HexType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){if(super({qualifiedName:t}),e<=0)throw new Error("Bad LENGTH, Hex");this.length=e}getLength(){return this.length}toText(){return"```x LENGTH "+this.getLength()+"```"}toABAP(){return"x LENGTH "+this.getLength()}isGeneric(){return!1}containsVoid(){return!1}toCDS(){return"abap.raw( "+this.getLength()+" )"}}t.HexType=o},4116(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConvBody=void 0;const s=n(82245),o=n(93170),i=n(31666),r=n(82054),a=n(20572);t.ConvBody=class{static runSyntax(e,t){let n=!1;const c=e.findDirectExpression(s.Let);c&&(n=i.Let.runSyntax(c,t));const l=e.findDirectExpression(s.Source);if(void 0===l){const n="ConvBody, no source found";return t.issues.push((0,r.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(r.CheckSyntaxKey)}const d=o.Source.runSyntax(l,t);return!0===n&&t.scope.pop(e.getLastToken().getEnd()),d}}},4134(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhenOthers=void 0;const s=n(3125);t.WhenOthers=class{getMatcher(){return(0,s.str)("WHEN OTHERS")}}},4279(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiveParameters=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("IMPORTING",o.ParameterListT),t=(0,s.seq)("TABLES",o.ParameterListT),n=(0,s.seq)("CHANGING",o.ParameterListT),i=(0,s.seq)("EXCEPTIONS",(0,s.opt)(o.ParameterListExceptions),(0,s.opt)(o.Field));return(0,s.seq)((0,s.opt)(e),(0,s.opt)(n),(0,s.opt)(t),(0,s.opt)(i))}}t.ReceiveParameters=i},4378(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndTestInjection=void 0;const s=n(3125);t.EndTestInjection=class{getMatcher(){return(0,s.str)("END-TEST-INJECTION")}}},4391(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDetermineTypes=void 0;const s=n(20572),o=n(5518);t.CDSDetermineTypes=class{parseType(e,t,n){const i=new o.DDIC(e);if(0===(null==t?void 0:t.fields.length))return s.VoidType.get("DDLS:todo");{const o=[];for(const r of(null==t?void 0:t.fields)||[])if(""!==r.prefix){const a=r.prefix.toUpperCase();let c=t.sources.find((e=>{var t;return(null===(t=e.as)||void 0===t?void 0:t.toUpperCase())===a}));if(void 0===(null==c?void 0:c.name)&&(c=t.sources.find((e=>e.name.toUpperCase()===a))),void 0===(null==c?void 0:c.name)&&(t.associations.find((e=>e.name.toUpperCase()===a))||t.associations.find((e=>{var t;return(null===(t=e.as)||void 0===t?void 0:t.toUpperCase())===a})))){o.push({name:r.name,type:s.VoidType.get("DDLS:association")});continue}if(void 0===(null==c?void 0:c.name)){if(a.startsWith("_")){o.push({name:r.name,type:s.VoidType.get("DDLS:association")});continue}o.push({name:r.name,type:new s.UnknownType("CDS parser error, unknown source, "+r.name+", "+n)});continue}const l=i.lookupTableOrView(c.name);if(l.type)if(l.type instanceof s.StructureType){const e=l.type.getComponentByName(r.name);e?o.push({name:r.name,type:e}):o.push({name:r.name,type:new s.UnknownType(r.name+" not found in "+c.name+", CDSDetermineTypes")})}else o.push({name:r.name,type:l.type});else e.inErrorNamespace(c.name)?o.push({name:r.name,type:new s.UnknownType(c.name+" not found, CDSDetermineTypes")}):o.push({name:r.name,type:s.VoidType.get(c.name)})}else o.push({name:r.name,type:s.VoidType.get("DDLS:fieldname:"+n)});return new s.StructureType(o,t.definitionName,t.definitionName,t.description)}}}},4425(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDefinitionLoad=void 0;const s=n(3125),o=n(82245);t.ClassDefinitionLoad=class{getMatcher(){return(0,s.seq)("CLASS",o.ClassName,"DEFINITION LOAD")}}},4554(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringType=void 0;const s=n(97502);class o extends s.AbstractType{static get(e){const t=JSON.stringify(e);if(this.singletons.has(t))return this.singletons.get(t);const n=new o(e);return this.singletons.set(t,n),n}constructor(e){super(e)}getQualifiedName(){var e;const t=null===(e=this.data)||void 0===e?void 0:e.qualifiedName;return void 0===t?"STRING":t}toText(){return"```string```"}isGeneric(){return!1}toABAP(){return"string"}containsVoid(){return!1}toCDS(){return"abap.string"}}t.StringType=o,o.singletons=new Map},4731(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.With=void 0;const s=n(50612),o=n(58720),i=n(79175);t.With=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.WithLoop),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndWith))}}},4991(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomizingImgActivity=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CUS0"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.CustomizingImgActivity=o},5027(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldChain=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.InstanceArrow),o.AttributeName),t=(0,s.seq)((0,s.tok)(i.Dash),(0,s.optPrio)(o.ComponentName)),n=(0,s.star)((0,s.altPrio)(o.Dereference,e,t,o.TableExpression)),r=(0,s.seq)(o.ClassName,(0,s.tok)(i.StaticArrow),o.AttributeName),a=(0,s.altPrio)(r,o.SourceField,o.SourceFieldSymbol),c=(0,s.altPrio)((0,s.tok)(i.DashW),(0,s.seq)((0,s.optPrio)(o.TableBody),(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength)));return(0,s.seq)(a,n,c)}}t.FieldChain=r},5094(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMethods=void 0;const s=n(3125),o=n(55276);class i extends s.Expression{getRunnable(){return(0,s.seq)("ABSTRACT METHODS",(0,s.plusPrio)(o.MethodName))}}t.AbstractMethods=i},5134(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFieldAndValue=void 0;const s=n(3125),o=n(26967),i=n(81435),r=n(37210),a=n(14933);class c extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.altPrio)(o.Integer,r.SQLFieldName),i.SQLArithmeticOperator,a.SQLSource);return(0,s.seq)(r.SQLFieldName,"=",(0,s.altPrio)(e,a.SQLSource))}}t.SQLFieldAndValue=c},5152(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=(0,s.regex)(/^&|&?((\w*\/\w+\/)|(\w*\/\w+\/)?[\w\*$%\?#]+)$/);return(0,s.seq)(e,(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.optPrio)(e))),(0,s.optPrio)((0,s.tok)(o.DashW)))}}t.DefinitionName=i},5230(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompare=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.alt)(o.FieldSub,o.Constant),t=(0,s.seq)((0,s.tok)(i.WParenLeft),e,(0,s.plus)((0,s.seq)(",",e)),(0,s.tok)(i.ParenRightW)),n=(0,s.seq)((0,s.opt)("NOT"),"IN",(0,s.altPrio)(o.Source,t)),a=(0,s.seq)("IS",(0,s.opt)("NOT"),(0,s.altPrio)("SUPPLIED","BOUND",(0,s.ver)(r.Version.v750,(0,s.seq)("INSTANCE OF",o.Source)),"REQUESTED","ASSIGNED","INITIAL")),c=(0,s.seq)((0,s.opt)("NOT"),"BETWEEN",o.Source,"AND",o.Source),l=(0,s.seq)(o.ComponentChainSimple,(0,s.altPrio)((0,s.seq)(o.CompareOperator,o.Source),n,c,a));return(0,s.seq)((0,s.opt)("NOT"),l)}}t.ComponentCompare=a},5294(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StartAtTab=t.StartAtTabConf=void 0;const s=n(71759),o=n(52024),i=n(50612),r=n(99732),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.StartAtTabConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"start_at_tab",title:"Start at tab",shortDescription:"Checks that statements start at tabstops.",extendedInformation:"Reports max 100 issues per file\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#indent-and-snap-to-tab",tags:[c.RuleTag.Whitespace,c.RuleTag.Styleguide,c.RuleTag.SingleFile],badExample:" WRITE a.",goodExample:"  WRITE a."}}getMessage(){return"Start statement at tab position"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n,r=!1;const a=e.getRawRows();for(const c of e.getStatements()){if(c.get()instanceof o.Comment)continue;if(c.get()instanceof i.TypeBegin)r=!0;else if(c.get()instanceof i.TypeEnd)r=!1;else if(r)continue;const l=c.getStart();if(void 0===n||l.getRow()!==n.getRow()){if((l.getCol()-1)%2!=0&&!1===a[l.getRow()-1].includes("\t")){const n=s.Issue.atPosition(e,l,this.getMessage(),this.getMetadata().key,this.conf.severity);if(t.push(n),t.length>=100)return t}n=l}}return t}}t.StartAtTab=d},5320(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferRaiseExceptionNew=t.PreferRaiseExceptionNewConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(71249),a=n(86696),c=n(49028),l=n(50612);class d extends i.BasicRuleConfig{}t.PreferRaiseExceptionNewConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"prefer_raise_exception_new",title:"Prefer RAISE EXCEPTION NEW to RAISE EXCEPTION TYPE",shortDescription:"Prefer RAISE EXCEPTION NEW to RAISE EXCEPTION TYPE",extendedInformation:"\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-raise-exception-new-to-raise-exception-type\n\nFrom 752 and up",tags:[a.RuleTag.Styleguide,a.RuleTag.SingleFile,a.RuleTag.Quickfix,a.RuleTag.Upport],goodExample:"RAISE EXCEPTION NEW cx_generation_error( previous = exception ).",badExample:"RAISE EXCEPTION TYPE cx_generation_error\n  EXPORTING\n    previous = exception."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){if(this.reg.getConfig().getVersion()<c.Version.v752)return[];const t=[];for(const n of e.getStatements())if(n.get()instanceof l.Raise){const o=n.concatTokens().toUpperCase();if(o.includes(" MESSAGE"))continue;if(o.startsWith("RAISE EXCEPTION TYPE ")){const i="Prefer RAISE EXCEPTION NEW to RAISE EXCEPTION TYPE",r=this.getFix(e,n,!!o.includes(" EXPORTING"));t.push(s.Issue.atStatement(e,n,i,this.getMetadata().key,this.conf.severity,r))}}return t}getFix(e,t,n){const s=t.getChildren();let o;if(n){const n="( "+s[5].concatTokens()+" ).";o=r.EditHelper.replaceRange(e,s[3].getLastToken().getEnd(),t.getEnd(),n)}else o=r.EditHelper.replaceRange(e,s[3].getLastToken().getEnd(),t.getEnd(),"( ).");const i=r.EditHelper.replaceToken(e,s[2].getFirstToken(),"NEW");return r.EditHelper.merge(o,i)}}t.PreferRaiseExceptionNew=u},5330(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SevenBitAscii=t.SevenBitAsciiConf=void 0;const s=n(71759),o=n(86789),i=n(77465),r=n(86696);class a extends i.BasicRuleConfig{}t.SevenBitAsciiConf=a,t.SevenBitAscii=class{constructor(){this.conf=new a}getMetadata(){return{key:"7bit_ascii",title:"Check for 7bit ascii",shortDescription:"Only allow characters from the 7bit ASCII set.",extendedInformation:'https://docs.abapopenchecks.org/checks/05/\n\nhttps://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abencharacter_set_guidl.htm\n\nCheckes files with extensions ".abap" and ".asddls"',tags:[r.RuleTag.SingleFile],badExample:"WRITE ''.",goodExample:"WRITE cl_abap_conv_in_ce=>uccp( 'BF51' )."}}initialize(e){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=[];for(const n of e.getFiles()){const e=n.getFilename();if(e.endsWith(".abap")||e.endsWith(".asddls")){const e=n.getRawRows();for(let i=0;i<e.length;i++){const r=/[\u007f-\uffff]/.exec(e[i]);if(null!==r){const e=r.index+1,a=new o.Position(i+1,e),c=new o.Position(i+1,e+1),l="Contains non 7 bit ascii character",d=s.Issue.atRange(n,a,c,l,this.getMetadata().key,this.conf.severity);t.push(d)}const a=/\r.+$/.exec(e[i]);if(null!==a){const e=a.index+1,r=new o.Position(i+1,e),c=new o.Position(i+1,e+1),l="Dangling carriage return",d=s.Issue.atRange(n,r,c,l,this.getMetadata().key,this.conf.severity);t.push(d)}}}}return t}}},5347(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionPool=void 0;const s=n(3125),o=n(82245);t.FunctionPool=class{getMatcher(){const e=(0,s.seq)("MESSAGE-ID",o.MessageClass),t=(0,s.seq)("LINE-SIZE",o.Integer),n=(0,s.str)("NO STANDARD PAGE HEADING");return(0,s.seq)("FUNCTION-POOL",o.IncludeName,(0,s.opt)((0,s.per)(e,t,n)))}}},5363(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDatabase=void 0;const s=n(82245),o=n(93170),i=n(53414),r=n(85913);t.DeleteDatabase=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Dynamic))i.Dynamic.runSyntax(n,t);const n=e.findFirstExpression(s.DatabaseTable);void 0!==n&&r.DatabaseTable.runSyntax(n,t)}}},5390(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationCheckField=void 0;const s=n(20572),o=n(5518),i=n(80300);class r extends i.AbstractObject{getType(){return"AUTH"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}getDescription(){}getDataElementName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.rollname}parseType(e){var t;this.parse();const n=[],i=new o.DDIC(e);if(null===(t=this.parsedXML)||void 0===t?void 0:t.rollname){const t=i.lookupDataElement(this.parsedXML.rollname);return t.object?(n.push({object:t.object}),e.getDDICReferences().setUsing(this,n),t.type):i.inErrorNamespace(this.parsedXML.rollname)?new s.UnknownType(this.parsedXML.rollname+" not found"):s.VoidType.get(this.parsedXML.rollname)}return new s.UnknownType("Parsing error")}parse(){var e;if(this.parsedXML)return{updated:!1,runtime:0};const t=Date.now();this.parsedXML={};const n=super.parseRaw2();return void 0===n||void 0===n.abapGit||void 0===n.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.rollname=null===(e=n.abapGit["asx:abap"]["asx:values"].AUTHX)||void 0===e?void 0:e.ROLLNAME,{updated:!0,runtime:Date.now()-t})}}t.AuthorizationCheckField=r},5431(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Fields=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Fields=class{getMatcher(){const e=(0,s.seq)("FIELDS",o.FieldSub);return(0,s.verNot)(i.Version.Cloud,e)}}},5518(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDIC=void 0;const s=n(20572),o=n(20572);t.DDIC=class{constructor(e){this.reg=e}isException(e,t){var n;if(void 0===e)return!1;if("CX_ROOT"===e.name.toUpperCase())return!0;let s=e.superClassName;if(void 0===s)return!1;let o=0;for(;o++<10&&void 0!==s;){const e=this.reg.getObject("CLAS",s);if(void 0===e)break;const t=null===(n=e.getMainABAPFile())||void 0===n?void 0:n.getInfo().getClassDefinitionByName(s);if(void 0===t)break;if(!t.superClassName)break;s=t.superClassName}return!(!(null==s?void 0:s.match(/^.?cx_.*$/i))&&!(null==s?void 0:s.match(/^\/.+\/cx_.*$/i)))}lookupBuiltinType(e,t,n,o){switch(e){case"STRING":return s.StringType.get({qualifiedName:o||e});case"XSTRING":return s.XStringType.get({qualifiedName:o||e});case"D":return new s.DateType({qualifiedName:o||e});case"T":return new s.TimeType({qualifiedName:o||e});case"XSEQUENCE":return new s.XSequenceType({qualifiedName:o});case"CLIKE":return s.CLikeType.get();case"DECFLOAT":return new s.DecFloatType({qualifiedName:o});case"ANY":return s.AnyType.get({qualifiedName:o});case"SIMPLE":return new s.SimpleType({qualifiedName:o});case"%_C_POINTER":return new s.HexType(8,o);case"TABLE":return new s.TableType(s.AnyType.get(),{withHeader:!1,keyType:s.TableKeyType.default});case"DATA":return new s.DataType({qualifiedName:o});case"NUMERIC":return new s.NumericGenericType({qualifiedName:o});case"UTCLONG":return new s.UTCLongType({qualifiedName:o});case"DECFLOAT16":return new s.DecFloat16Type({qualifiedName:o});case"DECFLOAT34":return new s.DecFloat34Type({qualifiedName:o});case"CSEQUENCE":return new s.CSequenceType({qualifiedName:o});case"I":return s.IntegerType.get({qualifiedName:o||e});case"INT8":return new s.Integer8Type({qualifiedName:o||e});case"F":return new s.FloatType({qualifiedName:o||e});case"P":return t&&n?new s.PackedType(t,n,{qualifiedName:o}):t?new s.PackedType(t,0,{qualifiedName:o}):new s.PackedType(1,0,{qualifiedName:o});case"C":return t?new s.CharacterType(t,{qualifiedName:o}):new s.CharacterType(1,{qualifiedName:o});case"X":return t?new s.HexType(t,o):new s.HexType(1,o);case"N":return t?new s.NumericType(t,o):new s.NumericType(1,o)}}inErrorNamespace(e){return void 0===e||this.reg.inErrorNamespace(e)}lookupObject(e){const t=this.reg.getObject("CLAS",e),n=null==t?void 0:t.getIdentifier();if(n)return{type:new o.ObjectReferenceType(n,{qualifiedName:e,RTTIName:"\\CLASS="+e}),object:t};const s=this.reg.getObject("INTF",e),i=null==s?void 0:s.getIdentifier();return i?{type:new o.ObjectReferenceType(i,{qualifiedName:e,RTTIName:"\\INTERFACE="+e}),object:s}:!0===this.inErrorNamespace(e)?{type:new o.UnknownType(e)}:{type:o.VoidType.get(e)}}lookupNoVoid(e){const t=this.reg.getObject("TABL",e);if(t)return{type:t.parseType(this.reg),object:t};const n=this.reg.getObject("VIEW",e);if(n)return{type:n.parseType(this.reg),object:n};const s=this.reg.getObject("TTYP",e);if(s)return{type:s.parseType(this.reg),object:s};const o=this.reg.getObject("DTEL",e);if(o)return{type:o.parseType(this.reg),object:o};return this.lookupDDLS(e)||void 0}lookupDDLS(e){var t;if(void 0===e)return;const n=e.toUpperCase();for(const e of this.reg.getObjectsByType("DDLS")){const s=e;if(s.getSQLViewName()===n||(null===(t=s.getDefinitionName())||void 0===t?void 0:t.toUpperCase())===n)return{type:s.parseType(this.reg),object:s}}}lookup(e){return this.lookupNoVoid(e)||(this.reg.inErrorNamespace(e)?{type:new s.UnknownType(e+" not found, lookup")}:{type:s.VoidType.get(e)})}lookupDomain(e,t,n){const o=this.reg.getObject("DOMA",e);return o?{type:o.parseType(this.reg,t,n),object:o}:this.reg.inErrorNamespace(e)?{type:new s.UnknownType(e+", lookupDomain"),object:void 0}:{type:s.VoidType.get(e),object:void 0}}lookupDataElement(e){if(void 0===e)return{type:new s.UnknownType("undefined, lookupDataElement")};const t=this.reg.getObject("DTEL",e);return t?{type:t.parseType(this.reg),object:t}:this.reg.inErrorNamespace(e)?{type:new s.UnknownType(e+" not found, lookupDataElement")}:{type:s.VoidType.get(e)}}lookupTableOrView(e){if(void 0===e)return{type:new s.UnknownType("undefined, lookupTableOrView")};const t=this.reg.getObject("TABL",e);if(t)return{type:t.parseType(this.reg),object:t};return this.lookupDDLS(e)||this.lookupView(e)}lookupTableOrView2(e){if(void 0===e)return;const t=this.reg.getObject("TABL",e);if(t)return t;const n=this.reg.getObject("VIEW",e);if(n)return n;const s=this.lookupDDLS(e);return s?s.object:void 0}lookupTable(e){if(void 0===e)return new s.UnknownType("undefined, lookupTable");const t=this.reg.getObject("TABL",e);return t?t.parseType(this.reg):this.reg.inErrorNamespace(e)?new s.UnknownType(e+" not found, lookupTable"):s.VoidType.get(e)}lookupView(e){if(void 0===e)return{type:new s.UnknownType("undefined, lookupView")};const t=this.reg.getObject("VIEW",e);return t?{type:t.parseType(this.reg),object:t}:this.reg.inErrorNamespace(e)?{type:new s.UnknownType(e+" not found, lookupView")}:{type:s.VoidType.get(e)}}lookupTableType(e){if(void 0===e)return{type:new s.UnknownType("undefined, lookupTableType")};const t=this.reg.getObject("TTYP",e);return t?{type:t.parseType(this.reg),object:t}:this.reg.inErrorNamespace(e)?{type:new s.UnknownType(e+" not found, lookupTableType")}:{type:s.VoidType.get(e)}}textToType(e){const t={qualifiedName:e.qualifiedName,conversionExit:e.conversionExit,ddicName:e.ddicName,description:e.description};switch(e.text){case"DEC":case"D16F":case"D16D":case"D34D":case"D34F":case"DF16_DEC":case"DF34_DEC":case"CURR":case"QUAN":return void 0===e.length?new s.UnknownType(e.text+" unknown length, "+e.infoText,e.infoText):void 0===e.decimals?new s.PackedType(parseInt(e.length,10),0,t):new s.PackedType(parseInt(e.length,10),parseInt(e.decimals,10),t);case"ACCP":return new s.CharacterType(6,t);case"LANG":return new s.CharacterType(1,t);case"CLNT":case"UNIT":return new s.CharacterType(3,t);case"CUKY":return new s.CharacterType(5,t);case"UTCL":case"UTCLONG":return new s.CharacterType(27,t);case"NUMC":return void 0===e.length?new s.UnknownType(e.text+" unknown length",e.infoText):new s.NumericType(parseInt(e.length,10),e.qualifiedName);case"CHAR":case"LCHR":return void 0===e.length?new s.UnknownType(e.text+" unknown length",e.infoText):new s.CharacterType(parseInt(e.length,10),t);case"RAW":case"LRAW":return void 0===e.length?new s.UnknownType(e.text+" unknown length",e.infoText):new s.HexType(parseInt(e.length,10),e.qualifiedName);case"TIMN":case"TIMS":return new s.TimeType({qualifiedName:e.qualifiedName});case"DECFLOAT16":case"DECFLOAT34":case"D16R":case"D34R":case"DF16_RAW":case"DF34_RAW":case"FLTP":return void 0===e.length?new s.UnknownType(e.text+" unknown length",e.infoText):new s.FloatingPointType(parseInt(e.length,10),e.qualifiedName);case"DATN":case"DATS":return new s.DateType({qualifiedName:e.qualifiedName});case"INT1":case"INT2":case"INT4":return s.IntegerType.get({qualifiedName:e.qualifiedName});case"INT8":return new s.Integer8Type({qualifiedName:e.qualifiedName});case"SSTR":case"SSTRING":case"STRG":case"STRING":return s.StringType.get({qualifiedName:e.qualifiedName});case"RSTR":case"RAWSTRING":case"GEOM_EWKB":return s.XStringType.get({qualifiedName:e.qualifiedName});case"D16S":case"D34S":case"DF16_SCL":case"DF34_SCL":case"PREC":case"VARC":return new s.UnknownType(e.text+" is an obsolete data type",e.infoText);default:return new s.UnknownType(e.text+" unknown basic ddic type",e.infoText)}}}},5568(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransformationOptions=void 0;const s=n(3125),o=n(12741),i=n(26967),r=n(83568);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.alt)(o.Field,i.Integer),"=",r.Source);return(0,s.plus)(e)}}t.CallTransformationOptions=a},5591(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeDocument=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CHDO"}getAllowedNaming(){return{maxLength:15,allowNamespace:!0}}getDescription(){}}t.ChangeDocument=o},5648(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSElement=void 0;const s=n(18483),o=n(3125),i=n(91146),r=n(27253);class a extends o.Expression{getRunnable(){const e=(0,o.seq)(": REDIRECTED TO",(0,o.optPrio)((0,o.altPrio)("PARENT","COMPOSITION CHILD")),s.CDSName),t=(0,o.seq)(":",(0,o.alt)(s.CDSName,s.CDSType,"LOCALIZED"));return(0,o.seq)((0,o.starPrio)(s.CDSAnnotation),(0,o.optPrio)((0,o.altPrio)("KEY","VIRTUAL")),(0,o.altPrio)(s.CDSAggregate,s.CDSString,s.CDSArithmetics,s.CDSFunction,r.CDSCast,s.CDSCase,(0,o.seq)("(",s.CDSCase,")"),(0,o.seq)(s.CDSPrefixedName,(0,o.optPrio)(i.CDSAs),(0,o.optPrio)((0,o.altPrio)(e,t))),s.CDSInteger),(0,o.optPrio)(i.CDSAs))}}t.CDSElement=a},5679(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MacroNaming=t.MacroNamingConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(77465),c=n(86696),l=n(84383);class d extends a.BasicRuleConfig{constructor(){super(...arguments),this.pattern="^_.+$"}}t.MacroNamingConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"macro_naming",title:"Macro naming conventions",shortDescription:"Allows you to enforce a pattern for macro definitions",extendedInformation:'Use rule "avoid_use" to avoid macros altogether.',tags:[c.RuleTag.Naming,c.RuleTag.SingleFile],badExample:"DEFINE something.\nEND-OF-DEFINITION.",goodExample:"DEFINE _something.\nEND-OF-DEFINITION."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],o=new RegExp(this.conf.pattern,"i");if(t instanceof l.TypePool)return[];for(const t of e.getStatements()){if(!(t.get()instanceof i.Define))continue;const a=t.findDirectExpression(r.MacroName);if(void 0===a)continue;const c=a.getFirstToken();if(!o.exec(c.getStr())){const t='Bad macro name naming, expected "'+this.conf.pattern+'", got "'+c.getStr()+'"',o=s.Issue.atToken(e,c,t,this.getMetadata().key,this.conf.severity);n.push(o)}}return n}}t.MacroNaming=u},5680(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionalWriting=t.FunctionalWritingConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(77465),c=n(84383),l=n(86696),d=n(5518),u=n(71249);class p extends a.BasicRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0}}t.FunctionalWritingConf=p;class f extends o.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"functional_writing",title:"Use functional writing",shortDescription:"Detects usage of call method when functional style calls can be used.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-functional-to-procedural-calls\nhttps://docs.abapopenchecks.org/checks/07/",tags:[l.RuleTag.Styleguide,l.RuleTag.Quickfix,l.RuleTag.SingleFile],badExample:"CALL METHOD zcl_class=>method( ).\nCALL METHOD cl_abap_typedescr=>describe_by_name\n  EXPORTING\n    p_name         = 'NAME'\n  RECEIVING\n    p_descr_ref    = lr_typedescr\n  EXCEPTIONS\n    type_not_found = 1\n    OTHERS         = 2.",goodExample:"zcl_class=>method( ).\ncl_abap_typedescr=>describe_by_name(\n  EXPORTING\n    p_name         = 'NAME'\n  RECEIVING\n    p_descr_ref    = lr_typedescr\n  EXCEPTIONS\n    type_not_found = 1\n    OTHERS         = 2 )."}}getMessage(){return"Use functional writing style for method calls"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,s;const o=[];let a,l=!1;if("INTF"===t.getType())return[];t instanceof c.Class&&(a=t.getClassDefinition());const u=new d.DDIC(this.reg);for(const c of e.getStatements())if(c.get()instanceof i.ClassImplementation&&a&&u.isException(a,t)&&this.conf.ignoreExceptions)l=!0;else if(c.get()instanceof i.EndClass)l=!1;else if(!1===l&&c.get()instanceof i.Call){if((null===(n=c.getFirstChild())||void 0===n?void 0:n.get())instanceof r.MethodCallChain)continue;if(void 0!==(null===(s=c.findDirectExpression(r.MethodSource))||void 0===s?void 0:s.findDirectExpression(r.Dynamic)))continue;o.push(this.createIssueForStatementNode(e,c))}return o}createIssueForStatementNode(e,t){const n=this.buildFixString(t),o=u.EditHelper.replaceRange(e,t.getStart(),t.getEnd(),n);return s.Issue.atStatement(e,t,this.getMessage(),this.getMetadata().key,this.conf.severity,o)}buildFixString(e){const t=e.findDirectExpression(r.MethodSource);let n=null==t?void 0:t.concatTokens();const s=e.findDirectExpression(r.MethodCallBody);let o="";if(s){const e=s.findDirectExpression(r.MethodCallParam);e&&"("===e.getFirstToken().getStr()?o=`${s.concatTokens()}.`:(n=`${n}( `,o=`${s.concatTokens()} ).`)}else o="( ).";return n+o}}t.FunctionalWriting=f},5807(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(75457),a=n(15838),c=n(20572),l=n(9224),d=n(38788);class u{runSyntax(e,t){var n;const p=null===(n=e.findFirstExpression(s.DefinitionName))||void 0===n?void 0:n.getFirstToken();if(void 0===p)throw new d.AssertError("Constants, structure, unexpected node");const f=[],g={};for(const n of e.getChildren()){const e=n.get();if(n instanceof r.StatementNode&&e instanceof o.Constant){const e=(new l.Constant).runSyntax(n,t);e&&(f.push({name:e.getName(),type:e.getType()}),g[e.getName()]=e.getValue())}else if(n instanceof r.StructureNode&&e instanceof i.Constants){const{type:e,values:s}=(new u).runSyntax(n,t);e&&(f.push({name:e.getName(),type:e.getType()}),g[e.getName()]=s)}}return 0===f.length?{type:void 0,values:g}:{type:new a.TypedIdentifier(p,t.filename,new c.StructureType(f),["read_only","static"]),values:g}}}t.Constants=u},5995(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const s=n(50612),o=n(58720),i=n(99489),r=n(52346),a=n(23790),c=n(25188);class l{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.DataBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.Data),(0,o.sub)(l),(0,o.sta)(s.Include),(0,o.sta)(s.Ranges),(0,o.sta)(s.Constant),(0,o.sub)(r.Constants),(0,o.sta)(s.Type),(0,o.sub)(a.Types),(0,o.sub)(i.Enhancement),(0,o.sub)(c.Define),(0,o.sta)(s.IncludeType),(0,o.sta)(s.Parameter),(0,o.sta)(s.SelectionScreen),(0,o.sta)(s.SelectOption),(0,o.sta)(s.TypePools),(0,o.sta)(s.EnhancementPoint))),(0,o.sta)(s.DataEnd))}}t.Data=l},6008(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBody=void 0;const s=n(82245),o=n(93170),i=n(45931),r=n(20572);t.FilterBody=class{static runSyntax(e,t,n){if(void 0===e)return n;let a;for(const n of e.findDirectExpressions(s.Source))void 0===a?a=o.Source.runSyntax(n,t):o.Source.runSyntax(n,t);if(void 0===e.findDirectTokenByText("EXCEPT")){const n=a instanceof r.TableType?a.getRowType():void 0;i.ComponentCond.runSyntax(e.findDirectExpression(s.ComponentCond),t,n)}return a||n}}},6078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Enhancement=void 0;const s=n(3125),o=n(49028),i=n(20138);t.Enhancement=class{getMatcher(){const e=(0,s.seq)("ENHANCEMENT",(0,s.plus)(i.NamespaceSimpleName));return(0,s.verNot)(o.Version.Cloud,e)}}},6240(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMesh=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeMesh=class{getMatcher(){const e=(0,s.seq)("ON",o.NamespaceSimpleName,"=",o.NamespaceSimpleName,(0,s.star)((0,s.seq)("AND",o.NamespaceSimpleName,"=",o.NamespaceSimpleName))),t=(0,s.seq)("USING KEY",o.NamespaceSimpleName),n=(0,s.seq)("ASSOCIATION",o.NamespaceSimpleName,"TO",o.NamespaceSimpleName,(0,s.plus)(e));return(0,s.ver)(i.Version.v751,(0,s.seq)("TYPES",o.NamespaceSimpleName,"TYPE",(0,s.opt)("REF TO"),o.TypeName,(0,s.plus)(n),(0,s.opt)(t)))}}},6261(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OnChange=void 0;const s=n(50612),o=n(58720),i=n(79175),r=n(10894);t.OnChange=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.OnChange),(0,o.seq)((0,o.opt)((0,o.sub)(i.Body)),(0,o.opt)((0,o.sub)(r.Else))),(0,o.sta)(s.EndOn))}}},6339(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SuperfluousValue=t.SuperfluousValueConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(82245),a=n(50612),c=n(86696),l=n(49028);class d extends i.BasicRuleConfig{}t.SuperfluousValueConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"superfluous_value",title:"Superfluous VALUE",shortDescription:"Find superfluous VALUE expressions",extendedInformation:"Left hand side is inline, VALUE is inferred, value body is simple, from v740sp02 and up",tags:[c.RuleTag.SingleFile],badExample:"DATA(message_entry) = VALUE #( message_table[ msgno = msgno ] ).",goodExample:"DATA(message_entry) = message_table[ msgno = msgno ]."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n;const o=[];if(this.reg.getConfig().getVersion()<l.Version.v740sp02&&this.reg.getConfig().getVersion()!==l.Version.Cloud)return[];const i=e.getStructure();if(void 0===i)return[];for(const c of i.findAllStatements(a.Move)){if(void 0===(null===(t=c.findDirectExpression(r.Target))||void 0===t?void 0:t.findDirectExpression(r.InlineData)))continue;const i=c.findDirectExpression(r.Source);if(void 0===i)continue;if("#"!==(null===(n=i.findDirectExpression(r.TypeNameOrInfer))||void 0===n?void 0:n.concatTokens()))continue;const a=i.findDirectExpression(r.ValueBody);if(void 0!==a&&1===a.getChildren().length){const t="Superfluous VALUE expression",n=s.Issue.atStatement(e,c,t,this.getMetadata().key,this.conf.severity);o.push(n)}}return o}}t.SuperfluousValue=u},6396(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetReference=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(14365),a=n(20572),c=n(82054);t.GetReference=class{runSyntax(e,t){const n=e.findDirectExpression(s.Source),l=o.Source.runSyntax(n,t),d=e.findDirectExpression(s.Target),u=null==d?void 0:d.findDirectExpression(s.InlineData);if(u){if(l instanceof a.AnyType){const n="GET REFERENCE generic and inline declaration not possible";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}r.InlineData.runSyntax(u,t,l?new a.DataReference(l):void 0)}else d&&i.Target.runSyntax(d,t)}}},6491(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(376),t),o(n(80997),t),o(n(85562),t),o(n(46037),t),o(n(92759),t),o(n(86768),t),o(n(26130),t)},6554(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassLocalFriends=void 0;const s=n(3125),o=n(82245);t.ClassLocalFriends=class{getMatcher(){return(0,s.seq)("CLASS",o.ClassName,"DEFINITION LOCAL FRIENDS",(0,s.plusPrio)(o.ClassName))}}},6835(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ContainsTab=t.ContainsTabConf=void 0;const s=n(71759),o=n(86789),i=n(99732),r=n(77465),a=n(86696),c=n(71249);class l extends r.BasicRuleConfig{constructor(){super(...arguments),this.spaces=1}}t.ContainsTabConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"contains_tab",title:"Code contains tab",shortDescription:"Checks for usage of tabs (enable to enforce spaces)",extendedInformation:"\nhttps://docs.abapopenchecks.org/checks/09/\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#indent-and-snap-to-tab",tags:[a.RuleTag.Whitespace,a.RuleTag.Quickfix,a.RuleTag.Styleguide,a.RuleTag.SingleFile],badExample:"\tWRITE 'hello world'.",goodExample:"  WRITE 'hello world'."}}getMessage(){return"Code should not contain tabs"}getConfig(){return void 0===this.conf.spaces&&(this.conf.spaces=1),this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getRaw().split("\n");return n.forEach(((s,o)=>{const i=n[o].indexOf("\t");if(i>=0){let s=1;for(;n[o].indexOf("\t",i+s-1)>=0;)s++;t.push(this.createIssue(o,i,s,e))}})),t}createIssue(e,t,n,i){const r=new o.Position(e+1,t+1),a=new o.Position(e+1,t+n),l=c.EditHelper.replaceRange(i,r,a," ".repeat(this.getConfig().spaces));return s.Issue.atRange(i,r,a,this.getMessage(),this.getMetadata().key,this.conf.severity,l)}}t.ContainsTab=d},6876(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AddTestAttributes=t.AddTestAttributesConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(94967),c=n(86696);class l extends i.BasicRuleConfig{}t.AddTestAttributesConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"add_test_attributes",title:"Add test attributes for tests classes with test methods",shortDescription:"Add test attributes DURATION and RISK LEVEL for tests classes with test methods",tags:[c.RuleTag.SingleFile],badExample:"CLASS ltcl_test1 DEFINITION FINAL FOR TESTING.\n  PUBLIC SECTION.\n  PROTECTED SECTION.\n  PRIVATE SECTION.\n    METHODS test FOR TESTING RAISING cx_static_check.\nENDCLASS.\n\nCLASS ltcl_test1 IMPLEMENTATION.\n  METHOD test.\n  ENDMETHOD.\nENDCLASS.",goodExample:"CLASS ltcl_test2 DEFINITION FINAL FOR TESTING DURATION SHORT RISK LEVEL HARMLESS.\n  PUBLIC SECTION.\n  PROTECTED SECTION.\n  PRIVATE SECTION.\n    METHODS test FOR TESTING RAISING cx_static_check.\nENDCLASS.\n\nCLASS ltcl_test2 IMPLEMENTATION.\n  METHOD test.\n  ENDMETHOD.\nENDCLASS."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllStructures(a.ClassDefinition)){const n=o.findFirstStatement(r.ClassDefinition);if(void 0===n)continue;const i=null==n?void 0:n.concatTokens().toUpperCase();if(!1===(null==i?void 0:i.includes(" FOR TESTING")))continue;const a=null==i?void 0:i.includes(" DURATION "),c=null==i?void 0:i.includes(" RISK LEVEL ");if(!0===a&&!0===c)continue;let l=!1;for(const e of o.findAllStatements(r.MethodDef))e.concatTokens().toUpperCase().includes(" FOR TESTING")&&(l=!0);!1!==l&&(!1===a&&t.push(s.Issue.atStatement(e,n,"Add DURATION",this.getMetadata().key,this.getConfig().severity)),!1===c&&t.push(s.Issue.atStatement(e,n,"Add RISK LEVEL",this.getMetadata().key,this.getConfig().severity)))}return t}}t.AddTestAttributes=d},6883(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Language=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.seq)("LANGUAGE",(0,s.altPrio)("SQLSCRIPT","SQL","GRAPH"))}}t.Language=o},7119(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterListS=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.plus)(o.ParameterS)}}t.ParameterListS=i},7167(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAssociation=void 0;const s=n(18483),o=n(3125),i=n(83256);class r extends o.Expression{getRunnable(){return(0,o.seq)("ASSOCIATION",(0,o.opt)(i.CDSCardinality),"TO",(0,o.opt)("PARENT"),s.CDSRelation,"ON",s.CDSCondition)}}t.CDSAssociation=r},7251(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BreakId=void 0;const s=n(3125),o=n(82245),i=n(49028);t.BreakId=class{getMatcher(){const e=(0,s.seq)("ID",o.Field),t=(0,s.seq)("BREAK-POINT",e);return(0,s.verNot)(i.Version.Cloud,t)}}},7275(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataDefinition=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(46743),a=n(9048);t.DataDefinition=class{static runSyntax(e,t){if(e.findFirstExpression(s.TypeTable))return a.TypeTable.runSyntax(e,t);let n;e.findFirstExpression(s.Value)&&(n=new r.BasicTypes(t).findValue(e));const c=e.findFirstExpression(s.DefinitionName);if(e.findFirstExpression(s.TypeStructure)&&c)return new o.TypedIdentifier(c.getFirstToken(),t.filename,i.VoidType.get("DataDefinition, TypeStructure"));const l=new r.BasicTypes(t).simpleType(e);return l?n?new o.TypedIdentifier(l.getToken(),t.filename,l.getType(),l.getMeta(),n):l:c?new o.TypedIdentifier(c.getFirstToken(),t.filename,new i.UnknownType("DataDefinition, fallback")):void 0}}},7334(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTableKey=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.alt)("NON-UNIQUE","UNIQUE"),t=(0,s.ver)(i.Version.v740sp02,"EMPTY KEY",i.Version.OpenABAP),n=(0,s.plus)((0,s.alt)((0,s.seq)("WITH",(0,s.failStar)()),o.FieldSub)),r=(0,s.seq)((0,s.alt)("WITHOUT","WITH"),"FURTHER SECONDARY KEYS"),a=(0,s.seq)("ALIAS",o.Field);return(0,s.seq)("WITH",(0,s.opt)(e),(0,s.altPrio)("DEFAULT KEY",t,(0,s.seq)((0,s.opt)((0,s.alt)("SORTED","HASHED")),"KEY",(0,s.alt)((0,s.seq)(o.Field,(0,s.opt)(a),"COMPONENTS",n),n))),(0,s.optPrio)(r),(0,s.optPrio)("READ-ONLY"))}}t.TypeTableKey=r},7450(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictionField=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA5"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.RestrictionField=o},7523(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCall=void 0;const s=n(3125),o=n(82245),i=n(19697);class r extends s.Expression{getRunnable(){return(0,s.seq)(o.MethodName,i.MethodCallParam)}}t.MethodCall=r},7550(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Append=void 0;const s=n(3125),o=n(49028),i=n(82245);t.Append=class{getMatcher(){const e=(0,s.seq)("ASSIGNING",i.FSTarget),t=(0,s.seq)("REFERENCE INTO",i.Target),n=(0,s.seq)("SORTED BY",i.Field),r=(0,s.seq)("FROM",i.Source),a=(0,s.seq)("TO",i.Source),c=(0,s.seq)("TO",i.Target),l=(0,s.alt)(i.SimpleSource4,(0,s.ver)(o.Version.v740sp02,i.Source,o.Version.OpenABAP));return(0,s.seq)("APPEND",(0,s.altPrio)("INITIAL LINE",(0,s.seq)((0,s.optPrio)("LINES OF"),l)),(0,s.optPrio)(r),(0,s.opt)((0,s.alt)((0,s.seq)(a,c),c)),(0,s.opt)((0,s.altPrio)(e,t)),(0,s.optPrio)("CASTING"),(0,s.optPrio)(n))}}},7605(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Provide=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Provide=class{getMatcher(){const e=(0,s.plusPrio)((0,s.altPrio)("*",o.ProvideFieldName)),t=(0,s.seq)("FIELDS",e,"FROM",o.Source,"INTO",o.Target,"VALID",o.Field,"BOUNDS",o.Field,"AND",o.Field),n=(0,s.seq)("FROM",o.Source),r=(0,s.seq)((0,s.plus)(e),n),a=(0,s.seq)("WHERE",o.Cond),c=(0,s.seq)("BETWEEN",o.SimpleSource3,"AND",o.SimpleSource3),l=(0,s.seq)("PROVIDE",(0,s.altPrio)((0,s.plusPrio)(t),(0,s.plusPrio)(r)),(0,s.opt)((0,s.per)(c,a)));return(0,s.verNot)(i.Version.Cloud,l)}}},7656(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Controls=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Controls=class{getMatcher(){const e=(0,s.seq)("TABLEVIEW USING SCREEN",o.Source),t=(0,s.seq)("TYPE",(0,s.alt)(e,"TABSTRIP")),n=(0,s.seq)("CONTROLS",o.NamespaceSimpleName,t);return(0,s.verNot)(i.Version.Cloud,n)}}},7668(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IACLanguageResource=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IARP"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}getDescription(){}}t.IACLanguageResource=o},7720(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterS=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)(o.ParameterName,"=",o.Source)}}t.ParameterS=i},7747(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLEscapeHostVariables=t.SQLEscapeHostVariablesConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(49028),l=n(86696),d=n(71249);class u extends a.BasicRuleConfig{}t.SQLEscapeHostVariablesConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"sql_escape_host_variables",title:"Escape SQL host variables",shortDescription:"Escape SQL host variables, from 740sp05 and in open-abap",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-obsolete-language-elements",tags:[l.RuleTag.Upport,l.RuleTag.Styleguide,l.RuleTag.Quickfix,l.RuleTag.Syntax],badExample:"SELECT * FROM tab INTO TABLE res WHERE field = val.",goodExample:"SELECT * FROM tab INTO TABLE @res WHERE field = @val."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],r=t.getType();if("INTF"===r||"TYPE"===r)return[];if(this.reg.getConfig().getVersion()<c.Version.v740sp02&&this.reg.getConfig().getVersion()!==c.Version.Cloud&&this.reg.getConfig().getVersion()!==c.Version.OpenABAP)return[];for(const t of e.getStatements()){const r=t.get();if(r instanceof s.UpdateDatabase||r instanceof s.ModifyDatabase||r instanceof s.Select||r instanceof s.SelectLoop||r instanceof s.InsertDatabase||r instanceof s.DeleteDatabase){for(const a of t.findAllExpressionsMulti([o.SQLSource,o.SQLSourceSimple])){const t=a.getFirstChild();if((null==t?void 0:t.get())instanceof o.Source&&t.getChildren()[0].get()instanceof o.FieldChain||(null==t?void 0:t.get())instanceof o.SimpleSource3&&t.getChildren()[0].get()instanceof o.FieldChain){if(r instanceof s.ModifyDatabase&&t.getFirstToken().getStr().toUpperCase().startsWith("LS_"))continue;const o="Escape SQL host variables",c=a.getFirstChild().getFirstToken(),l=d.EditHelper.replaceToken(e,c,"@"+(null==c?void 0:c.getStr())),u=i.Issue.atToken(e,t.getFirstToken(),o,this.getMetadata().key,this.conf.severity,l);n.push(u);break}}for(const s of t.findAllExpressions(o.SQLTarget)){if(void 0!==s.findDirectTokenByText("@"))continue;const t="Escape SQL host variables",o=s.getFirstChild().getFirstToken(),r=d.EditHelper.replaceToken(e,o,"@"+(null==o?void 0:o.getStr())),a=i.Issue.atToken(e,s.getFirstToken(),t,this.getMetadata().key,this.conf.severity,r);n.push(a);break}}}return n}}t.SQLEscapeHostVariables=p},7756(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableBody=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.tok)(o.BracketLeft),(0,s.altPrio)((0,s.tok)(o.BracketRightW),(0,s.tok)(o.BracketRight)))}}t.TableBody=i},7831(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FullyTypeITabs=t.FullyTypeITabsConf=void 0;const s=n(77465),o=n(99732),i=n(71759),r=n(50612),a=n(82245),c=n(86696);class l extends s.BasicRuleConfig{}t.FullyTypeITabsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"fully_type_itabs",title:"Fully type internal tables",shortDescription:"No implict table types or table keys",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-the-right-table-type\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-default-key",badExample:"DATA lt_foo TYPE TABLE OF ty.\nDATA lt_bar TYPE STANDARD TABLE OF ty.",goodExample:"DATA lt_foo TYPE STANDARD TABLE OF ty WITH EMPTY KEY.",tags:[c.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements()){if(!(n.get()instanceof r.Data||n.get()instanceof r.Type))continue;const s=n.findFirstExpression(a.TypeTable);if(void 0===s)continue;const o=s.concatTokens().toUpperCase();if(o.includes("TYPE TABLE OF")){const n="Specify table type";t.push(i.Issue.atPosition(e,s.getFirstToken().getStart(),n,this.getMetadata().key,this.conf.severity))}else{if(o.includes(" TABLE FOR "))continue;if(!1===o.includes(" WITH ")&&!1===o.includes(" RANGE OF ")){const n="Specify table key";t.push(i.Issue.atPosition(e,s.getFirstToken().getStart(),n,this.getMetadata().key,this.conf.severity))}}}return t}}t.FullyTypeITabs=d},7928(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownTypes=t.UnknownTypesConf=void 0;const s=n(52424),o=n(77465),i=n(12620),r=n(71759),a=n(20572),c=n(86696),l=n(15838),d=n(2403),u=n(36453),p=n(20572);class f extends o.BasicRuleConfig{}t.UnknownTypesConf=f,t.UnknownTypes=class{constructor(){this.conf=new f}getMetadata(){return{key:"unknown_types",title:"Unknown types",shortDescription:"Enables check for unknown data types, respects errorNamespace",tags:[c.RuleTag.Syntax]}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){if(!(e instanceof i.ABAPObject))return[];const t=new s.SyntaxLogic(this.reg,e).run().spaghetti,n=this.traverse(t.getTop());return this.removeDuplicates(n)}removeDuplicates(e){const t=[];for(const n of e){let e=!1;for(const s of t)if(n.getStart().equals(s.getStart())){e=!0;break}!0!==e&&t.push(n)}return t}traverse(e){var t;const n=[],s=e.getData();for(const e of s.references){if(e.referenceType===u.ReferenceType.ObjectOrientedUnknownReference&&(null===(t=e.extra)||void 0===t?void 0:t.ooName)){const t=e.extra.ooName+" unknown";n.push(r.Issue.atIdentifier(e.position,t,this.getMetadata().key,this.conf.severity))}if(e.referenceType===u.ReferenceType.TypeReference&&e.resolved instanceof l.TypedIdentifier&&e.resolved.getType()instanceof p.UnknownType){const t=e.resolved.getType().getError();n.push(r.Issue.atIdentifier(e.position,t,this.getMetadata().key,this.conf.severity))}}if(e.getIdentifier().stype!==d.ScopeType.ClassImplementation){const e=s.vars;for(const t in e){const s=e[t],o=this.containsUnknown(s.getType());if(o){const e='Variable "'+t+'" contains unknown: '+o;n.push(r.Issue.atIdentifier(s,e,this.getMetadata().key,this.conf.severity))}}const t=s.types;for(const e in t){const s=t[e],o=this.containsUnknown(s.getType());if(o){const t='Type "'+e+'" contains unknown: '+o;n.push(r.Issue.atIdentifier(s,t,this.getMetadata().key,this.conf.severity))}}}for(const e in s.idefs){const t=s.idefs[e],o=this.checkParameters(t);if(o){const e="Contains unknown, "+o.found;n.push(r.Issue.atIdentifier(o.id,e,this.getMetadata().key,this.conf.severity))}}for(const e in s.cdefs){const t=s.cdefs[e],o=this.checkParameters(t);if(o){const e="Contains unknown, "+o.found;n.push(r.Issue.atIdentifier(o.id,e,this.getMetadata().key,this.conf.severity))}}for(const t of e.getChildren())n.push(...this.traverse(t));return n}checkParameters(e){var t;for(const n of(null===(t=e.getMethodDefinitions())||void 0===t?void 0:t.getAll())||[])for(const e of n.getParameters().getAll()){const t=this.containsUnknown(e.getType());if(t)return{id:e,found:t}}for(const t of e.getEvents()||[])for(const e of t.getParameters()){const t=this.containsUnknown(e.getType());if(t)return{id:e,found:t}}}containsUnknown(e){if(e instanceof a.UnknownType)return e.getError();if(e instanceof a.StructureType)for(const t of e.getComponents()){const e=this.containsUnknown(t.type instanceof l.TypedIdentifier?t.type.getType():t.type);if(e)return e}else if(e instanceof a.TableType)return this.containsUnknown(e.getRowType())}}},8071(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectLoop=void 0;const s=n(82245);t.SelectLoop=class{getMatcher(){return new s.SelectLoop}}},8306(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DangerousStatement=t.DangerousStatementConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{constructor(){super(...arguments),this.execSQL=!0,this.kernelCall=!0,this.systemCall=!0,this.insertReport=!0,this.generateDynpro=!0,this.generateReport=!0,this.generateSubroutine=!0,this.deleteReport=!0,this.deleteTextpool=!0,this.insertTextpool=!0,this.deleteDynpro=!0,this.exportDynpro=!0,this.dynamicSQL=!0}}t.DangerousStatementConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"dangerous_statement",title:"Dangerous statement",shortDescription:"Detects potentially dangerous statements",extendedInformation:"Dynamic SQL: Typically ABAP logic does not need dynamic SQL,\ndynamic SQL can potentially create SQL injection problems",tags:[c.RuleTag.SingleFile,c.RuleTag.Security]}}getDescription(e){return"Potential dangerous statement "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements()){const o=n.get();let r;this.conf.execSQL&&o instanceof s.ExecSQL?r="EXEC SQL":this.conf.kernelCall&&o instanceof s.CallKernel?r="KERNEL CALL":this.conf.systemCall&&o instanceof s.SystemCall?r="SYSTEM-CALL":this.conf.insertReport&&o instanceof s.InsertReport?r="INSERT REPORT":this.conf.generateDynpro&&o instanceof s.GenerateDynpro?r="GENERATE DYNPRO":this.conf.generateReport&&o instanceof s.GenerateReport?r="GENERATE REPORT":this.conf.generateSubroutine&&o instanceof s.GenerateSubroutine?r="GENERATE SUBROUTINE":this.conf.deleteReport&&o instanceof s.DeleteReport?r="DELETE REPORT":this.conf.deleteTextpool&&o instanceof s.DeleteTextpool?r="DELETE TEXTPOOL":this.conf.insertTextpool&&o instanceof s.InsertTextpool?r="INSERT TEXTPOOL":this.conf.deleteDynpro&&o instanceof s.DeleteDynpro?r="DELETE DYNPRO":this.conf.exportDynpro&&o instanceof s.ExportDynpro&&(r="EXPORT DYNPRO"),r&&t.push(i.Issue.atStatement(e,n,this.getDescription(r),this.getMetadata().key,this.conf.severity)),this.conf.dynamicSQL&&(r=this.findDynamicSQL(n),r&&t.push(i.Issue.atStatement(e,n,this.getDescription(r),this.getMetadata().key,this.conf.severity)))}return t}findDynamicSQL(e){const t=e.get();if(t instanceof s.UpdateDatabase||t instanceof s.Select||t instanceof s.SelectLoop||t instanceof s.InsertDatabase||t instanceof s.ModifyDatabase||t instanceof s.DeleteDatabase){const t=e.findFirstExpression(o.Dynamic);if(t&&void 0===t.findDirectExpression(o.Constant))return"Dynamic SQL"}}}t.DangerousStatement=d},8410(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodImplementation=void 0;const s=n(82245),o=n(2416),i=n(2403),r=n(36453),a=n(82054),c=n(67240);t.MethodImplementation=class{runSyntax(e,t){const n=new o.ObjectOriented(t.scope),l=t.scope.getName(),d=e.findFirstExpression(s.MethodName).getFirstToken(),u=null==d?void 0:d.getStr(),p=t.scope.findClassDefinition(l);if(void 0===p){const n='Class definition for "'+l+'" not found';return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}const{method:f}=n.searchMethodName(p,u);if(p.isForTesting()&&(null==f?void 0:f.getVisibility())!==c.Visibility.Private&&["SETUP","TEARDOWN","CLASS_SETUP","CLASS_TEARDOWN"].includes(u.toUpperCase())){const n='Special test method "'+u+'" must be private';return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}const g=e.getFirstToken().getStart();if(!1===(null==f?void 0:f.isStatic())&&(t.scope.push(i.ScopeType.MethodInstance,u,g,t.filename),t.scope.addList(p.getAttributes().getInstance())),t.scope.push(i.ScopeType.Method,u,g,t.filename),void 0!==f){t.scope.addReference(d,f,r.ReferenceType.MethodImplementationReference,t.filename),t.scope.addList(f.getParameters().getAll());for(const e of n.findInterfaces(p)){if(!1===u.toUpperCase().startsWith(e.name.toUpperCase()+"~"))continue;const n=t.scope.findInterfaceDefinition(e.name);void 0!==n&&t.scope.addReference(d,n,r.ReferenceType.ObjectOrientedReference,t.filename)}}else{const n='Method definition "'+u+'" not found';t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}}}},8510(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DoubleSpace=t.DoubleSpaceConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(89301),a=n(75457),c=n(52024),l=n(50612),d=n(86789),u=n(71249),p=n(86696);class f extends i.BasicRuleConfig{constructor(){super(...arguments),this.keywords=!0,this.skipKeywords=["CHANGING","EXPORTING","OTHERS"],this.startParen=!0,this.endParen=!0,this.afterColon=!0}}t.DoubleSpaceConf=f;class g extends o.ABAPRule{constructor(){super(...arguments),this.conf=new f}getMetadata(){return{key:"double_space",title:"Double space",shortDescription:"Checks that only a single space follows certain common statements.",tags:[p.RuleTag.Whitespace,p.RuleTag.Quickfix,p.RuleTag.SingleFile],badExample:"DATA  foo TYPE i.",goodExample:"DATA foo TYPE i."}}getMessage(){return"Remove double space"}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skipKeywords&&(this.conf.skipKeywords=(new f).skipKeywords)}runParsed(e){let t=[];for(const n of e.getStatements())n.get()instanceof c.NativeSQL||(!0!==this.conf.keywords||n.get()instanceof c.Unknown||n.get()instanceof l.MethodDef||n.get()instanceof c.MacroCall||n.get()instanceof l.Events||n.get()instanceof c.MacroContent||(t=t.concat(this.checkKeywords(n,e))),t=t.concat(this.checkParen(n,e)));t=t.concat(this.checkAfterColon(e));const n=[];for(const e of t)-1===n.findIndex((t=>t.getStart().equals(e.getStart())))&&n.push(e);return n}checkAfterColon(e){const t=[];let n;if(!0!==this.conf.afterColon)return[];for(const o of e.getStatements()){const i=o.getColon();if(void 0!==i&&(void 0===n||n.getCol()!==i.getCol())){n=i.getStart();for(const i of o.getTokens()){if(i.getRow()!==n.getRow())return[];if(!(i.getCol()<n.getCol())){if(i.getCol()>n.getCol()+2){const o=new d.Position(n.getRow(),n.getCol()+2),r=new d.Position(i.getRow(),i.getCol()),a=u.EditHelper.deleteRange(e,o,r);t.push(s.Issue.atRange(e,o,r,this.getMessage(),this.getMetadata().key,this.conf.severity,a))}break}}}}return t}checkParen(e,t){const n=[];let o;for(const i of e.getTokens())if(void 0!==o){if(!0===this.getConfig().startParen&&o.getRow()===i.getRow()&&o instanceof r.ParenLeftW&&!(i instanceof r.Comment)&&o.getEnd().getCol()+1<i.getCol()){const r=new d.Position(o.getRow(),o.getCol()+2),a=new d.Position(i.getRow(),i.getCol()),c=u.EditHelper.deleteRange(t,r,a);!1===this.pragmaInRange(e.getPragmas(),r,a)&&n.push(s.Issue.atRange(t,r,a,this.getMessage(),this.getMetadata().key,this.conf.severity,c))}if(!0===this.getConfig().endParen&&o.getRow()===i.getRow()&&!(o instanceof r.ParenLeftW)&&(i instanceof r.WParenRightW||i instanceof r.WParenRight)&&o.getEnd().getCol()+1<i.getCol()){const r=new d.Position(o.getEnd().getRow(),o.getEnd().getCol()+1),a=new d.Position(i.getRow(),i.getCol()),c=u.EditHelper.deleteRange(t,r,a);!1===this.pragmaInRange(e.getPragmas(),r,a)&&n.push(s.Issue.atRange(t,r,a,this.getMessage(),this.getMetadata().key,this.conf.severity,c))}o=i}else o=i;return n}pragmaInRange(e,t,n){let s=!1;for(const o of e)o.getStart().isBetween(t,n)&&(s=!0);return s}checkKeywords(e,t){const n=[];let o;if(void 0!==e.getColon()||e.getPragmas().length>0)return[];for(const i of e.getTokenNodes()){if(void 0===o){o=i;continue}const e=o.get().getStr().toUpperCase();if(o instanceof a.TokenNodeRegex||"("===e||")"===e||this.getConfig().skipKeywords.some((t=>t.toUpperCase()===e)))o=i;else{if(o.get().getStart().getRow()===i.get().getStart().getRow()&&o.get().getEnd().getCol()+1<i.get().getStart().getCol()){const e=new d.Position(o.get().getEnd().getRow(),o.get().getEnd().getCol()+1),r=new d.Position(i.get().getRow(),i.get().getCol()),a=u.EditHelper.deleteRange(t,e,r);return n.push(s.Issue.atRange(t,e,r,this.getMessage(),this.getMetadata().key,this.conf.severity,a)),n}o=i}}return[]}}t.DoubleSpace=g},8513(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Assign=void 0;const s=n(82245),o=n(93170),i=n(25037),r=n(20572),a=n(53414),c=n(3240),l=n(82054);t.Assign=class{runSyntax(e,t){var n;const d=e.findDirectExpression(s.AssignSource),u="COMPONENT"===(null===(n=null==d?void 0:d.getFirstChild())||void 0===n?void 0:n.concatTokens().toUpperCase()),p=(null==d?void 0:d.findDirectExpressionsMulti([s.Source,s.SimpleSource3]))||[],f=p[p.length-1];let g;const h=null==d?void 0:d.getChildren()[0],T=null==d?void 0:d.getChildren()[1],m=null==d?void 0:d.getChildren()[2];if("=>"===(null==T?void 0:T.concatTokens())&&h&&(null==m?void 0:m.get())instanceof s.Dynamic){const n=h.concatTokens();if(void 0===(t.scope.findClassDefinition(n)||t.scope.findVariable(n))&&t.scope.getDDIC().inErrorNamespace(n)&&!1===n.startsWith("(")){const s=n+" not found, dynamic";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),s))}g=r.VoidType.get("Dynamic")}else g=o.Source.runSyntax(f,t,void 0,!1,!1===u);if(5===(null==d?void 0:d.getChildren().length)&&u){const n=p[p.length-2],s=o.Source.runSyntax(n,t);if(!1===new c.TypeUtils(t.scope).isAssignable(s,new r.CharacterType(30))){const n="component name must be charlike";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}(void 0===g||(null==d?void 0:d.findDirectExpression(s.Dynamic)))&&(g=r.AnyType.get());for(const e of(null==d?void 0:d.findAllExpressions(s.Dynamic))||[])a.Dynamic.runSyntax(e,t);const y=e.findDirectExpression(s.FSTarget);y&&(u?i.FSTarget.runSyntax(y,t,r.AnyType.get()):i.FSTarget.runSyntax(y,t,g));for(const n of e.findAllExpressions(s.Source))n!==f&&o.Source.runSyntax(n,t)}}},8593(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Find=void 0;const s=n(3125),o=n(82245);t.Find=class{getMatcher(){const e=(0,s.per)("IGNORING CASE","RESPECTING CASE","IN BYTE MODE","IN CHARACTER MODE",(0,s.seq)("OF",o.Source),(0,s.seq)("FROM",o.Source),(0,s.seq)("TO",o.Source),(0,s.seq)("MATCH OFFSET",o.Target),(0,s.seq)("MATCH LINE",o.Target),(0,s.seq)("MATCH COUNT",o.Target),(0,s.seq)("MATCH LENGTH",o.Target),(0,s.seq)("LENGTH",o.Source),(0,s.seq)("RESULTS",o.Target),(0,s.seq)("SUBMATCHES",o.Target),(0,s.seq)("SUBMATCHES",o.Target,o.Target),(0,s.seq)("SUBMATCHES",(0,s.plus)(o.Target))),t=(0,s.seq)("SECTION LENGTH",o.Source,"OF"),n=(0,s.seq)((0,s.optPrio)((0,s.altPrio)("TABLE","SECTION OFFSET",t)),o.Source);return(0,s.seq)("FIND",(0,s.opt)((0,s.altPrio)("FIRST OCCURRENCE OF","ALL OCCURRENCES OF")),o.FindType,o.Source,"IN",n,(0,s.opt)(e))}}},8606(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchBody=void 0;const s=n(82245),o=n(93170),i=n(82054),r=n(20572);t.SwitchBody=class{static runSyntax(e,t){if(void 0===e)return;const n=e.findExpressionAfterToken("THEN");if(!((null==n?void 0:n.get())instanceof s.Source)){const n="SwitchBody, unexpected";return t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(i.CheckSyntaxKey)}const a=o.Source.runSyntax(n,t);for(const i of e.findDirectExpressions(s.Source))i!==n&&o.Source.runSyntax(i,t);return a}}},8636(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Unassign=void 0;const s=n(3125),o=n(82245);t.Unassign=class{getMatcher(){return(0,s.seq)("UNASSIGN",o.TargetFieldSymbol)}}},8761(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Clear=void 0;const s=n(3125),o=n(82245);t.Clear=class{getMatcher(){const e=(0,s.seq)("WITH",o.Source),t=(0,s.altPrio)("IN CHARACTER MODE","IN BYTE MODE");return(0,s.seq)("CLEAR",o.Target,(0,s.optPrio)(e),(0,s.optPrio)(t))}}},8788(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SICFConsistency=t.SICFConsistencyConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(86789);class a extends o.BasicRuleConfig{constructor(){super(...arguments),this.skipNames=[]}}t.SICFConsistencyConf=a,t.SICFConsistency=class{constructor(){this.conf=new a}getMetadata(){return{key:"sicf_consistency",title:"SICF consistency",shortDescription:"Checks the validity of ICF services",extendedInformation:"* Class defined in handler must exist\n* Class must not have any syntax errors\n* Class must implement interface IF_HTTP_EXTENSION"}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skipNames&&(this.conf.skipNames=[])}initialize(e){return this.reg=e,this}run(e){const t=[];if(!(e instanceof i.ICFService))return[];const n=e.getHandlerList();if(void 0===n)return[];for(const o of n){const n=this.reg.getObject("CLAS",o);if(void 0===n){if(this.conf.skipNames&&this.conf.skipNames.some((e=>e.toUpperCase()===o.toUpperCase())))continue;if(!0===new RegExp(this.reg.getConfig().getSyntaxSetttings().errorNamespace,"i").test(o)){const n="Handler class "+o+" not found",i=s.Issue.atPosition(e.getFiles()[0],new r.Position(1,1),n,this.getMetadata().key,this.conf.severity);t.push(i)}continue}const i=n.getClassDefinition();if(void 0!==i){if(this.findImplementing(i).findIndex((e=>"IF_HTTP_EXTENSION"===e.name.toUpperCase()))<0){const n="Handler class "+o+" must implement IF_HTTP_EXTENSION",i=s.Issue.atPosition(e.getFiles()[0],new r.Position(1,1),n,this.getMetadata().key,this.conf.severity);t.push(i)}}else{const n="Syntax error in class "+o,i=s.Issue.atPosition(e.getFiles()[0],new r.Position(1,1),n,this.getMetadata().key,this.conf.severity);t.push(i)}}return t}findImplementing(e){let t=e.interfaces,n=e.superClassName;for(;void 0!==n;){const e=this.reg.getObject("CLAS",n);if(void 0===e)break;const s=e.getClassDefinition();if(void 0===s)break;t=t.concat(s.interfaces),n=s.superClassName}return t}}},8813(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Supply=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Supply=class{getMatcher(){const e=(0,s.seq)(o.Field,"=",o.Source),t=(0,s.seq)("SUPPLY",(0,s.plus)(e),"TO CONTEXT",o.Field);return(0,s.verNot)(i.Version.Cloud,t)}}},8821(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallFunction=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallFunction=class{getMatcher(){const e=(0,s.verNot)(i.Version.Cloud,(0,s.seq)("STARTING NEW TASK",o.SimpleSource2)),t=(0,s.verNot)(i.Version.Cloud,(0,s.str)("IN UPDATE TASK")),n=(0,s.seq)("UNIT",o.Source),r=(0,s.verNot)(i.Version.Cloud,(0,s.seq)("IN BACKGROUND",(0,s.altPrio)("TASK",n))),a=(0,s.seq)("CALLING",o.MethodSource,"ON END OF TASK"),c=(0,s.seq)("PERFORMING",o.FormName,"ON END OF TASK"),l=(0,s.str)("AS SEPARATE UNIT"),d=(0,s.str)("KEEPING LOGICAL UNIT OF WORK"),u=(0,s.per)(e,t,r,o.Destination,a,c,l,d),p=(0,s.seq)("EXCEPTION-TABLE",o.Source),f=(0,s.alt)((0,s.seq)("PARAMETER-TABLE",o.Source,(0,s.opt)(p)),p);return(0,s.seq)("CALL",(0,s.altPrio)("FUNCTION",(0,s.verNot)(i.Version.Cloud,"CUSTOMER-FUNCTION")),o.FunctionName,(0,s.opt)(u),(0,s.alt)(o.FunctionParameters,f))}}},8870(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDynpro=void 0;const s=n(3125),o=n(82245),i=n(49028);t.DeleteDynpro=class{getMatcher(){const e=(0,s.seq)("DELETE DYNPRO",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},8892(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormUsing=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("USING",(0,s.plus)(o.FormParam))}}t.FormUsing=i},8955(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstructorVisibilityPublic=t.ConstructorVisibilityPublicConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(84383),a=n(67240);class c extends o.BasicRuleConfig{}t.ConstructorVisibilityPublicConf=c,t.ConstructorVisibilityPublic=class{constructor(){this.conf=new c}getMetadata(){return{key:"constructor_visibility_public",title:"Check constructor visibility is public",shortDescription:"Constructor must be placed in the public section, even if the class is not CREATE PUBLIC.",extendedInformation:"\nThis only applies to global classes.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#if-your-global-class-is-create-private-leave-the-constructor-public\nhttps://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abeninstance_constructor_guidl.htm",tags:[i.RuleTag.Styleguide,i.RuleTag.SingleFile]}}getMessage(){return"Constructor visibility should be public"}getConfig(){return this.conf}initialize(e){return this}setConfig(e){this.conf=e}run(e){const t=[];if(!(e instanceof r.Class))return[];const n=e.getClassDefinition();if(void 0===n)return[];for(const e of n.methods)if("CONSTRUCTOR"===e.name.toUpperCase()&&e.visibility!==a.Visibility.Public){const n=s.Issue.atIdentifier(e.identifier,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(n)}return t}}},8986(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertFieldGroup=void 0;const s=n(82245),o=n(93170),i=n(9646);t.InsertFieldGroup=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource1))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},9048(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTable=void 0;const s=n(15838),o=n(46743),i=n(82245),r=n(20572),a=n(2403),c=n(39160);t.TypeTable=class{static runSyntax(e,t,n){let l=e.findFirstExpression(i.DefinitionName);if(void 0===l&&(l=e.findFirstExpression(i.NamespaceSimpleName)),void 0===l)return;const d=l.getFirstToken();let u=n||"";"TYPES"===e.getFirstToken().getStr().toUpperCase()&&(u+=d.getStr(),t.scope.getType()!==a.ScopeType.ClassDefinition&&t.scope.getType()!==a.ScopeType.Interface||(u=t.scope.getName()+"=>"+u));let p=new o.BasicTypes(t).parseTable(e,u);if(void 0===p)return new s.TypedIdentifier(d,t.filename,new r.UnknownType("TableType, fallback"));for(const t of e.findAllExpressions(i.TypeTableKey)){const e=c.TypeTableKey.runSyntax(t,p);e&&(p=e)}return new s.TypedIdentifier(d,t.filename,p)}}},9111(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UseBoolExpression=t.UseBoolExpressionConf=void 0;const s=n(71759),o=n(50612),i=n(82245),r=n(94967),a=n(99732),c=n(77465),l=n(49028),d=n(86696),u=n(71249);class p extends c.BasicRuleConfig{}t.UseBoolExpressionConf=p;class f extends a.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"use_bool_expression",title:"Use boolean expression",shortDescription:"Use boolean expression, xsdbool from 740sp08 and up, boolc from 702 and up",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-xsdbool-to-set-boolean-variables",tags:[d.RuleTag.Upport,d.RuleTag.Styleguide,d.RuleTag.Quickfix,d.RuleTag.SingleFile],badExample:"IF line IS INITIAL.\n  has_entries = abap_false.\nELSE.\n  has_entries = abap_true.\nENDIF.\n\nDATA(fsdf) = COND #( WHEN foo <> bar THEN abap_true ELSE abap_false ).",goodExample:"DATA(has_entries) = xsdbool( line IS NOT INITIAL ).\n\nDATA(fsdf) = xsdbool( foo <> bar )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n,a,c,d,p,f,g,h;const T=[],m=e.getStructure(),y=this.reg.getConfig().getVersion();if(void 0===m||y<l.Version.v702&&y!==l.Version.Cloud)return[];for(const y of m.findAllStructures(r.If)){if(void 0!==y.findDirectStructure(r.ElseIf))continue;const m=null===(t=y.findDirectStructure(r.Body))||void 0===t?void 0:t.findAllStatementNodes();if(void 0===m||1!==m.length)continue;const S=m[0];if(!(S.get()instanceof o.Move))continue;const v=null===(a=null===(n=y.findDirectStructure(r.Else))||void 0===n?void 0:n.findDirectStructure(r.Body))||void 0===a?void 0:a.findAllStatementNodes();if(void 0===v||1!==v.length)continue;const E=v[0];if(!(E.get()instanceof o.Move))continue;let C=null===(c=S.findFirstExpression(i.Target))||void 0===c?void 0:c.concatTokens();(null==C?void 0:C.startsWith("DATA("))&&(C=C.substr(5,C.length-6));const b=null===(d=E.findFirstExpression(i.Target))||void 0===d?void 0:d.concatTokens();if(void 0===C||void 0===b||C.toUpperCase()!==b.toUpperCase())continue;const I=null===(p=S.findFirstExpression(i.Source))||void 0===p?void 0:p.concatTokens().toUpperCase(),D=null===(f=E.findFirstExpression(i.Source))||void 0===f?void 0:f.concatTokens().toUpperCase();if("ABAP_TRUE"===I&&"ABAP_FALSE"===D||"ABAP_FALSE"===I&&"ABAP_TRUE"===D){const t=this.reg.getConfig().getVersion()>=l.Version.v740sp08||this.reg.getConfig().getVersion()===l.Version.Cloud?"xsdbool":"boolc",n="ABAP_FALSE"===I,r=`Use ${t} instead of IF`+(n?", negate expression":""),a=y.getFirstToken().getStart(),c=y.getLastToken().getEnd(),d=C+" = "+t+"( "+(n?"NOT ( ":"")+(null===(h=null===(g=y.findFirstStatement(o.If))||void 0===g?void 0:g.findFirstExpression(i.Cond))||void 0===h?void 0:h.concatTokens())+(n?" )":"")+" ).",p=u.EditHelper.replaceRange(e,a,c,d);T.push(s.Issue.atRange(e,a,c,r,this.getMetadata().key,this.conf.severity,p))}}if(y>=l.Version.v740sp08||y===l.Version.Cloud)for(const t of m.findAllExpressions(i.CondBody)){const n=t.concatTokens().toUpperCase();if(n.endsWith(" THEN ABAP_TRUE ELSE ABAP_FALSE")||n.endsWith(" THEN ABAP_TRUE")||n.endsWith(" THEN ABAP_FALSE ELSE ABAP_TRUE")){const n="Use xsdbool";T.push(s.Issue.atRange(e,t.getFirstToken().getStart(),t.getLastToken().getEnd(),n,this.getMetadata().key,this.conf.severity))}}return T}}t.UseBoolExpression=f},9203(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CloseCursor=void 0;const s=n(82245),o=n(25287);t.CloseCursor=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.SQLSourceSimple))o.SQLSource.runSyntax(n,t)}}},9224(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constant=void 0;const s=n(82245),o=n(46743),i=n(15838),r=n(20572),a=n(38788);t.Constant=class{runSyntax(e,t){const n=new o.BasicTypes(t),c=n.simpleType(e);if(c){const s=n.findValue(e),o=["read_only","static"];return new i.TypedIdentifier(c.getToken(),t.filename,c.getType(),o,s)}const l=e.findFirstExpression(s.DefinitionName);if(l)return new i.TypedIdentifier(l.getFirstToken(),t.filename,new r.UnknownType("constant, fallback"));throw new a.AssertError("Statement Constant: unexpected structure")}}},9363(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WBracketLeftW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" [ "}}t.WBracketLeftW=o},9452(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyLineinStatement=t.EmptyLineinStatementConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(89301),a=n(52024),c=n(71249),l=n(86696),d=n(86789);class u extends i.BasicRuleConfig{constructor(){super(...arguments),this.allowChained=!1}}t.EmptyLineinStatementConf=u;class p extends o.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"empty_line_in_statement",title:"Find empty lines in statements",shortDescription:"Checks that statements do not contain empty lines.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#dont-obsess-with-separating-blank-lines\n\nhttps://docs.abapopenchecks.org/checks/41/",tags:[l.RuleTag.Quickfix,l.RuleTag.Whitespace,l.RuleTag.SingleFile,l.RuleTag.Styleguide],badExample:"WRITE\n\nhello.",goodExample:"WRITE hello."}}getMessage(){return"Remove empty line in statement"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(void 0===e.getStructure())return[];for(const t of e.getStatements())if(t.get()instanceof a.Unknown||t.get()instanceof a.NativeSQL)return[];let n;for(const o of e.getTokens())if(!(void 0===n&&o instanceof r.Comment)){if(void 0===n&&(n=o.getRow()),n&&o.getRow()-n>=2){const i=c.EditHelper.deleteRange(e,new d.Position(n+1,1),o.getStart()),r=s.Issue.atToken(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity,i);t.push(r)}n=o instanceof r.Punctuation&&"."===o.getStr()||!0===this.conf.allowChained&&o instanceof r.Punctuation&&","===o.getStr()?void 0:o.getRow()}return t}}t.EmptyLineinStatement=p},9466(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameDataElement=void 0;const s=n(84383),o=n(33073);t.RenameDataElement=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof s.DataElement))throw new Error("RenameDataElement, not a data element");let i=[];const r=new o.RenamerHelper(this.reg);return i=i.concat(r.buildXMLFileEdits(e,"ROLLNAME",t,n)),i=i.concat(r.renameFiles(e,t,n)),i=i.concat(r.renameDDICCodeReferences(e,t,n)),i=i.concat(r.renameDDICTABLReferences(e,t,n)),i=i.concat(r.renameDDICTTYPReferences(e,t,n)),i=i.concat(r.renameDDICAUTHReferences(e,t,n)),{documentChanges:i}}}},9549(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferPragmas=t.PreferPragmasConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(52024);class c extends i.BasicRuleConfig{constructor(){super(...arguments),this.check=[{pseudo:"#EC CI_SUBRC",pragma:"SUBRC_OK"},{pseudo:"#EC NEEDED",pragma:"NEEDED"},{pseudo:"#EC NOTEXT",pragma:"NO_TEXT"},{pseudo:"#EC NO_HANDLER",pragma:"NO_HANDLER"}]}}t.PreferPragmasConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"prefer_pragmas",title:"prefer pragmas over pseudo comments ",shortDescription:"prefer pragmas over pseudo comments ",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-pragmas-to-pseudo-comments",tags:[r.RuleTag.SingleFile,r.RuleTag.Styleguide],badExample:'DATA foo1 TYPE i. "#EC NEEDED',goodExample:"DATA foo2 TYPE i ##NEEDED."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=this.getConfig();for(const o of e.getStatements()){if(!(o.get()instanceof a.Comment))continue;const i=o.concatTokens().toUpperCase();if(!1!==i.includes("#EC"))for(const r of n.check)if(i.includes(r.pseudo.toUpperCase())){const n=`Prefer pragma ${r.pragma}`;t.push(s.Issue.atStatement(e,o,n,this.getMetadata().key,this.getConfig().severity))}}return t}}t.PreferPragmas=l},9603(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PackageInterface=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"PINF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.PackageInterface=o},9614(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0,t.Message=class{constructor(e,t,n){this.number=e,void 0===this.number&&(this.number=""),this.message=t,void 0===this.message&&(this.message=""),this.className=n,void 0===this.className&&(this.className="")}getMessageClass(){return this.className}getNumber(){return this.number}getMessage(){return this.message}getPlaceholderCount(){const e=(this.getMessage().match(/&&/g)||[]).length;return(this.getMessage().match(/&/g)||[]).length-2*e}}},9646(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;const s=n(82245),o=n(75457),i=n(69953),r=n(89301),a=n(20572),c=n(66228),l=n(98885),d=n(87309),u=n(36453),p=n(28096),f=n(82245),g=n(68278),h=n(18424),T=n(82054);t.Target=class{static runSyntax(e,t){const n=e.concatTokens();if(n.includes("-")){const s=t.scope.findVariable(n);if(s)return t.scope.addReference(e.getFirstToken(),s,u.ReferenceType.DataWriteReference,t.filename),s.getType()}const h=e.getChildren(),m=h[0];if(void 0===m||!(m instanceof o.ExpressionNode))return;let y=this.findTop(m,t);if(void 0===y){const n=`"${m.getFirstToken().getStr()}" not found, Target`;return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}let S=1;for(;S<=h.length;){const n=h[S];if(void 0===n)break;if(S++,n.get()instanceof r.Dash){if(y instanceof i.UnknownType)return a.VoidType.get(T.CheckSyntaxKey);if(y instanceof a.TableType&&y.isWithHeader()&&y.getRowType()instanceof i.UnknownType)return a.VoidType.get(T.CheckSyntaxKey);if(!(y instanceof a.StructureType||y instanceof a.TableType&&y.isWithHeader()&&y.getRowType()instanceof a.StructureType||y instanceof a.TableType&&y.isWithHeader()&&y.getRowType()instanceof a.VoidType||y instanceof a.VoidType)){const s="Not a structure, target, "+(null==y?void 0:y.constructor.name)+", "+n.concatTokens();return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),s)),a.VoidType.get(T.CheckSyntaxKey)}}else if(n.get()instanceof r.InstanceArrow){if(!(y instanceof a.ObjectReferenceType||y instanceof a.DataReference||y instanceof a.VoidType)){const n="Not an object reference, target";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}}else if(n.get()instanceof f.Dereference){if(!(y instanceof a.DataReference||y instanceof a.VoidType)){const n="Not an object reference, target";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}y instanceof a.VoidType||(y=y.getType())}else if(n.get()instanceof s.ComponentName)y=c.ComponentName.runSyntax(y,n,t);else if(n.get()instanceof s.TableBody){if(!(y instanceof a.TableType||y instanceof a.VoidType||y instanceof i.UnknownType||y instanceof i.UnknownType)){const n='Not a internal table, "[]"';return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}y instanceof a.TableType&&y.isWithHeader()&&(y=new a.TableType(y.getRowType(),Object.assign(Object.assign({},y.getOptions()),{withHeader:!1})))}else if(n instanceof o.ExpressionNode&&n.get()instanceof s.TableExpression){if(!(y instanceof a.TableType||y instanceof a.VoidType||y instanceof i.UnknownType)){const n="Table expression, expected table";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}p.TableExpression.runSyntax(n,t,y),y instanceof a.VoidType||y instanceof i.UnknownType||(y=y.getRowType())}else if(n.get()instanceof s.AttributeName){const e=0===h.length?u.ReferenceType.DataWriteReference:u.ReferenceType.DataReadReference;y=l.AttributeName.runSyntax(y,n,t,e)}}const v=e.findDirectExpression(s.FieldOffset);if(v){if(y instanceof a.XStringType||y instanceof a.StringType){const n="xstring/string offset/length in writer position not possible";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}d.FieldOffset.runSyntax(v,t)}const E=e.findDirectExpression(s.FieldLength);if(E){if(y instanceof a.XStringType||y instanceof a.StringType){const n="xstring/string offset/length in writer position not possible";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}g.FieldLength.runSyntax(E,t)}return y}static findTop(e,t){if(void 0===e)return;const n=e.getFirstToken(),r=n.getStr();if(e.get()instanceof s.TargetField||e.get()instanceof s.TargetFieldSymbol){const e=t.scope.findVariable(r);if(e&&t.scope.addReference(n,e,u.ReferenceType.DataWriteReference,t.filename),r.includes("~")){const e=t.scope.findInterfaceDefinition(r.split("~")[0]);e&&t.scope.addReference(n,e,u.ReferenceType.ObjectOrientedReference,t.filename)}return null==e?void 0:e.getType()}if(e.get()instanceof s.ClassName){const e=t.scope.findObjectDefinition(r);return e?(t.scope.addReference(n,e,u.ReferenceType.ObjectOrientedReference,t.filename),new a.ObjectReferenceType(e)):!1===t.scope.getDDIC().inErrorNamespace(r)?(t.scope.addReference(n,void 0,u.ReferenceType.ObjectOrientedVoidReference,t.filename,{ooName:r,ooType:"CLAS"}),a.VoidType.get(r)):new i.UnknownType(r+" unknown, Target")}if(e.get()instanceof s.Cast&&e instanceof o.ExpressionNode){const n=h.Cast.runSyntax(e,t,void 0);if(n instanceof i.UnknownType){const n="CAST, uknown type";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),a.VoidType.get(T.CheckSyntaxKey)}return n}return new i.UnknownType("unknown target type")}}},9652(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallKernel=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallKernel=class{getMatcher(){const e=(0,s.seq)("CALL",(0,s.altPrio)(o.Constant,o.Field),(0,s.starPrio)(o.KernelId));return(0,s.verNot)(i.Version.Cloud,e)}}},9671(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LogPoint=void 0;const s=n(3125),o=n(82245),i=n(49028);t.LogPoint=class{getMatcher(){const e=(0,s.seq)("SUBKEY",o.Source),t=(0,s.seq)("FIELDS",(0,s.plus)(o.Source)),n=(0,s.seq)("LOG-POINT ID",o.NamespaceSimpleName,(0,s.opt)(e),(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},9742(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionScreen=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028);t.SelectionScreen=class{getMatcher(){const e=(0,s.altPrio)(i.TextElement,i.InlineField),t=(0,s.seq)("BEGIN OF BLOCK",i.BlockName,(0,s.optPrio)("WITH FRAME"),(0,s.optPrio)((0,s.seq)("TITLE",e)),(0,s.optPrio)("NO INTERVALS")),n=(0,s.seq)("END OF BLOCK",i.BlockName),a=(0,s.seq)("NESTING LEVEL",i.Source),c=(0,s.per)((0,s.seq)("AS",(0,s.alt)("WINDOW","SUBSCREEN")),(0,s.seq)("TITLE",e),"NO INTERVALS",a),l=(0,s.seq)("BEGIN OF SCREEN",i.Integer,(0,s.opt)(c)),d=(0,s.seq)("END OF SCREEN",i.Integer),u=(0,s.str)("BEGIN OF LINE"),p=(0,s.str)("END OF LINE"),f=(0,s.seq)("MODIF ID",i.Modif),g=(0,s.seq)("VISIBLE LENGTH",(0,s.regex)(/^\d+$/)),h=(0,s.seq)("ID",(0,s.regex)(/^\w+$/)),T=(0,s.seq)("FOR FIELD",i.FieldSub,(0,s.optPrio)(h)),m=(0,s.per)(T,f,g),y=(0,s.seq)((0,s.opt)((0,s.regex)(/^\/?[\d\w]+$/)),(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.WParenLeft)),i.Integer,(0,s.altPrio)((0,s.tok)(o.ParenRightW),(0,s.tok)(o.ParenRight))),S=(0,s.seq)("COMMENT",y,(0,s.opt)(e),(0,s.opt)(m)),v=(0,s.seq)("USER-COMMAND",(0,s.alt)(i.Field,i.Constant)),E=(0,s.seq)("PUSHBUTTON",y,e,v,(0,s.opt)(f),(0,s.opt)(g)),C=(0,s.seq)("PROGRAM",i.Field),b=(0,s.seq)("DEFAULT",(0,s.opt)(C),"SCREEN",i.Integer),I=(0,s.seq)("TAB",(0,s.tok)(o.WParenLeft),i.Integer,(0,s.tok)(o.ParenRightW),e,v,(0,s.opt)(b),(0,s.opt)(f)),D=(0,s.seq)("FUNCTION KEY",i.Integer),x=(0,s.seq)("SKIP",(0,s.opt)(i.Integer)),P=(0,s.altPrio)("POS_LOW","POS_HIGH"),A=(0,s.regex)(/^(0?[1-9]|[1234567][0-9]|8[0-3])$/),N=(0,s.seq)("POSITION",(0,s.altPrio)(A,P),(0,s.opt)((0,s.seq)("FOR TABLE",i.Field))),O=(0,s.seq)("INCLUDE BLOCKS",i.BlockName),R=(0,s.seq)("BEGIN OF TABBED BLOCK",i.BlockName,"FOR",i.Integer,"LINES",(0,s.optPrio)("NO INTERVALS")),M=(0,s.seq)("ULINE",(0,s.opt)(y),(0,s.opt)(f)),k=(0,s.seq)("INCLUDE PARAMETERS",i.Field),F=(0,s.seq)("INCLUDE SELECT-OPTIONS",i.Field),L=(0,s.seq)("EXCLUDE",(0,s.alt)("IDS","PARAMETERS"),(0,s.regex)(/^\w+$/)),_=(0,s.seq)("BEGIN OF VERSION",(0,s.regex)(/^\w+$/),i.TextElement),w=(0,s.seq)("END OF VERSION",(0,s.regex)(/^\w+$/)),j=(0,s.seq)("SELECTION-SCREEN",(0,s.altPrio)(S,D,x,N,O,F,E,I,M,t,R,n,u,p,k,l,d,L,_,w,b));return(0,s.verNot)(r.Version.Cloud,j)}}},9872(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetRunTime=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetRunTime=class{getMatcher(){const e=(0,s.seq)("GET RUN TIME FIELD",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},9963(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetHandler=void 0;const s=n(3125),o=n(82245);t.SetHandler=class{getMatcher(){const e=(0,s.seq)("ACTIVATION",o.Source),t=(0,s.seq)("FOR",(0,s.altPrio)("ALL INSTANCES",o.Source));return(0,s.seq)("SET HANDLER",(0,s.plus)(o.MethodSource),(0,s.optPrio)(t),(0,s.optPrio)(e))}}},10079(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormatType=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SPLO"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.FormatType=o},10117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ForbiddenVoidType=t.ForbiddenVoidTypeConf=void 0;const s=n(77465),o=n(71759),i=n(12620),r=n(52424),a=n(13075),c=n(2403),l=n(20572),d=n(36453);class u extends s.BasicRuleConfig{constructor(){super(...arguments),this.check=[]}}t.ForbiddenVoidTypeConf=u,t.ForbiddenVoidType=class{constructor(){this.conf=new u}getMetadata(){return{key:"forbidden_void_type",title:"Forbidden Void Types",shortDescription:"Avoid usage of specified void types.",extendedInformation:"Inspiration:\nBOOLEAN, BOOLE_D, CHAR01, CHAR1, CHAR10, CHAR12, CHAR128, CHAR2, CHAR20, CHAR4, CHAR70,\nDATS, TIMS, DATUM, FLAG, INT4, NUMC3, NUMC4, SAP_BOOL, TEXT25, TEXT80, X255, XFELD"}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.check&&(this.conf.check=[])}initialize(e){return this.reg=e,this}run(e){return e instanceof i.ABAPObject&&0!==this.conf.check.length?this.traverse(new r.SyntaxLogic(this.reg,e).run().spaghetti.getTop()):[]}traverse(e){var t,n,s;let i=[];const r="Forbidden void type: ";if(e.getIdentifier().stype!==c.ScopeType.BuiltIn)for(const a of e.getData().references)a.referenceType===d.ReferenceType.ObjectOrientedVoidReference&&void 0!==(null===(t=a.extra)||void 0===t?void 0:t.ooName)&&this.isForbiddenName(null===(n=a.extra)||void 0===n?void 0:n.ooName)&&i.push(o.Issue.atIdentifier(a.position,r+(null===(s=a.extra)||void 0===s?void 0:s.ooName),this.getMetadata().key,this.conf.severity)),a.referenceType!==d.ReferenceType.VoidType&&a.referenceType!==d.ReferenceType.TableVoidReference||!this.isForbiddenName(a.position.getName())||i.push(o.Issue.atIdentifier(a.position,r+a.position.getName(),this.getMetadata().key,this.conf.severity));for(const t of e.getChildren())i=i.concat(this.traverse(t));return i}isForbiddenType(e){if(e instanceof l.StructureType)return e.getComponents().some((e=>this.isForbiddenType(e.type)));if(!(e instanceof a.VoidType))return!1;const t=e.getVoided();return this.isForbiddenName(t)}isForbiddenName(e){if(void 0===e)return!1;for(const t of this.conf.check)if(!0===new RegExp(t,"i").test(e))return!0;return!1}}},10242(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnusedMacros=t.UnusedMacrosConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(12620),a=n(71249);class c extends o.BasicRuleConfig{constructor(){super(...arguments),this.skipNames=[]}}t.UnusedMacrosConf=c,t.UnusedMacros=class{constructor(){this.conf=new c}getMetadata(){return{key:"unused_macros",title:"Unused macros",shortDescription:"Checks for unused macro definitions definitions",tags:[i.RuleTag.Quickfix],badExample:"DEFINE foobar1.\n  WRITE 'hello'.\nEND-OF-DEFINITION.",goodExample:"DEFINE foobar2.\n  WRITE 'hello'.\nEND-OF-DEFINITION.\n\nfoobar2."}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skipNames&&(this.conf.skipNames=[])}initialize(e){return this.reg=e,this}run(e){var t;const n=[];if(!(e instanceof r.ABAPObject))return[];const o=this.reg.getMacroReferences();for(const i of e.getABAPFiles())for(const e of o.listDefinitionsByFile(i.getFilename()))if(0===o.listUsagesbyMacro(i.getFilename(),e).length&&!1===(null===(t=this.conf.skipNames)||void 0===t?void 0:t.includes(e.getStr().toUpperCase()))){const t="Unused macro definition: "+e.getStr(),r=o.getDefinitionRange(i.getFilename(),e),c=a.EditHelper.deleteRange(i,r.start,r.end);n.push(s.Issue.atToken(i,e,t,this.getMetadata().key,this.conf.severity,c))}return n}}},10282(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyEvent=t.EmptyEventConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(94967),a=n(86696),c=n(84383),l=n(94894);class d extends i.BasicRuleConfig{}t.EmptyEventConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"empty_event",title:"Empty selection screen or list processing event block",shortDescription:"Empty selection screen or list processing event block",extendedInformation:"",tags:[a.RuleTag.SingleFile],badExample:"\nINITIALIZATION.\n  WRITE 'hello'.\nEND-OF-SELECTION.",goodExample:"\nSTART-OF-SELECTION.\n  PERFORM sdf.\n  COMMIT WORK."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if(!(t instanceof c.Program)||t.isInclude())return n;const o=e.getStructure();if(void 0===o)return[];let i,a=[];for(const t of o.getChildren()||[])if(l.SELECTION_EVENTS.some((e=>t.get()instanceof e)))void 0!==i&&0===a.length&&n.push(s.Issue.atStatement(e,i,"Empty event",this.getMetadata().key,this.getConfig().severity)),a=[],i=t;else if(t.get()instanceof r.Normal){const e=t;if(l.DECLARATION_STUFF.some((t=>{var n;return(null===(n=e.getFirstStatement())||void 0===n?void 0:n.get())instanceof t})))continue;a.push(t)}else void 0!==i&&0===a.length&&n.push(s.Issue.atStatement(e,i,"Empty event",this.getMetadata().key,this.getConfig().severity)),a=[],i=void 0;return void 0!==i&&0===a.length&&n.push(s.Issue.atStatement(e,i,"Empty event",this.getMetadata().key,this.getConfig().severity)),n}}t.EmptyEvent=u},10315(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessConfigurationSet=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SCP1"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.BusinessConfigurationSet=o},10392(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WParenLeft=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ("}}t.WParenLeft=o},10415(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetDataset=class{getMatcher(){const e=(0,s.seq)("SET DATASET",o.Source,"POSITION",(0,s.alt)(o.Source,"END OF FILE"));return(0,s.verNot)(i.Version.Cloud,e)}}},10456(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LineOnlyPunc=t.LineOnlyPuncConf=void 0;const s=n(71759),o=n(86789),i=n(99732),r=n(77465),a=n(84383),c=n(86696),l=n(71249),d=n(5518);class u extends r.BasicRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0}}t.LineOnlyPuncConf=u;class p extends i.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"line_only_punc",title:"Line containing only punctuation",shortDescription:"Detects lines containing only punctuation.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#close-brackets-at-line-end\nhttps://docs.abapopenchecks.org/checks/16/",tags:[c.RuleTag.Styleguide,c.RuleTag.Quickfix,c.RuleTag.SingleFile],badExample:"zcl_class=>method(\n).",goodExample:"zcl_class=>method( )."}}getMessage(){return'A line should not contain only "." or ")."'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,i;const r=[],c=new d.DDIC(this.reg);if(t instanceof a.Class){const e=t.getClassDefinition();if(void 0===e)return[];if(this.conf.ignoreExceptions&&c.isException(e,t))return[]}const u=e.getRawRows(),p=new RegExp('^\\)?\\. *(\\".*)?$');for(let t=0;t<u.length;t++)if(p.exec(u[t].trim())){const a=u[t].indexOf(")")>=0?u[t].indexOf(")")+1:u[t].indexOf(".")+1,c=new o.Position(t+1,a);let d=u[t].trim();d.length>1&&!u[t-1].endsWith(" ")&&!u[t-1].endsWith(" \r")&&(d=" "+d);let p=0;(null===(n=u[t-1])||void 0===n?void 0:n.endsWith("\r"))&&(p=-1);const f=new o.Position(t,(null===(i=u[t-1])||void 0===i?void 0:i.length)+1+p),g=new o.Position(t+1,u[t].length+1);let h=l.EditHelper.replaceRange(e,f,g,d);(void 0===u[t-1]||0===u[t-1].indexOf("*")||u[t-1].includes('"'))&&(h=void 0);const T=s.Issue.atPosition(e,c,this.getMessage(),this.getMetadata().key,this.conf.severity,h);r.push(T)}return r}}t.LineOnlyPunc=p},10532(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessBeforeOutput=void 0;const s=n(50612),o=n(58720),i=n(86589),r=n(58755);t.ProcessBeforeOutput=class{getMatcher(){const e=(0,o.star)((0,o.alt)((0,o.sta)(s.Module),(0,o.sta)(s.Field),(0,o.sta)(s.CallSubscreen),(0,o.sub)(r.LoopExtract),(0,o.sub)(i.DynproLoop)));return(0,o.seq)((0,o.sta)(s.ProcessBeforeOutput),e)}}},10546(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallBody=void 0;const s=n(3125),o=n(82245),i=n(19697);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("PARAMETER-TABLE",o.Source),t=(0,s.seq)("EXCEPTION-TABLE",o.Source),n=(0,s.seq)(e,(0,s.optPrio)(t));return(0,s.alt)(i.MethodCallParam,o.MethodParameters,n)}}t.MethodCallBody=r},10566(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SAPScriptStyle=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"STYL"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SAPScriptStyle=o},10601(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Condense=void 0;const s=n(3125),o=n(82245);t.Condense=class{getMatcher(){return(0,s.seq)("CONDENSE",o.Target,(0,s.opt)("NO-GAPS"))}}},10727(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStructure=t.EmptyStructureConf=void 0;const s=n(71759),o=n(94967),i=n(99732),r=n(77465),a=n(86696),c=n(52024);class l extends r.BasicRuleConfig{constructor(){super(...arguments),this.loop=!0,this.loopAllowIfSubrc=!0,this.if=!0,this.while=!0,this.case=!0,this.select=!0,this.do=!0,this.at=!0,this.try=!0,this.when=!0}}t.EmptyStructureConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"empty_structure",title:"Find empty blocks",shortDescription:"Checks that the code does not contain empty blocks.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#no-empty-if-branches",tags:[a.RuleTag.Styleguide,a.RuleTag.SingleFile],badExample:"IF foo = bar.\nENDIF.\n\nDO 2 TIMES.\nENDDO.",goodExample:"LOOP AT itab WHERE qty = 0 OR date > sy-datum.\nENDLOOP.\nresult = xsdbool( sy-subrc = 0 )."}}getDescription(e){return"Empty block, add code: "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];const i=e.getStatements();for(const e of i)if(e.get()instanceof c.Unknown)return[];const r=[];!0===this.getConfig().while&&r.push(...n.findAllStructuresRecursive(o.While)),!0===this.getConfig().case&&r.push(...n.findAllStructuresRecursive(o.Case)),!0===this.getConfig().select&&r.push(...n.findAllStructuresRecursive(o.Select)),!0===this.getConfig().do&&r.push(...n.findAllStructuresRecursive(o.Do)),!0===this.getConfig().at&&(r.push(...n.findAllStructuresRecursive(o.At)),r.push(...n.findAllStructuresRecursive(o.AtFirst)),r.push(...n.findAllStructuresRecursive(o.AtLast)));for(const n of r)if(2===n.getChildren().length){const o=n.getFirstToken(),i=s.Issue.atToken(e,o,this.getDescription(n.get().constructor.name),this.getMetadata().key,this.conf.severity);t.push(i)}if(!0===this.getConfig().try){const i=n.findAllStructuresRecursive(o.Try);for(const n of i)if(void 0===n.findDirectStructure(o.Body)){const o=n.getFirstToken(),i=s.Issue.atToken(e,o,this.getDescription(n.get().constructor.name),this.getMetadata().key,this.conf.severity);t.push(i)}}if(!0===this.getConfig().loop){const r=n.findAllStructuresRecursive(o.Loop);for(const n of r)if(2===n.getChildren().length){const o=n.getLastChild(),r=i.findIndex((e=>e===o)),a=i[r+1];if(void 0!==a&&a.concatTokens().toUpperCase().includes("SY-SUBRC"))continue;const c=n.getFirstToken(),l=s.Issue.atToken(e,c,this.getDescription(n.get().constructor.name),this.getMetadata().key,this.conf.severity);t.push(l)}}if(!0===this.getConfig().if){const i=n.findAllStructuresRecursive(o.If).concat(n.findAllStructuresRecursive(o.Else)).concat(n.findAllStructuresRecursive(o.ElseIf));for(const n of i)if(void 0===n.findDirectStructure(o.Body)){const o=n.getFirstToken(),i=s.Issue.atToken(e,o,this.getDescription(n.get().constructor.name),this.getMetadata().key,this.conf.severity);t.push(i)}}if(!0===this.getConfig().when){const i=n.findAllStructuresRecursive(o.When);for(const n of i)if(1===n.getChildren().length){const o=n.getFirstToken(),i=this.getDescription(n.get().constructor.name),r=s.Issue.atToken(e,o,i,this.getMetadata().key,this.conf.severity);t.push(r)}}return t}}t.EmptyStructure=d},10830(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneTileLayout=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN08"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneTileLayout=o},10855(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefReturning=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(46743),a=n(38788);t.MethodDefReturning=class{static runSyntax(e,t,n){const c=e.findDirectExpression(s.MethodParamName);if(void 0===c)throw new a.AssertError("method_parameter.ts, todo, handle pass by value and reference");const l=e.findDirectExpression(s.TypeParam);if(void 0===l)throw new a.AssertError("method_parameter.ts, unexpected structure");let d=new r.BasicTypes(t).parseType(l);return!0===(null==d?void 0:d.isGeneric())&&(d=new i.UnknownType("RETURNING parameter must be fully specified")),d?new o.TypedIdentifier(c.getFirstToken(),t.filename,d,n):new o.TypedIdentifier(c.getFirstToken(),t.filename,new i.UnknownType("method param, todo"),n)}}},10894(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Else=void 0;const s=n(58720),o=n(50612),i=n(79175);t.Else=class{getMatcher(){const e=(0,s.opt)((0,s.sub)(i.Body));return(0,s.seq)((0,s.sta)(o.Else),e)}}},11039(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SlowParameterPassing=t.SlowParameterPassingConf=void 0;const s=n(77465),o=n(71759),i=n(86696),r=n(12620),a=n(52424),c=n(2403),l=n(36453);class d extends s.BasicRuleConfig{}t.SlowParameterPassingConf=d,t.SlowParameterPassing=class{constructor(){this.conf=new d}getMetadata(){return{key:"slow_parameter_passing",title:"Slow Parameter Passing",shortDescription:"Detects slow pass by value passing for methods where parameter is not changed",extendedInformation:"Method parameters defined in interfaces is not checked",tags:[i.RuleTag.Performance],badExample:"CLASS lcl DEFINITION.\n  PUBLIC SECTION.\n    METHODS bar IMPORTING VALUE(sdf) TYPE string.\nENDCLASS.\nCLASS lcl IMPLEMENTATION.\n  METHOD bar.\n    WRITE sdf.\n  ENDMETHOD.\nENDCLASS.",goodExample:"CLASS lcl DEFINITION.\n  PUBLIC SECTION.\n    METHODS bar IMPORTING sdf TYPE string.\nENDCLASS.\nCLASS lcl IMPLEMENTATION.\n  METHOD bar.\n    WRITE sdf.\n  ENDMETHOD.\nENDCLASS."}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){const t=[];if(!(e instanceof r.ABAPObject))return[];const n=new a.SyntaxLogic(this.reg,e).run().spaghetti.getTop(),s=this.listMethodNodes(n);for(const e of s){const n=e.getData().vars;if(!e.getIdentifier().sname.includes("~"))for(const s in n){const i=n[s];if(!1!==i.getMeta().includes("pass_by_value")&&(!0!==this.reg.isFileDependency(i.getFilename())&&0===this.listWritePositions(e,i).length)){const e="Parameter "+i.getName()+" passed by VALUE but not changed";t.push(o.Issue.atIdentifier(i,e,this.getMetadata().key,this.getConfig().severity))}}}return t}listWritePositions(e,t){var n,s;const o=[];for(const i of e.getData().references)i.referenceType===l.ReferenceType.DataWriteReference&&(null===(n=i.resolved)||void 0===n?void 0:n.getFilename())===t.getFilename()&&(null===(s=i.resolved)||void 0===s?void 0:s.getStart().equals(t.getStart()))&&o.push(i.position.getStart());return o}listMethodNodes(e){const t=[];if(e.getIdentifier().stype===c.ScopeType.Method)t.push(e);else for(const n of e.getChildren())t.push(...this.listMethodNodes(n));return t}}},11361(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodImplementation=void 0;const s=n(2088),o=n(94967),i=n(82245);class r extends s.Identifier{constructor(e,t){if(!(e.get()instanceof o.Method))throw new Error("MethodImplementation, expected Method as part of input node");const n=e.findFirstExpression(i.MethodName);if(void 0===n)throw new Error("MethodImplementation, expected MethodName as part of input node");super(n.getFirstToken(),t)}}t.MethodImplementation=r},11450(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateObject=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CreateObject=class{getMatcher(){const e=(0,s.seq)("EXPORTING",o.ParameterListS),t=(0,s.seq)("EXCEPTIONS",o.ParameterListExceptions),n=(0,s.seq)("PARAMETER-TABLE",o.Source),r=(0,s.seq)("EXCEPTION-TABLE",o.Source),a=(0,s.seq)("AREA HANDLE",o.Source),c=(0,s.seq)("TYPE",(0,s.altPrio)(o.ClassName,o.Dynamic));return(0,s.seq)("CREATE OBJECT",o.Target,(0,s.optPrio)((0,s.per)(c,(0,s.verNot)(i.Version.Cloud,a))),(0,s.optPrio)((0,s.altPrio)(e,n)),(0,s.optPrio)((0,s.altPrio)(t,r)))}}},11537(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TopOfPage=void 0;const s=n(3125),o=n(49028);t.TopOfPage=class{getMatcher(){const e=(0,s.seq)("TOP-OF-PAGE",(0,s.opt)("DURING LINE-SELECTION"));return(0,s.verNot)(o.Version.Cloud,e)}}},11582(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Method=void 0;const s=n(50612),o=n(58720),i=n(52024),r=n(79175);t.Method=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.MethodImplementation),(0,o.opt)((0,o.alt)((0,o.sub)(r.Body),(0,o.star)((0,o.sta)(i.NativeSQL)))),(0,o.sta)(s.EndMethod))}}},11694(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeEnhancementImplementation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ENHC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CompositeEnhancementImplementation=o},11707(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayProject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWPR"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.GatewayProject=o},11714(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Contexts=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Contexts=class{getMatcher(){const e=(0,s.seq)("CONTEXTS",o.Field);return(0,s.verNot)(i.Version.Cloud,e)}}},11761(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SortDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SortDataset=class{getMatcher(){const e=(0,s.alt)("ASCENDING","DESCENDING"),t=(0,s.alt)(o.ComponentChain,o.SourceFieldSymbol,o.Dynamic),n=(0,s.plus)((0,s.seq)(t,(0,s.optPrio)(e))),r=(0,s.seq)("BY",n),a=(0,s.seq)("SORT",(0,s.opt)("AS TEXT"),(0,s.opt)(r));return(0,s.verNot)(i.Version.Cloud,a)}}},11818(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Controls=void 0;const s=n(82245),o=n(15838),i=n(20572);t.Controls=class{runSyntax(e,t){const n=e.findDirectExpression(s.NamespaceSimpleName),r=null==n?void 0:n.getFirstToken();if(e.findDirectTokenByText("TABSTRIP")&&r){const e=new i.StructureType([{name:"ACTIVETAB",type:new i.CharacterType(132)}]),n=new o.TypedIdentifier(r,t.filename,e);t.scope.addIdentifier(n)}if(e.findDirectTokenByText("TABLEVIEW")&&r){const e=new i.StructureType([{name:"SCREEN",type:i.VoidType.get("TABLEVIEW-SCREEN")},{name:"INDEX",type:i.IntegerType.get()},{name:"SELECTED",type:new i.CharacterType(1)},{name:"VISLENGTH",type:i.IntegerType.get()},{name:"INVISIBLE",type:new i.CharacterType(1)}]),n=new i.StructureType([{name:"FIXED_COLS",type:new i.CharacterType(132)},{name:"LINES",type:i.IntegerType.get()},{name:"TOP_LINE",type:i.IntegerType.get()},{name:"CURRENT_LINE",type:i.IntegerType.get()},{name:"LEFT_COL",type:i.IntegerType.get()},{name:"LINE_SEL_MODE",type:new i.CharacterType(1)},{name:"COL_SEL_MODE",type:new i.CharacterType(1)},{name:"LINE_SELECTOR",type:new i.CharacterType(1)},{name:"H_GRID",type:new i.CharacterType(1)},{name:"V_GRID",type:new i.CharacterType(1)},{name:"COLS",type:new i.TableType(e,{withHeader:!1,keyType:i.TableKeyType.default})},{name:"INVISIBLE",type:new i.CharacterType(1)}]),s=new o.TypedIdentifier(r,t.filename,n);t.scope.addIdentifier(s)}}}},11994(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OmitReceiving=t.OmitReceivingConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(82245),a=n(99732);class c extends o.BasicRuleConfig{}t.OmitReceivingConf=c;class l extends a.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"omit_receiving",title:"Omit RECEIVING",shortDescription:"Omit RECEIVING",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#omit-receiving",tags:[i.RuleTag.Styleguide,i.RuleTag.SingleFile],badExample:"\n      upload_pack(\n        EXPORTING\n          io_client       = lo_client\n          iv_url          = iv_url\n          iv_deepen_level = iv_deepen_level\n          it_hashes       = lt_hashes\n        RECEIVING\n          rt_objects      = et_objects ).",goodExample:"\n      et_objects = upload_pack(\n        io_client       = lo_client\n        iv_url          = iv_url\n        iv_deepen_level = iv_deepen_level\n        it_hashes       = lt_hashes )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];for(const o of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllExpressions(r.MethodCallParam))||[]){const t=o.findDirectExpression(r.MethodParameters);if(void 0===t)continue;const i=t.findDirectTokenByText("RECEIVING");void 0!==i&&(void 0===t.findDirectTokenByText("EXCEPTIONS")&&n.push(s.Issue.atToken(e,i,"Omit RECEIVING",this.getMetadata().key,this.getConfig().severity)))}return n}}t.OmitReceiving=l},12046(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.For=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(5027);class a extends s.Expression{getRunnable(){const e=(0,s.seq)("WHERE (",o.ComponentCond,")"),t=(0,s.seq)("FROM",o.Source),n=(0,s.seq)("TO",o.Source),a=(0,s.seq)(o.InlineLoopDefinition,(0,s.optPrio)(t),(0,s.optPrio)(n),(0,s.optPrio)(e)),c=(0,s.seq)("THEN",o.Source),l=(0,s.seq)((0,s.altPrio)("UNTIL","WHILE"),o.Cond),d=(0,s.seq)(o.InlineFieldDefinition,(0,s.opt)(c),l),u=(0,s.seq)("GROUP BY",(0,s.alt)(r.FieldChain,(0,s.seq)("(",(0,s.plus)(o.LoopGroupByComponent),")")),(0,s.opt)((0,s.seq)((0,s.alt)("ASCENDING","DESCENDING"),(0,s.opt)("AS TEXT"))),(0,s.opt)("WITHOUT MEMBERS")),p=(0,s.alt)(o.TargetField,o.TargetFieldSymbol),f=(0,s.ver)(i.Version.v740sp08,(0,s.seq)("GROUPS",p,"OF",p,"IN",o.Source,(0,s.optPrio)(u))),g=(0,s.seq)("FOR",(0,s.alt)(d,a,f),(0,s.optPrio)(o.Let));return(0,s.ver)(i.Version.v740sp05,g,i.Version.OpenABAP)}}t.For=a},12289(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshControl=void 0;const s=n(3125),o=n(82245),i=n(49028);t.RefreshControl=class{getMatcher(){const e=(0,s.seq)("REFRESH CONTROL",o.Source,"FROM SCREEN",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},12318(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormTablesObsolete=t.FormTablesObsoleteConf=void 0;const s=n(71759),o=n(84383),i=n(77465),r=n(99732),a=n(82245),c=n(86696);class l extends i.BasicRuleConfig{}t.FormTablesObsoleteConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"form_tables_obsolete",title:"TABLES parameters are obsolete",shortDescription:"Checks for TABLES parameters in forms.",extendedInformation:"https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapform_tables.htm",tags:[c.RuleTag.SingleFile]}}getMessage(){return"FORM TABLES parameters are obsolete"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],i=e.getStructure();if(t instanceof o.Class||void 0===i)return n;for(const t of i.findAllExpressions(a.FormTables)){const o=t.getFirstToken(),i=s.Issue.atToken(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(i)}return n}}t.FormTablesObsolete=d},12357(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplate=void 0;const s=n(3125),o=n(89301),i=n(49028),r=n(82245);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.StringTemplateBegin),r.StringTemplateSource,(0,s.starPrio)((0,s.seq)((0,s.tok)(o.StringTemplateMiddle),r.StringTemplateSource)),(0,s.tok)(o.StringTemplateEnd));return(0,s.ver)(i.Version.v702,(0,s.altPrio)(e,(0,s.tok)(o.StringTemplate)))}}t.StringTemplate=a},12362(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPFileInformation=void 0,t.ABAPFileInformation=class{constructor(e){this.parsed=e}listClassImplementations(){return this.parsed.implementations}listInterfaceDefinitions(){return this.parsed.interfaces}getInterfaceDefinitionByName(e){const t=e.toUpperCase();for(const e of this.listInterfaceDefinitions())if(e.identifier.getName().toUpperCase()===t)return e}listClassDefinitions(){return this.parsed.classes}getClassDefinitionByName(e){const t=e.toUpperCase();for(const e of this.listClassDefinitions())if(e.identifier.getName().toUpperCase()===t)return e}getClassImplementationByName(e){const t=e.toUpperCase();for(const e of this.listClassImplementations())if(e.identifier.getName().toUpperCase()===t)return e}listFormDefinitions(){return this.parsed.forms}}},12412(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Unpack=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Unpack=class{getMatcher(){const e=(0,s.seq)("UNPACK",o.Source,"TO",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},12545(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Nodes=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Nodes=class{getMatcher(){const e=(0,s.seq)("NODES",o.Field);return(0,s.verNot)(i.Version.Cloud,e)}}},12567(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectPerformance=t.SelectPerformanceConf=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(77465),a=n(71759),c=n(86696),l=n(12620),d=n(52424),u=n(83668);class p extends r.BasicRuleConfig{constructor(){super(...arguments),this.endSelect=!0,this.selectStar=!0,this.starOkayIfFewColumns=10}}t.SelectPerformanceConf=p,t.SelectPerformance=class{constructor(){this.conf=new p}getMetadata(){return{key:"select_performance",title:"SELECT performance",shortDescription:"Various checks regarding SELECT performance.",extendedInformation:"ENDSELECT: not reported when the corresponding SELECT has PACKAGE SIZE\n\nSELECT *: not reported if using INTO/APPENDING CORRESPONDING FIELDS OF",tags:[c.RuleTag.SingleFile,c.RuleTag.Performance],badExample:"SELECT field1, field2 FROM table\n    INTO @DATA(structure) UP TO 1 ROWS ORDER BY field3 DESCENDING.\nENDSELECT.",goodExample:"SELECT field1, field2 FROM table UP TO 1 ROWS\n  INTO TABLE @DATA(table) ORDER BY field3 DESCENDING"}}initialize(e){return this.reg=e,this}getConfig(){return void 0===this.conf.starOkayIfFewColumns&&(this.conf.starOkayIfFewColumns=10),this.conf}setConfig(e){this.conf=e}run(e){if(!(e instanceof l.ABAPObject))return[];const t=[];for(const n of e.getABAPFiles()){const s=n.getStructure();if(void 0===s)return t;if(this.conf.endSelect)for(const e of s.findAllStructures(i.Select)||[]){const s=e.findDirectStatement(o.SelectLoop);if(void 0===s||s.concatTokens().toUpperCase().includes("PACKAGE SIZE"))continue;const i="Avoid use of ENDSELECT";t.push(a.Issue.atStatement(n,s,i,this.getMetadata().key,this.conf.severity))}if(this.conf.selectStar){const i=new d.SyntaxLogic(this.reg,e).run().spaghetti,r=s.findAllStatements(o.Select);r.push(...s.findAllStatements(o.SelectLoop));for(const e of r){const s=e.concatTokens().toUpperCase();if(!1===s.startsWith("SELECT * ")&&!1===s.startsWith("SELECT SINGLE * "))continue;if(s.includes(" INTO CORRESPONDING FIELDS OF ")||s.includes(" APPENDING CORRESPONDING FIELDS OF "))continue;const o=this.findNumberOfColumns(e,n,i);if(o&&o<=this.getConfig().starOkayIfFewColumns)continue;const r="Avoid use of SELECT *";t.push(a.Issue.atToken(n,e.getFirstToken(),r,this.getMetadata().key,this.conf.severity))}}}return t}findNumberOfColumns(e,t,n){const o=e.findAllExpressions(s.DatabaseTable);if(1===o.length){const e=o[0].getFirstToken().getStart(),s=n.lookupPosition(e,t.getFilename()),i=null==s?void 0:s.findTableReference(e),r=this.reg.getObject("TABL",i),a=null==r?void 0:r.parseType(this.reg);if(a instanceof u.StructureType)return a.getComponents().length}}}},12568(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndExec=void 0;const s=n(3125),o=n(49028);t.EndExec=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"ENDEXEC")}}},12575(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser702Chaining=t.Parser702ChainingConf=void 0;const s=n(82245),o=n(71759),i=n(99732),r=n(77465),a=n(86696),c=n(49028),l=n(55864);class d extends r.BasicRuleConfig{}t.Parser702ChainingConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"parser_702_chaining",title:"Parser Error, bad chaining on 702",shortDescription:"ABAP on 702 does not allow for method chaining with IMPORTING/EXPORTING/CHANGING keywords,\nthis rule finds these and reports errors.\nOnly active on target version 702 and below.",tags:[a.RuleTag.Syntax,a.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(this.reg.getConfig().getVersion()!==c.Version.v702&&this.reg.getConfig().getVersion()!==c.Version.v700)return[];const n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllExpressions(s.MethodCallChain)){const n=o.findDirectExpressions(s.MethodCall);if(!(n.length<2))for(const o of n){const n=o.findDirectExpression(s.MethodCallParam);if(void 0===n)continue;const i=n.findDirectExpression(s.MethodParameters);if(void 0!==i&&(i.findDirectTokenByText("IMPORTING")||i.findDirectTokenByText("CHANGING")||i.findDirectTokenByText("EXCEPTIONS"))){const n="This kind of method chaining not possible in 702";this.pushIssue(n,e,i,t)}}}for(const n of e.getStatements()){if(!(n.get()instanceof l.Statements.Move))continue;const o=n.findDirectExpression(s.Source);void 0!==o&&this.ensureSourceHasNoProceduralKeywords(o,e,t)}for(const o of n.findAllExpressions(s.MethodParameters))for(const n of o.findAllExpressions(s.ParameterS)){const o=n.findDirectExpression(s.Source);void 0!==o&&this.ensureSourceHasNoProceduralKeywords(o,e,t)}return t}ensureSourceHasNoProceduralKeywords(e,t,n){const o=["EXPORTING","IMPORTING","CHANGING","EXCEPTIONS"];for(const i of e.findAllExpressions(s.MethodParameters)){const e=o.find((e=>i.findDirectTokenByText(e)));if(e){const s=`Unexpected word ${e} in functional method call`;this.pushIssue(s,t,i,n)}}}pushIssue(e,t,n,s){const i=o.Issue.atPosition(t,n.getFirstToken().getStart(),e,this.getMetadata().key,this.conf.severity);s.push(i)}}t.Parser702Chaining=u},12579(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopGroupBy=void 0;const s=n(3125),o=n(89301),i=n(83568),r=n(21395),a=n(26251);class c extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.WParenLeftW),(0,s.plus)(a.LoopGroupByComponent),(0,s.tok)(o.WParenRightW));return(0,s.seq)((0,s.alt)(i.Source,e),(0,s.optPrio)("ASCENDING"),(0,s.optPrio)("WITHOUT MEMBERS"),r.LoopGroupByTarget)}}t.LoopGroupBy=c},12613(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ReadDataset=class{getMatcher(){const e=(0,s.seq)("READ DATASET",o.Source,"INTO",o.Target,(0,s.opt)((0,s.per)((0,s.seq)("MAXIMUM LENGTH",o.Source),(0,s.seq)("ACTUAL LENGTH",o.Target),(0,s.seq)("LENGTH",o.Target))));return(0,s.verNot)(i.Version.Cloud,e)}}},12620(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPObject=void 0;const s=n(80300),o=n(86219),i=n(26571);class r extends s.AbstractObject{[Symbol.for("debug.description")](){return`${this.constructor.name} ${this.getName()}`}constructor(e){super(e),this.parsed=[],this.texts=void 0}static is(e){return!!e&&e instanceof r}parse(e,t,n){if(!1===this.isDirty())return{updated:!1,runtime:0};const s=this.getFiles().filter((e=>e.getFilename().endsWith(".abap"))),o=new i.ABAPParser(e,t,n).parse(s);return this.parsed=o.output,this.old=o.issues,this.dirty=!1,{updated:!0,runtime:o.runtime,runtimeExtra:o.runtimeExtra}}setDirty(){this.syntaxResult=void 0,this.texts=void 0,this.parsed=[],super.setDirty()}getABAPFiles(){return this.parsed}getABAPFileByName(e){for(const t of this.parsed)if(t.getFilename()===e)return t}getMainABAPFile(){const e=this.getName().replace(/\//g,"#").toLowerCase()+"."+this.getType().toLowerCase()+".abap";for(const t of this.getABAPFiles())if(t.getFilename().endsWith(e))return t;for(const e of this.getABAPFiles())if(!e.getFilename().includes(".prog.screen_")&&e.getFilename().endsWith(".abap"))return e}getTexts(){return void 0===this.texts&&this.findTexts(this.parseRaw2()),this.texts}findTexts(e){var t,n,s,i;if(this.texts={},void 0!==(null===(i=null===(s=null===(n=null===(t=null==e?void 0:e.abapGit)||void 0===t?void 0:t["asx:abap"])||void 0===n?void 0:n["asx:values"])||void 0===s?void 0:s.TPOOL)||void 0===i?void 0:i.item))for(const t of(0,o.xmlToArray)(e.abapGit["asx:abap"]["asx:values"].TPOOL.item))if("I"===(null==t?void 0:t.ID)){if(void 0===t.KEY)throw new Error("findTexts, undefined");const e=t.KEY;if(void 0===e)continue;this.texts[e.toUpperCase()]=t.ENTRY?(0,o.unescape)(t.ENTRY):""}}}t.ABAPObject=r},12624(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameTableType=void 0;const s=n(84383),o=n(33073);t.RenameTableType=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof s.TableType))throw new Error("RenameTableType, not a table type");let i=[];const r=new o.RenamerHelper(this.reg);return i=i.concat(r.buildXMLFileEdits(e,"TYPENAME",t,n)),i=i.concat(r.renameFiles(e,t,n)),i=i.concat(r.renameDDICCodeReferences(e,t,n)),i=i.concat(r.renameDDICTABLReferences(e,t,n)),i=i.concat(r.renameDDICTTYPReferences(e,t,n)),{documentChanges:i}}}},12665(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtSelectionScreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.AtSelectionScreen=class{getMatcher(){const e=(0,s.seq)("ON VALUE-REQUEST FOR",o.FieldSub),t=(0,s.seq)("ON",o.FieldSub),n=(0,s.seq)("ON END OF",o.Field),r=(0,s.seq)("ON RADIOBUTTON GROUP",o.Field),a=(0,s.seq)("ON BLOCK",(0,s.regex)(/^\w+$/)),c=(0,s.seq)("ON HELP-REQUEST FOR",o.FieldSub),l=(0,s.seq)("AT SELECTION-SCREEN",(0,s.opt)((0,s.alt)("OUTPUT",e,r,"ON EXIT-COMMAND",t,n,c,a)));return(0,s.verNot)(i.Version.Cloud,l)}}},12730(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetReference=void 0;const s=n(3125),o=n(82245);t.GetReference=class{getMatcher(){return(0,s.seq)("GET REFERENCE OF",o.Source,"INTO",o.Target)}}},12741(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[&_!?]?\*?\w*(\/\w+\/)?\d*[a-zA-Z_%\$][\w\*%\$\?#]*(~\w+)?$/)}}t.Field=o},12749(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Loop=void 0;const s=n(50612),o=n(58720),i=n(94967);t.Loop=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Loop),(0,o.star)((0,o.sub)(i.Body)),(0,o.sta)(s.EndLoop))}}},12776(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchBody=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("OR",o.Source),t=(0,s.seq)("WHEN",o.Source,(0,s.star)(e),"THEN",(0,s.alt)(o.Source,o.Throw));return(0,s.seq)((0,s.opt)(o.Let),o.Source,(0,s.plus)(t),(0,s.opt)((0,s.seq)("ELSE",(0,s.alt)(o.Source,o.Throw))))}}t.SwitchBody=i},12861(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnusedMethods=t.UnusedMethodsConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(52424),a=n(12620),c=n(2403),l=n(84383),d=n(36453),u=n(67240),p=n(71249),f=n(52024),g=n(94967),h=n(82245);class T extends o.BasicRuleConfig{}t.UnusedMethodsConf=T;class m{constructor(){this.list=[],this.list=[]}push(e){this.list.push(e)}removeIfExists(e){for(let t=0;t<this.list.length;t++)if(e.equals(this.list[t].identifier))return void this.list.splice(t,1)}containsProteted(){for(const e of this.list)if(e.visibility===u.Visibility.Protected)return!0;return!1}getLength(){return this.list.length}get(){return this.list}}t.UnusedMethods=class{constructor(){this.conf=new T}getMetadata(){return{key:"unused_methods",title:"Unused methods",shortDescription:"Checks for unused methods",extendedInformation:"Checks private and protected methods.\n\nUnused methods are not reported if the object contains parser or syntax errors.\nQuick fixes only appears for private methods or projected methods where the class doesnt have any subclasses.\n\nSkips:\n* methods FOR TESTING\n* methods SETUP + TEARDOWN + CLASS_SETUP + CLASS_TEARDOWN in testclasses\n* class_constructor + constructor methods\n* event handlers\n* methods that are redefined\n* INCLUDEs\n",tags:[i.RuleTag.Quickfix],pragma:"##CALLED",pseudoComment:"EC CALLED"}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){if(!(e instanceof a.ABAPObject))return[];if(e instanceof l.Interface)return[];if(e instanceof l.Program&&!0===e.isInclude())return[];for(const t of e.getABAPFiles())for(const e of t.getStatements())if(e.get()instanceof f.Unknown)return[];const t=new r.SyntaxLogic(this.reg,e).run();if(t.issues.length>0)return[];this.wa=new m;for(const t of e.getABAPFiles())for(const e of t.getInfo().listClassDefinitions())for(const t of e.methods)!0!==t.isForTesting&&!0!==t.isRedefinition&&!0!==t.isEventHandler&&(!0!==e.isForTesting||"SETUP"!==t.name.toUpperCase()&&"CLASS_SETUP"!==t.name.toUpperCase()&&"TEARDOWN"!==t.name.toUpperCase()&&"CLASS_TEARDOWN"!==t.name.toUpperCase())&&"CONSTRUCTOR"!==t.name.toUpperCase()&&"CLASS_CONSTRUCTOR"!==t.name.toUpperCase()&&(t.visibility!==u.Visibility.Private&&t.visibility!==u.Visibility.Protected||this.wa.push(t));this.traverse(t.spaghetti.getTop()),this.searchGlobalSubclasses(e);const n=[];for(const t of this.wa.get()){const o=e.getABAPFileByName(t.identifier.getFilename());if(void 0===o)continue;const i=p.EditHelper.findStatement(t.identifier.getToken(),o);if(void 0===i)continue;if(i.getPragmas().some((e=>e.getStr()===this.getMetadata().pragma)))continue;if(this.suppressedbyPseudo(i,o))continue;let r;if(t.visibility===u.Visibility.Private||!0===t.isFinal||t.visibility===u.Visibility.Protected&&!1===this.hasSubClass(e)){const e=this.findMethodImplementation(t,o);if(void 0!==e){const t=p.EditHelper.deleteStatement(o,i),n=p.EditHelper.deleteRange(o,e.getFirstToken().getStart(),e.getLastToken().getEnd());r=p.EditHelper.merge(t,n)}}const a='Method "'+t.identifier.getName()+'" not used';n.push(s.Issue.atIdentifier(t.identifier,a,this.getMetadata().key,this.conf.severity,r))}return n}hasSubClass(e){var t,n,s;if(!(e instanceof l.Class))return!1;if(!0===(null===(t=e.getDefinition())||void 0===t?void 0:t.isFinal()))return!1;for(const t of this.reg.getObjects())if(t instanceof l.Class&&(null===(s=null===(n=t.getDefinition())||void 0===n?void 0:n.getSuperClass())||void 0===s?void 0:s.toUpperCase())===e.getName().toUpperCase())return!0;return!1}findMethodImplementation(e,t){var n,s;for(const o of(null===(n=t.getStructure())||void 0===n?void 0:n.findAllStructures(g.ClassImplementation))||[])for(const t of o.findAllStructures(g.Method))if(((null===(s=t.findFirstExpression(h.MethodName))||void 0===s?void 0:s.concatTokens().toUpperCase())||"")===e.name.toUpperCase())return t}suppressedbyPseudo(e,t){if(void 0===e)return!1;if(void 0===t)return!1;let n=!1;for(const s of t.getStatements()){if(!0===n&&s.get()instanceof f.Comment)return s.concatTokens().includes(this.getMetadata().pseudoComment+"");s===e&&(n=!0)}return!1}searchGlobalSubclasses(e){var t,n;if(0===this.wa.getLength()||!(e instanceof l.Class)||!1===this.wa.containsProteted())return;const s=e.getDefinition();if(void 0!==s)for(const e of this.reg.getObjects())if(e instanceof l.Class&&(null===(n=null===(t=e.getDefinition())||void 0===t?void 0:t.getSuperClass())||void 0===n?void 0:n.toUpperCase())===s.getName().toUpperCase()){const t=new r.SyntaxLogic(this.reg,e).run();this.traverse(t.spaghetti.getTop()),this.searchGlobalSubclasses(e)}}traverse(e){e.getIdentifier().stype!==c.ScopeType.BuiltIn&&this.checkNode(e);for(const t of e.getChildren())this.traverse(t)}checkNode(e){for(const t of e.getData().references)t.referenceType===d.ReferenceType.MethodReference&&t.resolved&&this.wa.removeIfExists(t.resolved)}}},12937(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EasyToFindMessages=t.EasyToFindMessagesConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=n(86789),a=n(52424),c=n(12620);class l extends i.BasicRuleConfig{}t.EasyToFindMessagesConf=l,t.EasyToFindMessages=class{constructor(){this.conf=new l}getMetadata(){return{key:"easy_to_find_messages",title:"Easy to find messages",shortDescription:"Make messages easy to find",extendedInformation:'All messages must be statically referenced exactly once\n\nOnly MESSAGE and RAISE statments are counted as static references\n\nAlso see rule "message_exists"\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#make-messages-easy-to-find',tags:[o.RuleTag.Styleguide]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){this.msagReferences=e.getMSAGReferences();for(const t of e.getObjects())t instanceof c.ABAPObject&&new a.SyntaxLogic(e,t).run();return this}run(e){const t=[];if("MSAG"===e.getType()){const n=e;for(const o of n.getMessages()){const i=this.msagReferences.listByMessage(n.getName().toUpperCase(),o.getNumber());if(0===i.length){const n=`Message ${o.getNumber()} not statically referenced`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);t.push(a)}else if(i.length>=2){const n=`Message ${o.getNumber()} referenced more than once`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);t.push(a)}}}return t}}},12956(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Communication=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Communication=class{getMatcher(){const e=(0,s.seq)("LENGTH",o.Target),t=(0,s.seq)("RETURNCODE",o.Source),n=(0,s.seq)("BUFFER",o.Target),r=(0,s.seq)("INIT ID",o.Source,"DESTINATION",o.Target),a=(0,s.seq)("ALLOCATE ID",o.Source,(0,s.opt)(t)),c=(0,s.seq)("SEND ID",o.Source,(0,s.opt)((0,s.per)(n,e)),(0,s.opt)(t)),l=(0,s.seq)("DEALLOCATE ID",o.Source,(0,s.opt)(t)),d=(0,s.seq)("ACCEPT ID",o.Source),u=(0,s.seq)("RECEIVE ID",o.Source,"BUFFER",o.Source,(0,s.opt)(e),"DATAINFO",o.Target,"STATUSINFO",o.Target,"RECEIVED",o.Target),p=(0,s.seq)("COMMUNICATION",(0,s.alt)(r,a,c,l,u,d));return(0,s.verNot)(i.Version.Cloud,p)}}},12958(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Shift=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(3240),a=n(82054);t.Shift=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);const n=e.findDirectExpression(s.Target);if(void 0===n){const n="Shift, Target not found";return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}const c=i.Target.runSyntax(n,t);if(e.concatTokens().toUpperCase().includes(" IN BYTE MODE")){if(!1===new r.TypeUtils(t.scope).isHexLike(c)){const n="Shift, Target not hex like";return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}}else if(!1===new r.TypeUtils(t.scope).isCharLike(c)){const n="Shift, Target not char like";return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}}}},13059(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalMove=t.IdenticalMoveConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.IdenticalMoveConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"identical_move",title:"Identical move",shortDescription:"Moving the same value from left to right or right to left is redundant.",tags:[c.RuleTag.SingleFile],badExample:"DATA lv_value TYPE i.\nlv_value = lv_value.",goodExample:"DATA lv_value TYPE i.\nlv_value = 5."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,r;const a=[];for(const t of e.getStatements())if(t.get()instanceof s.Move){const s=null===(n=t.findDirectExpression(o.Source))||void 0===n?void 0:n.concatTokens().toUpperCase(),c=null===(r=t.findDirectExpression(o.Target))||void 0===r?void 0:r.concatTokens().toUpperCase();if(s===c&&void 0!==s){const n=`Identical MOVE from "${s}" to "${c}"`;a.push(i.Issue.atStatement(e,t,n,this.getMetadata().key,this.conf.severity))}}return a}}t.IdenticalMove=d},13075(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VoidType=void 0;const s=n(97502);class o extends s.AbstractType{static get(e,t){const n=JSON.stringify({voided:e,qualifiedName:t});if(this.singletons.has(n))return this.singletons.get(n);const s=new o(e,t);return this.singletons.set(n,s),s}constructor(e,t){super({qualifiedName:t}),this.voided=e}getVoided(){return this.voided}toABAP(){return this.voided||"VOIDEDtoABAP"}toText(){return"Void("+this.voided+")"}isGeneric(){return!1}containsVoid(){return!0}toCDS(){return"abap.TODO_VOID"}}t.VoidType=o,o.singletons=new Map},13379(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLIn=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(49028);class a extends s.Expression{getRunnable(){const e=new o.SQLSource,t=new o.SQLSourceNoSpace,n=(0,s.seq)((0,s.tok)(i.WParenLeft),(0,s.alt)((0,s.ver)(r.Version.v740sp05,t,r.Version.OpenABAP),e),(0,s.starPrio)((0,s.seq)(",",e)),(0,s.altPrio)((0,s.tok)(i.ParenRight),(0,s.tok)(i.ParenRightW),(0,s.tok)(i.WParenRightW))),a=(0,s.seq)((0,s.tok)(i.WParenLeftW),e,(0,s.starPrio)((0,s.seq)(",",(0,s.altPrio)(t,e))),(0,s.altPrio)((0,s.tok)(i.WParenRight),(0,s.tok)(i.WParenRightW))),c=(0,s.ver)(r.Version.v740sp02,a,r.Version.OpenABAP),l=(0,s.seq)("(",o.Select,")");return(0,s.seq)("IN",(0,s.altPrio)(l,n,c,o.SQLSource))}}t.SQLIn=a},13486(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceProceduralCode=t.ReduceProceduralCodeConf=void 0;const s=n(77465),o=n(99732),i=n(86696),r=n(50612),a=n(71759),c=n(52024);class l extends s.BasicRuleConfig{constructor(){super(...arguments),this.maxStatements=10}}t.ReduceProceduralCodeConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"reduce_procedural_code",title:"Reduce procedural code",shortDescription:"Checks FORM and FUNCTION-MODULE have few statements",extendedInformation:"Delegate logic to a class method instead of using FORM or FUNCTION-MODULE.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-object-orientation-to-procedural-programming\n\nComments are not counted as statements.",tags:[i.RuleTag.SingleFile,i.RuleTag.Styleguide],badExample:"FORM foo.\n  DATA lv_bar TYPE i.\n  lv_bar = 2 + 2.\n  IF lv_bar = 4.\n    WRITE 'hello world'.\n  ENDIF.\n  DATA lv_bar TYPE i.\n  lv_bar = 2 + 2.\n  IF lv_bar = 4.\n    WRITE 'hello world'.\n  ENDIF.\nENDFORM.",goodExample:"FORM foo.\n  NEW zcl_global_class( )->run_logic( ).\nENDFORM."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(void 0===e.getStructure())return t;let n,s=0;for(const o of e.getStatements())if(o.get()instanceof r.Form||o.get()instanceof r.FunctionModule)n=o,s=0;else if(o.get()instanceof r.EndForm||o.get()instanceof r.EndFunction){if(s>=this.conf.maxStatements&&void 0!==n){const s="Reduce procedural code, max "+this.conf.maxStatements+" statements",o=a.Issue.atStatement(e,n,s,this.getMetadata().key,this.conf.severity);t.push(o)}n=void 0}else{if(o.get()instanceof c.Comment)continue;void 0!==n&&(s+=1)}return t}}t.ReduceProceduralCode=d},13514(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetBit=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(3240),a=n(82054);t.SetBit=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target)){const e=i.Target.runSyntax(n,t);if(e&&!1===new r.TypeUtils(t.scope).isHexLike(e)){const e="Input must be byte-like";return void t.issues.push((0,a.syntaxIssue)(t,n.getFirstToken(),e))}}}}},13813(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeChain=void 0;const s=n(13075),o=n(2550),i=n(2416),r=n(82245),a=n(82054);t.AttributeChain=class{static runSyntax(e,t,n,c){if(e instanceof s.VoidType)return e;if(!(e instanceof o.ObjectReferenceType))return n.issues.push((0,a.syntaxIssue)(n,t.getFirstToken(),"Not an object reference(AttributeChain)")),s.VoidType.get(a.CheckSyntaxKey);const l=t.getChildren()[0];if(!(l.get()instanceof r.AttributeName))return n.issues.push((0,a.syntaxIssue)(n,t.getFirstToken(),"AttributeChain, unexpected first child")),s.VoidType.get(a.CheckSyntaxKey);const d=n.scope.findObjectDefinition(e.getIdentifierName());if(void 0===d){const o='Definition for "'+e.getIdentifierName()+'" not found in scope(AttributeChain)';return n.issues.push((0,a.syntaxIssue)(n,t.getFirstToken(),o)),s.VoidType.get(a.CheckSyntaxKey)}const u=l.getFirstToken(),p=u.getStr(),f=new i.ObjectOriented(n.scope);let g=f.searchAttributeName(d,p);if(void 0===g&&(g=f.searchConstantName(d,p)),void 0===g){const e='Attribute or constant "'+p+'" not found in "'+d.getName()+'"';return n.issues.push((0,a.syntaxIssue)(n,u,e)),s.VoidType.get(a.CheckSyntaxKey)}for(const e of c)n.scope.addReference(u,g,e,n.filename);return g.getType()}}},13834(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Check=void 0;const s=n(82245),o=n(60635);t.Check=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Cond))o.Cond.runSyntax(n,t)}}},13843(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertInternal=void 0;const s=n(3125),o=n(49028),i=n(82245);t.InsertInternal=class{getMatcher(){const e=(0,s.altPrio)(i.Source,i.Dynamic),t=(0,s.seq)("ASSIGNING",i.FSTarget),n=(0,s.seq)("REFERENCE INTO",i.Target),r=(0,s.seq)("INDEX",i.Source),a=(0,s.str)("INITIAL LINE"),c=(0,s.seq)("INTO",i.Target),l=(0,s.seq)("INTO TABLE",i.Target,(0,s.opt)((0,s.alt)(n,t))),d=(0,s.seq)("TO",i.Source),u=(0,s.seq)("FROM",i.Source),p=(0,s.opt)((0,s.per)(u,d)),f=(0,s.alt)(l,(0,s.seq)(c,(0,s.opt)((0,s.per)(r,(0,s.alt)(n,t)))),(0,s.per)(r,(0,s.alt)(n,t))),g=(0,s.seq)("LINES OF",e,(0,s.opt)(p)),h=(0,s.alt)(i.SimpleSource4,(0,s.ver)(o.Version.v740sp02,i.Source,o.Version.OpenABAP)),T=(0,s.seq)("TABLE",i.Source);return(0,s.seq)("INSERT",(0,s.altPrio)(T,(0,s.seq)((0,s.altPrio)(a,g,h),f)))}}},13911(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StatementNode=void 0;const s=n(98069),o=n(80387),i=n(89430),r=n(51520),a=n(26137),c=n(36196),l=n(20357),d=n(32059),u=n(88167),p=n(82293);class f extends s.AbstractNode{constructor(e,t,n){super(),this.statement=e,this.colon=t,this.pragmas=n||[]}get(){return this.statement}getColon(){return this.colon}getPragmas(){return this.pragmas}setChildren(e){if(0===e.length)throw new Error("statement: zero children");return this.children=e,this}getStart(){return this.getFirstToken().getStart()}getEnd(){return this.getLastToken().getEnd()}getTokens(){const e=[];for(const t of this.getChildren())e.push(...this.toTokens(t));return e}includesToken(e){for(const t of this.getTokens())if(t.getStart().equals(e.getStart()))return!0;return!1}getTokenNodes(){const e=[];for(const t of this.getChildren())e.push(...this.toTokenNodess(t));return e}concatTokens(){let e,t="";for(const n of this.getTokens())n instanceof a.Pragma||(""===t?t=n.getStr():e&&e.getStr().length+e.getCol()===n.getCol()&&e.getRow()===n.getRow()?t+=n.getStr():t=t+" "+n.getStr(),e=n);return t}concatTokensVirtual(){let e,t="";for(const n of this.getTokens()){if(n instanceof a.Pragma)continue;const s=null==e?void 0:e.getStart(),o=null==n?void 0:n.getStart();""===t?t=n.getStr():e&&s&&o&&e.getStr().length+s.vcol===o.vcol&&s.vrow===o.vrow?t+=n.getStr():t=t+" "+n.getStr(),e=n}return t}concatTokensWithoutStringsAndComments(){let e,t="";for(const n of this.getTokens())n instanceof r.Comment||n instanceof c.StringToken||n instanceof p.StringTemplate||n instanceof u.StringTemplateBegin||n instanceof l.StringTemplateMiddle||n instanceof d.StringTemplateEnd||(""===t?t=n.getStr():e&&e.getStr().length+e.getCol()===n.getCol()&&e.getRow()===n.getRow()?t+=n.getStr():t=t+" "+n.getStr(),e=n);return t}getTerminator(){return this.getLastToken().getStr()}getFirstToken(){for(const e of this.getChildren())return e.getFirstToken();throw new Error("StatementNode, getFirstToken, no children, "+this.get().constructor.name)}getLastToken(){const e=this.getLastChild();if(void 0!==e)return e.getLastToken();throw new Error("StatementNode, getLastToken, no children")}findDirectExpression(e){for(const t of this.getChildren())if(t instanceof i.ExpressionNode&&t.get()instanceof e)return t}findDirectExpressions(e){const t=[];for(const n of this.getChildren())n instanceof i.ExpressionNode&&n.get()instanceof e&&t.push(n);return t}findDirectExpressionsMulti(e){const t=[];for(const n of this.getChildren())n instanceof i.ExpressionNode&&e.some((e=>n.get()instanceof e))&&t.push(n);return t}findDirectTokenByText(e){const t=e.toUpperCase();for(const e of this.getChildren())if(e instanceof o.TokenNode&&e.get().getStr().toUpperCase()===t)return e.get()}findFirstExpression(e){for(const t of this.getChildren())if(!(t instanceof o.TokenNode)){if(t.get()instanceof e)return t;{const n=t.findFirstExpression(e);if(n)return n}}}findAllExpressions(e){const t=[];for(const n of this.getChildren())n instanceof o.TokenNode||(n.get()instanceof e?t.push(n):t.push(...n.findAllExpressions(e)));return t}findAllExpressionsRecursive(e){const t=[];for(const n of this.getChildren())n instanceof o.TokenNode||(n.get()instanceof e&&t.push(n),t.push(...n.findAllExpressionsRecursive(e)));return t}findAllExpressionsMulti(e,t=!1){const n=[];for(const s of this.getChildren()){if(s instanceof o.TokenNode)continue;const i=n.length;for(const t of e)s.get()instanceof t&&n.push(s);i!==n.length&&!0!==t||n.push(...s.findAllExpressionsMulti(e,t))}return n}findTokenSequencePosition(e,t){let n;for(const s of this.getTokens())if(!(s instanceof r.Comment||s instanceof c.StringToken||s instanceof p.StringTemplate||s instanceof u.StringTemplateBegin||s instanceof l.StringTemplateMiddle||s instanceof d.StringTemplateEnd)){if(n&&s.getStr().toUpperCase()===t&&(null==n?void 0:n.getStr().toUpperCase())===e.toUpperCase())return n.getStart();n=s}}findExpressionAfterToken(e){const t=this.getChildren();for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1];if(s instanceof o.TokenNode&&s.get().getStr().toUpperCase()===e.toUpperCase()&&r instanceof i.ExpressionNode)return r}}findExpressionsAfterToken(e){const t=this.getChildren(),n=[];for(let s=0;s<t.length-1;s++){const r=t[s],a=t[s+1];r instanceof o.TokenNode&&r.get().getStr().toUpperCase()===e.toUpperCase()&&a instanceof i.ExpressionNode&&n.push(a)}return n}toTokens(e){const t=[];if(e instanceof o.TokenNode)return t.push(e.get()),t;for(const n of e.getChildren())n instanceof o.TokenNode?t.push(n.get()):t.push(...this.toTokens(n));return t}toTokenNodess(e){const t=[];if(e instanceof o.TokenNode)return t.push(e),t;for(const n of e.getChildren())n instanceof o.TokenNode?t.push(n):t.push(...this.toTokenNodess(n));return t}}t.StatementNode=f},14089(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=void 0;const s=n(94967),o=n(50612),i=n(82245),r=n(41370),a=n(88532),c=n(75457),l=n(67240),d=n(96381),u=n(92213),p=n(86260),f=n(9224),g=n(86220),h=n(64782),T=n(5807),m=n(22748),y=n(45363),S=n(29780),v=n(36453),E=n(66757);t.Attributes=class{constructor(e,t){this.static=[],this.instance=[],this.constants=[],this.aliases=[],this.tlist=[],this.filename=t.filename,this.parse(e,t),this.types=new m.TypeDefinitions(this.tlist)}getTypes(){return this.types}getStatic(){return this.static}getAliases(){return this.aliases}getAll(){let e=[];return e=e.concat(this.static),e=e.concat(this.instance),e}getStaticsByVisibility(e){const t=[];for(const n of this.static)n.getVisibility()===e&&t.push(n);return t}getInstance(){return this.instance}getInstancesByVisibility(e){const t=[];for(const n of this.instance)n.getVisibility()===e&&t.push(n);return t}getConstants(){return this.constants}getConstantsByVisibility(e){const t=[];for(const n of this.constants)n.getVisibility()===e&&t.push(n);return t}findByName(e){const t=e.toUpperCase();for(const e of this.getStatic())if(e.getName().toUpperCase()===t)return e;for(const e of this.getInstance())if(e.getName().toUpperCase()===t)return e;for(const e of this.getConstants())if(e.getName().toUpperCase()===t)return e}parse(e,t){const n=e.findDirectStructure(s.ClassDefinition);if(n)return this.parseSection(n.findDirectStructure(s.PublicSection),l.Visibility.Public,t),this.parseSection(n.findDirectStructure(s.ProtectedSection),l.Visibility.Protected,t),void this.parseSection(n.findDirectStructure(s.PrivateSection),l.Visibility.Private,t);const o=e.findDirectStructure(s.Interface);if(!o)throw new Error("MethodDefinition, expected ClassDefinition or InterfaceDefinition");this.parseSection(o.findDirectStructure(s.SectionContents),l.Visibility.Public,t)}parseSection(e,t,n){if(void 0!==e)for(const i of e.getChildren()){const e=i.get();if(i instanceof c.StructureNode)if(e instanceof s.Data){const e=g.Data.runSyntax(i,n);if(void 0!==e){const s=new r.ClassAttribute(e,t,e.getMeta(),e.getValue());this.instance.push(s),n.scope.addIdentifier(s)}}else if(e instanceof s.ClassData){const e=(new u.ClassData).runSyntax(i,n);if(void 0!==e){const s=new r.ClassAttribute(e,t,e.getMeta(),e.getValue());this.static.push(s),n.scope.addIdentifier(s)}}else if(e instanceof s.Constants){const{type:e,values:s}=(new T.Constants).runSyntax(i,n);if(void 0!==e){const o=new a.ClassConstant(e,t,s);this.constants.push(o),n.scope.addIdentifier(o)}}else if(e instanceof s.TypeEnum){const{values:e,types:s}=(new h.TypeEnum).runSyntax(i,n);for(const s of e){const e=new a.ClassConstant(s,t,"novalueClassAttributeEnum");this.constants.push(e),n.scope.addIdentifier(e)}for(const e of s)this.tlist.push({type:e,visibility:t})}else if(e instanceof s.Types){const e=(new y.Types).runSyntax(i,n);e&&(n.scope.addType(e),this.tlist.push({type:e,visibility:t}))}else this.parseSection(i,t,n);else if(i instanceof c.StatementNode)if(e instanceof o.Data)this.instance.push(this.parseAttribute(i,t,n));else if(e instanceof o.ClassData)this.static.push(this.parseAttribute(i,t,n));else if(e instanceof o.Aliases)this.parseAlias(i,t,n);else if(e instanceof o.Constant){const e=(new f.Constant).runSyntax(i,n);if(e){const s=new a.ClassConstant(e,t,e.getValue());this.constants.push(s),n.scope.addIdentifier(s)}}else if(e instanceof o.Type){const e=(new S.Type).runSyntax(i,n);e&&(n.scope.addType(e),this.tlist.push({type:e,visibility:t}))}}}parseAlias(e,t,n){const s=e.findFirstExpression(i.SimpleName).getFirstToken(),o=e.findFirstExpression(i.Field).getFirstToken(),r=o.getStr();if(this.aliases.push(new E.Alias(s,t,r,this.filename)),r.includes("~")){const e=r.split("~")[0],t=n.scope.findInterfaceDefinition(e);if(t){n.scope.addReference(o,t,v.ReferenceType.ObjectOrientedReference,n.filename,{ooName:e.toUpperCase(),ooType:"INTF"});const i=t.getTypeDefinitions().getByName(r.split("~")[1]);i&&n.scope.addTypeNamed(s.getStr(),i);const a=t.getAttributes().findByName(r.split("~")[1]);a&&n.scope.addNamedIdentifier(s.getStr(),a)}}}parseAttribute(e,t,n){let s;const i=e.get();if(i instanceof o.Data)s=(new p.Data).runSyntax(e,n);else{if(!(i instanceof o.ClassData))throw new Error("ClassAttribute, unexpected node, 1, "+this.filename);s=(new d.ClassData).runSyntax(e,n)}if(void 0===s)throw new Error("ClassAttribute, unexpected node, "+this.filename);return n.scope.addIdentifier(s),new r.ClassAttribute(s,t,s.getMeta(),s.getValue())}}},14126(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Subtract=void 0;const s=n(3125),o=n(82245);t.Subtract=class{getMatcher(){return(0,s.seq)("SUBTRACT",o.Source,"FROM",o.Target)}}},14171(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalClassNaming=t.LocalClassNamingConf=void 0;const s=n(71759),o=n(99732),i=n(50127),r=n(74650),a=n(86696),c=n(5518);class l extends i.NamingRuleConfig{constructor(){super(...arguments),this.local="^LCL_.+$",this.exception="^LCX_.+$",this.test="^LTCL_.+$"}}t.LocalClassNamingConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"local_class_naming",title:"Local class naming conventions",shortDescription:"Allows you to enforce a pattern, such as a prefix, for local class names.",tags:[a.RuleTag.Naming,a.RuleTag.SingleFile]}}getDescription(e,t){return"required"===this.conf.patternKind?"Local class name does not match pattern "+e+": "+t:"Local class name must not match pattern "+e+": "+t}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];void 0===this.conf.patternKind&&(this.conf.patternKind="required");const o=new c.DDIC(this.reg);for(const i of e.getInfo().listClassDefinitions()){if(i.isGlobal)continue;const e=i.name;let a="";if(a=i.isForTesting?this.conf.test:o.isException(i,t)?this.conf.exception:this.conf.local,void 0===a||0===a.length)continue;const c=new RegExp(a,"i");r.NameValidator.violatesRule(e,c,this.conf)&&n.push(s.Issue.atIdentifier(i.identifier,this.getDescription(a,e),this.getMetadata().key,this.conf.severity))}return n}}t.LocalClassNaming=d},14257(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDefineProjection=void 0;const s=n(18483),o=n(55864),i=n(3125);class r extends i.Expression{getRunnable(){return(0,i.seq)((0,i.star)(s.CDSAnnotation),"DEFINE",(0,i.opt)("ROOT"),"VIEW",(0,i.ver)(o.Version.v755,(0,i.opt)("ENTITY")),s.CDSName,(0,i.opt)(s.CDSProviderContract),"AS PROJECTION ON",s.CDSName,(0,i.opt)(s.CDSAs),(0,i.str)("{"),(0,i.plus)(s.CDSElement),(0,i.star)((0,i.seq)(",",s.CDSElement)),(0,i.str)("}"),(0,i.opt)(s.CDSWhere),(0,i.opt)(";"))}}t.CDSDefineProjection=r},14306(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSInteger=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.seq)((0,s.opt)("-"),(0,s.regex)(/^\d+$/))}}t.CDSInteger=o},14354(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UTCLongType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```utclong```"}isGeneric(){return!1}toABAP(){return"utclong"}containsVoid(){return!1}toCDS(){return"abap.utcl"}}t.UTCLongType=o},14365(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineData=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(36453),a=n(82054);t.InlineData=class{static runSyntax(e,t,n){var c;const l=null===(c=e.findFirstExpression(s.TargetField))||void 0===c?void 0:c.getFirstToken();if(l&&n){if(n instanceof i.CSequenceType||n instanceof i.CLikeType)n=i.StringType.get();else if(n instanceof i.XSequenceType)n=i.StringType.get();else if(n instanceof i.CGenericType){const n="InlineData, generic type C cannot be used for inferred type";return void t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}if(n.isGeneric()){const s="DATA definition cannot be generic, "+n.constructor.name;t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),s)),n=i.VoidType.get(a.CheckSyntaxKey)}const s=new o.TypedIdentifier(l,t.filename,n,["inline"]);t.scope.addIdentifier(s),t.scope.addReference(l,s,r.ReferenceType.DataWriteReference,t.filename)}else if(l){const e='InlineData, could not determine type for "'+l.getStr()+'"',n=new o.TypedIdentifier(l,t.filename,new i.UnknownType(e),["inline"]);t.scope.addIdentifier(n),t.scope.addReference(l,n,r.ReferenceType.DataWriteReference,t.filename)}}}},14421(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```data```"}toABAP(){return"data"}isGeneric(){return!0}containsVoid(){return!1}toCDS(){return"abap.TODO_DATA"}}t.DataType=o},14489(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointGroup=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ACID"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CheckpointGroup=o},14637(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefExceptions=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("EXCEPTIONS",(0,s.plusPrio)(o.NamespaceSimpleName))}}t.MethodDefExceptions=i},14644(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeEnhancementSpot=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ENSC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CompositeEnhancementSpot=o},14651(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralStorageStructure=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SHI3"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.GeneralStorageStructure=o},14683(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Scan=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Scan=class{getMatcher(){const e=(0,s.seq)("TOKENS INTO",o.Target),t=(0,s.seq)("WORD INTO",o.Target),n=(0,s.seq)("LINE INTO",o.Target),r=(0,s.seq)("STATEMENTS INTO",o.Target),a=(0,s.seq)("LEVELS INTO",o.Target),c=(0,s.seq)("STRUCTURES INTO",o.Target),l=(0,s.seq)("INCLUDE INTO",o.Target),d=(0,s.seq)("OFFSET INTO",o.Target),u=(0,s.seq)("ENHANCEMENTS INTO",o.Target),p=(0,s.seq)("ENHANCEMENT OPTIONS INTO",o.Target),f=(0,s.seq)("KEYWORDS FROM",o.Source),g=(0,s.seq)("WITH PRAGMAS",o.Source),h=(0,s.seq)("OVERFLOW INTO",o.Target),T=(0,s.seq)("MESSAGE INTO",o.Target),m=(0,s.seq)("INCLUDE PROGRAM FROM",o.Source),y=(0,s.seq)("FRAME PROGRAM FROM",o.Source),S=(0,s.seq)("PROGRAM FROM",o.Source),v=(0,s.seq)("FROM",o.Source),E=(0,s.seq)("TO",o.Source),C=(0,s.seq)("REPLACING",o.Source),b=(0,s.seq)("ID",o.Source,"TABLE",o.Source),I=(0,s.seq)("SCAN ABAP-SOURCE",o.Source,(0,s.per)(e,a,v,E,r,c,f,t,n,d,h,T,m,l,y,p,u,S,C,"WITH ANALYSIS","WITH COMMENTS","WITH TYPE-POOLS","WITH INCLUDES","WITHOUT TRMAC","WITH DECLARATIONS","WITH BLOCKS","PRESERVING IDENTIFIER ESCAPING","WITH LIST TOKENIZATION","WITH EXPLICIT ENHANCEMENTS","WITH IMPLICIT ENHANCEMENTS","WITH INACTIVE ENHANCEMENTS",g,b));return(0,s.verNot)(i.Version.Cloud,I)}}},14698(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Multiply=void 0;const s=n(3125),o=n(82245);t.Multiply=class{getMatcher(){return(0,s.seq)("MULTIPLY",o.Target,"BY",o.Source)}}},14833(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneMediaLibrary=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN18"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneMediaLibrary=o},14884(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceArrow=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"->"}}t.InstanceArrow=o},14933(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLSource=void 0;const s=n(3125),o=n(49028),i=n(89301),r=n(82245);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.ParenLeftW),r.Source,(0,s.tok)(i.WParenRightW)),t=(0,s.ver)(o.Version.v740sp05,(0,s.seq)((0,s.tok)(i.WAt),(0,s.altPrio)(r.SimpleSource3,e)),o.Version.OpenABAP);return(0,s.altPrio)(r.SQLAliasField,r.SimpleSource3,t)}}t.SQLSource=a},15027(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Receive=void 0;const s=n(82245),o=n(9646),i=n(93170);t.Receive=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Target))o.Target.runSyntax(n,t)}}},15247(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BracketRightW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"] "}}t.BracketRightW=o},15312(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementMethods=t.ImplementMethodsConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(84383),a=n(50612),c=n(82245),l=n(86696),d=n(71249);class u extends i.BasicRuleConfig{}t.ImplementMethodsConf=u;class p extends o.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"implement_methods",title:"Implement methods",shortDescription:"Checks for abstract methods and methods from interfaces which need implementing.",extendedInformation:"INCLUDE programs are only checked in connection with their main programs.",tags:[l.RuleTag.Syntax,l.RuleTag.Quickfix]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){let n=[];if(void 0===e.getStructure())return[];if(t instanceof r.Program&&!0===t.isInclude())return[];this.obj=t;for(const s of e.getInfo().listClassDefinitions()){const e=this.lookupImplementationInObject(s.name,t);n=n.concat(this.checkClass(s,e)),n=n.concat(this.checkInterfaces(s,e))}return n}lookupImplementationInObject(e,t){for(const n of t.getABAPFiles()){const t=n.getInfo().getClassImplementationByName(e);if(void 0!==t)return t}}lookupDefinitionInObject(e){for(const t of this.obj.getABAPFiles()){const n=t.getInfo().getClassDefinitionByName(e);if(void 0!==n)return n}}checkClass(e,t){const n=[];for(const o of e.methods){const i=null==t?void 0:t.methods.find((e=>e.getName().toUpperCase()===o.name.toUpperCase()));if(!0===o.isAbstract){if(void 0!==i){const e=s.Issue.atIdentifier(i,'Do not implement abstract method "'+o.name+'"',this.getMetadata().key,this.conf.severity);n.push(e)}if(e.isAbstract)continue;{const e="Abstract methods can only be defined in abstract classes, "+o.name,t=s.Issue.atIdentifier(o.identifier,e,this.getMetadata().key,this.conf.severity);n.push(t);break}}if(void 0===t){const t='Class implementation for "'+e.name+'" not found',o=s.Issue.atIdentifier(e.identifier,t,this.getMetadata().key,this.conf.severity);n.push(o)}else if(void 0===i){const e='Implement method "'+o.name+'"',i=this.buildFix(t,o.name),r=s.Issue.atIdentifier(t.identifier,e,this.getMetadata().key,this.conf.severity,i);n.push(r)}}return n}buildFix(e,t){var n,s;const o=this.obj.getABAPFileByName(e.identifier.getFilename());if(void 0!==o)for(const i of(null===(n=o.getStructure())||void 0===n?void 0:n.findAllStatements(a.ClassImplementation))||[])if((null===(s=i.findFirstExpression(c.ClassName))||void 0===s?void 0:s.getFirstToken().getStr().toUpperCase())===e.identifier.getName().toUpperCase())return d.EditHelper.insertAt(o,i.getLastToken().getEnd(),`\n  METHOD ${t.toLowerCase()}.\n    RETURN. " todo, implement method\n  ENDMETHOD.`)}findInterface(e,t){const n=this.findInterfaceByName(t);if(void 0===n){const n='Implemented interface "'+t+'" not found';return s.Issue.atIdentifier(e,n,this.getMetadata().key,this.conf.severity)}return n}findInterfaceByName(e){var t;let n;const s=this.reg.getObject("INTF",e);if(void 0===s)for(const t of this.obj.getABAPFiles()){const s=t.getInfo().getInterfaceDefinitionByName(e);if(s){n=s;break}}else n=null===(t=s.getMainABAPFile())||void 0===t?void 0:t.getInfo().listInterfaceDefinitions()[0];return n}findInterfaceMethods(e){const t=e.methods.map((t=>({objectName:e.name,method:t})));for(const n of e.interfaces){const o=this.findInterface(e.identifier,n.name);void 0===o||o instanceof s.Issue||o.methods.forEach((e=>{t.push({objectName:o.name,method:e})}))}return t}findClass(e){let t=this.lookupDefinitionInObject(e),n=this.lookupImplementationInObject(e,this.obj);if(t&&n)return{def:t,impl:n};const s=this.reg.getObject("CLAS",e);return s&&(t=s.getClassDefinition(),n=this.lookupImplementationInObject(e,s),t&&n)?{def:t,impl:n}:void 0}checkInterfaces(e,t){const n=[];for(const o of e.interfaces){const i=this.findInterface(e.identifier,o.name);if(void 0!==i&&!0!==o.partial&&!0!==o.allAbstract){if(i instanceof s.Issue)return[i];for(const r of this.findInterfaceMethods(i))if(!(this.isAbstract(r,o,e)&&e.isAbstract||!1!==this.isImplemented(r,e,t))){const o='Implement method "'+r.method.name+'" from interface "'+r.objectName+'"';if(t){const e=this.buildFix(t,r.objectName+"~"+r.method.name),i=s.Issue.atIdentifier(t.identifier,o,this.getMetadata().key,this.conf.severity,e);n.push(i)}else{const t=s.Issue.atIdentifier(e.identifier,o,this.getMetadata().key,this.conf.severity);n.push(t)}}}}return n}isAbstract(e,t,n){if(t.abstractMethods.includes(e.method.name.toUpperCase()))return!0;if(!n.superClassName)return!1;const s=this.findClass(n.superClassName),o=null==s?void 0:s.def.interfaces.find((t=>t.name.toUpperCase()===e.objectName.toUpperCase()));return!(!s||!o)&&this.isAbstract(e,o,s.def)}isImplemented(e,t,n){if(void 0===n)return!1;const s=e.objectName+"~"+e.method.name;let o=n.methods.find((e=>e.getName().toUpperCase()===s.toUpperCase()));if(void 0===o)for(const e of t.aliases)if(e.component.toUpperCase()===s.toUpperCase()){o=n.methods.find((t=>t.getName().toUpperCase()===e.name.toUpperCase()));break}if(void 0===o&&void 0!==t.superClassName){const n=this.findClass(t.superClassName);if(n)return this.isImplemented(e,null==n?void 0:n.def,null==n?void 0:n.impl)}if(void 0===o)for(const s of t.interfaces){const t=this.findInterfaceByName(s.name);if(void 0===t)continue;const o=this.viaAliasInInterface(e,t,n);if(o)return o}return void 0!==o}viaAliasInInterface(e,t,n){for(const s of t.aliases)if(s.component.toUpperCase()===e.objectName.toUpperCase()+"~"+e.method.name.toUpperCase()){const e=t.name+"~"+s.name,o=n.methods.find((t=>t.getName().toUpperCase()===e.toUpperCase()));if(o)return!0}return!1}}t.ImplementMethods=p},15439(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IncludeName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.regex)(/^<?(\/\w+\/)?[\w%#]+(~\w+)?>?$/),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.optPrio)((0,s.regex)(/^\w+$/)))))}}t.IncludeName=i},15649(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneMobileClient=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN22"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneMobileClient=o},15662(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionModuleDefinition=t.FunctionModuleType=t.FunctionModuleParameterDirection=void 0;const s=n(86219);var o,i;!function(e){e.importing="importing",e.exporting="exporting",e.changing="changing",e.tables="tables"}(o||(t.FunctionModuleParameterDirection=o={})),function(e){e.regular="regular",e.remote="remoteEnabled",e.update="update"}(i||(t.FunctionModuleType=i={})),t.FunctionModuleDefinition=class{constructor(e){this.parse(e)}getParameters(){return this.parameters}getModuleType(){return this.moduleType}getDescription(){return this.description}getName(){return this.name}isGlobalParameters(){return this.globalParameters}parse(e){if(void 0===e.FUNCNAME)throw new Error("Function module name undefined");if(this.name=e.FUNCNAME,this.description=e.SHORT_TEXT,this.parameters=[],this.globalParameters="X"===e.GLOBAL_FLAG,this.moduleType=i.regular,"R"===e.REMOTE_CALL?this.moduleType=i.remote:void 0!==e.UPDATE_TASK&&(this.moduleType=i.update),e.IMPORT)for(const t of(0,s.xmlToArray)(e.IMPORT.RSIMP)){if(void 0===t.PARAMETER)throw new Error("Function module name parameter undefined, importing");this.parameters.push({name:t.PARAMETER,direction:o.importing,type:t.TYP||t.DBFIELD,optional:"X"===t.OPTIONAL,defaultValue:t.DEFAULT})}if(e.CHANGING)for(const t of(0,s.xmlToArray)(e.CHANGING.RSCHA)){if(void 0===t.PARAMETER)throw new Error("Function module name parameter undefined, changing");this.parameters.push({name:t.PARAMETER,direction:o.changing,type:t.TYP||t.DBFIELD,optional:"X"===t.OPTIONAL,defaultValue:t.DEFAULT})}if(e.EXPORT)for(const t of(0,s.xmlToArray)(e.EXPORT.RSEXP)){if(void 0===t.PARAMETER)throw new Error("Function module name parameter undefined, exporting");this.parameters.push({name:t.PARAMETER,direction:o.exporting,type:t.TYP||t.DBFIELD,optional:!0,defaultValue:void 0})}if(e.TABLES)for(const t of(0,s.xmlToArray)(e.TABLES.RSTBL)){if(void 0===t.PARAMETER)throw new Error("Function module name parameter undefined, tables");this.parameters.push({name:t.PARAMETER,direction:o.tables,type:t.DBSTRUCT||t.TYP,optional:"X"===t.OPTIONAL,defaultValue:void 0})}}}},15718(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const s=n(20572),o=n(80300),i=n(86219),r=n(5518);var a;!function(e){e.ExternalView="X"}(a||(a={}));class c extends o.AbstractObject{getType(){return"VIEW"}getAllowedNaming(){return{maxLength:16,allowNamespace:!0}}getFields(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.fields}getJoin(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.join}setDirty(){this.parsedData=void 0,super.setDirty()}parseType(e){if(void 0===this.parsedData&&this.parseXML(),void 0===this.parsedData)return new s.UnknownType("View, parser error",this.getName());const t=[],n=[],o=new r.DDIC(e);for(const e of this.parsedData.fields){if("*"===e.VIEWFIELD||"-"===e.VIEWFIELD)continue;if(this.parsedData.header.VIEWCLASS===a.ExternalView){t.push({name:e.VIEWFIELD,type:s.VoidType.get("ExternalView")});continue}if(e.TABNAME===this.getName())throw new Error("Unexpected self reference in view "+this.getName()+", "+e.FIELDNAME+" "+e.FIELDNAME);const i=o.lookupTableOrView(e.TABNAME);let r=i.type;if(i.object&&n.push({object:i.object}),".APPEND"!==e.VIEWFIELD){if(r instanceof s.StructureType){const t=r.getComponentByName(e.FIELDNAME);r=void 0===t?new s.UnknownType(e.FIELDNAME+" not found in "+e.TABNAME+", VIEW parse type"):t}t.push({name:e.VIEWFIELD,type:r})}}return e.getDDICReferences().setUsing(this,n),0===t.length?new s.UnknownType("View "+this.getName()+" does not contain any components"):new s.StructureType(t,this.getName())}listKeys(){var e;void 0===this.parsedData&&this.parseXML();const t=[];for(const n of(null===(e=this.parsedData)||void 0===e?void 0:e.fields)||[])"X"===n.KEYFLAG&&t.push(n.FIELDNAME);return t}getDescription(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.header.DDTEXT}parseXML(){var e,t,n;this.parsedData={header:{VIEWCLASS:"",DDTEXT:""},fields:[],join:[]};const s=super.parseRaw2();if(void 0===s||void 0===s.abapGit)return;const o=null===(e=s.abapGit["asx:abap"]["asx:values"])||void 0===e?void 0:e.DD25V;this.parsedData.header={VIEWCLASS:(null==o?void 0:o.VIEWCLASS)||"",DDTEXT:(null==o?void 0:o.DDTEXT)||""};const r=null===(t=s.abapGit["asx:abap"]["asx:values"])||void 0===t?void 0:t.DD27P_TABLE;for(const e of(0,i.xmlToArray)(null==r?void 0:r.DD27P))this.parsedData.fields.push({VIEWFIELD:e.VIEWFIELD,TABNAME:e.TABNAME,FIELDNAME:e.FIELDNAME,KEYFLAG:e.KEYFLAG});const a=null===(n=s.abapGit["asx:abap"]["asx:values"])||void 0===n?void 0:n.DD28J_TABLE;for(const e of(0,i.xmlToArray)(null==a?void 0:a.DD28J))this.parsedData.join.push({LTAB:e.LTAB,LFIELD:e.LFIELD,OPERATOR:e.OPERATOR,RTAB:e.RTAB,RFIELD:e.RFIELD})}}t.View=c},15767(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Let=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("LET",(0,s.plusPrio)(o.InlineFieldDefinition),"IN")}}t.Let=i},15793(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseType=void 0;const s=n(3125),o=n(49028),i=n(82245);t.CaseType=class{getMatcher(){return(0,s.ver)(o.Version.v750,(0,s.seq)("CASE TYPE OF",i.Source),o.Version.OpenABAP)}}},15838(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypedIdentifier=void 0;const s=n(2088);class o extends s.Identifier{[Symbol.for("debug.description")](){return`${this.constructor.name} ${this.getName()}:${this.getType().constructor.name}`}static from(e,t,n){return new o(e.getToken(),e.getFilename(),t,n)}constructor(e,t,n,s,i){super(e,t),this.type=n instanceof o?n.getType():n,this.value=i,this.meta=[],s&&(this.meta=s)}toText(){return"Identifier: ```"+this.getName()+"```"}getType(){return this.type}getMeta(){return this.meta}getValue(){return this.value}}t.TypedIdentifier=o},15863(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStatement=t.EmptyStatementConf=void 0;const s=n(71759),o=n(52024),i=n(99732),r=n(77465),a=n(71249),c=n(86789),l=n(86696);class d extends r.BasicRuleConfig{}t.EmptyStatementConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"empty_statement",title:"Remove empty statement",shortDescription:"Checks for empty statements (an empty statement is a single dot)",tags:[l.RuleTag.Quickfix,l.RuleTag.SingleFile],badExample:"WRITE 'hello world'..",goodExample:"WRITE 'hello world'."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStatements();let i=new c.Position(1,1);for(const r of n){if(r.get()instanceof o.Empty){const n=r.getFirstToken(),o=a.EditHelper.deleteRange(e,i,n.getEnd()),c=s.Issue.atStatement(e,r,"Remove empty statement",this.getMetadata().key,this.conf.severity,o);t.push(c)}i=r.getLastToken().getEnd()}return t}}t.EmptyStatement=u},15884(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Replace=void 0;const s=n(3125),o=n(82245);t.Replace=class{getMatcher(){const e=(0,s.seq)("LENGTH",o.Source),t=(0,s.seq)("OFFSET",o.Source),n=(0,s.seq)((0,s.opt)("IN"),"SECTION",(0,s.per)(t,e),"OF",o.Target),i=(0,s.seq)((0,s.opt)("OF"),o.FindType,o.Source),r=(0,s.altPrio)("IGNORING CASE","RESPECTING CASE"),a=(0,s.seq)("REPLACEMENT COUNT",o.Target),c=(0,s.seq)("REPLACEMENT OFFSET",o.Target),l=(0,s.seq)("REPLACEMENT LENGTH",o.Target),d=(0,s.seq)("REPLACEMENT LINE",o.Target),u=(0,s.altPrio)("ALL OCCURRENCES","ALL OCCURENCES","FIRST OCCURENCE","FIRST OCCURRENCE"),p=(0,s.alt)("IN CHARACTER MODE","IN BYTE MODE"),f=(0,s.seq)("WITH",o.Source),g=(0,s.seq)("INTO",o.Target);return(0,s.seq)("REPLACE",(0,s.per)(n,(0,s.seq)((0,s.opt)(u),i)),(0,s.opt)((0,s.seq)("IN",(0,s.opt)("TABLE"),o.Target)),(0,s.opt)((0,s.per)(f,g,r,p,a,c,l,d,e)))}}},15915(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CatchSystemExceptions=void 0;const s=n(50612),o=n(58720),i=n(79175);t.CatchSystemExceptions=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.CatchSystemExceptions),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndCatch))}}},15916(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=void 0;const s=n(3125),o=n(82245);t.Overlay=class{getMatcher(){const e=(0,s.seq)("ONLY",o.Source);return(0,s.seq)("OVERLAY",o.Target,"WITH",o.Source,(0,s.opt)(e))}}},15961(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dash=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"-"}}t.Dash=o},16063(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyOnlyOwnDBTables=t.ModifyOnlyOwnDBTablesConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(77465),a=n(86696),c=n(12620),l=n(52424);class d extends r.BasicRuleConfig{constructor(){super(...arguments),this.reportDynamic=!0,this.ownTables="^[yz]"}}t.ModifyOnlyOwnDBTablesConf=d,t.ModifyOnlyOwnDBTables=class{constructor(){this.conf=new d}getMetadata(){return{key:"modify_only_own_db_tables",title:"Modify only own DB tables",shortDescription:"Modify only own DB tables",extendedInformation:"https://docs.abapopenchecks.org/checks/26/",tags:[a.RuleTag.Security]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){var t;if(!(e instanceof c.ABAPObject))return[];let n;const r=[];for(const a of e.getABAPFiles()){if(void 0===a.getStructure())return[];const c=new RegExp(this.getConfig().ownTables,"i");for(const d of a.getStatements()){const u=d.get();if(u instanceof s.DeleteDatabase||u instanceof s.UpdateDatabase||u instanceof s.InsertDatabase||u instanceof s.ModifyDatabase){const s=d.findFirstExpression(o.DatabaseTable);if(void 0===s)continue;if((null===(t=s.getFirstChild())||void 0===t?void 0:t.get())instanceof o.Dynamic){!0===this.getConfig().reportDynamic&&r.push(i.Issue.atStatement(a,d,this.getMetadata().title,this.getMetadata().key,this.getConfig().severity));continue}const u=s.concatTokens().toUpperCase();if(!1===c.test(u)){void 0===n&&(n=new l.SyntaxLogic(this.reg,e).run().spaghetti);const t=s.getFirstToken().getStart(),o=n.lookupPosition(t,a.getFilename());(null==o?void 0:o.findTableVoidReference(t))&&r.push(i.Issue.atStatement(a,d,this.getMetadata().title,this.getMetadata().key,this.getConfig().severity)),(null==o?void 0:o.findTableReference(t))&&r.push(i.Issue.atStatement(a,d,this.getMetadata().title,this.getMetadata().key,this.getConfig().severity))}}}}return r}}},16140(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WDash=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" -"}}t.WDash=o},16218(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AssignmentServiceToAuthorizationGroup=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SUSH"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.AssignmentServiceToAuthorizationGroup=o},16428(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictionType=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA2"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.RestrictionType=o},16464(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferReturningToExporting=t.PreferReturningToExportingConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.PreferReturningToExportingConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"prefer_returning_to_exporting",title:"Prefer RETURNING to EXPORTING",shortDescription:"Prefer RETURNING to EXPORTING. Generic types cannot be RETURNING.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-returning-to-exporting\nhttps://docs.abapopenchecks.org/checks/44/",tags:[c.RuleTag.Styleguide,c.RuleTag.SingleFile],badExample:"CLASS lcl DEFINITION.\n  PUBLIC SECTION.\n    METHODS test EXPORTING ev_foo TYPE i.\nENDCLASS."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllStatements(i.MethodDef)){if(o.findFirstExpression(r.MethodDefChanging))continue;const n=o.findFirstExpression(r.MethodDefExporting);if(void 0===n)continue;if(void 0!==o.findFirstExpression(r.MethodDefReturning))continue;const i=n.findDirectExpressions(r.MethodParam);if(1!==i.length)continue;const a=i[0].concatTokens().toUpperCase();if(a.endsWith("TYPE ANY")||a.endsWith("TYPE ANY TABLE")||a.endsWith("TYPE C")||a.endsWith("TYPE CLIKE")||a.endsWith("TYPE CSEQUENCE")||a.endsWith("TYPE DATA")||a.endsWith("TYPE DECFLOAT")||a.endsWith("TYPE HASHED TABLE")||a.endsWith("TYPE INDEX TABLE")||a.endsWith("TYPE N")||a.endsWith("TYPE NUMERIC")||a.endsWith("TYPE OBJECT")||a.endsWith("TYPE P")||a.endsWith("TYPE SIMPLE")||a.endsWith("TYPE SORTED TABLE")||a.endsWith("TYPE STANDARD TABLE")||a.endsWith("TYPE TABLE")||a.endsWith("TYPE X")||a.endsWith("TYPE XSEQUENCE"))continue;const c=i[0].getFirstToken(),l=s.Issue.atToken(e,c,"Prefer RETURNING to EXPORTING",this.getMetadata().key,this.conf.severity);t.push(l)}return t}}t.PreferReturningToExporting=d},16475(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.When=void 0;const s=n(50612),o=n(58720),i=n(79175);t.When=class{getMatcher(){return(0,o.seq)((0,o.alt)((0,o.sta)(s.When),(0,o.sta)(s.WhenOthers)),(0,o.opt)((0,o.sub)(i.Body)))}}},16561(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneLaunchpad=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN03"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneLaunchpad=o},16641(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDatabase=void 0;const s=n(3125),o=n(82245),i=n(97007);t.DeleteDatabase=class{getMatcher(){const e=(0,s.seq)("WHERE",(0,s.altPrio)(o.SQLCond,o.Dynamic)),t=(0,s.seq)("FROM",o.DatabaseTable,(0,s.optPrio)(i.SQLClient),(0,s.optPrio)(o.DatabaseConnection),(0,s.opt)(e)),n=(0,s.seq)("FROM",(0,s.opt)("TABLE"),o.SQLSourceSimple),r=(0,s.seq)(o.DatabaseTable,(0,s.optPrio)(i.SQLClient),(0,s.optPrio)(o.DatabaseConnection),(0,s.optPrio)(n));return(0,s.seq)("DELETE",(0,s.altPrio)(t,r))}}},16655(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Domain=void 0;const s=n(80300),o=n(20572),i=n(5518),r=n(86219);class a extends s.AbstractObject{getType(){return"DOMA"}getDescription(){var e;return null===(e=this.parsedXML)||void 0===e?void 0:e.description}getConversionExit(){var e;return null===(e=this.parsedXML)||void 0===e?void 0:e.conversionExit}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}parseType(e,t,n){return void 0===this.parsedXML&&this.parse(),void 0===this.parsedXML?new o.UnknownType("Domain "+this.getName()+" parser error",this.getName()):new i.DDIC(e).textToType({text:this.parsedXML.datatype,length:this.parsedXML.length,decimals:this.parsedXML.decimals,infoText:this.getName(),qualifiedName:t,conversionExit:this.parsedXML.conversionExit,ddicName:t,description:n})}parse(){var e,t,n,s,o,i,a;if(this.parsedXML)return{updated:!1,runtime:0};const c=Date.now();this.parsedXML={};const l=super.parseRaw2();if(void 0===l)return{updated:!1,runtime:0};const d=null===(n=null===(t=null===(e=l.abapGit)||void 0===e?void 0:e["asx:abap"])||void 0===t?void 0:t["asx:values"])||void 0===n?void 0:n.DD01V,u=(0,r.xmlToArray)(null===(a=null===(i=null===(o=null===(s=l.abapGit)||void 0===s?void 0:s["asx:abap"])||void 0===o?void 0:o["asx:values"])||void 0===i?void 0:i.DD07V_TAB)||void 0===a?void 0:a.DD07V),p=[];for(const e of u){const t={description:null==e?void 0:e.DDTEXT,low:null==e?void 0:e.DOMVALUE_L,high:null==e?void 0:e.DOMVALUE_H,language:null==e?void 0:e.DDLANGUAGE};p.push(t)}return this.parsedXML={description:null==d?void 0:d.DDTEXT,datatype:null==d?void 0:d.DATATYPE,length:null==d?void 0:d.LENG,conversionExit:null==d?void 0:d.CONVEXIT,decimals:null==d?void 0:d.DECIMALS,values:p},{updated:!0,runtime:Date.now()-c}}getFixedValues(){var e,t;return null!==(t=null===(e=this.parsedXML)||void 0===e?void 0:e.values)&&void 0!==t?t:[]}}t.Domain=a},16732(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFunction=void 0;const s=n(49028),o=n(89301),i=n(3125),r=n(26967),a=n(45627);class c extends i.Expression{getRunnable(){const e=(0,i.altPrio)((0,i.seq)("CHAR",(0,i.optPrio)((0,i.seq)((0,i.tok)(o.ParenLeftW),r.Integer,(0,i.tok)(o.WParenRightW)))),(0,i.seq)("DEC",(0,i.tok)(o.ParenLeftW),r.Integer,",",r.Integer,(0,i.tok)(o.WParenRightW)),(0,i.seq)("NUMC",(0,i.optPrio)((0,i.seq)((0,i.tok)(o.ParenLeftW),r.Integer,(0,i.tok)(o.WParenRightW)))),"DATS","FLTP","INT2","INT4","INT8"),t=(0,i.seq)(",",a.SQLFunctionInput),n=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^abs$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),c=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^cast$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,"AS",e,(0,i.tok)(o.WParenRightW))),l=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^ceil$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),d=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^coalesce$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.optPrio)(t),(0,i.tok)(o.WParenRightW))),u=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^concat$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),p=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^div$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),f=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^floor$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),g=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^length$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),h=(0,i.ver)(s.Version.v751,(0,i.seq)((0,i.regex)(/^lower$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),T=(0,i.ver)(s.Version.v740sp05,(0,i.seq)((0,i.regex)(/^mod$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),m=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^replace$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,t,(0,i.tok)(o.WParenRightW))),y=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^round$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),S=(0,i.ver)(s.Version.v751,(0,i.seq)((0,i.regex)(/^upper$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),v=(0,i.ver)(s.Version.v754,(0,i.seq)((0,i.regex)(/^uuid$/i),(0,i.tok)(o.ParenLeftW),(0,i.tok)(o.WParenRightW))),E=(0,i.ver)(s.Version.v751,(0,i.seq)((0,i.regex)(/^concat_with_space$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,t,(0,i.tok)(o.WParenRightW))),C=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^substring$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,t,(0,i.tok)(o.WParenRightW))),b=(0,i.ver)(s.Version.v754,(0,i.seq)((0,i.regex)(/^dats_is_valid$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,(0,i.tok)(o.WParenRightW))),I=(0,i.ver)(s.Version.v754,(0,i.seq)((0,i.regex)(/^dats_days_between$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),D=(0,i.ver)(s.Version.v754,(0,i.seq)((0,i.regex)(/^dats_add_days$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),x=(0,i.ver)(s.Version.v754,(0,i.seq)((0,i.regex)(/^dats_add_months$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),P=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^ltrim$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW))),A=(0,i.ver)(s.Version.v750,(0,i.seq)((0,i.regex)(/^rtrim$/i),(0,i.tok)(o.ParenLeftW),a.SQLFunctionInput,t,(0,i.tok)(o.WParenRightW)));return(0,i.altPrio)(v,n,l,f,c,p,T,d,u,m,g,h,S,y,E,P,A,C,b,I,D,x)}}t.SQLFunction=c},16746(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDefineAbstract=void 0;const s=n(18483),o=n(3125),i=n(19181);class r extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.opt)((0,o.str)("KEY")),i.CDSName,":",s.CDSType,";");return(0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.str)("DEFINE ABSTRACT ENTITY"),i.CDSName,(0,o.str)("{"),(0,o.plus)(e),(0,o.str)("}"),(0,o.opt)(";"))}}t.CDSDefineAbstract=r},16803(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetScreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetScreen=class{getMatcher(){const e=(0,s.seq)("SET SCREEN",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},16842(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Assert=void 0;const s=n(82245),o=n(60635);t.Assert=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Cond))o.Cond.runSyntax(n,t)}}},16848(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSProviderContract=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.seq)("PROVIDER CONTRACT",(0,s.alt)("TRANSACTIONAL_QUERY","TRANSACTIONAL_INTERFACE","ANALYTICAL_QUERY"))}}t.CDSProviderContract=o},16867(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormObjectInterface=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SFPI"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.FormObjectInterface=o},16934(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertReport=void 0;const s=n(82245),o=n(93170);t.InsertReport=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},17004(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Normal=void 0;const s=n(94967),o=n(50612),i=n(58720),r=n(52024);t.Normal=class{getMatcher(){return(0,i.alt)((0,i.sta)(o.Move),(0,i.sta)(o.Call),(0,i.sta)(o.Data),(0,i.sub)(s.If),(0,i.sta)(o.Clear),(0,i.sta)(o.FieldSymbol),(0,i.sta)(o.CreateObject),(0,i.sta)(o.CallFunction),(0,i.sta)(r.MacroCall),(0,i.sub)(s.LoopAtScreen),(0,i.sub)(s.Loop),(0,i.sub)(s.LoopExtract),(0,i.sta)(o.Append),(0,i.sub)(s.Try),(0,i.sub)(s.OnChange),(0,i.sta)(o.ReadTable),(0,i.sta)(o.Assert),(0,i.sta)(o.Return),(0,i.sta)(o.Select),(0,i.sta)(o.Assign),(0,i.sta)(o.InsertInternal),(0,i.sta)(o.DeleteInternal),(0,i.sta)(o.Concatenate),(0,i.sub)(s.Case),(0,i.sub)(s.CaseType),(0,i.sub)(s.Enhancement),(0,i.sub)(s.EnhancementSection),(0,i.sta)(o.AddCorresponding),(0,i.sta)(o.Add),(0,i.sta)(o.AssignLocalCopy),(0,i.sta)(o.AuthorityCheck),(0,i.sta)(o.Back),(0,i.sta)(o.Break),(0,i.sta)(o.BreakId),(0,i.sta)(o.CallDatabase),(0,i.sta)(o.CallDialog),(0,i.sta)(o.CallKernel),(0,i.sta)(o.CallOLE),(0,i.sta)(o.CallScreen),(0,i.sta)(o.ModifyScreen),(0,i.sta)(o.CallSelectionScreen),(0,i.sta)(o.CallTransaction),(0,i.sta)(o.CallTransformation),(0,i.sta)(o.Check),(0,i.sta)(o.ClassDefinitionLoad),(0,i.sta)(o.CloseCursor),(0,i.sta)(o.CloseDataset),(0,i.sta)(o.Collect),(0,i.sta)(o.Commit),(0,i.sta)(o.Communication),(0,i.sta)(o.Compute),(0,i.sta)(o.CallBadi),(0,i.sta)(o.Condense),(0,i.sta)(o.Constant),(0,i.sta)(o.Contexts),(0,i.sta)(o.Continue),(0,i.sta)(o.ConvertText),(0,i.sta)(o.Convert),(0,i.sta)(o.CreateData),(0,i.sta)(o.CreateOLE),(0,i.sta)(o.DeleteCluster),(0,i.sta)(o.DeleteDatabase),(0,i.sta)(o.DeleteDataset),(0,i.sta)(o.DeleteDynpro),(0,i.sta)(o.DeleteMemory),(0,i.sta)(o.DeleteReport),(0,i.sta)(o.DeleteTextpool),(0,i.sta)(o.Demand),(0,i.sta)(o.Describe),(0,i.sta)(o.Detail),(0,i.sta)(o.Divide),(0,i.sta)(o.EditorCall),(0,i.sta)(o.EnhancementPoint),(0,i.sta)(o.Exit),(0,i.sta)(o.ExportDynpro),(0,i.sta)(o.Export),(0,i.sta)(o.Extract),(0,i.sta)(o.FetchNextCursor),(0,i.sta)(o.FieldGroup),(0,i.sta)(o.Fields),(0,i.sta)(o.Find),(0,i.sta)(o.Format),(0,i.sta)(o.FreeMemory),(0,i.sta)(o.FreeObject),(0,i.sta)(o.Free),(0,i.sta)(o.GenerateDynpro),(0,i.sta)(o.GenerateReport),(0,i.sta)(o.GenerateSubroutine),(0,i.sta)(o.GetBadi),(0,i.sta)(o.GetBit),(0,i.sta)(o.GetCursor),(0,i.sta)(o.GetDataset),(0,i.sta)(o.GetLocale),(0,i.sta)(o.GetParameter),(0,i.sta)(o.GetPFStatus),(0,i.sta)(o.GetProperty),(0,i.sta)(o.GetReference),(0,i.sta)(o.GetRunTime),(0,i.sta)(o.GetTime),(0,i.sta)(o.Hide),(0,i.sta)(o.Nodes),(0,i.sta)(o.ImportDynpro),(0,i.sta)(o.ImportNametab),(0,i.sta)(o.MoveCorresponding),(0,i.sta)(o.Import),(0,i.sta)(o.Infotypes),(0,i.sta)(o.Include),(0,i.sta)(o.InsertDatabase),(0,i.sta)(o.InsertReport),(0,i.sta)(o.InsertTextpool),(0,i.sta)(o.InsertFieldGroup),(0,i.sta)(o.InterfaceLoad),(0,i.sta)(o.Leave),(0,i.sta)(o.LoadReport),(0,i.sta)(o.Local),(0,i.sta)(o.With),(0,i.sta)(o.LogPoint),(0,i.sta)(o.Message),(0,i.sta)(o.ModifyLine),(0,i.sta)(o.ModifyDatabase),(0,i.sta)(o.ModifyInternal),(0,i.sta)(o.Multiply),(0,i.sta)(o.NewLine),(0,i.sta)(o.NewPage),(0,i.sta)(o.OpenCursor),(0,i.sta)(o.OpenDataset),(0,i.sta)(o.Overlay),(0,i.sta)(o.Pack),(0,i.sta)(o.Perform),(0,i.sta)(o.FormDefinition),(0,i.sta)(o.Position),(0,i.sta)(o.Put),(0,i.sta)(o.PrintControl),(0,i.sta)(o.RaiseEvent),(0,i.sta)(o.RaiseEntityEvent),(0,i.sta)(o.Raise),(0,i.sta)(o.Ranges),(0,i.sta)(o.ReadDataset),(0,i.sta)(o.ReadLine),(0,i.sta)(o.ReadReport),(0,i.sta)(o.ReadTextpool),(0,i.sta)(o.Receive),(0,i.sta)(o.RefreshControl),(0,i.sta)(o.Refresh),(0,i.sta)(o.Reject),(0,i.sta)(o.Replace),(0,i.sta)(o.Reserve),(0,i.sta)(o.Resume),(0,i.sta)(o.Retry),(0,i.sta)(o.Rollback),(0,i.sta)(o.Scan),(0,i.sta)(o.ScrollList),(0,i.sta)(o.Search),(0,i.sta)(o.SetBit),(0,i.sta)(o.SetBlank),(0,i.sta)(o.SetCountry),(0,i.sta)(o.SetCursor),(0,i.sta)(o.SetDataset),(0,i.sta)(o.SetExtendedCheck),(0,i.sta)(o.SetHandler),(0,i.sta)(o.SetLanguage),(0,i.sta)(o.SetLeft),(0,i.sta)(o.SetLocale),(0,i.sta)(o.SetMargin),(0,i.sta)(o.SetParameter),(0,i.sta)(o.SetPFStatus),(0,i.sta)(o.SetProperty),(0,i.sta)(o.SetRunTime),(0,i.sta)(o.SetScreen),(0,i.sta)(o.SetTitlebar),(0,i.sta)(o.SetUserCommand),(0,i.sta)(o.SetUpdateTask),(0,i.sta)(o.Shift),(0,i.sta)(o.Skip),(0,i.sta)(o.SortDataset),(0,i.sta)(o.Sort),(0,i.sta)(o.Static),(0,i.sta)(o.Split),(0,i.sta)(o.Stop),(0,i.sta)(o.Submit),(0,i.sta)(o.Summary),(0,i.sta)(o.SubtractCorresponding),(0,i.sta)(o.Subtract),(0,i.sta)(o.SuppressDialog),(0,i.sta)(o.Supply),(0,i.sta)(o.Sum),(0,i.sta)(o.SyntaxCheck),(0,i.sta)(o.SystemCall),(0,i.sta)(o.Tables),(0,i.sta)(o.Transfer),(0,i.sta)(o.Translate),(0,i.sta)(o.Type),(0,i.sta)(o.TypePools),(0,i.sta)(o.Uline),(0,i.sta)(o.Unassign),(0,i.sta)(o.Unpack),(0,i.sta)(o.UpdateDatabase),(0,i.sta)(o.Wait),(0,i.sta)(o.Window),(0,i.sta)(o.Write),(0,i.sta)(o.CommitEntities),(0,i.sta)(o.GetPermissions),(0,i.sta)(o.SetLocks),(0,i.sta)(o.ModifyEntities),(0,i.sta)(o.ReadEntities),(0,i.sta)(o.RollbackEntities),(0,i.sta)(o.Module),(0,i.sta)(o.Field),(0,i.sub)(s.Chain),(0,i.sub)(s.Define),(0,i.sub)(s.TestInjection),(0,i.sub)(s.TestSeam),(0,i.sub)(s.TypeMesh),(0,i.sub)(s.Provide),(0,i.sub)(s.CatchSystemExceptions),(0,i.sub)(s.At),(0,i.sub)(s.AtFirst),(0,i.sub)(s.AtLast),(0,i.sub)(s.Constants),(0,i.sub)(s.Types),(0,i.sub)(s.Statics),(0,i.sub)(s.Select),(0,i.sub)(s.Data),(0,i.sub)(s.TypeEnum),(0,i.sub)(s.While),(0,i.sub)(s.With),(0,i.sub)(s.Do),(0,i.sub)(s.ExecSQL))}}},17060(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardTask=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"PDTS"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.StandardTask=o},17161(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceDeferred=void 0;const s=n(3125),o=n(82245);t.InterfaceDeferred=class{getMatcher(){return(0,s.seq)("INTERFACE",o.InterfaceName,"DEFERRED",(0,s.opt)("PUBLIC"))}}},17192(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetParameter=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetParameter=class{getMatcher(){const e=(0,s.seq)("GET PARAMETER ID",o.Source,"FIELD",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},17196(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NROBConsistency=t.NROBConsistencyConf=void 0;const s=n(86696),o=n(71759),i=n(84383),r=n(77465);class a extends r.BasicRuleConfig{}t.NROBConsistencyConf=a,t.NROBConsistency=class{constructor(){this.conf=new a}getMetadata(){return{key:"nrob_consistency",title:"Number range consistency",shortDescription:"Consistency checks for number ranges",extendedInformation:"Issue reported if percentage warning is over 50%\n\nIssue reported if the referenced domain is not found(taking error namespace into account)",tags:[s.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){if(!(e instanceof i.NumberRange))return[];const t=[],n=e.getIdentifier();if(void 0===n)return[];if(e.getPercentage()){const e="Percentage more than 50";t.push(o.Issue.atIdentifier(n,e,this.getMetadata().key,this.getConfig().severity))}const s=e.getDomain();if(s&&void 0===this.reg.getObject("DOMA",s)&&!0===this.reg.inErrorNamespace(s)){const e="Domain "+s+" not found";t.push(o.Issue.atIdentifier(n,e,this.getMetadata().key,this.getConfig().severity))}return[]}}},17209(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLIn=void 0;const s=n(82245),o=n(20572),i=n(82054),r=n(25287);t.SQLIn=class{static runSyntax(e,t){if(2!==e.getChildren().length){for(const n of e.findDirectExpressions(s.SQLSource))r.SQLSource.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SQLSourceNoSpace))r.SQLSource.runSyntax(n,t)}else{const n=e.findFirstExpression(s.SQLSource);if(n){const s=r.SQLSource.runSyntax(n,t);if(s&&!(s instanceof o.VoidType)&&!(s instanceof o.UnknownType)&&!(s instanceof o.TableType)){const n="IN, not a table";return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}}}}}},17239(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMesh=void 0;const s=n(50612),o=n(58720);t.TypeMesh=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.TypeMeshBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.TypeMesh),(0,o.sta)(s.Type))),(0,o.sta)(s.TypeMeshEnd))}}},17565(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferIsNot=t.PreferIsNotConf=void 0;const s=n(71759),o=n(99732),i=n(82245),r=n(77465),a=n(71249),c=n(86696),l=n(86789);class d extends r.BasicRuleConfig{}t.PreferIsNotConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"prefer_is_not",title:"Prefer IS NOT to NOT IS",shortDescription:"Prefer IS NOT to NOT IS",extendedInformation:'\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-is-not-to-not-is\n\n"if not is_valid( )." examples are skipped',tags:[c.RuleTag.Styleguide,c.RuleTag.Quickfix,c.RuleTag.SingleFile],goodExample:"IF variable IS NOT INITIAL.\nIF variable NP 'TODO*'.\nIF variable <> 42.\nIF variable CO 'hello'.",badExample:"IF NOT variable IS INITIAL.\nIF NOT variable CP 'TODO*'.\nIF NOT variable = 42.\nIF NOT variable CA 'hello'."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements())for(const o of n.findAllExpressions(i.Compare)){if(!1===o.concatTokens().toUpperCase().startsWith("NOT "))continue;if(2===o.getChildren().length&&o.getChildren()[1].get()instanceof i.MethodCallChain)continue;const n="Prefer IS NOT to NOT IS",r=this.getFix(e,o);t.push(s.Issue.atToken(e,o.getFirstToken(),n,this.getMetadata().key,this.conf.severity,r))}return t}getFix(e,t){let n;if("IS"===t.getChildren()[2].getFirstToken().getStr().toUpperCase()){const s=t.getChildren()[2].getLastToken().getEnd(),o=new l.Position(s.getRow(),s.getCol()+1);n=a.EditHelper.insertAt(e,o,"NOT ")}else if("IN"===t.getChildren()[2].getFirstToken().getStr().toUpperCase()||"BETWEEN"===t.getChildren()[2].getFirstToken().getStr().toUpperCase()){const s=t.getChildren()[1].getLastToken().getEnd(),o=new l.Position(s.getRow(),s.getCol()+1);n=a.EditHelper.insertAt(e,o,"NOT ")}else if("="===t.getChildren()[2].getFirstToken().getStr())n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),"<>");else if("<>"===t.getChildren()[2].getFirstToken().getStr())n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),"=");else if("<"===t.getChildren()[2].getFirstToken().getStr())n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),">");else if(">"===t.getChildren()[2].getFirstToken().getStr())n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),"<");else if("<="===t.getChildren()[2].getFirstToken().getStr())n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),">=");else{if(">="!==t.getChildren()[2].getFirstToken().getStr())return;n=a.EditHelper.replaceToken(e,t.getChildren()[2].getLastToken(),"<=")}const s=t.getChildren()[0].getFirstToken().getEnd().getCol()+1,o=new l.Position(t.getChildren()[0].getFirstToken().getEnd().getRow(),s),i=a.EditHelper.deleteRange(e,t.getChildren()[0].getFirstToken().getStart(),o);return a.EditHelper.merge(n,i)}}t.PreferIsNot=u},17587(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"@ "}}t.AtW=o},17595(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteMemory=void 0;const s=n(3125),o=n(82245),i=n(49028);t.DeleteMemory=class{getMatcher(){const e=(0,s.seq)("MEMORY ID",o.Source),t=(0,s.seq)("ID",o.Source),n=(0,s.seq)("CLIENT",o.Source),r=(0,s.seq)("SHARED",(0,s.altPrio)("MEMORY","BUFFER"),o.Field,"(",(0,s.regex)(/^[\w%]+$/),")",(0,s.optPrio)(n),t),a=(0,s.seq)("DELETE FROM",(0,s.alt)(e,r));return(0,s.verNot)(i.Version.Cloud,a)}}},17679(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneDocumentation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN16"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneDocumentation=o},17808(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dynamic=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.altPrio)((0,s.tok)(o.WParenLeft),(0,s.tok)(o.ParenLeft)),(0,s.altPrio)(i.FieldChain,i.Constant),(0,s.altPrio)((0,s.tok)(o.ParenRightW),(0,s.tok)(o.ParenRight)))}}t.Dynamic=r},17830(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownObject=void 0;const s=n(80300),o=n(71759),i=n(86789),r=n(96493);class a extends s.AbstractObject{constructor(e,t){super(e),this.type=t}getType(){return this.type}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}getDescription(){}getParsingIssues(){const e=new i.Position(1,1),t=this.getFiles()[0];return[o.Issue.atPosition(t,e,"Unknown object type, currently not supported in abaplint, open issue on github","parser_error",r.Severity.Error)]}}t.UnknownObject=a},17848(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndEnhancement=void 0;const s=n(3125),o=n(49028);t.EndEnhancement=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"ENDENHANCEMENT")}}},17867(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseEntityEvent=void 0;const s=n(3125),o=n(82245);t.RaiseEntityEvent=class{getMatcher(){return(0,s.seq)("RAISE ENTITY EVENT",o.EventName,"FROM",o.Source)}}},17952(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Rename=t.RenameType=void 0;const s=n(46203),o=n(75584),i=n(12620),r=n(77959),a=n(15838),c=n(20941),l=n(2056),d=n(38506),u=n(36271);var p;!function(e){e[e.GlobalClass=1]="GlobalClass",e[e.Variable=2]="Variable",e[e.GlobalInterface=3]="GlobalInterface",e[e.Method=4]="Method"}(p||(t.RenameType=p={})),t.Rename=class{constructor(e){this.reg=e}prepareRename(e){const t=o.LSPUtils.getABAPFile(this.reg,e.textDocument.uri);if(void 0===t)return;const n=this.reg.getObject(t.getObjectType(),t.getObjectName());if(!(n instanceof i.ABAPObject))return;const s=o.LSPUtils.findCursor(this.reg,e);if(void 0===s)return;const l=o.LSPUtils.tokenToRange(s.token);let d=s.token.getStr();d.startsWith("!")&&(d=d.substring(1),l.start.character+=1);const u=r.LSPLookup.lookup(s,this.reg,n);return(null==u?void 0:u.definitionId)instanceof a.TypedIdentifier?{range:l,placeholder:d,type:p.Variable,file:t}:(null==u?void 0:u.definitionId)instanceof c.ClassDefinition?{range:l,placeholder:d,type:p.GlobalClass,file:t}:(null==u?void 0:u.definitionId)instanceof c.InterfaceDefinition?{range:l,placeholder:d,type:p.GlobalInterface,file:t}:(null==u?void 0:u.definitionId)instanceof c.MethodDefinition?{range:l,placeholder:d,type:p.Method,file:t}:void 0}rename(e){const t=this.prepareRename(e);if(void 0!==t)switch(t.type){case p.GlobalClass:return new d.Renamer(this.reg).buildEdits("CLAS",t.placeholder,e.newName);case p.GlobalInterface:return new d.Renamer(this.reg).buildEdits("INTF",t.placeholder,e.newName);case p.Variable:return this.renameVariable(e);case p.Method:return this.renameMethod(e);default:return}}renameVariable(e){var t;const n={documentChanges:[]},o=new l.References(this.reg).references(e);for(const i of o){const o={uri:i.uri,version:1},r=s.TextDocumentEdit.create(o,[s.TextEdit.replace(i.range,e.newName)]);null===(t=n.documentChanges)||void 0===t||t.push(r)}return n}renameMethod(e){var t,n;const o={documentChanges:[]},i=new l.References(this.reg).references(e);for(const n of i){const i={uri:n.uri,version:1},r=s.TextDocumentEdit.create(i,[s.TextEdit.replace(n.range,e.newName)]);null===(t=o.documentChanges)||void 0===t||t.push(r)}const r=new u.Definition(this.reg).find(e.textDocument,e.position);if(r){const t={uri:e.textDocument.uri,version:1},i=s.TextDocumentEdit.create(t,[s.TextEdit.replace(null==r?void 0:r.range,e.newName)]);null===(n=o.documentChanges)||void 0===n||n.push(i)}return o}}},17968(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageNumber=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^\d\d\d$/i)}}t.MessageNumber=o},18038(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Call=void 0;const s=n(3125),o=n(82245);t.Call=class{getMatcher(){const e=(0,s.seq)("CALL METHOD",o.MethodSource,o.MethodCallBody);return(0,s.altPrio)(e,o.MethodCallChain)}}},18044(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Interface=void 0;const s=n(50612),o=n(58720),i=n(21585);t.Interface=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Interface),(0,o.star)((0,o.sub)(i.SectionContents)),(0,o.sta)(s.EndInterface))}}},18176(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionExportingParameter=void 0;const s=n(3125),o=n(93858),i=n(83568),r=n(49028),a=n(76342);class c extends s.Expression{getRunnable(){const e=(0,s.altPrio)((0,s.ver)(r.Version.v740sp02,i.Source,r.Version.OpenABAP),a.SimpleSource3);return(0,s.seq)(o.ParameterName,"=",e)}}t.FunctionExportingParameter=c},18181(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLUpTo=void 0;const s=n(3125),o=n(14933);class i extends s.Expression{getRunnable(){return(0,s.seq)("UP TO",o.SQLSource,"ROWS")}}t.SQLUpTo=i},18260(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Interface=void 0;const s=n(12620);class o extends s.ABAPObject{constructor(){super(...arguments),this.def=void 0,this.parsedXML=void 0}getType(){return"INTF"}setDefinition(e){this.def=e}getSequencedFiles(){const e=this.getMainABAPFile();return void 0===e?[]:[e]}getDefinition(){return this.def}getInterface(){var e;return null===(e=this.getMainABAPFile())||void 0===e?void 0:e.getInfo().getInterfaceDefinitionByName(this.getName())}getIdentifier(){var e;return null===(e=this.getInterface())||void 0===e?void 0:e.identifier}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.def=void 0,this.parsedXML=void 0,super.setDirty()}getNameFromXML(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.name}getDescription(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}parseXML(){if(void 0!==this.parsedXML)return;this.parsedXML={};const e=super.parseRaw2();if(void 0===e||void 0===e.abapGit["asx:abap"]["asx:values"])return;const t=e.abapGit["asx:abap"]["asx:values"].VSEOINTERF;void 0===t?(this.parsedXML.description="",this.parsedXML.name=""):(this.parsedXML.description=t.DESCRIPT?t.DESCRIPT:"",this.parsedXML.name=t.CLSNAME?t.CLSNAME:"")}}t.Interface=o},18303(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeParam=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.altPrio)("STANDARD","HASHED","INDEX","SORTED","ANY"),"TABLE"),t=(0,s.seq)((0,s.optPrio)((0,s.seq)(e,"OF")),(0,s.optPrio)("REF TO")),n=(0,s.seq)((0,s.alt)(t,"LINE OF"),o.TypeNameOrInfer,(0,s.opt)(o.Default)),i=(0,s.seq)("LIKE",(0,s.opt)("LINE OF"),o.FieldChain,(0,s.optPrio)(o.Default));return(0,s.alt)((0,s.seq)("TYPE",(0,s.alt)(e,n)),i)}}t.TypeParam=i},18345(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAbstract=t.CheckAbstractConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696);class a extends i.BasicRuleConfig{}var c;t.CheckAbstractConf=a,function(e){e[e.NotAbstractClass=0]="NotAbstractClass",e[e.AbstractAndFinal=1]="AbstractAndFinal"}(c||(c={}));class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new a}getMetadata(){return{key:"check_abstract",title:"Check abstract methods and classes",shortDescription:"Checks abstract methods and classes:\n- class defined as abstract and final,\n- non-abstract class contains abstract methods",extendedInformation:"If a class defines only constants, use an interface instead",tags:[r.RuleTag.SingleFile]}}getDescription(e,t){switch(e){case c.AbstractAndFinal:return"Classes should not be ABSTRACT and FINAL: "+t;case c.NotAbstractClass:return"Abstract methods require abstract classes: "+t;default:return""}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getInfo().listClassDefinitions())if(!0!==n.isAbstract)for(const e of n.methods)!0===e.isAbstract&&t.push(s.Issue.atIdentifier(e.identifier,this.getDescription(c.NotAbstractClass,e.name),this.getMetadata().key,this.conf.severity));else!0===n.isFinal&&!1===n.isForTesting&&t.push(s.Issue.atIdentifier(n.identifier,this.getDescription(c.AbstractAndFinal,n.name),this.getMetadata().key,this.conf.severity));return t}}t.CheckAbstract=l},18376(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExcludeHelper=void 0,t.ExcludeHelper=class{static isExcluded(e,t){for(const n of t)if(n.exec(e))return!0;return!1}}},18377(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Redefinition=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.seq)((0,s.opt)("FINAL"),"REDEFINITION")}}t.Redefinition=o},18412(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignTypeExpressions=t.AlignTypeExpressionsConf=void 0;const s=n(99732),o=n(77465),i=n(84383),r=n(5518),a=n(86696),c=n(71759),l=n(86789),d=n(82245),u=n(50612),p=n(94967),f=n(71249);class g extends o.BasicRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0}}t.AlignTypeExpressionsConf=g;class h extends s.ABAPRule{constructor(){super(...arguments),this.conf=new g}getMetadata(){return{key:"align_type_expressions",title:"Align TYPE expressions",shortDescription:"Align TYPE expressions in statements",extendedInformation:"\nCurrently works for METHODS + BEGIN OF\n\nIf BEGIN OF has an INCLUDE TYPE its ignored\n\nAlso note that clean ABAP does not recommend aligning TYPE clauses:\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#dont-align-type-clauses",tags:[a.RuleTag.SingleFile,a.RuleTag.Whitespace,a.RuleTag.Quickfix],badExample:"\nTYPES: BEGIN OF foo,\n         bar TYPE i,\n         foobar TYPE i,\n       END OF foo.\n\nINTERFACE lif.\n  METHODS bar\n    IMPORTING\n      foo TYPE i\n      foobar TYPE i.\nENDINTERFACE.",goodExample:"\nTYPES: BEGIN OF foo,\n         bar    TYPE i,\n         foobar TYPE i,\n       END OF foo.\n\nINTERFACE lif.\n  METHODS bar\n    IMPORTING\n      foo    TYPE i\n      foobar TYPE i.\nENDINTERFACE."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],s=e.getStructure();if(void 0===s)return n;const o=new r.DDIC(this.reg);if(t instanceof i.Class){const e=t.getClassDefinition();if(void 0===e)return[];if(this.conf.ignoreExceptions&&o.isException(e,t))return[]}return n.push(...this.checkTypes(s,e)),n.push(...this.checkMethods(s,e)),n.push(...this.checkEvents(s,e)),n}check(e,t,n){const s=[],o=new Set;for(const t of e){const e=t.after.getRow();if(o.has(e))return[];o.add(e)}for(const o of e){if(o.after.getCol()===t)continue;let e;e=o.after.getCol()<t?f.EditHelper.insertAt(n,o.after," ".repeat(t-o.after.getCol())):f.EditHelper.deleteRange(n,new l.Position(o.after.getRow(),t),o.after);const i=`Align TYPE expressions to column ${t}`,r=c.Issue.atPosition(n,o.after,i,this.getMetadata().key,this.conf.severity,e);s.push(r)}return s}checkMethods(e,t){const n=[],s=e.findAllStatements(u.MethodDef);for(const e of s){const s=[],o=e.findAllExpressions(d.MethodParam);let i=0;for(const e of o){const t=e.getChildren(),n=t[t.length-2];s.push({nameEnd:n.getLastToken().getEnd(),after:e.findFirstExpression(d.TypeParam).getFirstToken().getStart()}),i=Math.max(i,n.getFirstToken().getEnd().getCol()+1)}const r=e.findFirstExpression(d.MethodDefReturning);if(r){const e=r.getChildren(),t=e[e.length-2];s.push({nameEnd:t.getLastToken().getEnd(),after:r.findFirstExpression(d.TypeParam).getFirstToken().getStart()}),i=Math.max(i,t.getLastToken().getEnd().getCol()+1)}n.push(...this.check(s,i,t))}return n}checkEvents(e,t){const n=[],s=e.findAllStatements(u.Events);for(const e of s){const s=[],o=e.findAllExpressions(d.MethodParam);let i=0;for(const e of o){const t=e.getChildren(),n=t[t.length-2];s.push({nameEnd:n.getLastToken().getEnd(),after:e.findFirstExpression(d.TypeParam).getFirstToken().getStart()}),i=Math.max(i,n.getFirstToken().getEnd().getCol()+1)}n.push(...this.check(s,i,t))}return n}checkTypes(e,t){const n=[],s=e.findAllStructuresRecursive(p.Types);for(const e of s){if(e.findDirectStatement(u.IncludeType))continue;const s=[];let o=0;const i=e.findDirectStatements(u.Type);for(const e of i){const t=e.getChildren()[1];s.push({nameEnd:t.getLastToken().getEnd(),after:e.getChildren()[2].getFirstToken().getStart()}),o=Math.max(o,t.getFirstToken().getEnd().getCol()+1)}n.push(...this.check(s,o,t))}return n}}t.AlignTypeExpressions=h},18424(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cast=void 0;const s=n(20572),o=n(82245),i=n(93170),r=n(3240),a=n(46743),c=n(36453),l=n(82054);t.Cast=class{static runSyntax(e,t,n){const d=e.findDirectExpression(o.Source);if(void 0===d){const n="Cast, source node not found";return t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(l.CheckSyntaxKey)}const u=i.Source.runSyntax(d,t);let p;const f=e.findDirectExpression(o.TypeNameOrInfer),g=null==f?void 0:f.concatTokens();if(void 0===g){const n="Cast, child TypeNameOrInfer not found";return t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(l.CheckSyntaxKey)}if("#"===g&&n)p=n;else if("#"===g){const n="Cast, todo, infer type";return t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(l.CheckSyntaxKey)}if(void 0===p&&f){if(p=new a.BasicTypes(t).parseType(f),void 0===p||p instanceof s.VoidType||p instanceof s.UnknownType){const e=t.scope.findObjectDefinition(g);e&&(p=new s.ObjectReferenceType(e,{qualifiedName:g}),t.scope.addReference(f.getFirstToken(),e,c.ReferenceType.ObjectOrientedReference,t.filename))}else p=new s.DataReference(p,g);if(void 0===p&&!1===t.scope.getDDIC().inErrorNamespace(g))p=s.VoidType.get(g);else{if("OBJECT"===g.toUpperCase())return new s.GenericObjectReferenceType;if(void 0===p){const e='Type "'+g+'" not found in scope, Cast';return t.issues.push((0,l.syntaxIssue)(t,f.getFirstToken(),e)),s.VoidType.get(l.CheckSyntaxKey)}}}if(i.Source.addIfInferred(e,t,p),!1===new r.TypeUtils(t.scope).isCastable(u,p)){const n="Cast, incompatible types";return t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(l.CheckSyntaxKey)}return p}}},18483(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(47443),t),o(n(43278),t),o(n(89757),t),o(n(28713),t),o(n(71176),t),o(n(63923),t),o(n(52957),t),o(n(91146),t),o(n(7167),t),o(n(83256),t),o(n(69542),t),o(n(27253),t),o(n(21934),t),o(n(60741),t),o(n(16746),t),o(n(58119),t),o(n(14257),t),o(n(80221),t),o(n(18929),t),o(n(5648),t),o(n(90460),t),o(n(27021),t),o(n(77054),t),o(n(84835),t),o(n(91391),t),o(n(14306),t),o(n(33326),t),o(n(19181),t),o(n(52681),t),o(n(66478),t),o(n(69813),t),o(n(16848),t),o(n(78166),t),o(n(64586),t),o(n(53507),t),o(n(61379),t),o(n(34090),t),o(n(45955),t),o(n(44273),t)},18503(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EntityType=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"UENO"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.EntityType=o},18617(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompareSimple=void 0;const s=n(82245),o=n(75457),i=n(82054),r=n(3240),a=n(56478),c=n(93170);t.ComponentCompareSimple=class{static runSyntax(e,t,n){let l;for(const d of e.getChildren())if(d instanceof o.ExpressionNode)if(d.get()instanceof s.ComponentChainSimple)l=a.ComponentChain.runSyntax(n,d,t);else if(d.get()instanceof s.Dynamic)l=void 0;else{if(!(d.get()instanceof s.Source||d.get()instanceof s.SimpleSource4||d.get()instanceof s.SimpleSource2)){const n="ComponentCompareSimple, unexpected node";return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}{const n=c.Source.runSyntax(d,t,l);if(l&&!1===new r.TypeUtils(t.scope).isAssignable(n,l)){const n="ComponentCompareSimple, incompatible types";return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}}}}}},18919(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Table=t.TableCategory=t.EnhancementCategory=void 0;const s=n(20572),o=n(80300),i=n(86219),r=n(5518),a=n(15838),c=n(20572),l=n(49028);var d,u;!function(e){e.NotClassified="0",e.CannotBeEnhanced="1",e.Character="2",e.CharacterOrNumeric="3",e.Deep="4"}(d||(t.EnhancementCategory=d={})),function(e){e.Transparent="TRANSP",e.Structure="INTTAB",e.Cluster="CLUSTER",e.Pooled="POOL",e.View="VIEW",e.Append="APPEND"}(u||(t.TableCategory=u={}));class p extends o.AbstractObject{constructor(){super(...arguments),this.parsedType=void 0}getType(){return"TABL"}getDescription(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.description}getSecondaryIndexes(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.secondaryIndexes}getAllowedNaming(){let e=30;return this.getTableCategory()===u.Transparent&&(e=16),{maxLength:e,allowNamespace:!0,customRegex:/^((\/[A-Z_\d]{3,8}\/)|[a-zA-Z0-9]{3}|CI_)\w+$/}}setDirty(){this.parsedData=void 0,this.parsedType=void 0,super.setDirty()}listKeys(e){if(void 0===this.parsedData&&this.parseXML(),void 0===this.parsedData)return[];const t=[];for(const n of this.parsedData.fields)if("X"===n.KEYFLAG&&".INCLUDE"===n.FIELDNAME){const o=new r.DDIC(e).lookupTableOrView(n.PRECFIELD).type;if(o instanceof s.StructureType)for(const e of o.getComponents())t.push(e.name)}else"X"===n.KEYFLAG&&t.push(n.FIELDNAME);return t}parseType(e){var t,n;if(void 0===this.parsedData&&(this.parseXML(),void 0===this.parsedData))return new s.UnknownType("Table, parser error");if(e.getConfig().getVersion()===l.Version.Cloud&&"USER3"===this.parsedData.dataClass)return new s.UnknownType("Data class = USER3 not allowed in cloud");if(this.getTableCategory()===u.Transparent&&0===this.listKeys(e).length)return new s.UnknownType("Table "+this.getName()+" has no key fields");if(this.parsedType)return this.parsedType;const o=[],i=[],d=new r.DDIC(e);for(const e of this.parsedData.fields){const r=e.COMPTYPE?e.COMPTYPE:"";if("E"===r){const t=d.lookupDataElement(e.ROLLNAME);i.push({name:e.FIELDNAME,type:t.type}),t.object&&o.push({object:t.object})}else if(".INCLUDE"===e.FIELDNAME||e.FIELDNAME.startsWith(".INCLU-")){if(void 0===e.PRECFIELD)return new s.UnknownType("Table, parser error, PRECFIELD undefined, "+this.getName());const r=d.lookupTableOrView(e.PRECFIELD);let c=r.type;if(r.object&&o.push({object:r.object}),c instanceof a.TypedIdentifier&&(c=c.getType()),c instanceof s.StructureType){if(void 0!==e.GROUPNAME&&i.push({name:e.GROUPNAME,type:c,asInclude:!0}),!1===e.FIELDNAME.startsWith(".INCLU-")||".INCLU--AP"===e.FIELDNAME)for(const e of c.getComponents())i.push({name:e.name,type:e.type});else if(e.FIELDNAME.startsWith(".INCLU-")){const t=e.FIELDNAME.substring(7);for(const e of c.getComponents())i.push({name:e.name+t,type:e.type})}}else{if(((null===(t=e.PRECFIELD)||void 0===t?void 0:t.startsWith("CI_"))||(null===(n=e.PRECFIELD)||void 0===n?void 0:n.startsWith("SI_")))&&c instanceof s.UnknownType)continue;if(c instanceof s.UnknownType)return c;if(c instanceof s.VoidType)return c;i.push({name:e.FIELDNAME,type:c})}}else if("S"===r){const t=d.lookupTableOrView(e.ROLLNAME);i.push({name:e.FIELDNAME,type:t.type}),t.object&&o.push({object:t.object})}else if("R"===r){if(void 0===e.ROLLNAME)throw new Error("Expected ROLLNAME");if("DATA"===e.ROLLNAME)i.push({name:e.FIELDNAME,type:new c.DataReference(c.AnyType.get())});else if("OBJECT"===e.ROLLNAME)i.push({name:e.FIELDNAME,type:new c.GenericObjectReferenceType});else if("S"===e.REFTYPE){const t=d.lookupTableOrView(e.ROLLNAME);i.push({name:e.FIELDNAME,type:new c.DataReference(t.type)}),t.object&&o.push({object:t.object})}else if("L"===e.REFTYPE){const t=d.lookupTableType(e.ROLLNAME);i.push({name:e.FIELDNAME,type:new c.DataReference(t.type)}),t.object&&o.push({object:t.object})}else if("E"===e.REFTYPE){const t=d.lookupDataElement(e.ROLLNAME);i.push({name:e.FIELDNAME,type:new c.DataReference(t.type)}),t.object&&o.push({object:t.object})}else{const t=d.lookupObject(e.ROLLNAME);i.push({name:e.FIELDNAME,type:t.type}),t.object&&o.push({object:t.object})}}else if("L"===r){const t=d.lookupTableType(e.ROLLNAME);i.push({name:e.FIELDNAME,type:t.type}),t.object&&o.push({object:t.object})}else if(""===r){const t=e.DATATYPE;if(void 0===t)throw new Error("Expected DATATYPE, while parsing TABL "+this.getName());const n=e.LENG?e.LENG:e.INTLEN;i.push({name:e.FIELDNAME,type:d.textToType({text:t,length:n,decimals:e.DECIMALS,infoText:this.getName()+"-"+e.FIELDNAME,description:e.DDTEXT})})}else i.push({name:e.FIELDNAME,type:new s.UnknownType("Table "+this.getName()+', unknown component type "'+r+'"')});if(e.CHECKTABLE){const t=d.lookupTableOrView2(e.CHECKTABLE);t&&o.push({object:t})}}return 0===i.length?new s.UnknownType("Table/Structure "+this.getName()+" does not contain any components"):(e.getDDICReferences().setUsing(this,o),this.parsedType=new s.StructureType(i,this.getName(),this.getName(),this.getDescription()),this.parsedType)}getTableCategory(){var e;return void 0===this.parsedData&&this.parseXML(),null===(e=this.parsedData)||void 0===e?void 0:e.tableCategory}getEnhancementCategory(){var e;return void 0===this.parsedData&&this.parseXML(),void 0===(null===(e=this.parsedData)||void 0===e?void 0:e.enhancementCategory)?d.NotClassified:this.parsedData.enhancementCategory}parseXML(){var e,t,n,s,o,r,a,c,l,u,p,f,g;const h=super.parseRaw2();if(void 0===h)return;if(this.parsedData={fields:[]},void 0===h.abapGit)return;void 0===(null===(t=null===(e=h.abapGit["asx:abap"]["asx:values"])||void 0===e?void 0:e.DD02V)||void 0===t?void 0:t.EXCLASS)?this.parsedData.enhancementCategory=d.NotClassified:this.parsedData.enhancementCategory=null===(s=null===(n=h.abapGit["asx:abap"]["asx:values"])||void 0===n?void 0:n.DD02V)||void 0===s?void 0:s.EXCLASS,this.parsedData.tableCategory=null===(r=null===(o=h.abapGit["asx:abap"]["asx:values"])||void 0===o?void 0:o.DD02V)||void 0===r?void 0:r.TABCLASS,this.parsedData.description=null===(c=null===(a=h.abapGit["asx:abap"]["asx:values"])||void 0===a?void 0:a.DD02V)||void 0===c?void 0:c.DDTEXT,this.parsedData.dataClass=null===(u=null===(l=h.abapGit["asx:abap"]["asx:values"])||void 0===l?void 0:l.DD09L)||void 0===u?void 0:u.TABART;const T=null===(p=h.abapGit["asx:abap"]["asx:values"])||void 0===p?void 0:p.DD03P_TABLE;for(const e of(0,i.xmlToArray)(null==T?void 0:T.DD03P))this.parsedData.fields.push({FIELDNAME:e.FIELDNAME,ROLLNAME:e.ROLLNAME,COMPTYPE:e.COMPTYPE,PRECFIELD:e.PRECFIELD,LENG:e.LENG,INTLEN:e.INTLEN,DATATYPE:e.DATATYPE,DECIMALS:e.DECIMALS,KEYFLAG:e.KEYFLAG,GROUPNAME:e.GROUPNAME,CHECKTABLE:e.CHECKTABLE,REFTYPE:e.REFTYPE,DDTEXT:e.DDTEXT});const m=null===(f=h.abapGit["asx:abap"]["asx:values"])||void 0===f?void 0:f.DD12V;this.parsedData.secondaryIndexes=[];for(const e of(0,i.xmlToArray)(null==m?void 0:m.DD12V)){const t=e.INDEXNAME,n=[],s=null===(g=h.abapGit["asx:abap"]["asx:values"])||void 0===g?void 0:g.DD17V;for(const e of(0,i.xmlToArray)(null==s?void 0:s.DD17V))e.INDEXNAME===t&&n.push(e.FIELDNAME);this.parsedData.secondaryIndexes.push({name:t,fields:n})}}}t.Table=p},18929(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDefineView=void 0;const s=n(18483),o=n(55864),i=n(3125),r=n(19181),a=n(64586),c=n(44273);class l extends i.Expression{getRunnable(){return(0,i.seq)((0,i.star)(s.CDSAnnotation),"DEFINE",(0,i.opt)("ROOT"),"VIEW",(0,i.ver)(o.Version.v755,(0,i.opt)("ENTITY")),r.CDSName,(0,i.opt)(c.CDSWithParameters),"AS",a.CDSSelect,(0,i.opt)(";"))}}t.CDSDefineView=l},19134(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessFunctionAssignment=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SFBF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BusinessFunctionAssignment=o},19181(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){const e=(0,s.seq)("/",(0,s.regex)(/^[\w_]+$/),"/");return(0,s.seq)((0,s.optPrio)(":"),(0,s.optPrio)(e),(0,s.regex)(/^\$?#?[\w_]+$/))}}t.CDSName=o},19364(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceDefinition=void 0;const s=n(2088),o=n(94967),i=n(50612),r=n(82245),a=n(14089),c=n(67240),l=n(2403),d=n(4005),u=n(29805),p=n(36453),f=n(2416);class g extends s.Identifier{constructor(e,t){if(!(e.get()instanceof o.Interface))throw new Error("InterfaceDefinition, unexpected node type");const n=e.findFirstStatement(i.Interface).findFirstExpression(r.InterfaceName).getFirstToken();super(n,t.filename),t.scope.addInterfaceDefinition(this),this.events=[],this.implementing=[],this.globalValue=void 0!==e.findFirstExpression(r.ClassGlobal),t.scope.push(l.ScopeType.Interface,n.getStr(),e.getFirstToken().getStart(),t.filename),this.parse(t,e),t.scope.pop(e.getLastToken().getEnd()),this.checkMethodNameLength()}getSuperClass(){}getImplementing(){return this.implementing}getAliases(){return this.aliases}getEvents(){return this.events}getAttributes(){return this.attributes}getTypeDefinitions(){return this.typeDefinitions}isLocal(){return!this.globalValue}isGlobal(){return this.globalValue}getMethodDefinitions(){return this.methodDefinitions}checkMethodNameLength(){for(const e of this.methodDefinitions.getAll())if(e.getName().length>30){const t=`Method name "${e.getName()}" is too long, maximum length is 30 characters`;throw new Error(t)}}checkInterfacesExists(e,t){var n;for(const s of t.findAllStatements(i.InterfaceDef)){const t=null===(n=s.findDirectExpression(r.InterfaceName))||void 0===n?void 0:n.getFirstToken(),o=null==t?void 0:t.getStr();if(o){this.implementing.push({name:o,partial:!1});const n=e.scope.findInterfaceDefinition(o);if(n)e.scope.addReference(t,n,p.ReferenceType.ObjectOrientedReference,this.filename,{ooName:o.toUpperCase(),ooType:"INTF"});else{if(!1!==e.scope.getDDIC().inErrorNamespace(o))throw new Error("Interface "+o+" unknown");e.scope.addReference(t,void 0,p.ReferenceType.ObjectOrientedVoidReference,this.filename)}}}}parse(e,t){this.checkInterfacesExists(e,t),new f.ObjectOriented(e.scope).fromInterfaces(this),this.attributes=new a.Attributes(t,e),this.typeDefinitions=this.attributes.getTypes(),this.aliases=this.attributes.getAliases();const n=t.findAllStatements(i.Events);for(const t of n)this.events.push(new d.EventDefinition(t,c.Visibility.Public,e));if(this.methodDefinitions=new u.MethodDefinitions(t,e),void 0!==this.methodDefinitions.getByName("CONSTRUCTOR"))throw new Error("Interfaces cannot have constructor methods")}}t.InterfaceDefinition=g},19490(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.DeleteDataset=class{getMatcher(){const e=(0,s.seq)("DELETE DATASET",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},19575(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransaction=void 0;const s=n(82245),o=n(9646),i=n(93170);t.CallTransaction=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},19622(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSLegacyView=t.CDSLegacyViewConf=void 0;const s=n(71759),o=n(86696),i=n(49028),r=n(77465),a=n(84383),c=n(18483);class l extends r.BasicRuleConfig{}t.CDSLegacyViewConf=l,t.CDSLegacyView=class{constructor(){this.conf=new l}getMetadata(){return{key:"cds_legacy_view",title:"CDS Legacy View",shortDescription:"Identify CDS Legacy Views",extendedInformation:"Use DEFINE VIEW ENTITY instead of DEFINE VIEW\n\nhttps://blogs.sap.com/2021/10/16/a-new-generation-of-cds-views-how-to-migrate-your-cds-views-to-cds-view-entities/\n\nv755 and up",tags:[o.RuleTag.SingleFile,o.RuleTag.Upport]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){const t=[];if(this.reg.getConfig().getVersion()<i.Version.v755&&this.reg.getConfig().getVersion()!==i.Version.Cloud)return[];if("DDLS"!==e.getType()||!(e instanceof a.DataDefinition))return[];const n=e.getTree();if(void 0===n)return[];if(n.get()instanceof c.CDSDefineView&&void 0===n.findDirectTokenByText("ENTITY")){const n=e.findSourceFile();n&&t.push(s.Issue.atRow(n,1,"CDS Legacy View",this.getMetadata().key,this.getConfig().severity))}return t}}},19697(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallParam=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(31817);class a extends s.Expression{getRunnable(){const e=(0,s.alt)(i.Source,i.ParameterListS,i.MethodParameters),t=(0,s.altPrio)((0,s.tok)(o.WParenRight),(0,s.tok)(o.WParenRightW),(0,s.tok)(o.ParenRight),(0,s.tok)(o.ParenRightW)),n=(0,s.altPrio)((0,s.tok)(o.WParenRight),(0,s.tok)(o.WParenRightW));return(0,s.altPrio)((0,s.seq)((0,s.tok)(o.ParenLeftW),e,t),(0,s.seq)((0,s.tok)(o.ParenLeft),e,n),(0,s.seq)((0,s.tok)(o.ParenLeft),r.ConstantString,(0,s.altPrio)((0,s.tok)(o.ParenRight),(0,s.tok)(o.ParenRightW))))}}t.MethodCallParam=a},19698(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebDynproApplicationConfiguration=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WDCA"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.WebDynproApplicationConfiguration=o},19734(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AmbiguousStatement=t.AmbiguousStatementConf=void 0;const s=n(71759),o=n(50612),i=n(99732),r=n(77465),a=n(3125),c=n(49028),l=n(86696);class d extends r.BasicRuleConfig{}t.AmbiguousStatementConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"ambiguous_statement",title:"Check for ambigious statements",shortDescription:'Checks for ambiguity between deleting or modifying from internal and database table\nAdd "TABLE" keyword or "@" for escaping SQL variables\n\nOnly works if the target version is 740sp05 or above',tags:[l.RuleTag.SingleFile],badExample:"DELETE foo FROM bar.\nMODIFY foo FROM bar.",goodExample:"DELETE foo FROM @bar.\nDELETE TABLE itab FROM 2.\nMODIFY zfoo FROM @wa.\nMODIFY TABLE foo FROM bar."}}getMessage(){return"Ambiguous statement. Use explicit syntax."}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(this.reg.getConfig().getVersion()<c.Version.v740sp05)return[];for(const n of e.getStatements()){let i=!1;if(n.get()instanceof o.DeleteDatabase?i=this.tryMatch(n,this.reg,o.DeleteInternal):n.get()instanceof o.DeleteInternal?i=this.tryMatch(n,this.reg,o.DeleteDatabase):n.get()instanceof o.ModifyInternal?i=this.tryMatch(n,this.reg,o.ModifyDatabase):n.get()instanceof o.ModifyDatabase&&(i=this.tryMatch(n,this.reg,o.ModifyInternal)),i){const o=s.Issue.atStatement(e,n,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(o)}}return t}tryMatch(e,t,n){const s=t.getConfig().getVersion(),o=e.getTokens().slice(0);return o.pop(),void 0!==a.Combi.run((new n).getMatcher(),o,s)}}t.AmbiguousStatement=u},19768(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCompareOperator=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.altPrio)("=","<>","<",">","<=",">=","EQ","NE","GE","GT","LT","LE","><","=>","=<")}}t.SQLCompareOperator=o},19945(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParameters=void 0;const s=n(20572),o=n(82245),i=n(75457),r=n(14365),a=n(9646),c=n(93170),l=n(3240),d=n(82054),u=n(38788),p=n(45769),f=n(36453);t.MethodParameters=class{constructor(){this.requiredParameters=void 0}runSyntax(e,t,n){var i;if(!(e.get()instanceof o.MethodParameters))throw new u.AssertError("MethodParameters, unexpected input");const r=e.getChildren().slice();for(n instanceof s.VoidType?this.requiredParameters=new Set:this.requiredParameters=new Set(n.getParameters().getRequiredParameters().map((e=>e.getName().toUpperCase())));r.length>0;){const e=null===(i=r.shift())||void 0===i?void 0:i.getFirstToken().getStr().toUpperCase();switch(e){case"EXPORTING":this.checkExporting(r.shift(),t,n,!1);break;case"IMPORTING":this.checkImporting(r.shift(),t,n);break;case"CHANGING":this.checkChanging(r.shift(),t,n);break;case"RECEIVING":this.checkReceiving(r.shift(),t,n);break;case"EXCEPTIONS":{const e=r.shift().findFirstExpression(o.ParameterException);for(const n of(null==e?void 0:e.findAllExpressions(o.SimpleFieldChain))||[])p.FieldChain.runSyntax(n,t,f.ReferenceType.DataReadReference)}break;default:throw new u.AssertError("MethodParameters, unexpected token, "+e)}}this.reportErrors(e,t)}checkReceiving(e,t,n){var c;const u=n instanceof s.VoidType?n:null===(c=n.getParameters().getReturning())||void 0===c?void 0:c.getType();if(void 0===u){const n="Method does not have a returning parameter";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}if(!(e instanceof i.ExpressionNode)){const n="checkReceiving, not an expression node";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}const p=e.findDirectExpression(o.Target),f=null==p?void 0:p.findDirectExpression(o.InlineData);if(f)r.InlineData.runSyntax(f,t,u);else if(p){const n=a.Target.runSyntax(p,t);if(n&&!1===new l.TypeUtils(t.scope).isAssignable(u,n)){const n="Method returning value not type compatible";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}}checkImporting(e,t,n){for(const i of this.parameterListT(e,t)){let a;if(n instanceof s.VoidType)a=n;else{const s=n.getParameters().getExporting().find((e=>e.getName().toUpperCase()===i.name));if(void 0===s){const n='Method exporting parameter "'+i.name+'" does not exist';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}a=s.getType()}const c=i.target.findDirectExpression(o.InlineData);if(c)r.InlineData.runSyntax(c,t,a);else{if(void 0===i.targetType){const n="Could not determine target type";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}if(i.targetType&&!1===new l.TypeUtils(t.scope).isAssignable(a,i.targetType)){const n="Method parameter type not compatible, "+i.name;return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}}}checkChanging(e,t,n){var i;for(const r of this.parameterListT(e,t)){if(void 0!==r.target.findFirstExpression(o.InlineData)){const n="CHANGING cannot be inlined";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}let a;if(n instanceof s.VoidType)a=n;else{const s=n.getParameters().getChanging().find((e=>e.getName().toUpperCase()===r.name));if(void 0===s){const n='Method changing parameter "'+r.name+'" does not exist';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}a=s.getType()}if(r.targetType&&!1===new l.TypeUtils(t.scope).isAssignable(a,r.targetType)){const n="Method parameter type not compatible, "+r.name;return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}null===(i=this.requiredParameters)||void 0===i||i.delete(r.name)}}checkExporting(e,t,n,o=!0){const i=this.parameterListS(e,t,n);if(n instanceof s.VoidType)return;const r=n.getParameters().getImporting();void 0===this.requiredParameters&&(this.requiredParameters=new Set(n.getParameters().getRequiredParameters().map((e=>e.getName().toUpperCase()))));for(const n of i){const s=r.find((e=>e.getName().toUpperCase()===n.name));if(void 0!==s){if(!1===new l.TypeUtils(t.scope).isAssignableStrict(n.sourceType,s.getType(),n.source)){const s="Method parameter type not compatible, "+n.name;return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}this.requiredParameters.delete(n.name)}else{const s='Method importing parameter "'+n.name+'" does not exist';t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}}!0===o&&this.reportErrors(e,t)}reportErrors(e,t){var n;for(const s of(null===(n=this.requiredParameters)||void 0===n?void 0:n.values())||[]){const n=`method parameter "${s}" must be supplied`;t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}parameterListS(e,t,n){var r;if(void 0===e)return[];if(!(e.get()instanceof o.ParameterListS))throw new u.AssertError("parameterListS, unexpected node");const a=[];for(const l of e.getChildren()){if(!(l.get()instanceof o.ParameterS&&l instanceof i.ExpressionNode))throw new u.AssertError("parameterListS, unexpected node, child");const p=null===(r=l.findDirectExpression(o.ParameterName))||void 0===r?void 0:r.getFirstToken().getStr().toUpperCase();if(void 0===p)throw new u.AssertError("parameterListS, no name determined");const f=l.findDirectExpression(o.Source);if(void 0===f)throw new u.AssertError("parameterListS, no source found");let g;if(n instanceof s.VoidType)g=n;else for(const e of n.getParameters().getImporting())if(e.getName().toUpperCase()===p){g=e.getType();break}let h=c.Source.runSyntax(f,t,g);if(void 0===h)if(n instanceof s.VoidType)h=n;else{const n="No source type determined for parameter "+p+" input";t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n)),h=s.VoidType.get(d.CheckSyntaxKey)}a.push({name:p,source:f,sourceType:h})}return a}parameterListT(e,t){var n;if(void 0===e)return[];if(!(e.get()instanceof o.ParameterListT))throw new u.AssertError("parameterListT, unexpected node");const s=[];for(const r of e.getChildren()){if(!(r.get()instanceof o.ParameterT&&r instanceof i.ExpressionNode))throw new u.AssertError("parameterListT, unexpected node, child");const e=null===(n=r.findDirectExpression(o.ParameterName))||void 0===n?void 0:n.getFirstToken().getStr().toUpperCase();if(void 0===e)throw new u.AssertError("parameterListT, no name determined");const c=r.findDirectExpression(o.Target);if(void 0===c)throw new u.AssertError("parameterListT, no target found");const l=a.Target.runSyntax(c,t);s.push({name:e,target:c,targetType:l})}return s}}},20138(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NamespaceSimpleName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^!?((\w*\/\w+\/)|(\w*\/\w+\/)*[\w\*$%#]+)$/)}}t.NamespaceSimpleName=o},20148(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertReport=void 0;const s=n(3125),o=n(82245),i=n(49028);t.InsertReport=class{getMatcher(){const e=(0,s.per)((0,s.seq)("STATE",o.Source),(0,s.seq)("EXTENSION TYPE",o.Source),(0,s.seq)("DIRECTORY ENTRY",o.Source),(0,s.seq)("UNICODE ENABLING",o.Source),(0,s.seq)("PROGRAM TYPE",o.Source),(0,s.ver)(i.Version.v750,(0,s.seq)("VERSION",o.Source)),(0,s.seq)("FIXED-POINT ARITHMETIC",o.Source),"KEEPING DIRECTORY ENTRY"),t=(0,s.seq)("INSERT REPORT",o.Source,"FROM",o.Source,(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},20196(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferredCompareOperator=t.PreferredCompareOperatorConf=void 0;const s=n(82245),o=n(71759),i=n(99732),r=n(77465),a=n(71249),c=n(86696);class l extends r.BasicRuleConfig{constructor(){super(...arguments),this.badOperators=["EQ","><","NE","GE","GT","LT","LE"]}}t.PreferredCompareOperatorConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l,this.operatorMapping=new Map}getMetadata(){return{key:"preferred_compare_operator",title:"Preferred compare operator",shortDescription:"Configure undesired operator variants",tags:[c.RuleTag.SingleFile,c.RuleTag.Quickfix],badExample:"IF foo EQ bar.\nENDIF.",goodExample:"IF foo = bar.\nENDIF."}}getDescription(e){return'Compare operator "'+e+'" not preferred'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){this.buildMapping();const t=[],n=e.getStructure();if(void 0===n)return[];const o=n.findAllExpressionsMulti([s.CompareOperator,s.SQLCompareOperator]);for(const n of o){const s=n.getLastToken();this.conf.badOperators.indexOf(s.getStr().toUpperCase())>=0&&t.push(this.createIssue(s,e))}return t}buildMapping(){0===this.operatorMapping.size&&(this.operatorMapping.set("EQ","="),this.operatorMapping.set("><","<>"),this.operatorMapping.set("NE","<>"),this.operatorMapping.set("GE",">="),this.operatorMapping.set("GT",">"),this.operatorMapping.set("LT","<"),this.operatorMapping.set("LE","<="),this.operatorMapping.set("=","EQ"),this.operatorMapping.set("<>","NE"),this.operatorMapping.set(">=","GE"),this.operatorMapping.set(">","GT"),this.operatorMapping.set("<","LT"),this.operatorMapping.set("<=","LE"))}createIssue(e,t){var n;const s=this.getDescription(e.getStr()),i=null===(n=this.operatorMapping)||void 0===n?void 0:n.get(e.getStr());if(i){const n=a.EditHelper.replaceRange(t,e.getStart(),e.getEnd(),i);return o.Issue.atToken(t,e,s,this.getMetadata().key,this.conf.severity,n)}return o.Issue.atToken(t,e,s,this.getMetadata().key,this.conf.severity)}}t.PreferredCompareOperator=d},20345(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadTable=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(57528);t.ReadTable=class{getMatcher(){const e=(0,s.seq)("COMPARING",(0,s.alt)((0,s.plus)(o.FieldSub),(0,s.plus)(o.Dynamic))),t=(0,s.seq)("INDEX",o.Source),n=(0,s.seq)((0,s.alt)(o.Field,o.Dynamic),"COMPONENTS",o.ComponentCompareSimple),a=(0,s.seq)((0,s.altPrio)("WITH KEY","WITH TABLE KEY"),(0,s.alt)(o.ComponentCompareSimple,n,(0,s.seq)((0,s.optPrio)("="),o.Source))),c=(0,s.seq)("USING KEY",(0,s.alt)(o.Field,o.Dynamic)),l=(0,s.seq)("FROM",o.Source),d=(0,s.per)((0,s.alt)(t,a,l),o.ReadTableTarget,c,e,"CASTING",(0,s.seq)("TRANSPORTING",(0,s.altPrio)("ALL FIELDS","NO FIELDS",r.TransportingFields)),"BINARY SEARCH");return(0,s.seq)("READ TABLE",(0,s.alt)(o.SimpleSource2,(0,s.ver)(i.Version.v740sp02,o.Source,i.Version.OpenABAP)),(0,s.opt)(d))}}},20357(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplateMiddle=void 0;const s=n(61785);class o extends s.AbstractToken{}t.StringTemplateMiddle=o},20407(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralHierarchyStorageExtrensionName=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SHI5"}getAllowedNaming(){return{maxLength:15,allowNamespace:!0}}getDescription(){}}t.GeneralHierarchyStorageExtrensionName=o},20490(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceDefinition=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SRVD"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ServiceDefinition=o},20493(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldAll=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^&?\*?(\/\w+\/)?[\w\*\$]+(~\w+)?$/)}}t.FieldAll=o},20572(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(72365),t),o(n(42647),t),o(n(32370),t),o(n(88705),t),o(n(86471),t),o(n(47015),t),o(n(14421),t),o(n(31745),t),o(n(57147),t),o(n(93366),t),o(n(58298),t),o(n(29986),t),o(n(89592),t),o(n(82084),t),o(n(4080),t),o(n(92117),t),o(n(76971),t),o(n(560),t),o(n(58490),t),o(n(2550),t),o(n(60313),t),o(n(62899),t),o(n(4554),t),o(n(83668),t),o(n(25075),t),o(n(56254),t),o(n(69953),t),o(n(14354),t),o(n(13075),t),o(n(78186),t),o(n(43228),t),o(n(58248),t)},20941(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(41370),t),o(n(14089),t),o(n(88532),t),o(n(70105),t),o(n(94466),t),o(n(84423),t),o(n(15662),t),o(n(19364),t),o(n(52806),t),o(n(29805),t),o(n(11361),t),o(n(44519),t),o(n(22748),t)},21093(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationVariant=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AVAR"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ActivationVariant=o},21239(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CloudTypes=t.CloudTypesConf=void 0;const s=n(86696),o=n(71759),i=n(49028),r=n(84383),a=n(77465),c=n(86789);class l extends a.BasicRuleConfig{}t.CloudTypesConf=l;class d{constructor(){this.conf=new l}getMetadata(){return{key:"cloud_types",title:"Check cloud types",shortDescription:"Checks that the package does not contain any object types unsupported in cloud ABAP.",tags:[s.RuleTag.SingleFile,s.RuleTag.Syntax]}}getDescription(e){return"Object type "+e+" not supported in cloud"}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}static isCloud(e){return e instanceof r.ApplicationJobCatalogEntry||e instanceof r.ApplicationJobTemplate||e instanceof r.APIReleaseState||e instanceof r.AssignmentServiceToAuthorizationGroup||e instanceof r.ATCCheckCategory||e instanceof r.ApplicationDescriptorsFiori||e instanceof r.ATCCheckObject||e instanceof r.ATCCheckVariant||e instanceof r.AuthorizationCheckField||e instanceof r.AuthorizationObject||e instanceof r.AuthorizationObjectExtension||e instanceof r.BehaviorDefinition||e instanceof r.BusinessCatalog||e instanceof r.BusinessCatalogAppAssignment||e instanceof r.CDSMetadataExtension||e instanceof r.Class||e instanceof r.CDSType||e instanceof r.ChangeDocument||e instanceof r.CDSEntityBuffer||e instanceof r.ApplicationLogObject||e instanceof r.CommunicationScenario||e instanceof r.DataControl||e instanceof r.Namespace||e instanceof r.KnowledgeTransferDocument||e instanceof r.DataDefinition||e instanceof r.DataElement||e instanceof r.Domain||e instanceof r.EventBinding||e instanceof r.EventConsumer||e instanceof r.FunctionGroup||e instanceof r.HttpService||e instanceof r.IAMApp||e instanceof r.InboundService||e instanceof r.Interface||e instanceof r.LockObject||e instanceof r.MessageClass||e instanceof r.NumberRange||e instanceof r.OutboundService||e instanceof r.Package||e instanceof r.RestrictionField||e instanceof r.RestrictionType||e instanceof r.ServiceBinding||e instanceof r.ServiceDefinition||e instanceof r.Table||e instanceof r.TableType||e instanceof r.Transformation}run(e){if(this.reg.getConfig().getVersion()!==i.Version.Cloud||d.isCloud(e))return[];const t=new c.Position(1,1);return[o.Issue.atPosition(e.getFiles()[0],t,this.getDescription(e.getType()),this.getMetadata().key,this.conf.severity)]}}t.CloudTypes=d},21305(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetBlank=void 0;const s=n(3125),o=n(49028);t.SetBlank=class{getMatcher(){const e=(0,s.alt)("ON","OFF"),t=(0,s.seq)("SET BLANK LINES",e);return(0,s.verNot)(o.Version.Cloud,t)}}},21327(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrettyPrinter=void 0;const s=n(52024),o=n(34720),i=n(47694),r=n(297),a=n(33911);t.PrettyPrinter=class{constructor(e,t){this.result=e.getRaw(),this.file=e,this.config=t;const n=t.readByRule((new a.Indentation).getMetadata().key);this.options={alignTryCatch:null==n?void 0:n.alignTryCatch,globalClassSkipFirst:null==n?void 0:n.globalClassSkipFirst}}run(){const e=this.file.getStatements();for(const t of e){if(t.get()instanceof s.Unknown||t.get()instanceof s.MacroContent||t.get()instanceof s.MacroCall||t.getFirstToken().getStart()instanceof r.VirtualPosition||t.get()instanceof s.Comment)continue;const e=new o.FixCase(this.result,this.config);this.result=e.execute(t)}const t=new i.Indent(this.options);return this.result=t.execute(this.file,this.result),this.result}}},21340(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServer=void 0;const s=n(46203),o=n(1385),i=n(23078),r=n(83516),a=n(117),c=n(21327),l=n(36271),d=n(17952),u=n(23540),p=n(75584),f=n(55215),g=n(2056),h=n(52028),T=n(76418),m=n(21842),y=n(23870);t.LanguageServer=class{constructor(e){this.reg=e}documentSymbol(e){return new o.Symbols(this.reg).find(e.textDocument.uri)}hover(e){const t=new i.Hover(this.reg).find(e);if(t)return{contents:t}}gotoDefinition(e){return new l.Definition(this.reg).find(e.textDocument,e.position)}documentFormatting(e){const t=p.LSPUtils.getABAPFile(this.reg,e.textDocument.uri);if(void 0===t)return[];const n=new c.PrettyPrinter(t,this.reg.getConfig()).run(),o=t.getRawRows();return n===t.getRaw()?[]:[{range:s.Range.create(0,0,o.length,o[o.length-1].length+1),newText:n}]}diagnostics(e){return new r.Diagnostics(this.reg).find(e)}prepareRename(e){return new d.Rename(this.reg).prepareRename(e)}rename(e){return new d.Rename(this.reg).rename(e)}codeActions(e){return new f.CodeActions(this.reg).find(e)}documentHighlight(e){return[]}implementation(e){return new h.Implementation(this.reg).find(e.textDocument,e.position)}references(e){return new g.References(this.reg).references(e)}static semanticTokensLegend(){return T.SemanticHighlighting.semanticTokensLegend()}semanticTokensRange(e){return new T.SemanticHighlighting(this.reg).semanticTokensRange(e)}codeLens(e,t){return new m.CodeLens(this.reg).list(e,t)}inlayHints(e,t){return new y.InlayHints(this.reg).list(e,t)}help(e,t){return a.Help.find(this.reg,e,t)}listDefinitionPositions(e){return new u.Highlight(this.reg).listDefinitionPositions(e)}listReadPositions(e){return new u.Highlight(this.reg).listReadPositions(e)}listWritePositions(e){return new u.Highlight(this.reg).listWritePositions(e)}}},21395(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopGroupByTarget=void 0;const s=n(3125),o=n(57468),i=n(90179);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.opt)("REFERENCE"),"INTO",o.Target),t=(0,s.seq)("ASSIGNING",i.FSTarget);return(0,s.optPrio)((0,s.alt)(e,t))}}t.LoopGroupByTarget=r},21417(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameTable=void 0;const s=n(84383),o=n(33073);t.RenameTable=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof s.Table))throw new Error("RenameTable, not a table");let i=[];const r=new o.RenamerHelper(this.reg);return i=i.concat(r.buildXMLFileEdits(e,"TABNAME",t,n)),i=i.concat(r.buildXMLFileEdits(e,"FORTABLE",t,n)),i=i.concat(r.renameFiles(e,t,n)),i=i.concat(r.renameDDICCodeReferences(e,t,n)),i=i.concat(r.renameDDICTABLReferences(e,t,n)),i=i.concat(r.renameDDICTTYPReferences(e,t,n)),{documentChanges:i}}}},21585(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SectionContents=void 0;const s=n(50612),o=n(58720),i=n(23790),r=n(52346),a=n(98499),c=n(63674),l=n(5995),d=n(94967);t.SectionContents=class{getMatcher(){return(0,o.star)((0,o.alt)((0,o.sta)(s.MethodDef),(0,o.sta)(s.InterfaceDef),(0,o.sta)(s.Data),(0,o.sta)(s.ClassData),(0,o.sta)(s.Events),(0,o.sta)(s.Constant),(0,o.sta)(s.Aliases),(0,o.sta)(s.TypePools),(0,o.sta)(s.InterfaceLoad),(0,o.sta)(s.ClassDefinitionLoad),(0,o.sta)(s.Include),(0,o.sub)(i.Types),(0,o.sub)(r.Constants),(0,o.sub)(a.TypeEnum),(0,o.sub)(d.TypeMesh),(0,o.sub)(l.Data),(0,o.sub)(c.ClassData),(0,o.sta)(s.Type)))}}},21591(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypePool=void 0;const s=n(3125),o=n(49028);t.TypePool=class{getMatcher(){const e=(0,s.regex)(/^\w+$/),t=(0,s.seq)("TYPE-POOL",e);return(0,s.verNot)(o.Version.Cloud,t)}}},21799(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLArithmetics=void 0;const s=n(3125),o=n(82245),i=n(81435);class r extends s.Expression{getRunnable(){const e=(0,s.alt)(o.SQLFieldName,o.SQLFunction);return(0,s.seq)(e,(0,s.starPrio)((0,s.seq)(i.SQLArithmeticOperator,e)))}}t.SQLArithmetics=r},21815(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPDefinitionProvider=void 0;const s=n(55864);t.ABAPDefinitionProvider=class{constructor(e){this.reg=e}provideDefinition(e,t,n){const o=new s.LanguageServer(this.reg).gotoDefinition({textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}});return o?{uri:monaco.Uri.parse(o.uri),range:new monaco.Range(o.range.start.line+1,o.range.start.character+1,o.range.end.line+1,o.range.end.character+1)}:void 0}}},21836(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EmailTemplate=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SMTG"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.EmailTemplate=o},21842(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeLens=void 0;const s=n(46203),o=n(75584),i=n(52424),r=n(12620),a=n(36453),c=n(20941);t.CodeLens=class{constructor(e){this.reg=e}list(e,t={messageText:!0,dynamicExceptions:!0}){var n;const a=o.LSPUtils.getABAPFile(this.reg,e.uri);if(void 0===a)return[];const l=this.reg.findObjectForFile(a);if(void 0===l||!(l instanceof r.ABAPObject))return[];const d=new i.SyntaxLogic(this.reg,l).run().spaghetti.getTop(),u=[];if(!0===t.messageText){const e=this.reg.getMSAGReferences().listByFilename(a.getFilename());for(const t of e){const e=this.reg.getObject("MSAG",t.messageClass);if(void 0===e)continue;const i=null===(n=e.getByNumber(t.number))||void 0===n?void 0:n.getMessage();void 0!==i&&u.push({range:o.LSPUtils.tokenToRange(t.token),command:s.Command.create(i,"")})}}if(!0===t.dynamicExceptions)for(const e of this.findMethodReferences(d,a)){if(!(e.resolved instanceof c.MethodDefinition))continue;let t="";for(const n of e.resolved.getRaising())this.isDynamicException(n,d)&&(""===t?t="Dynamic Exceptions: ":t+=" & ",t+=n.toUpperCase());""!==t&&u.push({range:o.LSPUtils.tokenToRange(e.position.getToken()),command:s.Command.create(t,"")})}return u}isDynamicException(e,t){var n;let s=e;for(;void 0!==s;){if("CX_DYNAMIC_CHECK"===s.toUpperCase())return!0;s=null===(n=t.findClassDefinition(s))||void 0===n?void 0:n.getSuperClass()}return!1}findMethodReferences(e,t){const n=[];if(e.getIdentifier().filename===t.getFilename())for(const t of e.getData().references)t.referenceType===a.ReferenceType.MethodReference&&n.push(t);for(const s of e.getChildren())n.push(...this.findMethodReferences(s,t));return n}}},21888(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetBit=void 0;const s=n(3125),o=n(82245);t.SetBit=class{getMatcher(){return(0,s.seq)("SET BIT",o.Source,"OF",o.Target,(0,s.opt)((0,s.seq)("TO",o.Source)))}}},21934(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSComposition=void 0;const s=n(18483),o=n(3125),i=n(83256);class r extends o.Expression{getRunnable(){return(0,o.seq)("COMPOSITION",(0,o.opt)(i.CDSCardinality),"OF",s.CDSRelation)}}t.CDSComposition=r},22067(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveCorresponding=void 0;const s=n(3125),o=n(82245),i=n(49028);t.MoveCorresponding=class{getMatcher(){const e=(0,s.ver)(i.Version.v740sp05,"KEEPING TARGET LINES"),t=(0,s.ver)(i.Version.v740sp05,"EXPANDING NESTED TABLES");return(0,s.seq)("MOVE-CORRESPONDING",(0,s.optPrio)("EXACT"),o.Source,"TO",o.SimpleTarget,(0,s.optPrio)(t),(0,s.optPrio)(e))}}},22093(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Convert=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(93170),a=n(9646);t.Convert=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))r.Source.runSyntax(n,t);const n=e.findExpressionsAfterToken("TIME");for(const r of n){const n=e.concatTokens().toUpperCase();if((null==r?void 0:r.get())instanceof s.Target){const e=null==r?void 0:r.findDirectExpression(s.InlineData);if(e){let s=new i.TimeType;n.includes("DAYLIGHT SAVING TIME "+e.concatTokens().toUpperCase())&&(s=new i.CharacterType(1)),o.InlineData.runSyntax(e,t,s)}else a.Target.runSyntax(r,t)}}const c=e.findExpressionAfterToken("DATE");if((null==c?void 0:c.get())instanceof s.Target){const e=null==c?void 0:c.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,new i.DateType):a.Target.runSyntax(c,t)}const l=e.findExpressionAfterToken("STAMP");if((null==l?void 0:l.get())instanceof s.Target){const e=null==l?void 0:l.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,new i.PackedType(8,4)):a.Target.runSyntax(l,t)}}}},22117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantFieldLength=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.tok)(o.ParenLeft),(0,s.altPrio)(i.Integer,i.SimpleFieldChain),(0,s.tok)(o.ParenRightW))}}t.ConstantFieldLength=r},22268(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.ParserErrorConf=void 0;const s=n(71759),o=n(52024),i=n(77465),r=n(75252),a=n(86696),c=n(49028),l=n(12620);class d extends i.BasicRuleConfig{}t.ParserErrorConf=d,t.ParserError=class{constructor(){this.conf=new d}getMetadata(){return{key:"parser_error",title:"Parser error",shortDescription:"Checks for syntax not recognized by abaplint.\n\nSee recognized syntax at https://syntax.abaplint.org",tags:[a.RuleTag.Syntax,a.RuleTag.SingleFile]}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=[];if(t.push(...e.getParsingIssues()),e instanceof l.ABAPObject)for(const n of e.getABAPFiles()){for(const e of n.getStatements())if(e.get()instanceof o.Unknown)if(e.getTokens().length>r.STATEMENT_MAX_TOKENS){const o="Statement too long, refactor statement",i=s.Issue.atToken(n,e.getTokens()[0],o,this.getMetadata().key,this.conf.severity);t.push(i)}else{const o=e.getFirstToken(),i="Statement does not exist in ABAP"+this.reg.getConfig().getVersion()+'(or a parser error), "'+o.getStr()+'"',r=s.Issue.atStatement(n,e,i,this.getMetadata().key,this.conf.severity);t.push(r)}if(this.reg.getConfig().getVersion()===c.Version.v700)for(const e of n.getStatements())if(e.getPragmas().length>0){const o="Pragmas not allowed in v700",i=s.Issue.atStatement(n,e,o,this.getMetadata().key,this.conf.severity);t.push(i)}}return t}}},22288(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Collect=void 0;const s=n(82245),o=n(93170),i=n(25037),r=n(9646);t.Collect=class{runSyntax(e,t){const n=e.findDirectExpression(s.Source);n&&o.Source.runSyntax(n,t);const a=e.findDirectExpression(s.Target);a&&r.Target.runSyntax(a,t);const c=e.findDirectExpression(s.FSTarget);c&&i.FSTarget.runSyntax(c,t,void 0)}}},22300(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Split=void 0;const s=n(3125),o=n(82245);t.Split=class{getMatcher(){const e=(0,s.seq)("IN",(0,s.alt)("CHARACTER","BYTE"),"MODE"),t=(0,s.altPrio)((0,s.seq)("TABLE",o.Target,(0,s.opt)(e)),(0,s.seq)((0,s.plus)(o.Target),(0,s.opt)(e)));return(0,s.seq)("SPLIT",o.Source,"AT",o.Source,"INTO",t)}}},22308(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSCommentStyle=t.CDSCommentStyleConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=n(84383),a=n(89978),c=n(89301);class l extends i.BasicRuleConfig{}t.CDSCommentStyleConf=l,t.CDSCommentStyle=class{constructor(){this.conf=new l}getMetadata(){return{key:"cds_comment_style",title:"CDS Comment Style",shortDescription:"Check for obsolete comment style",extendedInformation:'Check for obsolete comment style\n\nComments starting with "--" are considered obsolete\n\nhttps://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-us/abencds_general_syntax_rules.htm',tags:[o.RuleTag.SingleFile],badExample:"-- this is a comment",goodExample:"// this is a comment"}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){const t=[];if("DDLS"===e.getType()&&e instanceof r.DataDefinition||"DDLX"===e.getType()&&e instanceof r.CDSMetadataExtension){const n=e.findSourceFile();if(void 0===n)return t;const o=a.CDSLexer.run(n);for(const e of o)e instanceof c.Comment&&e.getStr().startsWith("--")&&t.push(s.Issue.atToken(n,e,'Use "//" for comments instead of "--"',this.getMetadata().key,this.getConfig().severity))}return t}}},22423(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SMIMConsistency=t.SMIMConsistencyConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(86789);class a extends o.BasicRuleConfig{}t.SMIMConsistencyConf=a,t.SMIMConsistency=class{constructor(){this.conf=new a}getMetadata(){return{key:"smim_consistency",title:"SMIM consistency check",shortDescription:"SMIM consistency check",extendedInformation:"Check folders exists"}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){const t=[];if(!(e instanceof i.MIMEObject))return[];const n=this.base(e.getURL()||"");if(""!==n&&!1===this.findFolder(n)){const o=`Parent folder "${n}" not found`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,o,this.getMetadata().key,this.conf.severity);t.push(a)}return t}base(e){const t=e.split("/");return t.pop(),t.join("/")}findFolder(e){for(const t of this.reg.getObjectsByType("SMIM")){const n=t;if(e===n.getURL()&&!0===n.isFolder())return!0}return!1}}},22601(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CorrespondingBody=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.ver)(i.Version.v751,"DISCARDING DUPLICATES");return(0,s.seq)((0,s.optPrio)("DEEP"),(0,s.optPrio)(o.CorrespondingBodyBase),o.Source,(0,s.optPrio)(e),(0,s.optPrio)(o.CorrespondingBodyMapping),(0,s.optPrio)("CHANGING CONTROL"),(0,s.optPrio)((0,s.seq)("MAPPING FROM ENTITY",(0,s.optPrio)("USING CONTROL"))),(0,s.optPrio)((0,s.seq)("EXCEPT",(0,s.alt)((0,s.plus)(o.Field),"*"))))}}t.CorrespondingBody=r},22615(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Condense=void 0;const s=n(82245),o=n(9646);t.Condense=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},22632(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDescriptorsFiori=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"UIAD"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.ApplicationDescriptorsFiori=o},22748(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitions=void 0,t.TypeDefinitions=class{constructor(e){this.map={},this.list=e;for(const t of e)this.map[t.type.getName().toUpperCase()]=t}getAll(){return this.list}getByName(e){var t;return null===(t=this.map[e.toUpperCase()])||void 0===t?void 0:t.type}}},22755(e,t){var n,s,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.RiskLevel=t.Duration=t.MethodParameterDirection=t.AttributeLevel=void 0,function(e){e.Instance="instance",e.Static="static",e.Constant="constant"}(n||(t.AttributeLevel=n={})),function(e){e.Importing="importing",e.Exporting="exporting",e.Changing="changing",e.Returning="returning"}(s||(t.MethodParameterDirection=s={})),function(e){e.short="SHORT",e.medium="MEDIUM",e.long="LONG"}(o||(t.Duration=o={})),function(e){e.harmless="HARMLESS",e.critical="CRITICAL",e.dangerous="DANGEROUS"}(i||(t.RiskLevel=i={}))},22845(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessOnHelpRequest=void 0;const s=n(3125),o=n(49028);t.ProcessOnHelpRequest=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"PROCESS ON HELP-REQUEST")}}},23017(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseEvent=void 0;const s=n(82245),o=n(93170),i=n(36453);t.RaiseEvent=class{runSyntax(e,t){const n=e.findDirectExpression(s.EventName);if(null==n?void 0:n.concatTokens().includes("~")){const e=n.concatTokens().split("~")[0],s=t.scope.findInterfaceDefinition(e);s&&t.scope.addReference(n.getFirstToken(),s,i.ReferenceType.ObjectOrientedReference,t.filename)}for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t)}}},23062(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneRichTextTemplate=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN14"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneRichTextTemplate=o},23072(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndWhile=void 0;const s=n(3125);t.EndWhile=class{getMatcher(){return(0,s.str)("ENDWHILE")}}},23078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Hover=void 0;const s=n(89301),o=n(50612),i=n(46203),r=n(12620),a=n(75584),c=n(77959),l=n(52024);t.Hover=class{constructor(e){this.reg=e}find(e){const t=a.LSPUtils.getABAPFile(this.reg,e.textDocument.uri);if(void 0===t)return;const n=this.reg.getObject(t.getObjectType(),t.getObjectName());if(!(n instanceof r.ABAPObject))return;const d=a.LSPUtils.findCursor(this.reg,e);if(void 0===d)return;if(d.token instanceof s.StringTemplate||d.token instanceof s.StringTemplateBegin||d.token instanceof s.StringTemplateEnd||d.token instanceof s.StringTemplateMiddle)return{kind:i.MarkupKind.Markdown,value:"String Template"};if(d.snode.get()instanceof l.MacroCall)return{kind:i.MarkupKind.Markdown,value:"Macro Call"};if(d.snode.get()instanceof o.Define&&2===d.stack.length)return{kind:i.MarkupKind.Markdown,value:"Macro Name"};if(d.token instanceof s.Comment){let e="Comment";return d.token.getStr().startsWith('"!')&&(e="ABAP Doc Comment"),{kind:i.MarkupKind.Markdown,value:e}}const u=c.LSPLookup.lookup(d,this.reg,n);return(null==u?void 0:u.hover)?{kind:i.MarkupKind.Markdown,value:u.hover}:d.token instanceof s.StringToken?{kind:i.MarkupKind.Markdown,value:"String"}:void 0}}},23218(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndIf=void 0;const s=n(3125);t.EndIf=class{getMatcher(){return(0,s.str)("ENDIF")}}},23241(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassImplementation=void 0;const s=n(3125),o=n(82245);t.ClassImplementation=class{getMatcher(){return(0,s.seq)("CLASS",o.ClassName,"IMPLEMENTATION")}}},23337(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CloseDataset=void 0;const s=n(82245),o=n(93170);t.CloseDataset=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},23414(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTable=void 0;const s=n(3125),o=n(82245),i=n(5027),r=n(7334),a=n(49028);class c extends s.Expression{getRunnable(){const e="WITH HEADER LINE",t=(0,s.seq)("INITIAL SIZE",o.Constant),n=(0,s.seq)((0,s.opt)((0,s.alt)("STANDARD","HASHED","INDEX","SORTED","ANY")),"TABLE"),c=(0,s.seq)((0,s.opt)((0,s.alt)("STANDARD","HASHED","INDEX","SORTED","ANY")),"TABLE OF",(0,s.optPrio)("REF TO"),o.TypeName),l=(0,s.seq)((0,s.opt)((0,s.alt)("STANDARD","HASHED","INDEX","SORTED","ANY")),"TABLE OF",(0,s.optPrio)("REF TO"),(0,s.opt)(i.FieldChain),(0,s.opt)((0,s.per)(e,t,(0,s.plusPrio)(r.TypeTableKey)))),d=(0,s.seq)("RANGE OF",o.TypeName,(0,s.optPrio)(e),(0,s.optPrio)(t),(0,s.optPrio)("VALUE IS INITIAL")),u=(0,s.seq)("RANGE OF",i.FieldChain,(0,s.optPrio)(e),(0,s.optPrio)(t),(0,s.optPrio)("VALUE IS INITIAL")),p=(0,s.alt)(n,(0,s.seq)(c,(0,s.alt)((0,s.opt)((0,s.per)(e,t,(0,s.plusPrio)(r.TypeTableKey))),(0,s.seq)((0,s.plus)(r.TypeTableKey),(0,s.optPrio)(t))),(0,s.optPrio)("VALUE IS INITIAL"))),f=(0,s.seq)("OCCURS",(0,s.altPrio)(o.Integer,i.FieldChain)),g=(0,s.ver)(a.Version.v754,(0,s.seq)("TABLE FOR",(0,s.altPrio)("ACTION IMPORT","ACTION RESULT","CREATE","EVENT","REPORTED EARLY","READ IMPORT","FAILED EARLY","FAILED","LOCK","DETERMINATION","READ RESULT","UPDATE","DELETE"),(0,s.alt)(o.TypeName,o.EntityAssociation))),h=(0,s.seq)((0,s.opt)("REF TO"),o.TypeName,(0,s.alt)((0,s.seq)(f,(0,s.opt)(e)),e)),T=(0,s.seq)((0,s.opt)("REF TO"),i.FieldChain,(0,s.alt)((0,s.seq)(f,(0,s.opt)(e)),e)),m=(0,s.seq)("LINE OF",o.TypeName,f,e);return(0,s.altPrio)((0,s.seq)(f,(0,s.opt)(e)),(0,s.seq)("LIKE",(0,s.alt)(T,l,u,m)),(0,s.seq)("TYPE",(0,s.alt)(h,p,d,m,g)))}}t.TypeTable=c},23462(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Search=class{getMatcher(){const e=(0,s.seq)("STARTING AT",o.Source),t=(0,s.seq)("ENDING AT",o.Source),n=(0,s.str)("AND MARK"),r=(0,s.altPrio)("IN BYTE MODE","IN CHARACTER MODE"),a=(0,s.seq)("SEARCH",o.Source,"FOR",o.Source,(0,s.opt)((0,s.per)(r,e,t,n)));return(0,s.verNot)(i.Version.Cloud,a)}}},23529(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceNext=void 0;const s=n(82245),o=n(93170),i=n(9646);t.ReduceNext=class{static runSyntax(e,t){if(void 0!==e){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleTarget))i.Target.runSyntax(n,t)}}}},23540(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Highlight=void 0;const s=n(12620),o=n(52424),i=n(75584);t.Highlight=class{constructor(e){this.reg=e}listDefinitionPositions(e){const t=this.runSyntax(e);if(void 0===t)return[];const n=t.listDefinitions(e.uri),s=[];for(const e of n)s.push(i.LSPUtils.tokenToRange(e.identifier.getToken()));return s}listReadPositions(e){const t=this.runSyntax(e);if(void 0===t)return[];const n=t.listReadPositions(e.uri),s=[];for(const e of n)s.push(i.LSPUtils.tokenToRange(e.getToken()));return s}listWritePositions(e){const t=this.runSyntax(e);if(void 0===t)return[];const n=t.listWritePositions(e.uri),s=[];for(const e of n)s.push(i.LSPUtils.tokenToRange(e.getToken()));return s}runSyntax(e){const t=this.findObject(e);if(void 0!==t)return new o.SyntaxLogic(this.reg,t).run().spaghetti}findObject(e){const t=i.LSPUtils.getABAPFile(this.reg,e.uri);if(void 0===t)return;const n=this.reg.getObject(t.getObjectType(),t.getObjectName());return n instanceof s.ABAPObject?n:void 0}}},23790(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0;const s=n(50612),o=n(58720),i=n(52024);class r{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.TypeBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.Type),(0,o.sub)(r),(0,o.sta)(i.MacroCall),(0,o.sta)(s.Include),(0,o.sta)(s.IncludeType))),(0,o.sta)(s.TypeEnd))}}t.Types=r},23870(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHints=void 0;const s=n(46203),o=n(75584),i=n(52424),r=n(12620),a=n(36453),c=n(15838),l=n(20941);t.InlayHints=class{constructor(e){this.reg=e}list(e,t={inferredTypes:!0}){const n=o.LSPUtils.getABAPFile(this.reg,e.uri);if(void 0===n)return[];const a=this.reg.findObjectForFile(n);if(void 0===a||!(a instanceof r.ABAPObject))return[];const d=new i.SyntaxLogic(this.reg,a).run().spaghetti.getTop(),u=[];if(!0===t.inferredTypes){const e=this.findImplicitReferences(d);for(const t of e){let e;t.resolved instanceof c.TypedIdentifier?e="TYPE "+t.resolved.getType().toABAP():t.resolved instanceof l.ClassDefinition&&(e="TYPE REF TO "+t.resolved.getName()),void 0!==e&&u.push({label:e,tooltip:"Inferred type",kind:s.InlayHintKind.Type,paddingLeft:!0,paddingRight:!0,position:o.LSPUtils.positionToLS(t.position.getEnd())})}}return u}findImplicitReferences(e){const t=[];for(const n of e.getData().references)n.referenceType!==a.ReferenceType.InferredType&&n.referenceType!==a.ReferenceType.DataWriteReference||t.push(n);for(const n of e.getChildren())t.push(...this.findImplicitReferences(n));return t}}},24129(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorDefinitionName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^((\w*\/\w+\/)|(\w*\/\w+\/)?[\w\*$%]+)$/)}}t.BehaviorDefinitionName=o},24178(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLField=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301),a=n(16732),c=n(70015);class l extends s.Expression{getRunnable(){const e=(0,s.ver)(i.Version.v740sp05,(0,s.seq)((0,s.tok)(r.WAt),o.SimpleFieldChain2),i.Version.OpenABAP),t=(0,s.seq)("AS",o.SQLAsName),n=(0,s.seq)((0,s.tok)(r.WParenLeftW),o.SQLFieldName,(0,s.altPrio)((0,s.tok)(r.WParenRightW),(0,s.tok)(r.WParenRight))),l=(0,s.altPrio)(o.SQLAggregation,o.SQLCase,a.SQLFunction,c.SQLPath,o.SQLFieldName,e,o.Constant,n),d=(0,s.seq)((0,s.tok)(r.WParenLeftW),l,(0,s.tok)(r.WParenRightW)),u=(0,s.plusPrio)((0,s.seq)((0,s.altPrio)("+","-","*","/","&&"),(0,s.altPrio)(d,l))),p=(0,s.ver)(i.Version.v740sp05,u),f=(0,s.seq)(l,(0,s.optPrio)(p)),g=(0,s.seq)((0,s.tok)(r.WParenLeftW),f,(0,s.tok)(r.WParenRightW));return(0,s.seq)((0,s.altPrio)(g,f),(0,s.optPrio)(t))}}t.SQLField=l},24474(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMeshBegin=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeMeshBegin=class{getMatcher(){return(0,s.ver)(i.Version.v740sp05,(0,s.seq)("TYPES","BEGIN OF MESH",o.NamespaceSimpleName))}}},24485(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BracketLeft=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"["}}t.BracketLeft=o},24697(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCompare=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301);class a extends s.Expression{getRunnable(){const e=(0,s.seq)("(",o.Select,")"),t=(0,s.seq)("(","(",o.Select,")",")"),n=(0,s.seq)("BETWEEN",o.SQLSource,"AND",o.SQLSource),a=(0,s.seq)("LIKE",o.SQLSource,(0,s.optPrio)((0,s.seq)("ESCAPE",o.SQLSource))),c=(0,s.seq)("IS",(0,s.optPrio)("NOT"),(0,s.altPrio)("NULL",(0,s.ver)(i.Version.v753,"INITIAL"))),l=new o.SQLSource,d=(0,s.seq)((0,s.optPrio)((0,s.altPrio)("ALL","ANY","SOME")),(0,s.altPrio)(e,t)),u=(0,s.ver)(i.Version.v750,(0,s.plusPrio)((0,s.seq)((0,s.altPrio)("+","-","*","/"),o.SQLFieldName)),i.Version.OpenABAP),p=(0,s.seq)((0,s.tok)(r.ParenLeftW),o.Source,(0,s.tok)(r.WParenRightW)),f=(0,s.ver)(i.Version.v740sp05,(0,s.seq)((0,s.tok)(r.WAt),(0,s.altPrio)(o.SimpleSource3,p)),i.Version.OpenABAP),g=(0,s.seq)((0,s.altPrio)(o.SQLFunction,o.ConstantString,(0,s.seq)((0,s.altPrio)(o.SQLPath,o.SQLFieldName),(0,s.optPrio)(u)),f),(0,s.altPrio)((0,s.seq)(o.SQLCompareOperator,(0,s.altPrio)(d,l)),(0,s.seq)((0,s.optPrio)("NOT"),(0,s.altPrio)(o.SQLIn,a,n)),c)),h=(0,s.seq)("EXISTS",e);return(0,s.altPrio)(h,o.Dynamic,g)}}t.SQLCompare=a},24727(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StructureNode=void 0;const s=n(98069),o=n(13911);class i extends s.AbstractNode{constructor(e){super(),this.structure=e}get(){return this.structure}findParent(e){for(const t of this.getChildren()){if(t===e)return this;if(!(t instanceof o.StatementNode)){const n=t.findParent(e);if(n)return n}}}concatTokens(){let e="";for(const t of this.getChildren())e+=t.concatTokens();return e}findDirectStatement(e){for(const t of this.getChildren())if(t instanceof o.StatementNode&&t.get()instanceof e)return t}findDirectStatements(e){const t=[];for(const n of this.getChildren())n instanceof o.StatementNode&&n.get()instanceof e&&t.push(n);return t}findDirectStructures(e){const t=[];for(const n of this.getChildren())n instanceof i&&n.get()instanceof e&&t.push(n);return t}findFirstStatement(e){for(const t of this.getChildren()){if(t.get()instanceof e)return t;if(!(t instanceof o.StatementNode)){const n=t.findFirstStatement(e);if(n)return n}}}findFirstExpression(e){for(const t of this.getChildren()){const n=t.findFirstExpression(e);if(n)return n}}getFirstStatement(){for(const e of this.getChildren())return e instanceof o.StatementNode?e:e.getFirstStatement()}getFirstToken(){const e=this.getFirstChild();if(void 0!==e)return e.getFirstToken();throw new Error("StructureNode, getFirstToken, unexpected type")}getLastToken(){const e=this.getLastChild();if(void 0!==e)return e.getLastToken();throw new Error("StructureNode, getLastToken, unexpected type")}findAllExpressions(e){const t=[];for(const n of this.getChildren())t.push(...n.findAllExpressions(e));return t}findAllExpressionsRecursive(e){const t=[];for(const n of this.getChildren())o.StatementNode,t.push(...n.findAllExpressionsRecursive(e));return t}findAllExpressionsMulti(e){const t=[];for(const n of this.getChildren())t.push(...n.findAllExpressionsMulti(e));return t}findAllStatements(e){const t=[];for(const n of this.getChildren())n instanceof i?t.push(...n.findAllStatements(e)):n.get()instanceof e&&t.push(n);return t}findAllStatementNodes(){const e=[];for(const t of this.getChildren())t instanceof o.StatementNode?e.push(t):e.push(...t.findAllStatementNodes());return e}findAllStructuresRecursive(e){const t=[];for(const n of this.getChildren())n instanceof o.StatementNode||(n.get()instanceof e&&t.push(n),t.push(...n.findAllStructuresRecursive(e)));return t}findAllStructuresMulti(e){const t=[];for(const t of e)if(this.get()instanceof t)return[this];for(const n of this.getChildren()){if(n instanceof o.StatementNode)continue;let s=!1;for(const o of e)this.get()instanceof o&&(t.push(n),s=!0);!1===s&&t.push(...n.findAllStructuresMulti(e))}return t}findAllStructures(e){const t=[];if(this.get()instanceof e)return[this];for(const n of this.getChildren())n instanceof o.StatementNode||(n.get()instanceof e?t.push(n):t.push(...n.findAllStructures(e)));return t}findDirectStructure(e){if(this.get()instanceof e)return this;for(const t of this.getChildren())if(t.get()instanceof e)return t}findFirstStructure(e){if(this.get()instanceof e)return this;for(const t of this.getChildren())if(!(t instanceof o.StatementNode)){if(t.get()instanceof e)return t;{const n=t.findFirstStructure(e);if(n)return n}}}}t.StructureNode=i},24769(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KnowledgeTransferDocument=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SKTD"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.KnowledgeTransferDocument=o},24796(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Translate=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Translate=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},24941(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionVariant=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"STVI"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.TransactionVariant=o},25011(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetDataset=class{getMatcher(){const e=(0,s.seq)("POSITION",o.Target),t=(0,s.seq)("ATTRIBUTES",o.Target),n=(0,s.seq)("GET DATASET",o.Target,(0,s.opt)((0,s.per)(e,t)));return(0,s.verNot)(i.Version.Cloud,n)}}},25037(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FSTarget=void 0;const s=n(82245),o=n(67886),i=n(36453),r=n(82054);t.FSTarget=class{static runSyntax(e,t,n){const a=null==e?void 0:e.findDirectExpression(s.InlineFS);a&&o.InlineFS.runSyntax(a,t,n);const c=null==e?void 0:e.findDirectExpression(s.TargetFieldSymbol);if(c){const n=c.getFirstToken(),s=t.scope.findVariable(n.getStr());if(void 0===s){const s=`"${n.getStr()}" not found, FSTarget`;return void t.issues.push((0,r.syntaxIssue)(t,e.getFirstToken(),s))}t.scope.addReference(n,s,i.ReferenceType.DataWriteReference,t.filename)}}}},25050(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteCluster=void 0;const s=n(82245),o=n(93170);t.DeleteCluster=class{runSyntax(e,t){var n;for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);const i=e.findExpressionAfterToken("DATABASE");if(i){const e=null===(n=t.scope.getDDIC())||void 0===n?void 0:n.lookupTableOrView(i.concatTokens());e&&t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:e.object})}}}},25075(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableType=t.TableKeyType=t.TableAccessType=void 0;const s=n(97502);var o,i;!function(e){e.standard="STANDARD",e.sorted="SORTED",e.hashed="HASHED",e.index="INDEX",e.any="ANY"}(o||(t.TableAccessType=o={})),function(e){e.default="DEFAULT",e.user="USER",e.empty="EMPTY"}(i||(t.TableKeyType=i={}));class r extends s.AbstractType{constructor(e,t,n,s){var i;if(super({qualifiedName:n,description:s}),this.rowType=e,this.options=t,(null===(i=t.primaryKey)||void 0===i?void 0:i.type)===o.standard&&!0===t.primaryKey.isUnique)throw new Error("STANDARD tables cannot have UNIQUE key")}getOptions(){return this.options}isWithHeader(){return this.options.withHeader}getAccessType(){var e;return null===(e=this.options.primaryKey)||void 0===e?void 0:e.type}getRowType(){return this.rowType}toABAP(){return"STANDARD TABLE OF "+this.rowType.toABAP()+" WITH DEFAULT KEY"}toText(e){const t=this.rowType;return!0===this.options.withHeader?"Table with header of "+t.toText(e+1):"Table of "+t.toText(e+1)}isGeneric(){var e,t;return(null===(e=this.options.primaryKey)||void 0===e?void 0:e.type)!==o.standard&&this.options.keyType===i.user&&0===(null===(t=this.options.primaryKey)||void 0===t?void 0:t.keyFields.length)||this.rowType.isGeneric()}containsVoid(){return this.rowType.containsVoid()}toCDS(){return"abap.TODO_TABLE"}}t.TableType=r},25188(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Define=void 0;const s=n(50612),o=n(52024),i=n(58720);t.Define=class{getMatcher(){return(0,i.beginEnd)((0,i.sta)(s.Define),(0,i.star)((0,i.sta)(o.MacroContent)),(0,i.sta)(s.EndOfDefinition))}}},25248(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferCorresponding=t.PreferCorrespondingConf=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(50612),a=n(86696),c=n(49028);class l extends o.BasicRuleConfig{}t.PreferCorrespondingConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"prefer_corresponding",title:"Prefer corresponding( ) to MOVE-CORRESPONDING",shortDescription:"Prefer corresponding( ) to MOVE-CORRESPONDING, from v740sp05 and up",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-functional-to-procedural-language-constructs",tags:[a.RuleTag.SingleFile,a.RuleTag.Upport,a.RuleTag.Styleguide],badExample:"MOVE-CORRESPONDING foo TO bar.",goodExample:"bar = CORRESPONDING #( foo )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(this.reg.getConfig().getVersion()<c.Version.v740sp05)return t;for(const n of e.getStatements())n.get()instanceof r.MoveCorresponding&&7===n.getChildren().length&&t.push(s.Issue.atStatement(e,n,"Use CORRESPONDING type( ... ) instead of MOVE-CORRESPONDING",this.getMetadata().key,this.conf.severity));return t}}t.PreferCorresponding=d},25287(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLSource=void 0;const s=n(82245),o=n(93170);t.SQLSource=class{static runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))return o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))return o.Source.runSyntax(n,t)}}},25294(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Transformation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"XSLT"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.Transformation=o},25343(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Perform=void 0;const s=n(82245),o=n(50612),i=n(36453),r=n(93170),a=n(9646),c=n(82054),l=n(38788),d=n(53414);t.Perform=class{runSyntax(e,t){if(!(e.get()instanceof o.Perform))throw new l.AssertError("checkPerform unexpected node type");for(const n of e.findDirectExpressions(s.PerformChanging))for(const e of n.findDirectExpressions(s.Target))a.Target.runSyntax(e,t);for(const n of e.findDirectExpressions(s.PerformTables))for(const e of n.findDirectExpressions(s.Source))r.Source.runSyntax(e,t);for(const n of e.findDirectExpressions(s.PerformUsing))for(const e of n.findDirectExpressions(s.Source))r.Source.runSyntax(e,t);if(e.findFirstExpression(s.IncludeName))return;const n=e.findFirstExpression(s.Dynamic);if(n)return void d.Dynamic.runSyntax(n,t);const u=e.findFirstExpression(s.FormName);if(void 0===u)return;const p=u.concatTokens(),f=t.scope.findFormDefinition(p);if(void 0!==f)t.scope.addReference(u.getFirstToken(),f,i.ReferenceType.FormReference,t.filename);else{const e='FORM definition "'+p+'" not found';t.issues.push((0,c.syntaxIssue)(t,u.getFirstToken(),e))}}}},25352(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyEntities=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ModifyEntities=class{getMatcher(){const e=(0,s.seq)("WITH",o.Source),t=(0,s.seq)("FIELDS (",(0,s.plus)(o.SimpleName),")",e),n=(0,s.seq)("BY",o.AssociationName),r=(0,s.seq)("RELATING TO",o.NamespaceSimpleName,"BY",o.NamespaceSimpleName),a=(0,s.seq)("EXECUTE",o.NamespaceSimpleName,"FROM",o.Source),c=(0,s.seq)("CREATE",(0,s.opt)(n),"FROM",o.Source,(0,s.opt)(r)),l=(0,s.seq)("UPDATE FROM",o.Source,(0,s.opt)(r)),d=(0,s.seq)("DELETE FROM",o.Source),u=(0,s.seq)("UPDATE",t),p=(0,s.seq)("UPDATE SET FIELDS WITH",o.Source),f=(0,s.alt)(p,(0,s.seq)("CREATE SET FIELDS WITH",o.Source),u,d,l,c,a,(0,s.seq)("CREATE",(0,s.opt)(n),(0,s.optPrio)("AUTO FILL CID"),(0,s.altPrio)(e,t))),g=(0,s.seq)("FAILED",o.Target),h=(0,s.seq)("RESULT",o.Target),T=(0,s.seq)("MAPPED",o.Target),m=(0,s.seq)("REPORTED",o.Target),y=(0,s.optPrio)((0,s.per)(g,h,T,m)),S=(0,s.seq)((0,s.optPrio)("AUGMENTING"),"ENTITIES OF",o.NamespaceSimpleName,(0,s.opt)("IN LOCAL MODE"),(0,s.plusPrio)((0,s.seq)("ENTITY",o.NamespaceSimpleName,(0,s.plus)(f)))),v=(0,s.seq)("CREATE",t,(0,s.opt)((0,s.seq)("CREATE BY",o.AssociationName,t))),E=(0,s.seq)("CREATE BY",o.AssociationName,t),C=(0,s.seq)("CREATE FROM",o.Source,(0,s.plus)((0,s.seq)("CREATE BY",o.AssociationName,"FROM",o.Source))),b=(0,s.seq)("ENTITY",(0,s.opt)("IN LOCAL MODE"),(0,s.alt)(o.NamespaceSimpleName,o.EntityAssociation),(0,s.alt)(a,c,u,d,p,l,v,E,C));return(0,s.ver)(i.Version.v754,(0,s.seq)("MODIFY",(0,s.alt)(S,b),y))}}},25545(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndTestSeam=void 0;const s=n(3125),o=n(49028);t.EndTestSeam=class{getMatcher(){return(0,s.ver)(o.Version.v750,(0,s.str)("END-TEST-SEAM"))}}},25551(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineLoopDefinition=void 0;const s=n(82245),o=n(93170),i=n(20572),r=n(15838),a=n(36453),c=n(82054);t.InlineLoopDefinition=class{static runSyntax(e,t){if(void 0===e)return;let n=e.findDirectExpression(s.TargetField);void 0===n&&(n=e.findDirectExpression(s.TargetFieldSymbol));const l=e.findDirectExpression(s.Source);if(l&&n){const s=o.Source.runSyntax(l,t);let d;if(s instanceof i.TableType)d=s.getRowType();else if(s instanceof i.VoidType)d=s;else if(s instanceof i.UnknownType){const n="Unknown type, "+s.getError();return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}if(void 0===d&&e.concatTokens().toUpperCase().includes(" IN GROUP ")&&void 0!==s)d=s;else if(void 0===d){const n="InlineLoopDefinition, not a table type";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}const u=new r.TypedIdentifier(n.getFirstToken(),t.filename,d,["inline"]);t.scope.addReference(n.getFirstToken(),u,a.ReferenceType.DataWriteReference,t.filename),t.scope.addReference(n.getFirstToken(),u,a.ReferenceType.DataReadReference,t.filename),t.scope.addIdentifier(u)}const d=e.findExpressionAfterToken("INTO");if(d&&d.get()instanceof s.TargetField){const e=new r.TypedIdentifier(d.getFirstToken(),t.filename,i.IntegerType.get(),["inline"]);t.scope.addReference(d.getFirstToken(),e,a.ReferenceType.DataWriteReference,t.filename),t.scope.addIdentifier(e)}}}},25578(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationJobTemplate=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SAJT"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ApplicationJobTemplate=o},25606(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBody=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("IN",o.Source),t=(0,s.seq)("USING KEY",o.SimpleName);return(0,s.seq)(o.Source,(0,s.optPrio)("EXCEPT"),(0,s.optPrio)((0,s.per)(e,t)),(0,s.seq)("WHERE",o.ComponentCond))}}t.FilterBody=i},25636(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormParamType=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("DEFAULT",(0,s.alt)(o.Constant,o.FieldChain)),t=(0,s.seq)((0,s.alt)("STANDARD","HASHED","INDEX","SORTED","ANY"),"TABLE"),n=(0,s.seq)(t,(0,s.optPrio)((0,s.seq)("OF",o.TypeName))),i=(0,s.seq)((0,s.optPrio)((0,s.alt)("REF TO","LINE OF")),o.TypeName,(0,s.opt)(e)),r=(0,s.seq)("LIKE",(0,s.optPrio)((0,s.alt)("REF TO","LINE OF")),o.FieldChain);return(0,s.alt)((0,s.seq)("TYPE",(0,s.altPrio)(n,i)),r)}}t.FormParamType=i},25675(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallParam=void 0;const s=n(75457),o=n(20572),i=n(82245),r=n(19945),a=n(89301),c=n(93170),l=n(3240),d=n(82054);t.MethodCallParam=class{static runSyntax(e,t,n){if(!(e.get()instanceof i.MethodCallParam)){const n="MethodCallParam, unexpected input";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}const u=e.getChildren();if(u.length<2||u.length>3){const n="MethodCallParam, unexpected child length";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}const p=u[1];if(p.get()instanceof a.WParenRight||p.get()instanceof a.WParenRightW){if(!(n instanceof o.VoidType)){const s=n.getParameters().getRequiredParameters();if(s.length>0){const n='Parameter "'+s[0].getName()+'" must be supplied';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}}else if(p instanceof s.ExpressionNode&&(p.get()instanceof i.Source||p.get()instanceof i.ConstantString)){if(!(n instanceof o.VoidType)){if(0===n.getParameters().getImporting().length){const s='Method "'+n.getName()+'" has no importing parameters';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}if(n.getParameters().getRequiredParameters().length>1){const s='Method "'+n.getName()+'" has more than one importing or changing parameter';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}}let s;if(n instanceof o.VoidType)s=n;else{const o=n.getParameters().getDefaultImporting();if(void 0===o){const n="No default importing parameter";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}for(const e of n.getParameters().getImporting())if(e.getName().toUpperCase()===o){s=e.getType();break}}let r=o.StringType.get();if(p.get()instanceof i.Source&&(r=c.Source.runSyntax(p,t,s)),void 0===r){const n="No source type determined, method source";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}if(!1===new l.TypeUtils(t.scope).isAssignableStrict(r,s,p)){const n="Method parameter type not compatible";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}else if(p instanceof s.ExpressionNode&&p.get()instanceof i.ParameterListS)(new r.MethodParameters).checkExporting(p,t,n);else{if(!(p.get()instanceof i.MethodParameters)){const n="MethodCallParam, unexpected child";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}(new r.MethodParameters).runSyntax(p,t,n)}}}},25740(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Raise=void 0;const s=n(3125),o=n(49028),i=n(82245);t.Raise=class{getMatcher(){const e=(0,s.seq)("MESSAGE",i.MessageSource,(0,s.opt)(i.RaiseWith)),t=(0,s.seq)("MESSAGE ID",i.Source,"NUMBER",(0,s.altPrio)(i.MessageNumber,i.Source),(0,s.optPrio)(i.RaiseWith)),n=(0,s.seq)("EXPORTING",i.ParameterListS),r=(0,s.seq)("TYPE",i.ClassName,(0,s.opt)((0,s.alt)((0,s.ver)(o.Version.v750,(0,s.alt)(e,t),o.Version.OpenABAP),(0,s.ver)(o.Version.v752,"USING MESSAGE"))),(0,s.optPrio)(n)),a=(0,s.altPrio)((0,s.seq)((0,s.optPrio)("RESUMABLE"),"EXCEPTION"),"SHORTDUMP"),c=(0,s.seq)(a,(0,s.altPrio)(r,(0,s.ver)(o.Version.v752,i.Source,o.Version.OpenABAP),i.SimpleSource2));return(0,s.seq)("RAISE",(0,s.altPrio)(c,i.ExceptionName))}}},25793(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Wait=void 0;const s=n(82245),o=n(93170),i=n(60635);t.Wait=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Cond))i.Cond.runSyntax(n,t)}}},25799(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBodyLines=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)((0,s.seq)("FROM",o.Source)),(0,s.optPrio)((0,s.seq)("TO",o.Source)));return(0,s.seq)("LINES OF",o.Source,e)}}t.ValueBodyLines=i},25936(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetTime=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(9646);t.GetTime=class{runSyntax(e,t){const n=e.findDirectExpression(s.Target),a=null==n?void 0:n.findDirectExpression(s.InlineData);a?o.InlineData.runSyntax(a,t,new i.PackedType(8,0)):n&&r.Target.runSyntax(n,t)}}},25979(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Package=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DEVC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.Package=o},26078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadEntities=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301);t.ReadEntities=class{getMatcher(){const e=(0,s.seq)("FROM",o.Source),t=(0,s.seq)("FIELDS",(0,s.tok)(r.WParenLeftW),(0,s.plus)(o.SimpleName),(0,s.tok)(r.WParenRightW),"WITH",o.Source),n=(0,s.seq)("ALL FIELDS WITH",o.Source),a=(0,s.seq)("RESULT",o.Target),c=(0,s.seq)("FAILED",o.Target),l=(0,s.seq)("REPORTED",o.Target),d=(0,s.seq)((0,s.opt)((0,s.seq)("BY",o.AssociationName)),(0,s.alt)(t,e,n),(0,s.optPrio)(a)),u=(0,s.seq)("ENTITY",o.NamespaceSimpleName,(0,s.plus)(d)),p=(0,s.seq)("ENTITIES OF",o.NamespaceSimpleName,(0,s.opt)("IN LOCAL MODE"),(0,s.plus)(u),(0,s.optPrio)((0,s.seq)("LINK",o.Target)),(0,s.optPrio)((0,s.per)(c,l))),f=(0,s.seq)("BY",o.AssociationName,n),g=(0,s.seq)("BY",o.AssociationName,t),h=(0,s.seq)((0,s.alt)(n,t,e,g,f),a),T=(0,s.seq)("ENTITY",(0,s.opt)("IN LOCAL MODE"),(0,s.alt)(o.NamespaceSimpleName,o.EntityAssociation),(0,s.plus)(h),(0,s.optPrio)(c),(0,s.optPrio)(l));return(0,s.ver)(i.Version.v754,(0,s.seq)("READ",(0,s.alt)(p,T)))}}},26130(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLType=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^(abap\.)?\w+(\(\d+\))?$/)}}t.DDLType=o},26137(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Pragma=void 0;const s=n(61785);class o extends s.AbstractToken{}t.Pragma=o},26149(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CloseCursor=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CloseCursor=class{getMatcher(){const e=(0,s.seq)("CLOSE CURSOR",o.SQLSourceSimple);return(0,s.verNot)(i.Version.Cloud,e)}}},26165(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.registerABAP=function(e){monaco.languages.registerCompletionItemProvider("abap",new o.ABAPSnippetProvider),monaco.languages.registerHoverProvider("abap",new r.ABAPHoverProvider(e)),monaco.languages.registerDocumentFormattingEditProvider("abap",new a.ABAPFormattingProvider(e)),monaco.languages.registerDocumentSymbolProvider("abap",new c.ABAPSymbolProvider(e)),monaco.languages.registerDefinitionProvider("abap",new l.ABAPDefinitionProvider(e)),monaco.languages.registerRenameProvider("abap",new i.ABAPRenameProvider(e)),monaco.languages.registerDocumentHighlightProvider("abap",new d.ABAPDocumentHighlightProvider(e)),monaco.languages.registerCodeActionProvider("abap",new u.ABAPCodeActionProvider(e)),monaco.languages.registerImplementationProvider("abap",new p.ABAPImplementationProvider(e)),monaco.languages.registerReferenceProvider("abap",new f.ABAPReferencesProvider(e)),monaco.languages.registerDocumentRangeSemanticTokensProvider("abap",new g.ABAPSemanticTokensDeltaProvider(e))},t.updateMarkers=function(e,t){var n;e.parse();const o=new s.LanguageServer(e).diagnostics({uri:t.uri.toString()}),i=[];for(const e of o){let t=e.code||"";"number"==typeof t&&(t="");const s=monaco.Uri.parse((null===(n=e.codeDescription)||void 0===n?void 0:n.href)||"");let o=monaco.MarkerSeverity.Error;e.severity===h.DiagnosticSeverity.Warning?o=monaco.MarkerSeverity.Warning:e.severity===h.DiagnosticSeverity.Information&&(o=monaco.MarkerSeverity.Info),i.push({severity:o,message:e.message,code:{value:t,target:s},startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1})}monaco.editor.setModelMarkers(t,"abaplint",i)};const s=n(55864),o=n(2129),i=n(47734),r=n(90772),a=n(64097),c=n(29296),l=n(21815),d=n(85086),u=n(49126),p=n(33234),f=n(98126),g=n(72780),h=n(46203)},26221(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConcatenatedConstant=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.regex)(/^`.*`$/),(0,s.plusPrio)((0,s.seq)("&",(0,s.regex)(/^`.*`$/)))),t=(0,s.seq)((0,s.regex)(/^'.*'$/),(0,s.plusPrio)((0,s.seq)("&",(0,s.regex)(/^'.*'$/))));return(0,s.altPrio)(e,t)}}t.ConcatenatedConstant=o},26251(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopGroupByComponent=void 0;const s=n(3125),o=n(70302),i=n(67401);class r extends s.Expression{getRunnable(){const e=(0,s.seq)(o.ComponentName,"=","GROUP SIZE"),t=(0,s.seq)(o.ComponentName,"=","GROUP INDEX");return(0,s.alt)(i.ComponentCompareSingle,e,t)}}t.LoopGroupByComponent=r},26332(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FMGlobalParametersObsolete=t.FMGlobalParametersObsoleteConf=void 0;const s=n(71759),o=n(84383),i=n(77465),r=n(86789);class a extends i.BasicRuleConfig{}t.FMGlobalParametersObsoleteConf=a,t.FMGlobalParametersObsolete=class{constructor(){this.conf=new a}getMetadata(){return{key:"fm_global_parameters_obsolete",title:"FM Global Parameters Obsolete",shortDescription:"Check for function modules with global parameteers",extendedInformation:"https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abenglobal_parameters_obsolete.htm",tags:[]}}initialize(e){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){if(!(e instanceof o.FunctionGroup))return[];const t=[];for(const n of e.getModules())if(!0===n.isGlobalParameters()){const o=e.getMainABAPFile();if(void 0===o)continue;const i=`Function Module "${n.getName()}" uses obsolete global parameters`;t.push(s.Issue.atPosition(o,new r.Position(1,1),i,this.getMetadata().key,this.conf.severity))}return t}}},26501(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndModule=void 0;const s=n(3125),o=n(49028);t.EndModule=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"ENDMODULE")}}},26571(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPParser=void 0;const s=n(78006),o=n(12362),i=n(49750),r=n(50152),a=n(75252),c=n(61071),l=n(49028);t.ABAPParser=class{constructor(e,t,n){this.version=e||l.defaultVersion,this.globalMacros=t||[],this.reg=n}parse(e){const t=[],n=[],l=Date.now(),d=Date.now(),u=e.map((e=>(new r.Lexer).run(e))),p=Date.now()-d,f=Date.now(),g=new a.StatementParser(this.version,this.reg).run(u,this.globalMacros),h=Date.now()-f,T=Date.now();for(const e of g){const r=c.StructureParser.run(e),a=new i.ABAPFileInformationParser(e.file.getFilename()).parse(r.node),l=new o.ABAPFileInformation(a);n.push(new s.ABAPFile(e.file,e.tokens,e.statements,r.node,l)),t.push(...r.issues)}const m=Date.now()-T;return{issues:t,output:n,runtime:Date.now()-l,runtimeExtra:{lexing:p,statements:h,structure:m}}}}},26639(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebDynproApplication=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WDYA"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.WebDynproApplication=o},26763(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceNext=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.ver)(r.Version.v754,(0,s.alt)((0,s.seq)((0,s.tok)(i.WPlus),"="),(0,s.seq)((0,s.tok)(i.WDash),"="),"/=","*=","&&=")),t=(0,s.seq)(o.SimpleTarget,(0,s.altPrio)("=",e),o.Source);return(0,s.seq)("NEXT",(0,s.plus)(t))}}t.ReduceNext=a},26811(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayModel=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWMO"}getAllowedNaming(){return{maxLength:36,allowNamespace:!0}}getDescription(){}}t.GatewayModel=o},26929(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataDefinition=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.opt)((0,s.per)("READ-ONLY",o.Type,o.Length,o.Decimals,o.Value)),t=(0,s.seq)(o.TypeTable,(0,s.optPrio)("READ-ONLY")),n=(0,s.ver)(i.Version.v702,"BOXED");return(0,s.seq)(o.DefinitionName,(0,s.optPrio)(o.ConstantFieldLength),(0,s.alt)(e,t,o.TypeStructure),(0,s.optPrio)(n))}}t.DataDefinition=r},26967(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Integer=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=(0,s.optPrio)((0,s.altPrio)((0,s.tok)(o.WDash),(0,s.tok)(o.WDashW),(0,s.tok)(o.WPlus)));return(0,s.seq)(e,(0,s.regex)(/^\d+$/))}}t.Integer=i},26971(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NamesNoDash=t.NamesNoDashConf=void 0;const s=n(50612),o=n(82245),i=n(99732),r=n(77465),a=n(71759),c=n(89301),l=n(82245),d=n(86696);class u extends r.BasicRuleConfig{}t.NamesNoDashConf=u;class p extends i.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"names_no_dash",title:"No dashes in FORM and DATA names",shortDescription:'Checks for a "-" in FORM, DATA, PARAMETER and SELECT-OPTION names',tags:[d.RuleTag.SingleFile,d.RuleTag.Naming],badExample:"DATA foo-bar TYPE i.",goodExample:"DATA foobar TYPE i."}}getMessage(){return"No dash allowed in FORM and DATA names"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],i=e.getStructure();if(void 0===i)return n;if("CLAS"!==t.getType()&&"INTF"!==t.getType()){for(const t of i.findAllStatements(s.Form)){const s=t.findFirstExpression(l.FormName);for(const t of s.getTokens())if(t instanceof c.Dash||t instanceof c.DashW){const s=a.Issue.atToken(e,t,this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(s);break}}for(const t of i.findAllStatements(s.Parameter)){const s=t.findFirstExpression(o.FieldSub);for(const t of s.getTokens())if(t instanceof c.Dash||t instanceof c.DashW){const s=a.Issue.atToken(e,t,this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(s);break}}for(const t of i.findAllStatements(s.SelectOption)){const s=t.findFirstExpression(o.FieldSub);for(const t of s.getTokens())if(t instanceof c.Dash||t instanceof c.DashW){const s=a.Issue.atToken(e,t,this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(s);break}}}for(const t of i.findAllExpressions(o.DefinitionName))if(t.concatTokens().includes("-")){const s=a.Issue.atToken(e,t.getFirstToken(),this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(s)}return n}}t.NamesNoDash=p},27021(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSFunctionInput=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.opt)(s.CDSParameters),(0,o.starPrio)((0,o.seq)(".",s.CDSName,(0,o.opt)(s.CDSParameters))));return(0,o.altPrio)(s.CDSArithmetics,s.CDSAggregate,s.CDSCast,s.CDSFunction,s.CDSCase,s.CDSString,e,s.CDSInteger)}}t.CDSFunctionInput=i},27023(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301);t.Move=class{getMatcher(){const e=(0,s.verNot)(i.Version.Cloud,"MOVE"),t=(0,s.seq)(e,(0,s.altPrio)((0,s.seq)("EXACT",o.Source,"TO",o.Target),(0,s.seq)(o.Source,(0,s.altPrio)("?TO","TO"),o.Target)),(0,s.opt)((0,s.seq)("PERCENTAGE",o.Source,(0,s.opt)((0,s.alt)("LEFT","RIGHT"))))),n=(0,s.ver)(i.Version.v754,(0,s.alt)((0,s.seq)((0,s.tok)(r.WPlus),"="),(0,s.seq)((0,s.tok)(r.WDash),"="),"/=","*=","&&="),i.Version.OpenABAP),a=(0,s.seq)("=",(0,s.star)((0,s.seq)(o.Target,"="))),c=(0,s.altPrio)((0,s.altPrio)(a,"?="),n),l=(0,s.seq)(o.Target,c,o.Source);return(0,s.altPrio)(t,l)}}},27058(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationGroup=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SUCU"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.AuthorizationGroup=o},27137(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WAt=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" @"}}t.WAt=o},27143(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Clear=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Clear=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},27233(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallBadi=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(53414);t.CallBadi=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Target))i.Target.runSyntax(n,t);for(const n of e.findAllExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t)}}},27253(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSCast=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.starPrio)((0,o.seq)(".",s.CDSName))),t=(0,o.altPrio)(s.CDSFunction,s.CDSCase,s.CDSAggregate,s.CDSArithmetics,i,s.CDSString,s.CDSInteger,e);return(0,o.seq)("CAST","(",t,"AS",s.CDSType,(0,o.optPrio)((0,o.seq)("PRESERVING","TYPE")),")")}}t.CDSCast=i},27392(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Statics=void 0;const s=n(50612),o=n(58720);t.Statics=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.StaticBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.Static),(0,o.sta)(s.IncludeType))),(0,o.sta)(s.StaticEnd))}}},27458(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSelectOptions=void 0;const s=n(3125),o=n(49028);t.CheckSelectOptions=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"CHECK SELECT-OPTIONS")}}},27485(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndFunction=void 0;const s=n(3125);t.EndFunction=class{getMatcher(){return(0,s.str)("ENDFUNCTION")}}},27516(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Call=void 0;const s=n(75457),o=n(83091),i=n(69328),r=n(64188),a=n(13075),c=n(82054);t.Call=class{runSyntax(e,t){const n=e.getChildren();if(2===n.length){const e=n[0];return void o.MethodCallChain.runSyntax(e,t)}const l=n[2];if(void 0===l){const n="Call, child MethodSource not found";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}const d=i.MethodSource.runSyntax(l,t),u=n[3];u instanceof s.ExpressionNode&&r.MethodCallBody.runSyntax(u,t,d||a.VoidType.get("CallTODO"))}}},27523(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecureFAE=t.UnsecureFAEConf=void 0;const s=n(82245),o=n(71759),i=n(77465),r=n(86696),a=n(12620),c=n(52424);class l extends i.BasicRuleConfig{}t.UnsecureFAEConf=l,t.UnsecureFAE=class{constructor(){this.conf=new l}getMetadata(){return{key:"unsecure_fae",title:"Unsecure FAE",shortDescription:"Checks for unsecure FAE",extendedInformation:"Issues from rule check_syntax must be fixed before this rule takes effect",tags:[r.RuleTag.Experimental,r.RuleTag.Performance]}}getConfig(){return this.conf}initialize(e){return this.reg=e,this}setConfig(e){this.conf=e}run(e){var t;const n=[];if(!(e instanceof a.ABAPObject))return n;if(new c.SyntaxLogic(this.reg,e).run().issues.length>0)return n;for(const i of e.getABAPFiles())for(const e of(null===(t=i.getStructure())||void 0===t?void 0:t.findAllExpressions(s.SQLForAllEntries))||[]){const t=e.getFirstToken(),s="Unsecure FAE";n.push(o.Issue.atToken(i,t,s,this.getMetadata().key,this.getConfig().severity))}return n}}},27690(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InboundService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SCO2"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.InboundService=o},27699(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Wait=void 0;const s=n(3125),o=n(49028),i=n(82245);t.Wait=class{getMatcher(){const e=(0,s.seq)("UP TO",i.Source,"SECONDS"),t=(0,s.ver)(o.Version.v750,"PUSH CHANNELS",o.Version.OpenABAP),n=(0,s.seq)("FOR",(0,s.per)("MESSAGING CHANNELS",t,"ASYNCHRONOUS TASKS")),r=(0,s.seq)((0,s.opt)(n),"UNTIL",i.Cond,(0,s.opt)(e));return(0,s.seq)("WAIT",(0,s.alt)(r,e))}}},27853(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Do=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(3240),a=n(20572),c=n(82054);t.Do=class{runSyntax(e,t){const n=e.findExpressionAfterToken("DO");for(const i of e.findDirectExpressions(s.Source)){const s=o.Source.runSyntax(i,t);if(i===n&&!1===new r.TypeUtils(t.scope).isAssignable(s,a.IntegerType.get())){const n="DO TIMES must be numeric";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}}for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},27878(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallKernel=void 0;const s=n(82245),o=n(93170);t.CallKernel=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t)}}},27893(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Length=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("LENGTH",(0,s.altPrio)(o.Integer,o.ConstantString,o.SimpleFieldChain))}}t.Length=i},27951(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=(0,s.regex)(/^[\w~\/%$]+$/),t=(0,s.seq)(e,(0,s.alt)((0,s.tok)(o.StaticArrow),(0,s.tok)(o.InstanceArrow))),n=(0,s.seq)((0,s.tok)(o.Dash),e);return(0,s.seq)((0,s.opt)(t),e,(0,s.starPrio)(n))}}t.TypeName=i},28096(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableExpression=void 0;const s=n(75457),o=n(82245),i=n(93170),r=n(20572),a=n(56478);t.TableExpression=class{static runSyntax(e,t,n){if(void 0===e)return;let c=n;if(c instanceof r.TableType&&(c=c.getRowType()),3===e.getChildren().length){const n=e.findDirectExpression(o.Source);i.Source.runSyntax(n,t,c)}else if(e.findDirectTokenByText("INDEX")){const n=e.findDirectExpression(o.Source);i.Source.runSyntax(n,t)}else{let n;for(const r of e.getChildren())r instanceof s.ExpressionNode&&r.get()instanceof o.ComponentChainSimple?n=a.ComponentChain.runSyntax(c,r,t):r instanceof s.ExpressionNode&&r.get()instanceof o.Source&&i.Source.runSyntax(r,t,n)}}}},28112(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Default=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("DEFAULT",(0,s.altPrio)(o.Constant,o.FieldChain))}}t.Default=i},28131(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CyclomaticComplexity=t.CyclomaticComplexityConf=void 0;const s=n(77465),o=n(71759),i=n(86696),r=n(43693);class a extends s.BasicRuleConfig{constructor(){super(...arguments),this.max=20}}t.CyclomaticComplexityConf=a,t.CyclomaticComplexity=class{constructor(){this.conf=new a}getMetadata(){return{key:"cyclomatic_complexity",title:"Cyclomatic Complexity",shortDescription:"Cyclomatic complexity, only reported for methods",tags:[i.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.max&&(this.conf.max=(new a).max)}initialize(e){return this}run(e){const t=[],n=r.CyclomaticComplexityStats.run(e);for(const e of n)if(e.count>this.conf.max){const n="Max cyclomatic complexity reached, "+e.count+", "+e.name,s=o.Issue.atPosition(e.file,e.pos,n,this.getMetadata().key,this.conf.severity);t.push(s)}return t}}},28158(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ATCCheckObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CHKO"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ATCCheckObject=o},28377(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constant=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)(o.TextElementString,o.ConcatenatedConstant,o.ConstantString,o.Integer)}}t.Constant=i},28380(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLForAllEntries=void 0;const s=n(82245),o=n(93170),i=n(20572),r=n(82054);t.SQLForAllEntries=class{static runSyntax(e,t){let n=e.findFirstExpression(s.Source);if(void 0===n&&(n=e.findFirstExpression(s.SimpleSource3)),n){const s=o.Source.runSyntax(n,t);if(s instanceof i.VoidType||s instanceof i.UnknownType)return;if(!(s instanceof i.TableType)){const n="FAE parameter must be table type, "+(null==s?void 0:s.constructor.name);return void t.issues.push((0,r.syntaxIssue)(t,e.getFirstToken(),n))}const a=n.concatTokens().replace("[]","");t.scope.setAllowHeaderUse(a)}}}},28493(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Pack=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Pack=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},28561(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TruncateDataset=void 0;const s=n(82245),o=n(93170);t.TruncateDataset=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},28713(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotationObject=void 0;const s=n(18483),o=n(3125),i=n(71176);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(":",(0,o.alt)(r,s.CDSAnnotationArray,i.CDSAnnotationSimple)),t=(0,o.seq)(s.CDSName,(0,o.star)((0,o.seq)(".",s.CDSName)));return(0,o.seq)("{",t,(0,o.opt)(e),(0,o.star)((0,o.seq)(",",t,(0,o.opt)(e))),"}")}}t.CDSAnnotationObject=r},28835(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NewObject=void 0;const s=n(20572),o=n(82245),i=n(36453),r=n(93170),a=n(2416),c=n(19945),l=n(46743),d=n(3240),u=n(82054),p=n(38788),f=n(15838);t.NewObject=class{static runSyntax(e,t,n){let a;const c=e.findDirectExpression(o.TypeNameOrInfer),d=null==c?void 0:c.getFirstToken();if(void 0===d)throw new Error("NewObject, child TypeNameOrInfer not found");const g=null==c?void 0:c.concatTokens();if(void 0===g)throw new p.AssertError("NewObject, child TypeNameOrInfer not found");if("#"===g&&n&&n instanceof s.ObjectReferenceType){const o=t.scope.findClassDefinition(n.getIdentifierName());if(o){const e=new f.TypedIdentifier(d,t.filename,n);t.scope.addReference(d,e,i.ReferenceType.InferredType,t.filename),t.scope.addReference(d,o,i.ReferenceType.ConstructorReference,t.filename,{ooName:o.getName()})}else{const o=t.scope.findInterfaceDefinition(n.getIdentifierName());if(o){const n=o.getName()+" is an interface, cannot be instantiated";return t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(u.CheckSyntaxKey)}}if(a=n,!0===(null==o?void 0:o.isAbstract())){const n=o.getName()+" is abstract, cannot be instantiated";return t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(u.CheckSyntaxKey)}}else if("#"===g&&n)a=n;else if("#"===g)throw new p.AssertError("NewObject, todo, infer type");if(void 0===a){const n=t.scope.findObjectDefinition(g);if(n){const o=new s.ObjectReferenceType(n),r=new f.TypedIdentifier(d,t.filename,o);t.scope.addReference(d,r,i.ReferenceType.InferredType,t.filename),t.scope.addReference(d,n,i.ReferenceType.ObjectOrientedReference,t.filename),t.scope.addReference(d,n,i.ReferenceType.ConstructorReference,t.filename,{ooName:n.getName()});const c=t.scope.findClassDefinition(o.getIdentifierName());if(!0===(null==c?void 0:c.isAbstract())){const n=c.getName()+" is abstract, cannot be instantiated";return t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(u.CheckSyntaxKey)}a=o}}if(void 0===a){const n=new l.BasicTypes(t).resolveTypeName(c);if(n instanceof s.UnknownType)a=n;else if(!n||n instanceof s.VoidType){if(!(n instanceof s.VoidType)){const n='Type "'+g+'" not found in scope, NewObject';return t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(u.CheckSyntaxKey)}a=n}else a=new s.DataReference(n)}if(a instanceof s.ObjectReferenceType)this.parameters(e,a,t);else for(const n of e.findAllExpressions(o.Source))r.Source.runSyntax(n,t,a);if(a instanceof s.UnknownType&&!0===t.scope.getDDIC().inErrorNamespace(g)){const n='Class or type "'+g+'" not found';return t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(u.CheckSyntaxKey)}return a}static parameters(e,t,n){const s=t.getIdentifier().getName(),i=n.scope.findObjectDefinition(s),l=new a.ObjectOriented(n.scope);let{method:p}=l.searchMethodName(i,"CONSTRUCTOR");const f=(null==p?void 0:p.getParameters().getRequiredParameters())||[],g=e.findDirectExpression(o.Source),h=e.findDirectExpression(o.ParameterListS);if(g){const t=this.defaultImportingType(p);if(void 0===t){const t="NewObject, no default importing parameter found for constructor, "+s;return void n.issues.push((0,u.syntaxIssue)(n,e.getFirstToken(),t))}const o=r.Source.runSyntax(g,n,t);if(!1===new d.TypeUtils(n.scope).isAssignableStrict(o,t)){const t="NEW parameter type not compatible";return void n.issues.push((0,u.syntaxIssue)(n,e.getFirstToken(),t))}}else if(h){if(void 0===p){const t="NewObject, no parameters for constructor found, "+s;return void n.issues.push((0,u.syntaxIssue)(n,e.getFirstToken(),t))}(new c.MethodParameters).checkExporting(h,n,p)}else if(f.length>0){const t=`constructor parameter "${f[0].getName()}" must be supplied, `+s;return void n.issues.push((0,u.syntaxIssue)(n,e.getFirstToken(),t))}}static defaultImportingType(e){let t;if(void 0===e)return;const n=e.getParameters().getDefaultImporting();for(const s of e.getParameters().getImporting())s.getName().toUpperCase()===n&&(t=s.getType());return t}}},28976(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalTestclassConsistency=t.LocalTestclassConsistencyConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(84383),a=n(86696),c=n(49028);class l extends i.BasicRuleConfig{}t.LocalTestclassConsistencyConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"local_testclass_consistency",title:"Local testclass consistency",shortDescription:"Checks that local test classes are placed in the test include, and class unit test flag is set",tags:[a.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,o,i;const a=[];if(this.reg.getConfig().getVersion()===c.Version.v700)return[];if(!(t instanceof r.Class))return[];for(const t of e.getInfo().listClassDefinitions())if(t.isLocal&&t.isForTesting&&!e.getFilename().includes(".testclasses.abap")){const e='Place local testclass "'+t.name+'" in the testclass include',n=s.Issue.atIdentifier(t.identifier,e,this.getMetadata().key,this.conf.severity);a.push(n)}if(!0===e.getFilename().includes(".testclasses.")&&void 0!==t.getTestclassFile()&&!1===(null===(n=t.getXML())||void 0===n?void 0:n.includes("<WITH_UNIT_TESTS>X</WITH_UNIT_TESTS>"))){const e=t.getIdentifier();if(e){const t="Has testclass, but XML does not set <WITH_UNIT_TESTS>",n=s.Issue.atIdentifier(e,t,this.getMetadata().key,this.conf.severity);a.push(n)}}if(e.getFilename()===(null===(o=t.getMainABAPFile())||void 0===o?void 0:o.getFilename())&&void 0===t.getTestclassFile()&&!0===(null===(i=t.getXML())||void 0===i?void 0:i.includes("<WITH_UNIT_TESTS>X</WITH_UNIT_TESTS>"))){const e=t.getIdentifier();if(e){const t="Has <WITH_UNIT_TESTS> set in XML, but no testclasses",n=s.Issue.atIdentifier(e,t,this.getMetadata().key,this.conf.severity);a.push(n)}}return a}}t.LocalTestclassConsistency=d},29020(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BracketLeftW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"[ "}}t.BracketLeftW=o},29235(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenCursor=void 0;const s=n(3125),o=n(82245),i=n(49028);t.OpenCursor=class{getMatcher(){const e=(0,s.seq)("OPEN CURSOR",(0,s.optPrio)("WITH HOLD"),o.SQLTarget,"FOR",o.Select);return(0,s.verNot)(i.Version.Cloud,e)}}},29238(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Do=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Do=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Do),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndDo))}}},29296(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPSymbolProvider=void 0;const s=n(55864);t.ABAPSymbolProvider=class{constructor(e){this.reg=e}provideDocumentSymbols(e,t){const n=new s.LanguageServer(this.reg).documentSymbol({textDocument:{uri:e.uri.toString()}}),o=[];for(const e of n)o.push({range:{startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1},name:e.name,kind:e.kind,detail:e.detail?e.detail:"",tags:[],selectionRange:{startLineNumber:e.selectionRange.start.line+1,startColumn:e.selectionRange.start.character+1,endLineNumber:e.selectionRange.end.line+1,endColumn:e.selectionRange.end.character+1}});return o}}},29404(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadEntities=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(14365),a=n(20572);t.ReadEntities=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target)){const e=null==n?void 0:n.findDirectExpression(s.InlineData);e?r.InlineData.runSyntax(e,t,a.VoidType.get("ReadEntities")):i.Target.runSyntax(n,t)}}}},29433(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameGlobalClass=void 0;const s=n(50612),o=n(82245),i=n(46203),r=n(84383),a=n(75584),c=n(33073);t.RenameGlobalClass=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof r.Class))throw new Error("not a class");const l=e.getMainABAPFile();if(void 0===l)throw new Error(`Main file not found, ${e.getType()} ${e.getName()}`);let d=[];{const e=[];for(const t of l.getStatements())if(t.get()instanceof s.ClassDefinition){const s=t.findFirstExpression(o.ClassName);if(void 0===s)continue;e.push(i.TextEdit.replace(a.LSPUtils.tokenToRange(s.getFirstToken()),n.toLowerCase()))}else if(t.get()instanceof s.ClassImplementation){const s=t.findFirstExpression(o.ClassName);if(void 0===s)continue;e.push(i.TextEdit.replace(a.LSPUtils.tokenToRange(s.getFirstToken()),n.toLowerCase()))}d.push(i.TextDocumentEdit.create({uri:l.getFilename(),version:1},e))}const u=new c.RenamerHelper(this.reg);return d=d.concat(u.buildXMLFileEdits(e,"CLSNAME",t,n)),d=d.concat(u.renameFiles(e,t,n)),d=d.concat(u.renameReferences(e.getIdentifier(),t,n)),d=d.concat(u.renameDDICTABLReferences(e,t,n)),d=d.concat(u.renameICFServiceHandlerReferences(t,n)),{documentChanges:d}}}},29439(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallSubscreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallSubscreen=class{getMatcher(){const e=(0,s.seq)("INCLUDING",o.Source,o.Source),t=(0,s.seq)("CALL SUBSCREEN",o.Source,(0,s.optPrio)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},29449(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParamOptional=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)(o.MethodParam,(0,s.optPrio)("OPTIONAL"))}}t.MethodParamOptional=i},29614(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterListT=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.plus)(o.ParameterT)}}t.ParameterListT=i},29718(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPQueryFunctionalArea=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AQSG"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.ABAPQueryFunctionalArea=o},29723(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseConnection=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.regex)(/[\w\/]+/);return(0,s.seq)("CONNECTION",(0,s.altPrio)(e,o.Dynamic))}}t.DatabaseConnection=i},29780(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0;const s=n(46743),o=n(15838),i=n(20572),r=n(82245),a=n(9048),c=n(82054);t.Type=class{runSyntax(e,t,n){if(e.findFirstExpression(r.TypeTable))return a.TypeTable.runSyntax(e,t,n);const l=new s.BasicTypes(t).simpleType(e,n);if(l){if(!0===(null==l?void 0:l.getType().isGeneric())&&!1===(null==l?void 0:l.getType().containsVoid())){const n="TYPES definition cannot be generic, "+l.getName();return t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n)),new o.TypedIdentifier(l.getToken(),t.filename,i.VoidType.get(c.CheckSyntaxKey))}if(t.scope.isGlobalOO()&&l.getType()instanceof i.PackedType){const n=e.concatTokens().toUpperCase();if((n.includes(" TYPE P ")||n.includes(" TYPE P."))&&!1===n.includes(" DECIMALS ")){const n="Specify DECIMALS in OO context for packed";return t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n)),new o.TypedIdentifier(l.getToken(),t.filename,i.VoidType.get(c.CheckSyntaxKey))}}return l}const d=e.findFirstExpression(r.NamespaceSimpleName);return d?new o.TypedIdentifier(d.getFirstToken(),t.filename,new i.UnknownType("Type, fallback")):void 0}}},29785(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormLengthStats=void 0;const s=n(50612),o=n(82245),i=n(12620),r=n(52024);t.FormLengthStats=class{static run(e){const t=[];let n,o="",a=0,c=!1;if(!(e instanceof i.ABAPObject))return[];for(const i of e.getABAPFiles())for(const e of i.getStatements()){const l=e.get();if(l instanceof s.Form)n=e.getFirstToken().getStart(),o=this.findName(e),c=!0,a=0;else if(l instanceof s.EndForm){if(!n)continue;t.push({name:o,className:"",count:a,file:i,pos:n}),c=!1}else!0!==c||l instanceof r.Comment||l instanceof r.Empty||(a+=1)}return t}static findName(e){let t="";const n=e.findFirstExpression(o.FormName);if(!n)throw new Error("FormLength, findName, expected FormName");return t=n.getFirstToken().getStr(),t}}},29805(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefinitions=void 0;const s=n(52806),o=n(94967),i=n(50612),r=n(67240);t.MethodDefinitions=class{constructor(e,t){this.all={},this.all={},this.parse(e,t)}*getAll(){for(const e in this.all)yield this.all[e]}getByName(e){if(void 0!==e)return this.all[e.toUpperCase()]}parseInterface(e,t){const n=e.findAllStatements(i.MethodDef);for(const e of n){const n=new s.MethodDefinition(e,r.Visibility.Public,t);this.all[n.getName().toUpperCase()]=n}}parse(e,t){if(e.findDirectStructure(o.Interface))return this.parseInterface(e,t);const n=e.findDirectStructure(o.ClassDefinition);if(!n)throw new Error("MethodDefinitions, expected ClassDefinition as part of input node");const a=n.findDirectStructure(o.PrivateSection);for(const e of(null==a?void 0:a.findAllStatements(i.MethodDef))||[]){const n=new s.MethodDefinition(e,r.Visibility.Private,t);this.all[n.getName().toUpperCase()]=n}const c=e.findDirectStructure(o.ProtectedSection);for(const e of(null==c?void 0:c.findAllStatements(i.MethodDef))||[]){const n=new s.MethodDefinition(e,r.Visibility.Protected,t);this.all[n.getName().toUpperCase()]=n}const l=e.findDirectStructure(o.PublicSection);for(const e of(null==l?void 0:l.findAllStatements(i.MethodDef))||[]){const n=new s.MethodDefinition(e,r.Visibility.Public,t);this.all[n.getName().toUpperCase()]=n}}}},29913(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CompareOperator=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.altPrio)("=","<>","><","<",">","<=",">=","=>","=<","CA","CO","CP","EQ","NE","CN","GE","GT","LT","LE","CS","NS","NA","NP","BYTE-CO","BYTE-CA","BYTE-CS","BYTE-CN","BYTE-NA","BYTE-NS","O","Z","M")}}t.CompareOperator=o},29986(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FloatType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```f```"}isGeneric(){return!1}toABAP(){return"f"}containsVoid(){return!1}toCDS(){return"abap.fltp"}}t.FloatType=o},30015(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const s=n(12620),o=n(59115),i=n(86219);class r extends s.ABAPObject{getType(){return"PROG"}getSequencedFiles(){const e=this.getMainABAPFile();return void 0===e?[]:[e]}getDescription(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}isInclude(){return this.parseXML(),this.parsedXML.isInclude}isModulePool(){return this.parseXML(),this.parsedXML.isModulePool}getDynpros(){return this.parseXML(),this.parsedXML.dynpros||[]}parseXML(){var e,t,n;if(void 0!==this.parsedXML)return;const s=this.getXMLFile(),r=this.parseRaw2();if(void 0===r)return void(this.parsedXML={isInclude:!1,isModulePool:!1,description:void 0,dynpros:[]});let a="";for(const s of(0,i.xmlToArray)(null===(n=null===(t=null===(e=r.abapGit)||void 0===e?void 0:e["asx:abap"]["asx:values"])||void 0===t?void 0:t.TPOOL)||void 0===n?void 0:n.item))"R"===(null==s?void 0:s.ID)&&(a=s.ENTRY?(0,i.unescape)(s.ENTRY):"");const c=(0,o.parseDynpros)(r);this.parsedXML={isInclude:!!s&&s.getRaw().includes("<SUBC>I</SUBC>"),isModulePool:!!s&&s.getRaw().includes("<SUBC>M</SUBC>"),dynpros:c,description:a}}}t.Program=r},30151(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessAfterInput=void 0;const s=n(3125),o=n(49028);t.ProcessAfterInput=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"PROCESS AFTER INPUT")}}},30186(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodSource=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.alt)(i.AttributeName,i.MethodCall,i.Dynamic),t=(0,s.altPrio)((0,s.tok)(o.InstanceArrow),(0,s.tok)(o.StaticArrow)),n=(0,s.seq)(t,e),r=(0,s.seq)((0,s.tok)(o.Dash),i.ComponentName),a=(0,s.altPrio)(n,r),c=(0,s.seq)(i.ClassName,(0,s.tok)(o.StaticArrow)),l=(0,s.seq)(c,e);return(0,s.seq)((0,s.altPrio)(l,i.SourceField,i.SourceFieldSymbol,i.Dynamic),(0,s.star)(a))}}t.MethodSource=r},30345(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WInstanceArrow=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ->"}}t.WInstanceArrow=o},30411(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Local=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Local=class{getMatcher(){const e=(0,s.seq)("LOCAL",o.FieldSub,(0,s.opt)(o.TableBody));return(0,s.verNot)(i.Version.Cloud,e)}}},30437(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateData=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CreateData=class{getMatcher(){const e=(0,s.seq)("AREA HANDLE",o.Source),t=(0,s.seq)("TYPE HANDLE",o.Source),n=(0,s.seq)((0,s.alt)("TYPE","TYPE REF TO","TYPE TABLE OF","TYPE TABLE OF REF TO","TYPE SORTED TABLE OF","TYPE HASHED TABLE OF","TYPE STANDARD TABLE OF","TYPE LINE OF"),(0,s.alt)(o.TypeName,o.Dynamic)),r=(0,s.seq)((0,s.alt)("LIKE","LIKE HASHED TABLE OF","LIKE LINE OF","LIKE STANDARD TABLE OF","LIKE SORTED TABLE OF","LIKE TABLE OF"),(0,s.alt)(o.Source,o.Dynamic)),a=(0,s.seq)("LENGTH",o.Source),c=(0,s.seq)("INITIAL SIZE",o.Source),l=(0,s.seq)("DECIMALS",o.Source),d=(0,s.alt)("UNIQUE","NON-UNIQUE"),u=(0,s.ver)(i.Version.v740sp02,"EMPTY KEY"),p=(0,s.seq)((0,s.opt)(d),(0,s.alt)("DEFAULT KEY",u)),f=(0,s.seq)((0,s.opt)(d),"KEY",(0,s.alt)((0,s.plus)(o.Field),o.Dynamic)),g=(0,s.seq)("WITH",(0,s.alt)(p,f)),h=(0,s.seq)((0,s.alt)(n,r),(0,s.opt)(g),(0,s.opt)(c),(0,s.opt)(a),(0,s.opt)(l));return(0,s.seq)("CREATE DATA",o.Target,(0,s.opt)((0,s.alt)(t,(0,s.seq)((0,s.opt)(e),h))))}}},30599(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Catch=void 0;const s=n(3125),o=n(82245);t.Catch=class{getMatcher(){return(0,s.seq)("CATCH",(0,s.optPrio)("BEFORE UNWIND"),(0,s.plus)(o.ClassName),(0,s.opt)((0,s.seq)("INTO",o.Target)))}}},30655(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseTable=void 0;const s=n(3125),o=n(17808);class i extends s.Expression{getRunnable(){return(0,s.altPrio)(o.Dynamic,(0,s.regex)(/^\*?(\/\w+\/)?\w+$/))}}t.DatabaseTable=i},30673(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventBinding=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"EVTB"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.EventBinding=o},30699(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DumpScope=void 0;const s=n(2403);t.DumpScope=class{static dump(e){let t="<hr>Spaghetti Scope:<br><br>\n";return t+=this.traverseSpaghetti(e.getTop(),0),t}static traverseSpaghetti(e,t){const n=e.getIdentifier(),o=e.calcCoverage(),i="&nbsp".repeat(2*t);let r=i+"<u>"+n.stype+", <tt>"+n.sname+"</tt>";r+=", ("+o.start.getRow()+", "+o.start.getCol()+")",o.end.getRow()===Number.MAX_SAFE_INTEGER&&o.end.getCol()===Number.MAX_SAFE_INTEGER?r+=", (max, max)":r+=", ("+o.end.getRow()+", "+o.end.getCol()+")",r+="</u><br>",e.getIdentifier().stype===s.ScopeType.BuiltIn?(r+=i+e.getData().types.length+" type definitions<br>",r+=i+e.getData().vars.length+" data definitions<br>"):r+=this.dumpNode(e,t),r+="<br>";for(const n of e.getChildren())r+=this.traverseSpaghetti(n,t+1);return r}static dumpNode(e,t){let n="";const s="&nbsp;".repeat(2*t),o=e.getData().types;n=0===Object.keys(o).length?n+s+"0 type definitions<br>":n+s+"Types:<br>";for(const e in o){const t=o[e];n=n+s+"<tt>"+this.escape(e)+"</tt>";const i=t.getStart();n=n+"("+i.getRow().toString()+", "+i.getCol().toString()+") ",n+=t.getType().toText(0),n+="<br>"}const i=e.getData().vars;n=0===Object.keys(i).length?n+s+"0 data definitions<br>":n+s+"Data:<br>";for(const e in i){const t=i[e];n=n+s+"<tt>"+this.escape(e.toLowerCase())+"</tt>";const o=t.getStart();n=n+"("+o.getRow().toString()+", "+o.getCol().toString()+") ",n+=t.getType().toText(0);const r=t.getMeta();r&&(n=n+", "+r),n+="<br>"}n+=s+Object.keys(e.getData().cdefs).length+" class definitions<br>",n+=s+e.getData().idefs.length+" interface definitions<br>",n+=s+e.getData().forms.length+" form definitions<br>",n+=s+e.getData().references.length+" references<br>";for(const t of e.getData().references)n+=s+"&nbsp;&nbsp;"+t.referenceType+", line "+t.position.getStart().getRow()+" "+this.escape(t.position.getFilename())+" "+this.escape(t.position.getName())+"<br>";return n}static escape(e){return(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#039;")}}},30740(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLIntoStructure=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)("CORRESPONDING FIELDS OF"),o.SQLTarget);return(0,s.seq)("INTO",e)}}t.SQLIntoStructure=i},30798(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLOrderBy=void 0;const s=n(82245),o=n(53414);t.SQLOrderBy=class{static runSyntax(e,t){const n=e.findDirectExpression(s.Dynamic);n&&o.Dynamic.runSyntax(n,t)}}},30823(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Assign=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Assign=class{getMatcher(){const e=(0,s.seq)("TYPE",(0,s.altPrio)(o.Dynamic,o.TypeName)),t=(0,s.seq)("LIKE",(0,s.altPrio)(o.Dynamic,o.Source)),n=(0,s.seq)("TYPE HANDLE",o.Source),r=(0,s.seq)("RANGE",o.Source),a=(0,s.seq)("DECIMALS",o.Source),c=(0,s.seq)("CASTING",(0,s.opt)((0,s.alt)(t,n,(0,s.per)(e,a)))),l=(0,s.seq)("TYPE",o.Source,(0,s.optPrio)(a));return(0,s.seq)("ASSIGN",(0,s.opt)((0,s.seq)(o.Target,"INCREMENT")),o.AssignSource,"TO",o.FSTarget,(0,s.opt)((0,s.altPrio)(c,l,a)),(0,s.opt)(r),(0,s.opt)((0,s.ver)(i.Version.v757,"ELSE UNASSIGN")))}}},31050(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneLaunchpadLayout=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN07"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneLaunchpadLayout=o},31108(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Reserve=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Reserve=class{getMatcher(){const e=(0,s.seq)("RESERVE",o.Source,"LINES");return(0,s.verNot)(i.Version.Cloud,e)}}},31219(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopTarget=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.opt)("REFERENCE"),"INTO",o.Target),t=(0,s.seq)("ASSIGNING",o.FSTarget);return(0,s.alt)((0,s.seq)((0,s.alt)(e,t),(0,s.optPrio)("CASTING")),"TRANSPORTING NO FIELDS")}}t.LoopTarget=i},31322(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Exit=void 0;const s=n(3125);t.Exit=class{getMatcher(){return(0,s.seq)("EXIT",(0,s.opt)((0,s.alt)("FROM SQL","FROM STEP-LOOP")))}}},31346(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhenType=void 0;const s=n(50612),o=n(58720),i=n(79175);t.WhenType=class{getMatcher(){return(0,o.seq)((0,o.alt)((0,o.sta)(s.WhenType),(0,o.sta)(s.WhenOthers)),(0,o.opt)((0,o.sub)(i.Body)))}}},31356(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateObject=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(53414),a=n(36453),c=n(20572),l=n(20941),d=n(2416),u=n(3240),p=n(82054);t.CreateObject=class{runSyntax(e,t){var n;let d;const u=e.findExpressionAfterToken("TYPE");if(u&&u.get()instanceof s.ClassName){const n=u.getFirstToken(),s=n.getStr();if(d=t.scope.findClassDefinition(s),d){if(t.scope.addReference(n,d,a.ReferenceType.ObjectOrientedReference,t.filename),t.scope.addReference(n,d,a.ReferenceType.ConstructorReference,t.filename,{ooName:d.getName()}),!0===d.isAbstract()){const n=d.getName()+" is abstract, cannot be instantiated";return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}}else{if(!1!==t.scope.getDDIC().inErrorNamespace(s)){const n='TYPE "'+s+'" not found';return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}t.scope.addReference(n,void 0,a.ReferenceType.ObjectOrientedVoidReference,t.filename,{ooName:s,ooType:"CLAS"})}}for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const o of(null===(n=e.findDirectExpression(s.ParameterListExceptions))||void 0===n?void 0:n.findAllExpressions(s.Target))||[])i.Target.runSyntax(o,t);const f=e.findDirectExpression(s.Target);let g;if(f){if(g=i.Target.runSyntax(f,t),g instanceof c.VoidType);else{if(g instanceof c.UnknownType){const n="Target type unknown, "+f.concatTokens();return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}if(!(g instanceof c.ObjectReferenceType||g instanceof c.AnyType||g instanceof c.DataType||g instanceof c.GenericObjectReferenceType)){const n="Target must be an object reference, "+f.concatTokens();return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}if(g instanceof c.GenericObjectReferenceType&&void 0===u){const n="Generic type, cannot be instantiated";return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}if(g instanceof c.ObjectReferenceType){const n=g.getIdentifier();if(n instanceof l.InterfaceDefinition&&void 0===u){const n="Interface reference, cannot be instantiated";return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}if(g instanceof c.ObjectReferenceType&&void 0===u&&t.scope.findInterfaceDefinition(g.getQualifiedName())){const n="Interface reference, cannot be instantiated";return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),n))}if(n instanceof l.ClassDefinition&&void 0===d&&(d=n),void 0===u&&n instanceof l.ClassDefinition&&!0===n.isAbstract()){const s=n.getName()+" is abstract, cannot be instantiated";return void t.issues.push((0,p.syntaxIssue)(t,e.getFirstToken(),s))}}}g instanceof c.ObjectReferenceType&&void 0===d&&(d=t.scope.findClassDefinition(g.getQualifiedName()))}for(const n of e.findDirectExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t);let h=null==d?void 0:d.getName();void 0===h&&g instanceof c.VoidType&&(h=g.getVoided()),t.scope.addReference(null==f?void 0:f.getFirstToken(),d,a.ReferenceType.ConstructorReference,t.filename,{ooName:h}),this.validateParameters(d,e,t)}validateParameters(e,t,n){var i,r,a,c;if(void 0===e){const e=null===(i=t.findDirectExpression(s.ParameterListS))||void 0===i?void 0:i.findAllExpressions(s.Source);for(const t of e||[])o.Source.runSyntax(t,n);return}const l=null===(r=new d.ObjectOriented(n.scope).searchMethodName(e,"CONSTRUCTOR").method)||void 0===r?void 0:r.getParameters(),f=(null==l?void 0:l.getImporting())||[],g=new Set(null==l?void 0:l.getRequiredParameters().map((e=>e.getName().toUpperCase())));for(const e of(null===(a=t.findDirectExpression(s.ParameterListS))||void 0===a?void 0:a.findAllExpressions(s.ParameterS))||[]){const i=null===(c=e.findDirectExpression(s.ParameterName))||void 0===c?void 0:c.concatTokens().toUpperCase();if(void 0===i)continue;const r=e.findDirectExpression(s.Source),a=o.Source.runSyntax(r,n),l=null==f?void 0:f.find((e=>e.getName().toUpperCase()===i));if(void 0===l){const e=`constructor parameter "${i}" does not exist`;return void n.issues.push((0,p.syntaxIssue)(n,t.getFirstToken(),e))}if(!1===new u.TypeUtils(n.scope).isAssignableStrict(a,l.getType(),r)){const e=`constructor parameter "${i}" type not compatible`;return void n.issues.push((0,p.syntaxIssue)(n,t.getFirstToken(),e))}g.delete(i)}for(const e of g.values()){const s=`constructor parameter "${e}" must be supplied`;return void n.issues.push((0,p.syntaxIssue)(n,t.getFirstToken(),s))}}}},31357(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopAtScreen=void 0;const s=n(3125),o=n(49028),i=n(82245);t.LoopAtScreen=class{getMatcher(){const e=(0,s.seq)("LOOP AT SCREEN",(0,s.opt)((0,s.seq)("INTO",i.Target)));return(0,s.verNot)(o.Version.Cloud,e)}}},31481(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;const s=n(81164),o=n(38496),i=n(97868),r=n(18376),a=n(65439),c=n(63488),l=n(43647),d=n(329);class u{static clear(){this.results=[],this.lexing=0,this.statements=0,this.structure=0}static push(e,t){if(t.runtimeExtra&&(this.lexing+=t.runtimeExtra.lexing,this.statements+=t.runtimeExtra.statements,this.structure+=t.runtimeExtra.structure),t.runtime<100)return;void 0===this.results&&(this.results=[]);let n="";t.runtimeExtra&&(n=`\t(lexing: ${t.runtimeExtra.lexing}ms, statements: ${t.runtimeExtra.statements}ms, structure: ${t.runtimeExtra.structure}ms)`),this.results.push({runtime:t.runtime,extra:n,name:e.getType()+" "+e.getName()})}static output(){this.results.sort(((e,t)=>t.runtime-e.runtime));for(let e=0;e<10;e++){const t=this.results[e];if(void 0===t)break;process.stderr.write(`\t${t.runtime}ms\t${t.name} ${t.extra}\n`)}process.stderr.write(`\tTotal lexing:     ${this.lexing}ms\n`),process.stderr.write(`\tTotal statements: ${this.statements}ms\n`),process.stderr.write(`\tTotal structure:  ${this.structure}ms\n`)}}t.Registry=class{constructor(e){this.objects={},this.objectsByType={},this.dependencies={},this.setConfig(e||s.Config.getDefault()),this.clear()}clear(){this.objects={},this.objectsByType={},this.dependencies={},this.ddicReferences=new a.DDICReferences,this.msagReferences=new l.MSAGReferences,this.macroReferences=new d.MacroReferences}static abaplintVersion(){return"2.115.18"}getDDICReferences(){return this.ddicReferences}getMSAGReferences(){return this.msagReferences}getMacroReferences(){return this.macroReferences}*getObjects(){for(const e in this.objects)for(const t in this.objects[e])yield this.objects[e][t]}*getObjectsByType(e){for(const t in this.objectsByType[e]||[])yield this.objectsByType[e][t]}*getFiles(){for(const e of this.getObjects())for(const t of e.getFiles())yield t}getFirstObject(){for(const e in this.objects)for(const t in this.objects[e])return this.objects[e][t]}getObjectCount(){const e={total:0,normal:0,dependencies:0};for(const t of this.getObjects())e.total++,this.isDependency(t)?e.dependencies++:e.normal++;return e}getFileByName(e){const t=e.toUpperCase();for(const e of this.getObjects())for(const n of e.getFiles())if(n.getFilename().toUpperCase()===t)return n}getObject(e,t){if(void 0===e||void 0===t)return;const n=t.toUpperCase();return this.objects[n]?this.objects[n][e]:void 0}getConfig(){return this.conf}setConfig(e){for(const e of this.getObjects())e.setDirty();return this.conf=e,this.errorNamespace=new RegExp(this.getConfig().getSyntaxSetttings().errorNamespace,"i"),this}inErrorNamespace(e){return this.errorNamespace.test(e)}addFile(e){return this.addFiles([e])}updateFile(e){return this.find(e.getObjectName(),e.getObjectType()).updateFile(e),this}removeFile(e){const t=this.find(e.getObjectName(),e.getObjectType());return t.removeFile(e),0===t.getFiles().length&&(this.ddicReferences.clear(t),this.msagReferences.clear(t),this.removeObject(t)),this}_addFiles(e,t){var n;const s=(null!==(n=this.conf.getGlobal().exclude)&&void 0!==n?n:[]).map((e=>new RegExp(e,"i")));for(const n of e){const e=n.getFilename();if(e.split(".").length<=2||r.ExcludeHelper.isExcluded(e,s))continue;let o=this.findOrCreate(n.getObjectName(),n.getObjectType());!1===t&&o&&this.isDependency(o)&&(this.removeDependency(o),o=this.findOrCreate(n.getObjectName(),n.getObjectType())),o.addFile(n)}return this}addFiles(e){return this._addFiles(e,!1),this}addDependencies(e){for(const t of e)this.addDependency(t);return this}addDependency(e){var t;const n=null===(t=e.getObjectType())||void 0===t?void 0:t.toUpperCase();if(void 0===n)return this;const s=e.getObjectName().toUpperCase();return void 0===this.dependencies[n]&&(this.dependencies[n]={}),this.dependencies[n][s]=!0,this._addFiles([e],!0),this}removeDependency(e){var t;null===(t=this.dependencies[e.getType()])||void 0===t||delete t[e.getName()],this.removeObject(e)}isDependency(e){var t;return!0===(null===(t=this.dependencies[e.getType()])||void 0===t?void 0:t[e.getName()])}isFileDependency(e){var t,n;const s=this.getFileByName(e);if(void 0===s)return!1;const o=null===(t=s.getObjectType())||void 0===t?void 0:t.toUpperCase();if(void 0===o)return!1;const i=s.getObjectName().toUpperCase();return!0===(null===(n=this.dependencies[o])||void 0===n?void 0:n[i])}findObjectForFile(e){const t=e.getFilename();for(const e of this.getObjects())for(const n of e.getFiles())if(n.getFilename()===t)return e}findIssues(e){return!0===this.isDirty()&&this.parse(),new c.RulesRunner(this).runRules(this.getObjects(),e)}findIssuesObject(e){return!0===this.isDirty()&&this.parse(),new c.RulesRunner(this).runRules([e])}parse(){if(!1===this.isDirty())return this;u.clear();for(const e of this.getObjects())this.parsePrivate(e);return new i.FindGlobalDefinitions(this).run(),this}async parseAsync(e){var t,n;if(!1===this.isDirty())return this;u.clear(),null===(t=null==e?void 0:e.progress)||void 0===t||t.set(this.getObjectCount().total,"Lexing and parsing");for(const t of this.getObjects())await(null===(n=null==e?void 0:e.progress)||void 0===n?void 0:n.tick("Lexing and parsing("+this.conf.getVersion()+") - "+t.getType()+" "+t.getName())),this.parsePrivate(t);return!0===(null==e?void 0:e.outputPerformance)&&u.output(),new i.FindGlobalDefinitions(this).run(null==e?void 0:e.progress),this}parsePrivate(e){const t=this.getConfig(),n=e.parse(t.getVersion(),t.getSyntaxSetttings().globalMacros,this);u.push(e,n)}isDirty(){for(const e of this.getObjects())if(!0===e.isDirty())return!0;return!1}findOrCreate(e,t){try{return this.find(e,t)}catch(n){const s=e.toUpperCase(),i=t||"UNKNOWN",r=o.ArtifactsObjects.newObject(s,i);return void 0===this.objects[s]&&(this.objects[s]={}),this.objects[s][i]=r,void 0===this.objectsByType[i]&&(this.objectsByType[i]={}),this.objectsByType[i][s]=r,r}}removeObject(e){if(void 0!==e){if(void 0===this.objects[e.getName()][e.getType()])throw new Error("removeObject: object not found");1===Object.keys(this.objects[e.getName()]).length?delete this.objects[e.getName()]:delete this.objects[e.getName()][e.getType()],1===Object.keys(this.objectsByType[e.getType()]).length?delete this.objectsByType[e.getType()]:delete this.objectsByType[e.getType()][e.getName()]}}find(e,t){const n=t||"UNKNOWN",s=e.toUpperCase();if(void 0!==this.objects[s]&&this.objects[s][n])return this.objects[s][n];throw new Error("find: object not found, "+t+" "+e)}}},31528(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SkipLogic=void 0;const s=n(84383),o=n(79543);t.SkipLogic=class{constructor(e){this.reg=e,this.tobj=void 0}skip(e){const t=this.reg.getConfig().getGlobal();if(!0===t.skipGeneratedGatewayClasses&&e instanceof s.Class&&this.isGeneratedGatewayClass(e))return!0;if(!0===t.skipIncludesWithoutMain&&e instanceof s.Program&&!0===e.isInclude()){const t=new o.IncludeGraph(this.reg),n=e.getMainABAPFile();if(n&&0===t.listMainForInclude(n.getFilename()).length)return!0}else{if(!0===t.skipGeneratedPersistentClasses&&e instanceof s.Class&&this.isGeneratedPersistentClass(e))return!0;if(!0===t.skipGeneratedFunctionGroups&&e instanceof s.FunctionGroup&&this.isGeneratedFunctionGroup(e))return!0;if(!0===t.skipGeneratedProxyClasses&&e instanceof s.Class&&this.isGeneratedProxyClass(e))return!0;if(!0===t.skipGeneratedProxyInterfaces&&e instanceof s.Interface&&this.isGeneratedProxyInterface(e))return!0;if(!0===t.skipGeneratedBOPFInterfaces&&e instanceof s.Interface&&this.isGeneratedBOPFInterface(e))return!0}return!1}isGeneratedBOPFInterface(e){var t;const n=null===(t=e.getDefinition())||void 0===t?void 0:t.getImplementing();if(void 0===n)return!1;for(const e of n)if("/BOBF/IF_LIB_CONSTANTS"===e.name.toUpperCase())return!0;return!1}isGeneratedProxyInterface(e){const t=e.getXML();return!!t&&!!t.match(/<CLSPROXY>(.)<\/CLSPROXY>/)}isGeneratedProxyClass(e){const t=e.getXML();return!!t&&!!t.match(/<CLSPROXY>(.)<\/CLSPROXY>/)}isGeneratedFunctionGroup(e){var t;if(void 0===this.tobj){this.tobj={};for(const e of this.reg.getObjectsByType("TOBJ")){const n=null===(t=e.getArea())||void 0===t?void 0:t.toUpperCase();n&&(this.tobj[n]=!0)}}return this.tobj[e.getName().toUpperCase()]}isGeneratedGatewayClass(e){var t;let n;const s=e.getClassDefinition();return s&&(n=null===(t=s.superClassName)||void 0===t?void 0:t.toUpperCase()),!(!e.getName().match(/_MPC$/i)||"/IWBEP/CL_MGW_PUSH_ABS_MODEL"!==n)||!(!e.getName().match(/_DPC$/i)||"/IWBEP/CL_MGW_PUSH_ABS_DATA"!==n)||"CL_SADL_GTK_EXPOSURE_MPC"===n}isGeneratedPersistentClass(e){if(e.getCategory()===s.ClassCategory.Persistent)return!0;if(e.getCategory()===s.ClassCategory.PersistentFactory)return!0;const t=e.getClassDefinition();if(t){const e=t.superClassName;if(e){const t=this.reg.getObject("CLAS",e.toUpperCase());if(t&&t.getCategory()===s.ClassCategory.PersistentFactory)return!0}}return!1}}},31568(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndProvide=void 0;const s=n(3125),o=n(49028);t.EndProvide=class{getMatcher(){const e=(0,s.str)("ENDPROVIDE");return(0,s.verNot)(o.Version.Cloud,e)}}},31653(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CommitEntities=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CommitEntities=class{getMatcher(){const e=(0,s.seq)("FAILED",o.Target),t=(0,s.seq)("REPORTED",o.Target),n=(0,s.seq)("RESPONSES",e,t),r=(0,s.seq)("COMMIT ENTITIES",(0,s.optPrio)("IN SIMULATION MODE"),(0,s.opt)(n),(0,s.opt)((0,s.seq)("RESPONSE OF",o.NamespaceSimpleName,(0,s.per)(e,t))));return(0,s.ver)(i.Version.v754,r)}}},31666(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Let=void 0;const s=n(82245),o=n(49769),i=n(2403);t.Let=class{static runSyntax(e,t,n=!1){if(void 0===e)return!1;!0!==n&&t.scope.push(i.ScopeType.Let,"LET",e.getFirstToken().getStart(),t.filename);for(const n of e.findDirectExpressions(s.InlineFieldDefinition))o.InlineFieldDefinition.runSyntax(n,t);return!0}}},31702(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessObjectType=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SOBJ"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.BusinessObjectType=o},31745(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DateType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```d```"}isGeneric(){return!1}toABAP(){return"d"}containsVoid(){return!1}toCDS(){return"abap.dats"}}t.DateType=o},31817(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantString=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^('.*')|(`.*`)$/)}}t.ConstantString=o},31895(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndForm=void 0;const s=n(3125);t.EndForm=class{getMatcher(){return(0,s.str)("ENDFORM")}}},31922(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyInternal=void 0;const s=n(3125),o=n(82245);t.ModifyInternal=class{getMatcher(){const e=(0,s.seq)("INDEX",o.Source),t=(0,s.seq)("FROM",o.Source),n=(0,s.seq)("TRANSPORTING",(0,s.plus)((0,s.alt)(o.ComponentChainSimple,o.Dynamic))),i=(0,s.seq)("WHERE",o.ComponentCond),r=(0,s.seq)("ASSIGNING",o.FSTarget),a=(0,s.seq)("USING KEY",o.SimpleName),c=(0,s.per)(i,r,a),l=(0,s.alt)(o.Target,o.Dynamic),d=(0,s.alt)((0,s.per)(e,n),(0,s.seq)(t,(0,s.opt)((0,s.per)(e,n,a))),(0,s.seq)((0,s.per)(e,n),t,(0,s.opt)((0,s.per)(e,n)))),u=(0,s.seq)("MODIFY",(0,s.opt)("TABLE"),l,(0,s.opt)(d),(0,s.opt)(c)),p=(0,s.seq)("MODIFY TABLE",l,(0,s.per)(t,a));return(0,s.alt)(u,p)}}},31930(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageExistsRule=t.MessageExistsConf=void 0;const s=n(82245),o=n(50612),i=n(71759),r=n(77465),a=n(5518),c=n(86696),l=n(75457),d=n(12620),u=n(52424);class p extends r.BasicRuleConfig{constructor(){super(...arguments),this.checkPlaceholders=!0}}t.MessageExistsConf=p,t.MessageExistsRule=class{constructor(){this.conf=new p}getMetadata(){return{key:"message_exists",title:"Check MESSAGE exists",shortDescription:"In message statements, check that the message class + id exist",tags:[c.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){this.msagReferences=e.getMSAGReferences(),this.reg=e;for(const t of e.getObjects())t instanceof d.ABAPObject&&new u.SyntaxLogic(e,t).run();return this}run(e){const t=[];if(e instanceof d.ABAPObject)for(const n of e.getABAPFiles()){if(void 0===n.getStructure())return[];t.push(...this.checkReportStatement(n)),t.push(...this.checkSource(n))}return t}checkReportStatement(e){const t=[];for(const n of e.getStatements()){if(!(n.get()instanceof o.Report))continue;const i=n.findFirstExpression(s.MessageClass);if(i){const n=this.checkClass(i,e);n&&t.push(n)}}return t}checkClass(e,t){const n=e.getFirstToken(),s=n.getStr();if(void 0===this.reg.getObject("MSAG",s)&&!0===new a.DDIC(this.reg).inErrorNamespace(s)){const e='Message class "'+s+'" not found';return i.Issue.atToken(t,n,e,this.getMetadata().key,this.conf.severity)}}checkSource(e){const t=[],n=this.msagReferences.listByFilename(e.getFilename());for(const s of e.getStatements())if(s.get()instanceof o.Raise||s.get()instanceof o.Message)for(const o of n)if(o.token.getStart().isBetween(s.getStart(),s.getEnd())){const n=this.reg.getObject("MSAG",o.messageClass);if(void 0===n){if(!0===new a.DDIC(this.reg).inErrorNamespace(o.messageClass)){const n='Message class "'+o.messageClass+'" not found';t.push(i.Issue.atToken(e,o.token,n,this.getMetadata().key,this.conf.severity))}continue}const r=n.getByNumber(o.number);if(void 0===r){const n='Message number "'+o.number+'" not found in class "'+o.messageClass+'"';t.push(i.Issue.atToken(e,o.token,n,this.getMetadata().key,this.conf.severity));continue}if(!0===this.getConfig().checkPlaceholders){const n=this.countWith(s),a=r.getPlaceholderCount();if(n!==a){const n=`Message ${o.number}, expected ${a} WITH parameters`;t.push(i.Issue.atToken(e,o.token,n,this.getMetadata().key,this.conf.severity))}}}return t}countWith(e){const t=e.findDirectExpression(s.RaiseWith);if(t)return t.getChildren().length-1;let n=0,o=!1;for(const t of e.getChildren())if(t instanceof l.TokenNode&&"WITH"===t.concatTokens().toUpperCase())o=!0;else if(!0===o){if(!(t instanceof l.ExpressionNode))break;n++}return n}}},31937(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ICFService=void 0;const s=n(80300),o=n(86219);class i extends s.AbstractObject{getType(){return"SICF"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}getDescription(){}getURL(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.url}getHandlerList(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.handlers}parse(){if(this.parsedXML)return{updated:!1,runtime:0};const e=Date.now();this.parsedXML={};const t=super.parseRaw2();if(void 0===t||void 0===t.abapGit||void 0===t.abapGit["asx:abap"]["asx:values"])return{updated:!1,runtime:0};const n=t.abapGit["asx:abap"]["asx:values"].ICFHANDLER_TABLE;this.parsedXML.handlers=[];for(const e of(0,o.xmlToArray)(n))void 0!==e.ICFHANDLER&&this.parsedXML.handlers.push(e.ICFHANDLER.ICFHANDLER);return this.parsedXML.url=t.abapGit["asx:abap"]["asx:values"].URL,{updated:!0,runtime:Date.now()-e}}}t.ICFService=i},31950(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterListExceptions=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.plus)(o.ParameterException)}}t.ParameterListExceptions=i},32059(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplateEnd=void 0;const s=n(61785);class o extends s.AbstractToken{}t.StringTemplateEnd=o},32141(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrintControl=void 0;const s=n(3125),o=n(82245),i=n(49028);t.PrintControl=class{getMatcher(){const e=(0,s.seq)("INDEX-LINE",o.Source),t=(0,s.seq)("FUNCTION",o.Source),n=(0,s.seq)("LINE",o.Source),r=(0,s.seq)("POSITION",o.Source),a=(0,s.seq)("SIZE",o.Source),c=(0,s.seq)("CPI",o.Source),l=(0,s.seq)("LPI",o.Source),d=(0,s.seq)("FONT",o.Source),u=(0,s.seq)("PRINT-CONTROL",(0,s.per)(e,t,n,r,a,c,l,d));return(0,s.verNot)(i.Version.Cloud,u)}}},32161(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ElseIf=void 0;const s=n(58720),o=n(50612),i=n(79175);t.ElseIf=class{getMatcher(){const e=(0,s.opt)((0,s.sub)(i.Body));return(0,s.seq)((0,s.sta)(o.ElseIf),e)}}},32226(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchAssignments=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SFSW"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SwitchAssignments=o},32334(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSEntityBuffer=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DTEB"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CDSEntityBuffer=o},32370(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){if(super(t),e<=0)throw new Error("Bad LENGTH, Character");this.length=e}cloneType(e){const t=Object.assign({},this.getAbstractTypeData());return e.qualifiedName&&(t.qualifiedName=e.qualifiedName),e.ddicName&&(t.ddicName=e.ddicName),e.derivedFromConstant&&(t.derivedFromConstant=e.derivedFromConstant),new o(this.length,t)}getLength(){return this.length}toText(){return"```c LENGTH "+this.getLength()+"```"}toABAP(){return"c LENGTH "+this.getLength()}isGeneric(){return!1}containsVoid(){return!1}getIdentifier(){}toCDS(){return"abap.char( "+this.getLength()+" )"}}t.CharacterType=o},32407(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancementPoint=void 0;const s=n(3125),o=n(82245),i=n(49028);t.EnhancementPoint=class{getMatcher(){const e=(0,s.seq)("ENHANCEMENT-POINT",o.FieldSub,"SPOTS",o.Field,(0,s.opt)("STATIC"),(0,s.opt)("INCLUDE BOUND"));return(0,s.verNot)(i.Version.Cloud,e)}}},32451(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCompare=void 0;const s=n(82245),o=n(75457),i=n(20572),r=n(53414),a=n(93170),c=n(17209),l=n(25287);t.SQLCompare=class{static runSyntax(e,t,n){var d,u;let p,f;if((null===(d=e.getFirstChild())||void 0===d?void 0:d.get())instanceof s.Dynamic)return void r.Dynamic.runSyntax(e.getFirstChild(),t);for(const n of e.findDirectExpressions(s.SimpleSource3))a.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SQLSource)){for(const e of n.getChildren())if(e instanceof o.ExpressionNode){f=e.getFirstToken();break}p=l.SQLSource.runSyntax(n,t)}const g=e.findDirectExpression(s.SQLIn);g&&c.SQLIn.runSyntax(g,t);const h=null===(u=e.findDirectExpression(s.SQLFieldName))||void 0===u?void 0:u.concatTokens();if(h&&p&&f){const e=this.findType(h,n,t.scope);let s="";p instanceof i.IntegerType&&e instanceof i.CharacterType?s="Integer to CHAR conversion":p instanceof i.IntegerType&&e instanceof i.NumericType?s="Integer to NUMC conversion":p instanceof i.NumericType&&e instanceof i.IntegerType?s="NUMC to Integer conversion":p instanceof i.CharacterType&&e instanceof i.IntegerType?s="CHAR to Integer conversion":p instanceof i.CharacterType&&e instanceof i.CharacterType&&p.getLength()>e.getLength()?s="Source field longer than database field, CHAR -> CHAR":p instanceof i.NumericType&&e instanceof i.NumericType&&p.getLength()>e.getLength()&&(s="Source field longer than database field, NUMC -> NUMC"),""!==s&&t.scope.addSQLConversion(h,s,f)}}static findType(e,t,n){for(const s of t){const t=null==s?void 0:s.parseType(n.getRegistry());if(t instanceof i.StructureType)return t.getComponentByName(e)}}}},32518(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSType=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DRTY"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CDSType=o},32702(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteReport=void 0;const s=n(3125),o=n(82245),i=n(49028);t.DeleteReport=class{getMatcher(){const e=(0,s.seq)("STATE",o.Source),t=(0,s.seq)("DELETE REPORT",o.Source,(0,s.optPrio)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},32893(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWSV"}getAllowedNaming(){return{maxLength:39,allowNamespace:!0}}getDescription(){}}t.GatewayService=o},32953(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopGroupBy=void 0;const s=n(82245),o=n(20572),i=n(96808),r=n(14365),a=n(25037),c=n(9646),l=n(93170);t.LoopGroupBy=class{static runSyntax(e,t){for(const n of e.findAllExpressions(s.Target)){const e=n.findDirectExpression(s.InlineData);e?r.InlineData.runSyntax(e,t,o.VoidType.get("todoGroupBy")):c.Target.runSyntax(n,t)}for(const n of e.findAllExpressions(s.FSTarget))a.FSTarget.runSyntax(n,t,o.VoidType.get("todoGroupBy"));for(const n of e.findDirectExpressions(s.Source))l.Source.runSyntax(n,t,o.VoidType.get("todoGroupBy"));for(const n of e.findDirectExpressions(s.LoopGroupByComponent))for(const e of n.findDirectExpressions(s.ComponentCompareSingle))i.ComponentCompare.runSyntax(e,t)}}},33073(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenamerHelper=void 0;const s=n(46203),o=n(52424),i=n(2403),r=n(297),a=n(12620),c=n(36453);t.RenamerHelper=class{constructor(e){this.reg=e}renameReferences(e,t,n){if(void 0===e)throw new Error("renameReferences, no main identifier found");let s=[];for(const t of this.reg.getObjects())if(t instanceof a.ABAPObject){if(this.reg.isDependency(t))continue;s=s.concat(this.findReferences(new o.SyntaxLogic(this.reg,t).run().spaghetti.getTop(),e))}return this.replaceRefs(s,t,n).reverse()}renameDDICCodeReferences(e,t,n){const o=[],i=this.reg.getDDICReferences().listWhereUsed(e);for(const e of i){if(void 0===e.token||void 0===e.filename)continue;const i=s.Range.create(e.token.getStart().getRow()-1,e.token.getStart().getCol()-1,e.token.getStart().getRow()-1,e.token.getStart().getCol()-1+t.length);o.push(s.TextDocumentEdit.create({uri:e.filename,version:1},[s.TextEdit.replace(i,n.toLowerCase())]))}return o}renameDDICTABLReferences(e,t,n){const s=[],o=this.reg.getDDICReferences().listWhereUsed(e),i={};for(const e of o){if("TABL"!==e.type||!0===i[e.name.toUpperCase()])continue;const o=this.reg.getObject(e.type,e.name);void 0!==o&&(s.push(...this.buildXMLFileEdits(o,"ROLLNAME",t,n)),i[e.name.toUpperCase()]=!0)}return s}renameDDICDTELReferences(e,t,n){const s=[],o=this.reg.getDDICReferences().listWhereUsed(e);for(const e of o){if("DTEL"!==e.type)continue;const o=this.reg.getObject(e.type,e.name);void 0!==o&&s.push(...this.buildXMLFileEdits(o,"DOMNAME",t,n))}return s}renameDDICTTYPReferences(e,t,n){const s=[],o=this.reg.getDDICReferences().listWhereUsed(e);for(const e of o){if("TTYP"!==e.type)continue;const o=this.reg.getObject(e.type,e.name);void 0!==o&&s.push(...this.buildXMLFileEdits(o,"ROWTYPE",t,n))}return s}renameDDICAUTHReferences(e,t,n){const s=[],o=this.reg.getDDICReferences().listWhereUsed(e);for(const e of o){if("AUTH"!==e.type)continue;const o=this.reg.getObject(e.type,e.name);void 0!==o&&s.push(...this.buildXMLFileEdits(o,"ROLLNAME",t,n))}return s}buildXMLFileEdits(e,t,n,o,i=!1){const r=[],a=e.getXMLFile();if(void 0===a)return[];const c=i?n.toLowerCase():n.toUpperCase(),l=i?o.toLowerCase():o.toUpperCase(),d=t.toUpperCase(),u="<"+d+">"+c+"</"+d+">",p=d.length+2,f=a.getRawRows();for(let e=0;e<f.length;e++){const t=f[e].indexOf(u);if(t>=0){const n=s.Range.create(e,t+p,e,t+c.length+p);r.push(s.TextDocumentEdit.create({uri:a.getFilename(),version:1},[s.TextEdit.replace(n,l)]))}}return r}buildURLFileEdits(e,t,n){const o=[],i=e.getXMLFile();if(void 0===i)return[];const r=t.toLowerCase(),a=n.toLowerCase(),c=i.getRawRows();for(let e=0;e<c.length;e++){const t=c[e],n=t.indexOf("<URL>");if(-1===n)continue;const l=t.indexOf("</URL>");if(-1===l)continue;const d=t.substring(n+5,l),u=d.replace(r,a);if(u!==d){const t=s.Range.create(e,n+5,e,l);o.push(s.TextDocumentEdit.create({uri:i.getFilename(),version:1},[s.TextEdit.replace(t,u)]))}}return o}renameFiles(e,t,n){const o=[],i=n.toLowerCase().replace(/\//g,"#");t=t.toLowerCase().replace(/\//g,"#");for(const n of e.getFiles()){const e=n.getFilename().replace(t,i);o.push(s.RenameFile.create(n.getFilename(),e))}return o}replaceRefs(e,t,n){const o=[];for(const i of e){const e=s.Range.create(i.getStart().getRow()-1,i.getStart().getCol()-1,i.getStart().getRow()-1,i.getStart().getCol()-1+t.length);o.push(s.TextDocumentEdit.create({uri:i.getFilename(),version:1},[s.TextEdit.replace(e,n.toLowerCase())]))}return o}findReferences(e,t){var n;let s=[];if(e.getIdentifier().stype!==i.ScopeType.BuiltIn)for(const o of e.getData().references)o.referenceType!==c.ReferenceType.ConstructorReference&&(!(null===(n=o.resolved)||void 0===n?void 0:n.equals(t))||o.referenceType===c.ReferenceType.InferredType||o.position.getStart()instanceof r.VirtualPosition||s.push(o.position));for(const n of e.getChildren())s=s.concat(this.findReferences(n,t));return s}renameICFServiceHandlerReferences(e,t){const n=[],s=this.reg.getObjectsByType("SICF");for(const o of s){const s=o;void 0!==o.getXMLFile()&&n.push(...this.buildXMLFileEdits(s,"ICFHANDLER",e,t))}return n}}},33234(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPImplementationProvider=void 0;const s=n(55864);t.ABAPImplementationProvider=class{constructor(e){this.reg=e}provideImplementation(e,t,n){const o=new s.LanguageServer(this.reg),i={textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}},r=[];for(const e of o.implementation(i))r.push({uri:monaco.Uri.parse(e.uri),range:new monaco.Range(e.range.start.line+1,e.range.start.character+1,e.range.end.line+1,e.range.end.character+1)});return r}}},33255(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateData=void 0;const s=n(82245),o=n(9646),i=n(93170),r=n(53414),a=n(46743),c=n(20572),l=n(15838),d=n(36453);t.CreateData=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t);const n=e.findDirectExpression(s.TypeName);if(n){const s=new a.BasicTypes(t).resolveTypeName(n);if(s instanceof c.UnknownType)if(e.concatTokens().toUpperCase().includes(" REF TO ")){const e=t.scope.findObjectDefinition(n.concatTokens());if(e)t.scope.addReference(n.getFirstToken(),e,d.ReferenceType.TypeReference,t.filename);else{const e=new l.TypedIdentifier(n.getFirstToken(),t.filename,s);t.scope.addReference(n.getFirstToken(),e,d.ReferenceType.TypeReference,t.filename)}}else{const e=new l.TypedIdentifier(n.getFirstToken(),t.filename,s);t.scope.addReference(n.getFirstToken(),e,d.ReferenceType.TypeReference,t.filename)}}}}},33278(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NewPage=void 0;const s=n(3125),o=n(82245),i=n(49028);t.NewPage=class{getMatcher(){const e=(0,s.seq)("LINE-SIZE",o.Source),t=(0,s.seq)("PRINT",(0,s.alt)("OFF","ON")),n=(0,s.seq)("PARAMETERS",o.Source),r=(0,s.seq)("DESTINATION",o.Source),a=(0,s.seq)("ARCHIVE PARAMETERS",o.Source),c=(0,s.seq)("LINE-COUNT",o.Source),l=(0,s.seq)("COVER TEXT",o.Source),d=(0,s.seq)("SAP COVER PAGE",o.Source),u=(0,s.seq)("IMMEDIATELY",o.Source),p=(0,s.seq)("COPIES",o.Source),f=(0,s.seq)("KEEP IN SPOOL",o.Source),g=(0,s.seq)("LAYOUT",o.Source),h=(0,s.seq)("LIST AUTHORITY",o.Source),T=(0,s.seq)("DEPARTMENT",o.Source),m=(0,s.seq)("RECEIVER",o.Source),y=(0,s.seq)("LIST DATASET",o.Source),S=(0,s.seq)("LIST NAME",o.Source),v=(0,s.seq)("NEW LIST IDENTIFICATION",o.Source),E=(0,s.seq)("NEW-PAGE",(0,s.opt)((0,s.per)(t,(0,s.alt)("NO-TITLE","WITH-TITLE"),(0,s.alt)("NO-HEADING","WITH-HEADING"),"NO DIALOG","NO-TOPOFPAGE",n,h,u,y,d,v,f,T,S,g,r,m,p,l,a,"NEW-SECTION",c,e)));return(0,s.verNot)(i.Version.Cloud,E)}}},33303(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalFormNames=t.IdenticalFormNamesConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=n(12620);class a extends i.BasicRuleConfig{}t.IdenticalFormNamesConf=a,t.IdenticalFormNames=class{constructor(){this.conf=new a}getMetadata(){return{key:"identical_form_names",title:"Identical FORM names",shortDescription:"Detects identically named FORMs",tags:[o.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){if(!(e instanceof r.ABAPObject))return[];const t=[],n=[];for(const o of e.getABAPFiles())for(const e of o.getInfo().listFormDefinitions()){const o=e.name.toUpperCase();if(n.indexOf(o)>=0){const n='Identical FORM Names: "'+o+'"',i=s.Issue.atIdentifier(e.identifier,n,this.getMetadata().key,this.conf.severity);t.push(i)}else n.push(o)}return t}}},33326(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSJoin=void 0;const s=n(18483),o=n(3125),i=n(60741);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSSource,"ON",i.CDSCondition),t=(0,o.altPrio)((0,o.seq)("(",e,")"),e);return(0,o.seq)((0,o.optPrio)((0,o.altPrio)("LEFT OUTER TO ONE","LEFT OUTER","INNER","CROSS","RIGHT OUTER")),"JOIN",(0,o.altPrio)(t,s.CDSSource))}}t.CDSJoin=r},33366(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordCase=t.KeywordCaseConf=t.KeywordCaseStyle=void 0;const s=n(71759),o=n(99732),i=n(75457),r=n(52024),a=n(89301),c=n(84383),l=n(77465),d=n(50612),u=n(82245),p=n(86696),f=n(5518),g=n(297),h=n(71249);var T;!function(e){e.Upper="upper",e.Lower="lower"}(T||(t.KeywordCaseStyle=T={}));class m extends l.BasicRuleConfig{constructor(){super(...arguments),this.style=T.Upper,this.ignoreExceptions=!0,this.ignoreLowerClassImplmentationStatement=!0,this.ignoreGlobalClassDefinition=!1,this.ignoreGlobalInterface=!1,this.ignoreFunctionModuleName=!1,this.ignoreGlobalClassBoundaries=!1,this.ignoreKeywords=[],this.maxIssuesPerFile=10}}t.KeywordCaseConf=m;class y{constructor(e){this.skip=!1,this.isGlobalClass=!1,this.isGlobalIf=!1,this.conf=e}skipStatement(e){const t=e.get();if(t instanceof r.Unknown||t instanceof r.NativeSQL||t instanceof r.MacroContent||t instanceof r.MacroCall||e.getFirstToken().getStart()instanceof g.VirtualPosition||t instanceof r.Comment)return!0;if(this.conf.ignoreGlobalClassBoundaries){const n=t;if(n instanceof d.Interface&&e.findFirstExpression(u.ClassGlobal))return this.isGlobalIf=!0,!0;if(!0===this.isGlobalIf&&n instanceof d.EndInterface)return!0;if(n instanceof d.ClassDefinition&&e.findFirstExpression(u.ClassGlobal))return this.isGlobalClass=!0,!0;if(!0===this.isGlobalClass&&(n instanceof d.EndClass||n instanceof d.ClassImplementation))return!0}if(this.conf.ignoreGlobalClassDefinition){if(t instanceof d.ClassDefinition&&e.findFirstExpression(u.ClassGlobal))return this.skip=!0,!0;if(!0===this.skip&&t instanceof d.EndClass)return this.skip=!1,!0;if(!0===this.skip)return!0}if(this.conf.ignoreGlobalInterface){if(t instanceof d.Interface&&e.findFirstExpression(u.ClassGlobal))return this.skip=!0,!0;if(!0===this.skip&&t instanceof d.EndInterface)return this.skip=!1,!0;if(!0===this.skip)return!0}return!1}}class S extends o.ABAPRule{constructor(){super(...arguments),this.conf=new m}getMetadata(){return{key:"keyword_case",title:"Keyword case",shortDescription:"Checks that keywords have the same case. Non-keywords must be lower case.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-your-pretty-printer-team-settings",tags:[p.RuleTag.Styleguide,p.RuleTag.SingleFile,p.RuleTag.Quickfix],badExample:"write 'hello world'.",goodExample:"WRITE 'hello world'."}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf&&(this.conf=new m),void 0===this.conf.style&&(this.conf=new m),void 0===this.conf.ignoreExceptions&&(this.conf.ignoreExceptions=(new m).ignoreExceptions)}runParsed(e,t){const n=[],s=new f.DDIC(this.reg);if(this.conf.ignoreExceptions&&t instanceof c.Class){const e=t.getClassDefinition();if(void 0===e||s.isException(e,t))return[]}let o=this.getConfig().maxIssuesPerFile;(void 0===o||o<1)&&(o=10);const i=new y(this.getConfig());let r;for(const t of e.getStatements()){if(!0===i.skipStatement(t))continue;let s=this.traverse(t,t.get());if(s.length>0){if(r&&s[0].token.getStart().equals(r.getStart()))continue;void 0!==t.getColon()&&(s=[s[0]]);const o=this.build(s,e);if(n.push(o),n.length>100)break;r=s[0].token}if(n.length>=o)break}return n}build(e,t){const n=e[0],o=e[0].token,i=e[e.length-1].token,r=o.getStr();let a="";a=!0===n.keyword?`Keyword should be ${this.conf.style} case: "${r}"`:`Identifiers should be lower case: "${r}"`;const c=new h.EditDraft(t);for(const t of e){const e=t.token.getStr(),n=t.token.getStart();!0===t.keyword?this.conf.style===T.Lower?c.replace(n,e.toLowerCase()):c.replace(n,e.toUpperCase()):c.replace(n,e.toLowerCase())}const l=c.toEdit();return s.Issue.atRange(t,o.getStart(),i.getEnd(),a,this.getMetadata().key,this.conf.severity,l)}traverse(e,t){let n=[];const s=e.getChildren();for(let e=0;e<s.length;e++){const o=s[e];if(o instanceof i.TokenNodeRegex){const i=s[e+1];if(this.conf.ignoreLowerClassImplmentationStatement&&t instanceof d.ClassImplementation)continue;const r=o.get().getStr(),c=r.toUpperCase();if("OTHERS"===c||"TEXT"===c&&"-"===(null==i?void 0:i.concatTokens()))continue;if(!0===this.conf.ignoreFunctionModuleName&&t instanceof d.FunctionModule&&"FUNCTION"!==c)continue;if("SCREEN"===c&&(t instanceof d.ModifyDatabase||t instanceof d.ModifyInternal||t instanceof d.Loop))continue;r!==r.toLowerCase()&&o.get()instanceof a.Identifier&&n.push({token:o.get(),keyword:!1})}else if(o instanceof i.TokenNode){const e=o.get().getStr();this.violatesRule(e)&&o.get()instanceof a.Identifier&&n.push({token:o.get(),keyword:!0})}else{if(!(o instanceof i.ExpressionNode))throw new Error("keyword_case, traverseStatement, unexpected node type");n=n.concat(this.traverse(o,t))}}return n}violatesRule(e){return!(this.conf.ignoreKeywords&&this.conf.ignoreKeywords.map((e=>e.toUpperCase())).includes(e.toUpperCase())||(this.conf.style===T.Lower?e===e.toLowerCase():this.conf.style!==T.Upper||e===e.toUpperCase()))}}t.KeywordCase=S},33507(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceDeferred=void 0;const s=n(82245);t.InterfaceDeferred=class{runSyntax(e,t){var n;const o=null===(n=e.findFirstExpression(s.InterfaceName))||void 0===n?void 0:n.getFirstToken();t.scope.addDeferred(o,"INTF")}}},33531(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormRaising=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("RESUMABLE",(0,s.tok)(i.ParenLeft),o.ClassName,(0,s.tok)(i.ParenRightW));return(0,s.seq)("RAISING",(0,s.plus)((0,s.alt)(o.ClassName,e)))}}t.FormRaising=r},33694(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetBit=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(20572),a=n(14365),c=n(3240),l=n(82054);t.GetBit=class{runSyntax(e,t){let n;for(const i of e.findDirectExpressions(s.Source))n=o.Source.runSyntax(i,t);if(n&&!1===new c.TypeUtils(t.scope).isHexLike(n)){const n="Input must be byte-like";t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}else for(const n of e.findDirectExpressions(s.Target))(null==n?void 0:n.findDirectExpression(s.InlineData))?a.InlineData.runSyntax(n,t,r.IntegerType.get()):i.Target.runSyntax(n,t)}}},33892(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetRunTime=void 0;const s=n(3125),o=n(49028);t.SetRunTime=class{getMatcher(){const e=(0,s.seq)("CLOCK RESOLUTION",(0,s.alt)("LOW","HIGH")),t=(0,s.seq)("ANALYZER",(0,s.alt)("ON","OFF")),n=(0,s.seq)("SET RUN TIME",(0,s.alt)(e,t));return(0,s.verNot)(o.Version.Cloud,n)}}},33911(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Indentation=t.IndentationConf=void 0;const s=n(71759),o=n(99732),i=n(84383),r=n(77465),a=n(47694),c=n(50612),l=n(82245),d=n(86696),u=n(5518),p=n(86789),f=n(297),g=n(71249),h=n(52024);class T extends r.BasicRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0,this.alignTryCatch=!1,this.selectionScreenBlockIndentation=!1,this.globalClassSkipFirst=!1,this.ignoreGlobalClassDefinition=!1,this.ignoreGlobalInterface=!1,this.maxIssuesPerFile=10}}t.IndentationConf=T;class m extends o.ABAPRule{constructor(){super(...arguments),this.conf=new T}getMetadata(){return{key:"indentation",title:"Indentation",shortDescription:"Checks indentation",tags:[d.RuleTag.Whitespace,d.RuleTag.Quickfix,d.RuleTag.SingleFile],badExample:"CLASS lcl DEFINITION.\nPRIVATE SECTION.\nMETHODS constructor.\nENDCLASS.\n\nCLASS lcl IMPLEMENTATION.\nMETHOD constructor.\nENDMETHOD.\nENDCLASS.",goodExample:"CLASS lcl DEFINITION.\n  PRIVATE SECTION.\n    METHODS constructor.\nENDCLASS.\n\nCLASS lcl IMPLEMENTATION.\n  METHOD constructor.\n  ENDMETHOD.\nENDCLASS."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,o;let r=this.getConfig().maxIssuesPerFile;(void 0===r||r<1)&&(r=10);let d=!1;if(void 0===e.getStructure())return[];if(t instanceof i.Class){const e=t.getClassDefinition(),n=new u.DDIC(this.reg);if(void 0===e)return[];if(this.conf.ignoreExceptions&&n.isException(e,t))return[]}const T={selectionScreenBlockIndentation:null===(n=this.conf)||void 0===n?void 0:n.selectionScreenBlockIndentation,alignTryCatch:null===(o=this.conf)||void 0===o?void 0:o.alignTryCatch,globalClassSkipFirst:this.conf.globalClassSkipFirst},m=new a.Indent(T).getExpectedIndents(e),y=[];let S;for(const t of e.getStatements()){const n=t.getFirstToken().getStart();if(n instanceof f.VirtualPosition)continue;const o=m.shift();if(this.conf.ignoreGlobalClassDefinition){if(t.get()instanceof c.ClassDefinition&&t.findFirstExpression(l.ClassGlobal)){d=!0;continue}if(!0===d&&t.get()instanceof c.EndClass){d=!1;continue}if(!0===d)continue}if(this.conf.ignoreGlobalInterface){if(t.get()instanceof c.Interface&&t.findFirstExpression(l.ClassGlobal)){d=!0;continue}if(!0===d&&t.get()instanceof c.EndInterface){d=!1;continue}if(!0===d)continue}if(!(t.get()instanceof h.NativeSQL||void 0!==t.getColon()&&void 0!==(null==S?void 0:S.getColon())&&t.getColon().getStart().equals(S.getColon().getStart()))){if(o&&o>0&&o!==n.getCol()){const t=o-1,i=g.EditHelper.replaceRange(e,new p.Position(n.getRow(),1),n," ".repeat(t)),a="Indentation problem, expected "+t+" spaces",c=s.Issue.atPosition(e,n,a,this.getMetadata().key,this.conf.severity,i);if(y.push(c),y.length>=r)break}S=t}}return y}}t.Indentation=m},34090(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSType=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(",",(0,o.regex)(/\d+/));return(0,o.seq)(s.CDSName,(0,o.opt)((0,o.seq)(".",s.CDSName)),(0,o.opt)((0,o.seq)("(",(0,o.regex)(/\d+/),(0,o.opt)(e),")")))}}t.CDSType=i},34106(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdocExtension=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IEXT"}getAllowedNaming(){return{maxLength:30,allowNamespace:!1}}getDescription(){}}t.IdocExtension=o},34168(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Catch=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Catch=class{getMatcher(){return(0,o.seq)((0,o.sta)(s.Catch),(0,o.opt)((0,o.sub)(i.Body)))}}},34197(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Reject=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Reject=class{getMatcher(){const e=(0,s.seq)("REJECT",(0,s.opt)(o.Source));return(0,s.verNot)(i.Version.Cloud,e)}}},34202(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectLoop=void 0;const s=n(3125),o=n(82245),i=n(95640),r=n(84685),a=n(30740),c=n(39628),l=n(93442),d=n(18181),u=n(49028),p=n(74970);class f extends s.Expression{getRunnable(){const e=(0,s.seq)("WHERE",o.SQLCond),t=(0,s.seq)("PACKAGE SIZE",o.SQLSource),n=(0,s.seq)(o.SQLIntoTable,(0,s.alt)(t,(0,s.seq)(o.SQLFrom,t),(0,s.seq)(t,o.SQLFrom))),f=(0,s.seq)(t,o.SQLIntoTable),g=(0,s.altPrio)(a.SQLIntoStructure,o.SQLIntoList),h=(0,s.per)(o.SQLFrom,e,d.SQLUpTo,i.SQLOrderBy,r.SQLHaving,o.SQLClient,"BYPASSING BUFFER",o.SQLGroupBy,o.SQLForAllEntries,(0,s.alt)(n,a.SQLIntoStructure,o.SQLIntoList,f)),T=(0,s.seq)(o.SQLFrom,(0,s.ver)(u.Version.v750,p.SQLFieldsLoop),(0,s.optPrio)(o.SQLForAllEntries),(0,s.optPrio)((0,s.seq)(e,(0,s.optPrio)(i.SQLOrderBy),g,(0,s.optPrio)(d.SQLUpTo)))),m=(0,s.seq)((0,s.plusPrio)(o.SQLAggregation),g,(0,s.optPrio)(d.SQLUpTo),o.SQLFrom,(0,s.optPrio)(o.SQLClient),(0,s.optPrio)(e),o.SQLGroupBy);return(0,s.seq)("SELECT",(0,s.altPrio)((0,s.seq)((0,s.optPrio)("DISTINCT"),l.SQLFieldListLoop,h),T,m),(0,s.optPrio)(c.SQLHints))}}t.SelectLoop=f},34268(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WStaticArrow=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" =>"}}t.WStaticArrow=o},34280(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticCallViaInstance=t.StaticCallViaInstanceConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(52424),c=n(36453),l=n(20941);class d extends i.BasicRuleConfig{constructor(){super(...arguments),this.allowInTestclassIncludes=!1}}t.StaticCallViaInstanceConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"static_call_via_instance",title:"Static call via instance variable",shortDescription:"Static method call via instance variable",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#dont-call-static-methods-through-instance-variables",tags:[r.RuleTag.Styleguide]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if(!0===this.getConfig().allowInTestclassIncludes&&e.getFilename().includes(".testclasses."))return[];const o=this.listMethodCalls(e.getFilename(),new a.SyntaxLogic(this.reg,t).run().spaghetti.getTop()),i=e.getTokens();for(let t=0;t<i.length-1;t++){const r=i[t];if("->"!==r.getStr())continue;const a=i[t+1];for(const t of o)if(t.equals(a.getStart())){const t="Avoid calling static method via instance";n.push(s.Issue.atToken(e,r,t,this.getMetadata().key));break}}return n}listMethodCalls(e,t){const n=[];for(const s of t.getData().references)s.referenceType===c.ReferenceType.MethodReference&&s.position.getFilename()===e&&s.resolved instanceof l.MethodDefinition&&!0===s.resolved.isStatic()&&n.push(s.position.getStart());for(const s of t.getChildren())n.push(...this.listMethodCalls(e,s));return n}}t.StaticCallViaInstance=u},34349(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.While=void 0;const s=n(3125),o=n(82245);t.While=class{getMatcher(){const e=(0,s.seq)("VARY",o.Target,"FROM",o.Source,"NEXT",o.Source);return(0,s.seq)("WHILE",o.Cond,(0,s.star)(e))}}},34376(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Subtract=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Subtract=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},34393(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MainFileContents=t.MainFileContentsConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(12620),a=n(50612),c=n(82245),l=n(86789),d=n(52024),u=n(49028);class p extends o.BasicRuleConfig{}t.MainFileContentsConf=p,t.MainFileContents=class{constructor(){this.conf=new p}getMetadata(){return{key:"main_file_contents",title:"Main file contents",shortDescription:"Checks related to report declarations.",extendedInformation:'Does not run if the target version is Cloud\n\n* PROGs must begin with "REPORT <name>." or "PROGRAM <name>.\n* TYPEs must begin with "TYPE-POOL <name>."\n'}}getDescription(e){return"Main file must have specific contents: "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){if(!(e instanceof r.ABAPObject)||this.reg.getConfig().getVersion()===u.Version.Cloud)return[];const t=e.getMainABAPFile();if(void 0===t)return[];if(void 0===t.getStructure())return[];if(e instanceof i.Program&&!1===e.isInclude()&&!1===e.isModulePool()){let n=0,o=t.getStatements()[n];for(;void 0!==o&&o.get()instanceof d.Comment;)n+=1,o=t.getStatements()[n];if(void 0===o||!(o.get()instanceof a.Report||o.get()instanceof a.Program)){const e=new l.Position(1,1);return[s.Issue.atPosition(t,e,this.getDescription("Report must begin with REPORT or PROGRAM"),this.getMetadata().key,this.conf.severity)]}const i=o.findFirstExpression(c.ReportName);if(void 0===i){const e=o.getFirstToken();return[s.Issue.atToken(t,e,this.getDescription("Add report name to REPORT or PROGRAM statement"),this.getMetadata().key,this.conf.severity)]}if(i.getFirstToken().getStr().toUpperCase()!==e.getName()){const e=i.getFirstToken();return[s.Issue.atToken(t,e,this.getDescription("REPORT or PROGRAM name must match filename"),this.getMetadata().key,this.conf.severity)]}}else if(e instanceof i.TypePool){let n=0,o=t.getStatements()[n];for(;void 0!==o&&o.get()instanceof d.Comment;)n+=1,o=t.getStatements()[n];if(void 0===o||!(o.get()instanceof a.TypePool)){const e=new l.Position(1,1);return[s.Issue.atPosition(t,e,this.getDescription("Type pool must begin with TYPE-POOL"),this.getMetadata().key,this.conf.severity)]}const i=o.getChildren()[3];if(i.getFirstToken().getStr().toUpperCase()!==e.getName()){const e=i.getFirstToken();return[s.Issue.atToken(t,e,this.getDescription("TYPE-POOL name must match filename"),this.getMetadata().key,this.conf.severity)]}}return[]}}},34475(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WBracketRight=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ]"}}t.WBracketRight=o},34494(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneApp=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN01"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneApp=o},34550(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateReport=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GenerateReport=class{getMatcher(){const e=(0,s.str)("WITHOUT SELECTION-SCREEN"),t=(0,s.seq)("MESSAGE",o.Target),n=(0,s.seq)("INCLUDE",o.Target),r=(0,s.seq)("LINE",o.Target),a=(0,s.seq)("WORD",o.Target),c=(0,s.seq)("OFFSET",o.Target),l=(0,s.str)("WITH PRECOMPILED HEADERS"),d=(0,s.str)("WITH TEST CODE"),u=(0,s.seq)("MESSAGE-ID",o.Target),p=(0,s.seq)("TRACE-FILE",o.Target),f=(0,s.seq)("SHORTDUMP-ID",o.Target),g=(0,s.seq)("DIRECTORY ENTRY",o.Target),h=(0,s.per)(e,t,n,p,r,a,c,l,d,u,f,g),T=(0,s.seq)("GENERATE REPORT",o.Source,(0,s.opt)(h));return(0,s.verNot)(i.Version.Cloud,T)}}},34551(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplate=void 0;const s=n(75457),o=n(20572),i=n(82245),r=n(93170),a=n(3240),c=n(82054),l=n(89301);t.StringTemplate=class{static runSyntax(e,t){const n=new a.TypeUtils(t.scope),d=o.StringType.get();for(const a of e.getChildren())if(a instanceof s.ExpressionNode&&a.get()instanceof i.StringTemplateSource){const s=a.findDirectExpression(i.Source),l=r.Source.runSyntax(s,t,d);if(void 0===l){const n="No target type determined";return t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n)),o.VoidType.get(c.CheckSyntaxKey)}if(!1===n.isCharLike(l)&&!1===n.isHexLike(l)&&!(l instanceof o.UTCLongType)||l instanceof o.StructureType){const n="String template, not character like, "+l.constructor.name;return t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n)),o.VoidType.get(c.CheckSyntaxKey)}const u=a.findDirectExpression(i.StringTemplateFormatting),p=null==u?void 0:u.concatTokens();for(const e of(null==u?void 0:u.findAllExpressions(i.Source))||[])r.Source.runSyntax(e,t);if(u&&(null==p?void 0:p.includes("ALPHA = "))&&!(l instanceof o.UnknownType)&&!(l instanceof o.VoidType)&&!(l instanceof o.StringType)&&!(l instanceof o.CLikeType)&&!(l instanceof o.CharacterType)&&!(l instanceof o.NumericGenericType)&&!(l instanceof o.NumericType)&&!(l instanceof o.AnyType)){const e=`Cannot apply ALPHA to this type (${l.constructor.name})`;return t.issues.push((0,c.syntaxIssue)(t,u.getFirstToken(),e)),o.VoidType.get(c.CheckSyntaxKey)}}else if(a instanceof s.TokenNode){const e=a.get();if(e instanceof l.StringTemplate||e instanceof l.StringTemplateBegin||e instanceof l.StringTemplateMiddle||e instanceof l.StringTemplateEnd){const n=this.validateEscapeSequences(e.getStr(),t,a);if(n)return t.issues.push(n),o.VoidType.get(c.CheckSyntaxKey)}}return d}static validateEscapeSequences(e,t,n){const s=new Set(["\\|","\\{","\\}","\\\\","\\n","\\r","\\t"]);for(let o=0;o<e.length;o++)if("\\"===e[o]){const i=e.substring(o,o+2);if(!s.has(i))return(0,c.syntaxIssue)(t,n.getFirstToken(),`Invalid escape sequence "${i}" in string template`);o++}}}},34599(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeStructure=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("HIERARCHY",o.NamespaceSimpleName),t=(0,s.seq)("CREATE",(0,s.alt)(o.NamespaceSimpleName,o.EntityAssociation)),n=(0,s.seq)("UPDATE",(0,s.alt)(o.NamespaceSimpleName,o.EntityAssociation)),i=(0,s.seq)("READ RESULT",(0,s.alt)(o.NamespaceSimpleName,o.EntityAssociation)),r=(0,s.seq)("READ LINK",o.EntityAssociation),a=(0,s.seq)("ACTION IMPORT",o.Source),c=(0,s.seq)("PERMISSIONS REQUEST",o.NamespaceSimpleName),l=(0,s.seq)("EVENT",o.EventName),d=(0,s.seq)("FAILED EARLY",o.NamespaceSimpleName),u=(0,s.seq)("MAPPED EARLY",o.NamespaceSimpleName),p=(0,s.seq)("REPORTED EARLY",o.NamespaceSimpleName),f=(0,s.seq)("STRUCTURE FOR",(0,s.altPrio)(e,l,t,n,a,c,r,i)),g=(0,s.seq)("RESPONSE FOR",(0,s.altPrio)(d,u,p)),h=(0,s.seq)("REQUEST FOR CHANGE",o.NamespaceSimpleName);return(0,s.seq)("TYPE",(0,s.altPrio)(f,g,h))}}t.TypeStructure=i},34720(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FixCase=void 0;const s=n(75457),o=n(89301),i=n(33366),r=n(89301);t.FixCase=class{constructor(e,t){this.keywordCase=new i.KeywordCase,this.keywordCase.setConfig(t.readByRule(this.keywordCase.getMetadata().key)),this.fileContents=e,this.config=t}execute(e){for(const t of e.getChildren())if(t instanceof s.TokenNodeRegex){const e=t.get();if(e instanceof r.StringToken)continue;this.replaceString(e.getStart(),this.formatNonKeyword(e.getStr()))}else if(t instanceof s.TokenNode){const e=t.get(),n=e.getStr();this.keywordCase.violatesRule(n)&&e instanceof o.Identifier&&this.replaceString(e.getStart(),this.formatKeyword(n))}else{if(!(t instanceof s.ExpressionNode))throw new Error("pretty printer, traverse, unexpected node type");this.execute(t)}return this.fileContents}formatNonKeyword(e){return e.toLowerCase()}formatKeyword(e){const t=this.keywordCase.getMetadata().key,n=this.config.readByRule(t);return(n?n.style:i.KeywordCaseStyle.Upper)===i.KeywordCaseStyle.Lower?e.toLowerCase():e.toUpperCase()}replaceString(e,t){const n=this.fileContents.split("\n"),s=n[e.getRow()-1];n[e.getRow()-1]=s.substr(0,e.getCol()-1)+t+s.substr(e.getCol()+t.length-1),this.fileContents=n.join("\n")}}},34781(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckComments=t.CheckCommentsConf=void 0;const s=n(71759),o=n(52024),i=n(77465),r=n(99732),a=n(86696);class c extends i.BasicRuleConfig{constructor(){super(...arguments),this.allowEndOfLine=!1,this.maxIssuesPerFile=10}}var l;t.CheckCommentsConf=c,function(e){e[e.EndOfLine=0]="EndOfLine"}(l||(l={}));class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"check_comments",title:"Check Comments",shortDescription:"\nVarious checks for comment usage.",extendedInformation:'\nDetects end of line comments. Comments starting with "#EC" or "##" are ignored\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#put-comments-before-the-statement-they-relate-to',tags:[a.RuleTag.Styleguide,a.RuleTag.SingleFile],badExample:'WRITE 2. " descriptive comment',goodExample:'" descriptive comment\nWRITE 2.'}}getDescription(e){return e===l.EndOfLine?"Do not use end of line comments - move comment to previous row instead":""}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getRawRows();if(!0===this.conf.allowEndOfLine)return[];let i=this.getConfig().maxIssuesPerFile;(void 0===i||i<1)&&(i=10);const r=[];for(let e=0;e<n.length;e++){const t=n[e];(t.trim().startsWith("*")||t.trim().startsWith('"'))&&r.push(e)}const a=e.getStatements();for(let n=a.length-1;n>=0;n--){const c=a[n];if(c.get()instanceof o.Comment&&!r.includes(c.getStart().getRow()-1)){if(c.getFirstToken().getStr().startsWith('"#EC')||c.getFirstToken().getStr().startsWith('"##'))continue;if(t.push(s.Issue.atStatement(e,c,this.getDescription(l.EndOfLine),this.getMetadata().key,this.conf.severity)),t.length>=i)break}}return t}}t.CheckComments=d},34803(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckInclude=t.CheckIncludeConf=void 0;const s=n(77465),o=n(12620),i=n(79543),r=n(86696),a=n(84383),c=n(96493);class l extends s.BasicRuleConfig{constructor(){super(...arguments),this.allowUnused=!1}}t.CheckIncludeConf=l,t.CheckInclude=class{constructor(){this.conf=new l}getMetadata(){return{key:"check_include",title:"Check INCLUDEs",shortDescription:"Checks INCLUDE statements",extendedInformation:"\n* Reports unused includes\n* Errors if the includes are not found\n* Error if including a main program\n* Skips ZX* includes",tags:[r.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this.graph=new i.IncludeGraph(this.reg,this.getConfig().severity||c.Severity.Error,this.getConfig().allowUnused||!1),this}run(e){if(!(e instanceof o.ABAPObject))return[];if(e instanceof a.Program&&!0===e.isInclude()&&e.getName().startsWith("ZX"))return[];let t=[];for(const n of e.getABAPFiles())t=t.concat(this.graph.getIssuesFile(n));return t}}},34982(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineDataOldVersions=t.InlineDataOldVersionsConf=void 0;const s=n(71759),o=n(99732),i=n(49028),r=n(82245),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.InlineDataOldVersionsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"inline_data_old_versions",title:"Inline data, old versions",shortDescription:"Checks for inline data declarations in older releases. Only active for versions less than v740sp02",tags:[c.RuleTag.Syntax,c.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(this.reg.getConfig().getVersion()>=i.Version.v740sp02||this.reg.getConfig().getVersion()===i.Version.OpenABAP||this.reg.getConfig().getVersion()===i.Version.Cloud)return[];for(const n of e.getStatements())for(const o of n.findAllExpressions(r.Target)){const n=o.getAllTokens();if(4!==n.length)continue;if(!n[0].getStr().match(/DATA/i))continue;if("("!==n[1].getStr())continue;if(")"!==n[3].getStr())continue;const i="Inline DATA not possible in "+this.reg.getConfig().getVersion(),r=s.Issue.atToken(e,n[0],i,this.getMetadata().key,this.conf.severity);t.push(r)}return t}}t.InlineDataOldVersions=d},35268(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BlockName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.optPrio)((0,s.tok)(o.WDash)),(0,s.regex)(/^[\w%\$\*]+$/),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.regex)(/^[\w%\$\*]+$/))))}}t.BlockName=i},35469(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebReportingTemplate=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"W3HT"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.WebReportingTemplate=o},35521(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantClasses=t.ConstantClassesConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(84383),a=n(67240);class c extends o.BasicRuleConfig{constructor(){super(...arguments),this.mapping=[]}}t.ConstantClassesConf=c,t.ConstantClasses=class{constructor(){this.conf=new c}getMetadata(){return{key:"constant_classes",title:"Validate constant classes",shortDescription:"Checks that a class contains exactly the constants corresponding to a domain's fixed values.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-enumeration-classes-to-constants-interfaces",tags:[i.RuleTag.Styleguide]}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){if(this.conf&&this.conf.mapping&&e instanceof r.Domain){const t=this.conf.mapping.find((t=>t.domain.toUpperCase()===e.getName().toUpperCase()));if(!t)return[];const n=this.reg.getObject("CLAS",null==t?void 0:t.class.toUpperCase());if(!n)return[s.Issue.atIdentifier(e.getIdentifier(),`Constant class pattern implementation ${t.class} missing for domain ${t.domain}`,this.getMetadata().key,this.conf.severity)];const o=n.getMainABAPFile();if(void 0===o)return[];const i=n.getClassDefinition();if(!i)return[];const r=e.getFixedValues(),c=r.map((e=>e.low)),l=[];0===e.getFixedValues().length&&l.push(s.Issue.atStatement(o,o.getStatements()[0],`Domain ${t.domain} does not contain any fixed values. Either add some values or disable this check`,this.getMetadata().key,this.conf.severity));let d=!1;for(const e of i.constants)t.constantForDomainName&&e.name===t.constantForDomainName?(e.value!==t.domain.toLocaleUpperCase()&&l.push(this.issueAtConstant(e,`Constant value ${e.value} must match domain name ${t.domain} `)),d=!0):(t.useExactType&&e.typeName.toLowerCase()!==t.domain.toLowerCase()&&l.push(this.issueAtConstant(e,`Use exact type ${t.domain} instead of ${e.typeName}`)),e.visibility!==a.Visibility.Public&&l.push(this.issueAtConstant(e,`Constant ${e.name} should be public`)),c.includes(e.value)||l.push(this.issueAtConstant(e,`Extra constant ${e.name} found which is not present in domain ${t.domain}`)));for(const e of r)i.constants.find((t=>t.value===e.low))||l.push(s.Issue.atStatement(o,o.getStatements()[0],`Missing constant for ${e.low} (domain ${t.domain})`,this.getMetadata().key,this.conf.severity));return t.constantForDomainName&&!d&&l.push(s.Issue.atStatement(o,o.getStatements()[0],`Missing constant ${t.constantForDomainName} for name of domain ${t.domain}`,this.getMetadata().key,this.conf.severity)),l}return[]}issueAtConstant(e,t){return s.Issue.atIdentifier(e.identifier,t,this.getMetadata().key,this.conf.severity)}}},35550(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ManyParentheses=t.ManyParenthesesConf=void 0;const s=n(82245),o=n(50612),i=n(71759),r=n(99732),a=n(77465),c=n(86696),l=n(75457),d=n(71249);class u extends a.BasicRuleConfig{}t.ManyParenthesesConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"many_parentheses",title:"Too many parentheses",shortDescription:"Searches for expressions where extra parentheses can safely be removed",tags:[c.RuleTag.SingleFile,c.RuleTag.Quickfix],badExample:"\nIF ( destination IS INITIAL ).\nENDIF.\nIF foo = boo AND ( bar = lar AND moo = loo ).\nENDIF.\n",goodExample:"\nIF destination IS INITIAL.\nENDIF.\nIF foo = boo AND bar = lar AND moo = loo.\nENDIF.\n"}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllExpressionsMulti([s.Cond,s.ComponentCond]))t.push(...this.analyzeCondition(e,o));for(const o of n.findAllExpressionsMulti([s.CondSub,s.ComponentCondSub])){let n=[];if(n=o.get()instanceof s.CondSub?o.findDirectExpressions(s.Cond):o.findDirectExpressions(s.ComponentCond),1===n.length&&1===n[0].getChildren().length){const n="Too many parentheses, simple",s=o.getChildren();let r=o.getFirstToken(),a=o.getChildren()[1].concatTokens();"NOT"===r.getStr().toUpperCase()&&(r=s[1].getFirstToken(),a=o.getChildren()[2].concatTokens());const c=d.EditHelper.replaceRange(e,r.getStart(),o.getLastToken().getEnd(),a),l=i.Issue.atToken(e,r,n,this.getMetadata().key,this.conf.severity,c);t.push(l)}}for(const s of n.findAllStatements(o.Move))t.push(...this.analyzeMove(e,s));for(const s of n.findAllStatements(o.Select))t.push(...this.analyzeInto(e,s));return t}analyzeInto(e,t){const n=t.findFirstExpression(s.SQLIntoList);if(void 0===n)return[];const o=n.getAllTokens()[1];if(void 0===o||"("!==o.getStr())return[];const r=n.concatTokens();return!0===r.endsWith(")")&&!1===r.includes(",")?[i.Issue.atStatement(e,t,"Too many parentheses",this.getMetadata().key,this.conf.severity)]:[]}analyzeMove(e,t){const n=[];for(const o of t.findAllExpressionsRecursive(s.Source)){const t=o.getChildren();if(3===t.length&&"("===t[0].getFirstToken().getStr()&&1===t[1].getChildren().length&&!1===t[1].getFirstToken().getStr().startsWith("-")&&")"===t[2].getFirstToken().getStr()){const s=i.Issue.atToken(e,t[0].getFirstToken(),"Too many parentheses",this.getMetadata().key,this.conf.severity);n.push(s)}}return n}analyzeCondition(e,t){var n,o;const r=[];let a="",c=!1;for(const d of t.getChildren()){let t="";if(d instanceof l.TokenNode)t=d.get().getStr().toUpperCase();else if(d instanceof l.ExpressionNode&&(d.get()instanceof s.CondSub||d.get()instanceof s.ComponentCondSub)){if("NOT"===d.getFirstToken().getStr().toUpperCase())return[];let e=d.findDirectExpression(s.Cond);if(void 0===e&&(e=d.findDirectExpression(s.ComponentCond)),void 0===e)return[];t=this.findComparator(e),""!==t&&(c=!0)}else if(d instanceof l.ExpressionNode&&d.get()instanceof s.Compare&&(null===(n=d.getFirstChild())||void 0===n?void 0:n.get())instanceof s.Source&&3===d.getChildren().length){const t=null===(o=d.getFirstChild())||void 0===o?void 0:o.concatTokens();if((null==t?void 0:t.startsWith("("))&&t.endsWith(")")){const t="Parentheses can be removed",n=i.Issue.atToken(e,d.getFirstToken(),t,this.getMetadata().key,this.conf.severity);r.push(n)}}if(""===a)a=t;else if(""!==a&&""!==t&&a!==t)return[]}if(""!==a&&"MIXED"!==a&&!0===c){const n="Too many parentheses, complex",s=i.Issue.atToken(e,t.getFirstToken(),n,this.getMetadata().key,this.conf.severity);r.push(s)}return r}findComparator(e){let t="";const n=e.getChildren();for(const e of n)if(e instanceof l.TokenNode){const n=e.get().getStr().toUpperCase();if(""===t)t=n;else if(n!==t)return"MIXED"}return t}}t.ManyParentheses=p},35579(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Transfer=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);const n=e.findDirectExpression(s.Target);n&&i.Target.runSyntax(n,t)}}},35619(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AssignLocalCopy=void 0;const s=n(3125),o=n(82245),i=n(49028);t.AssignLocalCopy=class{getMatcher(){const e=(0,s.seq)("INITIAL",(0,s.alt)(o.Source,o.Dynamic)),t=(0,s.seq)("INITIAL LINE OF",(0,s.alt)(o.Source,o.Dynamic)),n=(0,s.seq)("MAIN TABLE FIELD",o.Dynamic),r=(0,s.seq)("ASSIGN LOCAL COPY OF",(0,s.alt)(e,t,n,o.Source),"TO",o.TargetFieldSymbol);return(0,s.verNot)(i.Version.Cloud,r)}}},35652(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassAttributeNames=t.ClassAttributeNamesConf=void 0;const s=n(71759),o=n(50127),i=n(74650),r=n(99732),a=n(22755),c=n(86696),l=n(5518);class d extends o.NamingRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0,this.ignoreLocal=!0,this.ignoreInterfaces=!1,this.statics="^G._.+$",this.instance="^M._.+$",this.constants=""}}t.ClassAttributeNamesConf=d;class u extends r.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"class_attribute_names",title:"Class attributes naming",shortDescription:"Allows you to enforce a pattern, such as a prefix, for class variable names.",tags:[c.RuleTag.Naming,c.RuleTag.SingleFile]}}getDescription(e,t){return"required"===this.conf.patternKind?'Class attribute name "'+e+'" does not match pattern '+t:'Class attribute name "'+e+'" must not match pattern '+t}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){let n=[];void 0===this.conf.patternKind&&(this.conf.patternKind="required");let s=[];const o=new l.DDIC(this.reg);for(const n of e.getInfo().listClassDefinitions())n.isLocal&&this.conf.ignoreLocal||o.isException(n,t)&&this.conf.ignoreExceptions||(s=s.concat(n.attributes));if(!1===this.conf.ignoreInterfaces)for(const t of e.getInfo().listInterfaceDefinitions())t.isLocal&&this.conf.ignoreLocal||(s=s.concat(t.attributes));return n=this.checkAttributes(s),n}checkAttributes(e){if(void 0===e)return[];let t=[];for(const n of e)switch(n.level){case a.AttributeLevel.Instance:t=t.concat(this.checkName(n.identifier,this.conf.instance));break;case a.AttributeLevel.Static:t=t.concat(this.checkName(n.identifier,this.conf.statics));break;case a.AttributeLevel.Constant:t=t.concat(this.checkName(n.identifier,this.conf.constants))}return t}checkName(e,t){const n=[],o=new RegExp(t,"i"),r=e.getName();if(i.NameValidator.violatesRule(r,o,this.conf)){const o=s.Issue.atIdentifier(e,this.getDescription(r,t),this.getMetadata().key,this.conf.severity);n.push(o)}return n}}t.ClassAttributeNames=u},35937(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementString=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.ParenLeft),i.TextElementKey,(0,s.tok)(o.ParenRightW));return(0,s.seq)((0,s.regex)(/^('.*')|(`.*`)$/),e)}}t.TextElementString=r},35958(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnusedTypes=t.UnusedTypesConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(52424),a=n(12620),c=n(2403),l=n(71249),d=n(36453),u=n(52024);class p{constructor(){this.workarea=[]}push(e){for(const t of this.workarea)if(e.equals(t))return;this.workarea.push(e)}removeIfExists(e){for(let t=0;t<this.workarea.length;t++)if(e.equals(this.workarea[t]))return void this.workarea.splice(t,1)}get(){return this.workarea}count(){return this.workarea.length}}class f extends o.BasicRuleConfig{constructor(){super(...arguments),this.skipNames=[]}}t.UnusedTypesConf=f,t.UnusedTypes=class{constructor(){this.conf=new f}getMetadata(){return{key:"unused_types",title:"Unused types",shortDescription:"Checks for unused TYPE definitions",extendedInformation:"Unused types are not reported if the object contains parser or syntax errors.",tags:[i.RuleTag.Quickfix],pragma:"##NEEDED",pseudoComment:"EC NEEDED"}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skipNames&&(this.conf.skipNames=[])}initialize(e){return this.reg=e,this}run(e){if(!(e instanceof a.ABAPObject))return[];for(const t of e.getABAPFiles())for(const e of t.getStatements())if(e.get()instanceof u.Unknown)return[];const t=new r.SyntaxLogic(this.reg,e).run();if(t.issues.length>0)return[];if(this.workarea=new p,this.traverse(t.spaghetti.getTop(),e,!0),this.traverse(t.spaghetti.getTop(),e,!1),0===this.workarea.count())return[];for(const t of this.reg.getObjects())if(t!==e){if(t instanceof a.ABAPObject){if(this.reg.isDependency(t))continue;const e=new r.SyntaxLogic(this.reg,t).run();this.traverse(e.spaghetti.getTop(),t,!1)}if(0===this.workarea.count())return[]}const n=[];for(const t of this.workarea.get()){const o='Type "'+t.getName()+'" not used',i=e.getABAPFileByName(t.getFilename());if(void 0===i)continue;const r=l.EditHelper.findStatement(t.getToken(),i);if(void 0===r)continue;if(r.getPragmas().some((e=>e.getStr()===this.getMetadata().pragma)))continue;if(this.suppressedbyPseudo(r,i))continue;const a=this.buildFix(i,r);n.push(s.Issue.atIdentifier(t,o,this.getMetadata().key,this.conf.severity,a))}return n}suppressedbyPseudo(e,t){if(void 0===e)return!1;if(void 0===t)return!1;let n=!1;for(const s of t.getStatements()){if(!0===n&&s.get()instanceof u.Comment)return s.concatTokens().includes(this.getMetadata().pseudoComment+"");s===e&&(n=!0)}return!1}traverse(e,t,n){e.getIdentifier().stype!==c.ScopeType.BuiltIn&&this.checkNode(e,t,n);for(const s of e.getChildren())this.traverse(s,t,n)}checkNode(e,t,n){if(!0===n){const n=e.getData().types;for(const e in n){const s=n[e];!1!==t.containsFile(s.getFilename())&&(this.conf.skipNames&&this.conf.skipNames.length>0&&this.conf.skipNames.some((t=>t.toUpperCase()===e))||e===s.getName().toUpperCase()&&this.workarea.push(s))}}for(const t of e.getData().references)t.referenceType===d.ReferenceType.TypeReference&&t.resolved&&this.workarea.removeIfExists(t.resolved);return[]}buildFix(e,t){if(!t.concatTokens().toUpperCase().includes("BEGIN OF"))return l.EditHelper.deleteStatement(e,t)}}},35975(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadReport=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ReadReport=class{getMatcher(){const e=(0,s.seq)("STATE",o.Source),t=(0,s.seq)("INTO",o.Target),n=(0,s.seq)("MAXIMUM WIDTH INTO",o.Target),r=(0,s.seq)("READ REPORT",o.Source,(0,s.per)(e,t,n));return(0,s.verNot)(i.Version.Cloud,r)}}},36154(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckTextElements=t.CheckTextElementsConf=void 0;const s=n(71759),o=n(77465),i=n(82245),r=n(12620),a=n(79543);class c extends o.BasicRuleConfig{}t.CheckTextElementsConf=c,t.CheckTextElements=class{constructor(){this.conf=new c}getMetadata(){return{key:"check_text_elements",title:"Check text elements",shortDescription:"Check text elements exists or matches code"}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this.graph=new a.IncludeGraph(this.reg),this}run(e){if(!(e instanceof r.ABAPObject))return[];const t=[];for(const n of e.getABAPFiles()){const o=n.getStructure();if(void 0===o)continue;let r,a;const c=o.findAllExpressionsMulti([i.TextElement,i.TextElementString]);if(c.length>0){const t=this.graph.listMainForInclude(n.getFilename());1===t.length?(a=t[0],r=this.reg.findObjectForFile(this.reg.getFileByName(t[0])).getTexts()):r=e.getTexts()}for(const e of c)if(e.get()instanceof i.TextElement){const o=e.findFirstExpression(i.TextElementKey).getFirstToken(),c=o.getStr().toUpperCase();if(void 0===r[c]){const e=`Text element "${c}" not found`+(a?", "+a:"");t.push(s.Issue.atToken(n,o,e,this.getMetadata().key,this.conf.severity))}}else{const o=e.findFirstExpression(i.TextElementKey).getFirstToken(),c=e.getFirstToken().getStr(),l=o.getStr().toUpperCase();let d=r[l];if(d&&c.startsWith("'")&&(d=d.replace(/'/g,"''")),void 0===d){const e=`Text element "${l}" not found`+(a?", "+a:"");t.push(s.Issue.atToken(n,o,e,this.getMetadata().key,this.conf.severity))}else c!=="'"+d+"'"&&c!=="`"+d+"`"&&t.push(s.Issue.atToken(n,o,"Text does not match text element",this.getMetadata().key,this.conf.severity))}}return t}}},36196(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringToken=void 0;const s=n(61785);class o extends s.AbstractToken{}t.StringToken=o},36207(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDef=void 0;const s=n(49028),o=n(3125),i=n(82245);t.MethodDef=class{getMatcher(){const e=(0,o.ver)(s.Version.v740sp08,(0,o.seq)("DEFAULT",(0,o.altPrio)("FAIL","IGNORE"))),t=(0,o.seq)((0,o.optPrio)((0,o.altPrio)("FINAL",e,i.Abstract)),(0,o.optPrio)(i.MethodDefImporting),(0,o.optPrio)(i.MethodDefExporting),(0,o.optPrio)(i.MethodDefChanging),(0,o.optPrio)(i.MethodDefReturning),(0,o.optPrio)((0,o.altPrio)(i.MethodDefRaising,i.MethodDefExceptions))),n=(0,o.seq)((0,o.optPrio)(i.Abstract),"FOR TESTING",(0,o.optPrio)((0,o.altPrio)(i.MethodDefRaising,i.MethodDefExceptions))),r=(0,o.seq)("RESULT",i.MethodParamName),a=(0,o.seq)("LINK",i.MethodParamName),c=(0,o.seq)("FULL",i.MethodParamName),l=(0,o.alt)((0,o.seq)("FOR ACTION",i.TypeName,(0,o.optPrio)(r)),(0,o.seq)("FOR CREATE",(0,o.alt)(i.TypeName,i.EntityAssociation)),(0,o.seq)("FOR DELETE",i.TypeName),(0,o.seq)("FOR UPDATE",i.TypeName)),d=(0,o.seq)("FOR READ",(0,o.alt)(i.TypeName,i.EntityAssociation),(0,o.optPrio)(c),r,(0,o.optPrio)(a)),u=(0,o.seq)("FOR FUNCTION",i.TypeName,r),p=(0,o.altPrio)("DDL OBJECT OPTIONS CDS SESSION CLIENT REQUIRED",(0,o.seq)("TABLE FUNCTION",i.NamespaceSimpleName),(0,o.seq)("VALIDATE ON SAVE IMPORTING",i.MethodParamName,"FOR",i.TypeName),(0,o.seq)("MODIFY",(0,o.opt)("IMPORTING"),(0,o.plus)((0,o.seq)(i.MethodParamName,l))),(0,o.seq)("PRECHECK IMPORTING",i.MethodParamName,l),(0,o.seq)("DETERMINATION",i.TypeName,"IMPORTING",i.MethodParamName,"FOR",i.TypeName),(0,o.seq)("VALIDATION",i.TypeName,"IMPORTING",i.MethodParamName,"FOR",i.TypeName),(0,o.seq)("NUMBERING IMPORTING",i.MethodParamName,l),(0,o.seq)("READ IMPORTING",i.MethodParamName,(0,o.altPrio)(d,u)),(0,o.seq)("FEATURES IMPORTING",i.MethodParamName,"REQUEST",i.NamespaceSimpleName,"FOR",i.NamespaceSimpleName,r),(0,o.seq)("BEHAVIOR IMPORTING",i.MethodParamName,"FOR CREATE",i.TypeName,i.MethodParamName,"FOR UPDATE",i.TypeName,i.MethodParamName,"FOR DELETE",i.TypeName),(0,o.seq)("BEHAVIOR IMPORTING",i.MethodParamName,"FOR READ",i.TypeName,r),(0,o.seq)("BEHAVIOR IMPORTING",i.MethodParamName,"FOR UPDATE",i.TypeName),(0,o.seq)((0,o.alt)("BEHAVIOR","LOCK"),"IMPORTING",i.MethodParamName,"FOR LOCK",i.TypeName),(0,o.seq)("DETERMINE",(0,o.alt)("ON MODIFY","ON SAVE"),"IMPORTING",i.MethodParamName,"FOR",i.TypeName),(0,o.seq)("GLOBAL AUTHORIZATION IMPORTING REQUEST",i.MethodParamName,"FOR",i.TypeName,r),(0,o.seq)("GLOBAL FEATURES IMPORTING REQUEST",i.MethodParamName,"FOR",i.TypeName,r),(0,o.seq)((0,o.seq)((0,o.opt)("INSTANCE"),"AUTHORIZATION IMPORTING"),i.MethodParamName,"REQUEST",i.MethodParamName,"FOR",i.TypeName,r),(0,o.seq)("INSTANCE FEATURES IMPORTING",i.MethodParamName,"REQUEST",i.MethodParamName,"FOR",i.TypeName,r)),f=(0,o.seq)("AMDP OPTIONS",(0,o.optPrio)("READ-ONLY"),"CDS SESSION CLIENT",(0,o.alt)("CURRENT","DEPENDENT"),(0,o.optPrio)(i.MethodDefImporting),(0,o.optPrio)(i.MethodDefExporting),(0,o.optPrio)(i.MethodDefRaising));return(0,o.seq)((0,o.altPrio)("CLASS-METHODS","METHODS"),i.MethodName,(0,o.alt)((0,o.seq)((0,o.optPrio)(i.Abstract),(0,o.optPrio)(e),i.EventHandler),t,n,(0,o.seq)("FOR",p),f,"NOT AT END OF MODE",(0,o.optPrio)(i.Redefinition)))}}},36271(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Definition=void 0;const s=n(12620),o=n(75584),i=n(77959);t.Definition=class{constructor(e){this.reg=e}find(e,t){var n;const r=o.LSPUtils.getABAPFile(this.reg,e.uri);if(void 0===r)return;const a=this.reg.getObject(r.getObjectType(),r.getObjectName());if(!(a instanceof s.ABAPObject))return;const c=o.LSPUtils.findCursor(this.reg,{textDocument:e,position:t});return void 0!==c?null===(n=i.LSPLookup.lookup(c,this.reg,a))||void 0===n?void 0:n.definition:void 0}}},36305(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IACTemplate=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IATU"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}getDescription(){}}t.IACTemplate=o},36363(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TestSeam=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TestSeam=class{getMatcher(){return(0,s.ver)(i.Version.v750,(0,s.seq)("TEST-SEAM",o.TestSeamName))}}},36453(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReferenceType=void 0,function(e){e.ObjectOrientedReference="Object",e.ObjectOrientedVoidReference="Object (Void)",e.ObjectOrientedUnknownReference="Object (Unknown)",e.TableReference="Table",e.TableVoidReference="Table (Void)",e.MethodReference="Method",e.BuiltinMethodReference="Builtin Method",e.ConstructorReference="Constructor Reference",e.MethodImplementationReference="Method Implementation",e.TypeReference="Type",e.BuiltinTypeReference="Builtin Type",e.VoidType="Type (Void)",e.InferredType="Inferred Type",e.FormReference="Form",e.DataReadReference="Read From",e.DataWriteReference="Write To"}(n||(t.ReferenceType=n={}))},36470(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneRFCMapping=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN17"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneRFCMapping=o},36532(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Result=void 0;class n{constructor(e,t,n){this.tokens=e,this.tokenIndex=t,this.nodes=n,void 0===this.nodes&&(this.nodes=[])}peek(){return this.tokens[this.tokenIndex]}shift(e){const t=this.nodes.slice();return t.push(e),new n(this.tokens,this.tokenIndex+1,t)}popNode(){return this.nodes.pop()}getNodes(){return this.nodes}setNodes(e){this.nodes=e}remainingLength(){return this.tokens.length-this.tokenIndex}}t.Result=n},36607(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallBadi=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallBadi=class{getMatcher(){const e=(0,s.seq)("CALL BADI",o.MethodSource,o.MethodCallBody);return(0,s.verNot)(i.Version.Cloud,e)}}},36669(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormParam=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("STRUCTURE",o.SimpleFieldChain);return(0,s.seq)((0,s.altPrio)(o.PassByValue,o.FormParamName),(0,s.optPrio)((0,s.altPrio)(o.FormParamType,e)))}}t.FormParam=i},36749(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ColonMissingSpace=t.ColonMissingSpaceConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86789),a=n(71249),c=n(86696),l=n(52024);class d extends i.BasicRuleConfig{}t.ColonMissingSpaceConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"colon_missing_space",title:"Colon missing space",shortDescription:"Checks for missing spaces after colons in chained statements.",tags:[c.RuleTag.Whitespace,c.RuleTag.Quickfix,c.RuleTag.SingleFile],badExample:"WRITE:hello, world.",goodExample:"WRITE: hello, world."}}getMessage(){return"Missing space after the colon"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements()){const o=n.getColon();if(void 0===o||n.get()instanceof l.NativeSQL||n.get()instanceof l.Comment)continue;const i=[...n.getTokens()];i.push(o),i.sort(((e,t)=>e.getStart().isAfter(t.getStart())?1:-1));for(let n=0;n<i.length;n++){const o=i[n];if(":"===o.getStr()&&void 0!==i[n+1]&&i[n+1].getRow()===o.getRow()&&i[n+1].getCol()===o.getCol()+1){const n=o.getStart(),i=new r.Position(n.getRow(),n.getCol()+1),c=a.EditHelper.insertAt(e,i," "),l=s.Issue.atRange(e,n,i,this.getMessage(),this.getMetadata().key,this.conf.severity,c);t.push(l)}}}return t}}t.ColonMissingSpace=u},36860(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetBit=void 0;const s=n(3125),o=n(82245);t.GetBit=class{getMatcher(){return(0,s.seq)("GET BIT",o.Source,"OF",o.Source,"INTO",o.Target)}}},36962(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypePools=void 0;const s=n(3125),o=n(49028);t.TypePools=class{getMatcher(){const e=(0,s.regex)(/^\w+$/),t=(0,s.seq)("TYPE-POOLS",e);return(0,s.verNot)(o.Version.Cloud,t)}}},36975(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.While=void 0;const s=n(82245),o=n(93170),i=n(60635),r=n(9646);t.While=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Cond))i.Cond.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))r.Target.runSyntax(n,t)}}},37068(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneLoginPage=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN10"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneLoginPage=o},37210(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFieldName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^(?!(?:SINGLE|INTO|DISTINCT|AS|WHERE|FOR|HAVING|APPENDING|UP|FROM)$)(\/\w+\/)?(\w+~(\/\w+\/)?(\w+|\*)|\w+)$/i)}}t.SQLFieldName=o},37232(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSub=void 0;const s=n(3125),o=n(89301),i=n(7756),r=n(83852);class a extends s.Expression{getRunnable(){return(0,s.seq)((0,s.regex)(/^\*?!?&?(\/\w+\/)?[a-zA-Z_%$\?][\w%$\$\*]*$/),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.regex)(/^[\w%$\$\*]+$/))),(0,s.opt)(r.FieldLength),(0,s.opt)(i.TableBody))}}t.FieldSub=a},37260(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceFieldSymbolChain=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)(new o.ArrowOrDash,o.ComponentName);return(0,s.seq)(o.FieldSymbol,(0,s.starPrio)(e),(0,s.optPrio)(o.TableBody))}}t.SourceFieldSymbolChain=i},37436(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomDataBrowserObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CDBO"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.CustomDataBrowserObject=o},37518(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicalJobDefinition=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"JOBD"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.TechnicalJobDefinition=o},37613(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MSAGConsistency=t.MSAGConsistencyConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(86789);class a extends o.BasicRuleConfig{constructor(){super(...arguments),this.numericParameters=!0}}t.MSAGConsistencyConf=a,t.MSAGConsistency=class{constructor(){this.conf=new a}getMetadata(){return{key:"msag_consistency",title:"MSAG consistency check",shortDescription:"Checks the validity of messages in message classes",extendedInformation:"Message numbers must be 3 digits, message text must not be empty, no message number duplicates"}}getDescription(e){return"Message class invalid: "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){var t,n;const o=[];if(!(e instanceof i.MessageClass))return[];const a=new Set;for(const t of e.getMessages()){if(!t.getNumber().match(/\d\d\d/)){const n=this.getDescription("Message number must be 3 digits: message "+t.getNumber()),i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);o.push(a)}if(""===t.getMessage()){const n="Message text empty: message "+t.getNumber(),i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);o.push(a)}const n=t.getNumber();if(a.has(n)){const t="Duplicate message number "+n,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,t,this.getMetadata().key,this.conf.severity);o.push(a)}else a.add(n);if(!0===this.getConfig().numericParameters){const n=t.getPlaceholderCount();if(n>4){const n=`More than 4 placeholders in mesasge ${t.getNumber()}`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);o.push(a)}for(let i=1;i<=n;i++){const n="&"+i;if(!1===t.getMessage().includes(n)){const i=`Expected placeholder ${n} in message ${t.getNumber()}`,a=new r.Position(1,1),c=s.Issue.atPosition(e.getFiles()[0],a,i,this.getMetadata().key,this.conf.severity);o.push(c);break}}}if(t.getMessageClass()!==e.getName()){const n=`Message class "${t.getMessageClass()}" does not match filename "${e.getName()}" for message ${t.getNumber()}`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,n,this.getMetadata().key,this.conf.severity);o.push(a)}}if((null===(t=e.getParsed())||void 0===t?void 0:t.topName)!==e.getName()){const t=`Message class name "${null===(n=e.getParsed())||void 0===n?void 0:n.topName}" does not match filename "${e.getName()}"`,i=new r.Position(1,1),a=s.Issue.atPosition(e.getFiles()[0],i,t,this.getMetadata().key,this.conf.severity);o.push(a)}return o}}},37647(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassImplementation=void 0;const s=n(2416),o=n(20572),i=n(89301),r=n(15838),a=n(86789),c=n(56727),l=n(2403),d=n(82054);t.ClassImplementation=class{runSyntax(e,t){const n=new s.ObjectOriented(t.scope),u=n.findClassName(e);t.scope.push(l.ScopeType.ClassImplementation,u,e.getFirstToken().getStart(),t.filename);const p=t.scope.findClassDefinition(u);if(void 0===p){const n='Class definition for "'+u+'" not found';return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}const f=p.getTypeDefinitions();if(void 0!==f)for(const e of f.getAll())t.scope.addType(e.type);const g=t.scope.findClassDefinition(p.getSuperClass());g?t.scope.addIdentifier(new r.TypedIdentifier(new i.Identifier(new a.Position(1,1),"super"),c.BuiltIn.filename,new o.ObjectReferenceType(g))):t.scope.addIdentifier(new r.TypedIdentifier(new i.Identifier(new a.Position(1,1),"super"),c.BuiltIn.filename,o.VoidType.get("noSuperClass"))),t.scope.addIdentifier(new r.TypedIdentifier(new i.Identifier(new a.Position(1,1),"me"),c.BuiltIn.filename,new o.ObjectReferenceType(p))),n.addAliasedAttributes(p),n.addAliasedTypes(p);const h=p.getAttributes();if(void 0!==h){t.scope.addList(h.getConstants()),t.scope.addList(h.getStatic());for(const e of h.getInstance())t.scope.addExtraLikeType(e)}n.fromSuperClassesAndInterfaces(p)}}},37671(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldAssignment=void 0;const s=n(82245),o=n(20572),i=n(82054),r=n(93170);t.FieldAssignment=class{static runSyntax(e,t,n){const a=e.findDirectExpression(s.FieldSub);if(void 0===a){const n="FieldAssignment, FieldSub node not found";return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}const c=e.findDirectExpression(s.Source);if(void 0===c){const n="FieldAssignment, Source node not found";return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}let l;if(n instanceof o.StructureType){let s=n;for(const n of a.getChildren()){const r=n.concatTokens();if("-"!==r&&s instanceof o.StructureType&&(s=s.getComponentByName(r),void 0===s)){const n=`field ${r} does not exist in structure`;return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}}l=s}else n instanceof o.VoidType&&(l=n);r.Source.runSyntax(c,t,l)}}},37693(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowOrDash=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.tok)(o.InstanceArrow),(0,s.tok)(o.StaticArrow),(0,s.tok)(o.Dash))}}t.ArrowOrDash=i},37803(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTypeAndNumber=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[iweaxs]\d\d\d$/i)}}t.MessageTypeAndNumber=o},37909(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteInternal=void 0;const s=n(3125),o=n(82245);t.DeleteInternal=class{getMatcher(){const e=(0,s.seq)("INDEX",o.Source),t=(0,s.altPrio)(o.SimpleName,o.Dynamic),n=(0,s.seq)("USING KEY",t),i=(0,s.seq)("FROM",o.Source),r=(0,s.seq)((0,s.optPrio)(i),(0,s.optPrio)((0,s.seq)("TO",o.Source))),a=(0,s.seq)("WHERE",(0,s.alt)(o.ComponentCond,o.Dynamic)),c=(0,s.seq)("WITH TABLE KEY",(0,s.opt)((0,s.seq)(t,"COMPONENTS")),(0,s.plus)(o.ComponentCompare)),l=(0,s.seq)("TABLE",o.Target,(0,s.alt)((0,s.per)(e,n),(0,s.seq)((0,s.optPrio)(i),(0,s.optPrio)(n)),c)),d=(0,s.seq)(o.Target,(0,s.alt)((0,s.per)(e,n),r,c),(0,s.opt)(a)),u=(0,s.seq)(o.SimpleFieldChain2,(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength)),p=(0,s.seq)("ADJACENT DUPLICATES FROM",o.Target,(0,s.optPrio)(n),(0,s.opt)((0,s.seq)("COMPARING",(0,s.altPrio)("ALL FIELDS",(0,s.plus)((0,s.altPrio)(u,o.Dynamic))))),(0,s.optPrio)(n));return(0,s.seq)("DELETE",(0,s.alt)(l,p,d))}}},37920(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CatchSystemExceptions=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CatchSystemExceptions=class{getMatcher(){const e=(0,s.seq)("CATCH SYSTEM-EXCEPTIONS",(0,s.plus)((0,s.seq)(o.Field,"=",o.Source)));return(0,s.verNot)(i.Version.Cloud,e)}}},37944(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Get=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Get=class{getMatcher(){const e=(0,s.seq)("FIELDS",(0,s.plus)(o.Field)),t=(0,s.per)("LATE",e),n=(0,s.seq)("GET",o.Target,(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},37953(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhenOthersLast=t.WhenOthersLastConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(94967),c=n(86696);class l extends i.BasicRuleConfig{}t.WhenOthersLastConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"when_others_last",title:"WHEN OTHERS last",shortDescription:"Checks that WHEN OTHERS is placed the last within a CASE statement.",tags:[c.RuleTag.SingleFile],badExample:"CASE bar.\n  WHEN OTHERS.\n  WHEN 2.\nENDCASE.",goodExample:"CASE bar.\n  WHEN 2.\n  WHEN OTHERS.\nENDCASE."}}getMessage(){return"WHEN OTHERS should be the last branch in a CASE statement."}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];const o=n.findAllStructures(a.Case);for(const n of o){const o=n.findDirectStructures(a.When);for(let n=0;n<o.length-1;n++){const i=o[n].findDirectStatements(r.When).concat(o[n].findDirectStatements(r.WhenOthers));for(const n of i)if(n.get()instanceof r.WhenOthers){const o=n.getFirstToken().getStart(),i=s.Issue.atPosition(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(i)}}}return t}getConfig(){return this.conf}setConfig(e){this.conf=e}}t.WhenOthersLast=d},37971(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WithLoop=void 0;const s=n(3125),o=n(49028),i=n(89301),r=n(82245);t.WithLoop=class{getMatcher(){const e=(0,s.seq)(r.WithName,"AS",(0,s.tok)(i.WParenLeftW),r.SelectLoop,(0,s.tok)(i.WParenRightW));return(0,s.ver)(o.Version.v751,(0,s.seq)("WITH",(0,s.plus)(e),r.SelectLoop))}}},38038(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetTitlebar=void 0;const s=n(82245),o=n(93170);t.SetTitlebar=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},38075(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Module=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Module=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Module),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndModule))}}},38078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableType=void 0;const s=n(80300),o=n(20572),i=n(5518),r=n(20572),a=n(86219);class c extends s.AbstractObject{constructor(){super(...arguments),this.parsedXML=void 0}getType(){return"TTYP"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.ddtext}getRowType(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.rowtype}setDirty(){this.parsedXML=void 0,super.setDirty()}buildPrimaryKey(){var e,t,n,s,o;const i={isUnique:"U"===(null===(e=this.parsedXML)||void 0===e?void 0:e.keykind),type:r.TableAccessType.standard,keyFields:[],name:"primary_key"};"S"===(null===(t=this.parsedXML)||void 0===t?void 0:t.accessmode)?i.type=r.TableAccessType.sorted:"H"===(null===(n=this.parsedXML)||void 0===n?void 0:n.accessmode)&&(i.type=r.TableAccessType.hashed);for(const e of(null===(s=this.parsedXML)||void 0===s?void 0:s.dd42v)||[])""===e.keyname&&i.keyFields.push(e.keyfield);return"T"===(null===(o=this.parsedXML)||void 0===o?void 0:o.keydef)&&0===i.keyFields.length&&i.keyFields.push("table_line"),i}buildTableOptions(){var e,t,n,s;let i=o.TableKeyType.user;"D"===(null===(e=this.parsedXML)||void 0===e?void 0:e.keydef)&&(i=o.TableKeyType.default);const a={withHeader:!1,keyType:i,primaryKey:this.buildPrimaryKey(),secondary:[]};for(const e of(null===(t=this.parsedXML)||void 0===t?void 0:t.dd43v)||[]){const t=[];for(const s of(null===(n=this.parsedXML)||void 0===n?void 0:n.dd42v)||[])s.keyname===e.keyname&&t.push(s.keyfield);let o=r.TableAccessType.standard;switch(e.accessmode){case"S":o=r.TableAccessType.sorted;break;case"H":o=r.TableAccessType.hashed}null===(s=a.secondary)||void 0===s||s.push({name:e.keyname,type:o,keyFields:t,isUnique:e.unique})}return a}parseType(e){this.parseXML();const t=new i.DDIC(e),n=[];let s;const a=this.buildTableOptions();if(void 0===this.parsedXML)s=new o.UnknownType("Table Type, parser error",this.getName());else if("S"===this.parsedXML.rowkind){const e=t.lookupTableOrView(this.parsedXML.rowtype);s=new o.TableType(e.type,a,this.getName(),this.getDescription()),e.object&&n.push({object:e.object})}else if("E"===this.parsedXML.rowkind){const e=t.lookupDataElement(this.parsedXML.rowtype);s=new o.TableType(e.type,a,this.getName(),this.getDescription()),e.object&&n.push({object:e.object})}else if("L"===this.parsedXML.rowkind){const e=t.lookupTableType(this.parsedXML.rowtype);s=new o.TableType(e.type,a,this.getName(),this.getDescription()),e.object&&n.push({object:e.object})}else if("R"===this.parsedXML.rowkind&&"OBJECT"===this.parsedXML.rowtype)s=new o.TableType(new r.GenericObjectReferenceType,a,this.getName(),this.getDescription());else if("R"===this.parsedXML.rowkind&&"DATA"===this.parsedXML.rowtype)s=new o.TableType(new r.DataReference(new o.DataType),a,this.getName(),this.getDescription());else if("R"===this.parsedXML.rowkind&&void 0!==this.parsedXML.rowtype){const e=t.lookupObject(this.parsedXML.rowtype);s=new o.TableType(e.type,a,this.getName(),this.getDescription()),e.object&&n.push({object:e.object})}else if(""===this.parsedXML.rowkind)if(void 0===this.parsedXML.datatype)s=new o.UnknownType("Table Type, empty DATATYPE"+this.getName(),this.getName());else{const e=t.textToType({text:this.parsedXML.datatype,length:this.parsedXML.leng,decimals:this.parsedXML.decimals,infoText:this.getName()});s=new o.TableType(e,a,this.getName(),this.getDescription())}else s=new o.UnknownType('Table Type, unknown kind "'+this.parsedXML.rowkind+'"'+this.getName(),this.getName());return e.getDDICReferences().setUsing(this,n),s}parseXML(){var e,t;if(void 0!==this.parsedXML)return;this.parsedXML={dd42v:[],dd43v:[]};const n=super.parseRaw2();if(void 0===n||void 0===n.abapGit)return;const s=n.abapGit["asx:abap"]["asx:values"];if(void 0===s)return;const o=s.DD40V;this.parsedXML.rowtype=o.ROWTYPE?o.ROWTYPE:"",this.parsedXML.rowkind=o.ROWKIND?o.ROWKIND:"",this.parsedXML.datatype=o.DATATYPE,this.parsedXML.leng=o.LENG,this.parsedXML.decimals=o.DECIMALS,this.parsedXML.accessmode=o.ACCESSMODE,this.parsedXML.keykind=o.KEYKIND,this.parsedXML.ddtext=o.DDTEXT,this.parsedXML.keydef=o.KEYDEF;for(const t of(0,a.xmlToArray)(null===(e=s.DD42V)||void 0===e?void 0:e.DD42V))this.parsedXML.dd42v.push({keyname:t.SECKEYNAME||"",keyfield:t.KEYFIELD||""});for(const e of(0,a.xmlToArray)(null===(t=s.DD43V)||void 0===t?void 0:t.DD43V))this.parsedXML.dd43v.push({keyname:e.SECKEYNAME||"",accessmode:e.ACCESSMODE||"",kind:e.KIND||"",unique:"X"===e.SECKEYUNIQUE})}}t.TableType=c},38142(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseType=void 0;const s=n(50612),o=n(58720),i=n(31346);t.CaseType=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.CaseType),(0,o.star)((0,o.alt)((0,o.sub)(i.WhenType),(0,o.sta)(s.Data))),(0,o.sta)(s.EndCase))}}},38248(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PageFormat=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SPPF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.PageFormat=o},38273(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancementSection=void 0;const s=n(50612),o=n(58720),i=n(79175);t.EnhancementSection=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.EnhancementSection),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndEnhancementSection))}}},38278(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Compare=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.altPrio)(o.FieldSub,o.Constant),t=(0,s.seq)((0,s.tok)(i.WParenLeft),e,(0,s.plus)((0,s.seq)(",",e)),(0,s.tok)(i.ParenRightW)),n=(0,s.seq)((0,s.optPrio)("NOT"),"IN",(0,s.altPrio)(o.Source,t)),a=(0,s.seq)("IS",(0,s.optPrio)("NOT"),(0,s.altPrio)("SUPPLIED","BOUND",(0,s.ver)(r.Version.v750,(0,s.seq)("INSTANCE OF",o.ClassName),r.Version.OpenABAP),"REQUESTED","INITIAL")),c=(0,s.seq)((0,s.optPrio)("NOT"),"BETWEEN",o.Source,"AND",o.Source),l=(0,s.ver)(r.Version.v740sp08,o.MethodCallChain,r.Version.OpenABAP),d=(0,s.seq)(o.Source,(0,s.altPrio)((0,s.seq)(o.CompareOperator,o.Source),n,c,a)),u=(0,s.seq)(o.SourceFieldSymbolChain,"IS",(0,s.optPrio)("NOT"),"ASSIGNED");return(0,s.seq)((0,s.opt)("NOT"),(0,s.altPrio)(d,l,u))}}t.Compare=a},38322(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemCall=void 0;const s=n(3125),o=n(49028),i=n(83568),r=n(57468);t.SystemCall=class{getMatcher(){const e=(0,s.regex)(/^.+$/),t=(0,s.seq)("OBJMGR CLONE",i.Source,"TO",r.Target),n=(0,s.seq)(e,"DID",i.Source,"PARAMETERS",(0,s.plus)(i.Source)),a=(0,s.seq)("SYSTEM-CALL",(0,s.altPrio)(t,n,(0,s.plus)(e)));return(0,s.verNot)(o.Version.Cloud,a)}}},38461(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterT=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)(o.ParameterName,"=",o.Target)}}t.ParameterT=i},38496(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArtifactsObjects=void 0;const s=n(84383),o=n(17830);t.ArtifactsObjects=class{static newObject(e,t){return void 0===this.objectMap&&this.buildObjectMap(),void 0===t||void 0===this.objectMap[t]?new o.UnknownObject(e,t):new this.objectMap[t](e)}static buildObjectMap(){this.objectMap=[];const e=s;for(const t in s)if("function"==typeof e[t]){const n=new e[t]("DUMMY_NAME");this.objectMap[n.getType()]=e[t]}}}},38506(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Renamer=void 0;const s=n(46203),o=n(67718),i=n(9466),r=n(2425),a=n(29433),c=n(76230),l=n(21417),d=n(12624),u=n(95429),p=n(56283);t.Renamer=class{constructor(e){this.reg=e}rename(e,t,n){const s=this.buildEdits(e,t,n);if(void 0===s)throw new Error("no changes could be determined");if(s.changes)throw new Error("only documentChanges expected");const o=this.apply(s);return this.reg.findIssues(),o}buildEdits(e,t,n){this.reg.parse();let s=this.reg.getObject(e,t);if(void 0===s&&"SICF"===e&&(s=Array.from(this.reg.getObjects()).find((e=>"SICF"===e.getType()&&e.getName().toUpperCase().startsWith(t.toUpperCase()+" ")))),void 0===s)throw new Error("rename, object not found");if(n.length>s.getAllowedNaming().maxLength)throw new Error("Name not allowed");return this.factory(e).buildEdits(s,t.toUpperCase(),n)}factory(e){switch(e){case"CLAS":return new a.RenameGlobalClass(this.reg);case"DTEL":return new i.RenameDataElement(this.reg);case"DOMA":return new r.RenameDomain(this.reg);case"TABL":return new l.RenameTable(this.reg);case"TTYP":return new d.RenameTableType(this.reg);case"INTF":return new c.RenameGlobalInterface(this.reg);case"MSAG":return new u.RenameMessageClass(this.reg);case"SICF":return new p.RenameICFService(this.reg);default:throw new Error("Renaming of "+e+" not yet supported")}}apply(e){const t=[],n={addedFiles:new Set,deletedFiles:new Set,updatedFiles:new Set};for(const o of e.documentChanges||[])if(s.TextDocumentEdit.is(o))this.applyEdit(o),n.updatedFiles.add(o.textDocument.uri);else{if(!s.RenameFile.is(o))throw new Error("unexpected documentChange type");t.push(o)}for(const e of t)n.updatedFiles.delete(e.oldUri),n.deletedFiles.add(e.oldUri),n.addedFiles.add(e.newUri);return this.applyRenames(t),n}applyEdit(e){const t=this.reg.getFileByName(e.textDocument.uri);if(void 0===t)throw new Error("file "+e.textDocument.uri+" not found");const n=t.getRawRows();for(const t of e.edits){if(t.range.start.line!==t.range.end.line)throw new Error("applyEdit, start and end line differ");const e=n[t.range.start.line];n[t.range.start.line]=e.substring(0,t.range.start.character)+t.newText+e.substring(t.range.end.character)}const s=new o.MemoryFile(e.textDocument.uri,n.join("\n"));this.reg.updateFile(s)}applyRenames(e){for(const t of e){const e=this.reg.getFileByName(t.oldUri);if(void 0===e)throw new Error("applyRenames, old not found");const n=new o.MemoryFile(t.newUri,e.getRaw());this.reg.removeFile(e),this.reg.addFile(n)}}}},38557(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WriteOffsetLength=void 0;const s=n(3125),o=n(89301),i=n(71710);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.alt)(i.SimpleFieldChain2,(0,s.regex)(/^[\d]+$/),(0,s.regex)(/^\*$/)),(0,s.alt)((0,s.tok)(o.ParenRightW),(0,s.tok)(o.ParenRight))),t=(0,s.seq)((0,s.tok)(o.WParenLeft),e),n=(0,s.seq)((0,s.alt)((0,s.tok)(o.WParenLeft),(0,s.tok)(o.ParenLeft)),e),r=(0,s.alt)(t,(0,s.seq)((0,s.alt)(i.SimpleFieldChain2,(0,s.regex)(/^\/?[\w\d]+$/),"/"),(0,s.opt)(n)));return(0,s.seq)((0,s.opt)("AT"),r)}}t.WriteOffsetLength=r},38562(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WParenRightW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ) "}}t.WParenRightW=o},38620(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SAPScript=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"FORM"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.SAPScript=o},38654(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticEnd=void 0;const s=n(3125),o=n(82245);t.StaticEnd=class{getMatcher(){return(0,s.seq)((0,s.alt)("STATIC","STATICS"),"END OF",o.DefinitionName)}}},38745(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Receive=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Receive=class{getMatcher(){const e=(0,s.seq)("RECEIVE RESULTS FROM FUNCTION",o.FunctionName,(0,s.opt)("KEEPING TASK"),o.ReceiveParameters);return(0,s.verNot)(i.Version.Cloud,e)}}},38788(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AssertError=void 0;class n extends Error{}t.AssertError=n},38849(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(93170),a=n(9646),c=n(59853);t.Message=class{runSyntax(e,t){const n=e.findExpressionAfterToken("INTO"),l=null==n?void 0:n.findDirectExpression(s.InlineData);l?o.InlineData.runSyntax(l,t,i.StringType.get()):n&&a.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.MessageSourceSource)){for(const e of n.findDirectExpressions(s.Source))r.Source.runSyntax(e,t);for(const e of n.findDirectExpressions(s.SimpleSource3))r.Source.runSyntax(e,t)}for(const n of e.findDirectExpressions(s.Source))r.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleSource3))r.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.MessageSource))c.MessageSource.runSyntax(n,t)}}},38931(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TruncateDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TruncateDataset=class{getMatcher(){return(0,s.verNot)(i.Version.Cloud,(0,s.seq)("TRUNCATE DATASET",o.Source,"AT CURRENT POSITION"))}}},38955(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormTables=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("TABLES",(0,s.plus)(o.FormParam))}}t.FormTables=i},39005(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDataBegin=void 0;const s=n(3125),o=n(82245);t.ClassDataBegin=class{getMatcher(){const e=(0,s.seq)("OCCURS",o.Integer),t=(0,s.seq)("BEGIN OF",(0,s.optPrio)("COMMON PART"),o.NamespaceSimpleName,(0,s.optPrio)("READ-ONLY"),(0,s.optPrio)(e));return(0,s.seq)("CLASS-DATA",t)}}},39093(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyLine=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ModifyLine=class{getMatcher(){const e=(0,s.alt)("ON","OFF"),t=(0,s.seq)("=",o.Source),n=(0,s.seq)((0,s.alt)("INVERSE","INPUT","COLOR","HOTSPOT"),(0,s.opt)((0,s.alt)(t,e))),r=(0,s.seq)("FROM",o.Source),a=(0,s.seq)("FIELD VALUE",(0,s.plus)((0,s.seq)(o.Source,(0,s.optPrio)(r)))),c=(0,s.seq)("FIELD FORMAT",o.Source,(0,s.opt)(n)),l=(0,s.seq)("LINE VALUE FROM",o.Source),d=(0,s.seq)("INDEX",o.Source),u=(0,s.seq)("OF PAGE",o.Source),p=(0,s.str)("OF CURRENT PAGE"),f=(0,s.seq)("INTENSIFIED",e),g=(0,s.seq)("INTENSIFIED",(0,s.opt)(e)),h=(0,s.seq)("LINE FORMAT",(0,s.per)("INPUT OFF","INVERSE","RESET",g,o.Color)),T=(0,s.per)(d,a,c,u,h,l,p,f,o.Color),m=(0,s.seq)("MODIFY",(0,s.altPrio)("CURRENT LINE",(0,s.seq)("LINE",o.Source)),(0,s.opt)(T));return(0,s.verNot)(i.Version.Cloud,m)}}},39113(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetHandler=void 0;const s=n(82245),o=n(93170),i=n(69328);t.SetHandler=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.MethodSource))i.MethodSource.runSyntax(n,t)}}},39119(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessBeforeOutput=void 0;const s=n(3125),o=n(49028);t.ProcessBeforeOutput=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"PROCESS BEFORE OUTPUT")}}},39159(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserMissingSpace=t.ParserMissingSpaceConf=void 0;const s=n(82245),o=n(71759),i=n(86789),r=n(99732),a=n(75457),c=n(77465),l=n(86696);class d extends c.BasicRuleConfig{}t.ParserMissingSpaceConf=d;class u extends r.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"parser_missing_space",title:"Parser Error, missing space",shortDescription:"In special cases the ABAP language allows for not having spaces before or after string literals.\nThis rule makes sure the spaces are consistently required across the language.",tags:[l.RuleTag.Syntax,l.RuleTag.Whitespace,l.RuleTag.SingleFile],badExample:"IF ( foo = 'bar').",goodExample:"IF ( foo = 'bar' )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=new i.Position(0,0);for(const s of e.getStatements()){const i=this.missingSpace(s);if(i){const s="Missing space between string or character literal and parentheses";n=i;const r=o.Issue.atPosition(e,n,s,this.getMetadata().key,this.conf.severity);t.push(r)}}return t}missingSpace(e){const t=e.findAllExpressionsMulti([s.CondSub,s.SQLCond,s.ValueBodyLine,s.NewObject,s.Cond,s.ComponentCond,s.Source,s.ComponentCondSub,s.MethodCallParam],!0);let n;for(const e of t){const t=e.get();if(t instanceof s.Cond?n=this.checkCond(e):t instanceof s.Source?n=this.checkSource(e):t instanceof s.CondSub?n=this.checkCondSub(e):t instanceof s.ComponentCond?n=this.checkComponentCond(e):t instanceof s.ComponentCondSub?n=this.checkComponentCondSub(e):t instanceof s.SQLCond?n=this.checkSQLCond(e):t instanceof s.ValueBodyLine?n=this.checkValueBodyLine(e):t instanceof s.NewObject?n=this.checkNewObject(e):t instanceof s.MethodCallParam&&(n=this.checkMethodCallParam(e)),n)return n}}checkSQLCond(e){const t=e.getChildren();for(let e=0;e<t.length;e++)if(t[e].get()instanceof s.SQLCond){const n=t[e],s=t[e-1].getLastToken(),o=t[e+1].getFirstToken();if("("===s.getStr()&&s.getRow()===n.getFirstToken().getRow()&&s.getCol()+1===n.getFirstToken().getStart().getCol())return n.getFirstToken().getStart();if(")"===o.getStr()&&o.getRow()===n.getLastToken().getRow()&&o.getCol()===n.getLastToken().getEnd().getCol())return n.getLastToken().getEnd()}}checkNewObject(e){const t=e.getChildren();{const e=t[t.length-2].getLastToken(),n=t[t.length-1].getFirstToken();if(e.getRow()===n.getRow()&&e.getEnd().getCol()===n.getStart().getCol())return n.getStart()}}checkCondSub(e){const t=e.getChildren();for(let e=0;e<t.length;e++)if(t[e].get()instanceof s.Cond){const n=t[e],s=t[e-1].getLastToken(),o=t[e+1].getFirstToken();if("("===s.getStr()&&s.getRow()===n.getFirstToken().getRow()&&s.getCol()+1===n.getFirstToken().getStart().getCol())return n.getFirstToken().getStart();if(")"===o.getStr()&&o.getRow()===n.getLastToken().getRow()&&o.getCol()===n.getLastToken().getEnd().getCol())return n.getLastToken().getEnd()}}checkComponentCondSub(e){const t=e.getChildren();for(let e=0;e<t.length;e++)if(t[e].get()instanceof s.ComponentCond){const n=t[e],s=t[e-1].getLastToken(),o=t[e+1].getFirstToken();if("("===s.getStr()&&s.getRow()===n.getFirstToken().getRow()&&s.getCol()+1===n.getFirstToken().getStart().getCol())return n.getFirstToken().getStart();if(")"===o.getStr()&&o.getRow()===n.getLastToken().getRow()&&o.getCol()===n.getLastToken().getEnd().getCol())return n.getLastToken().getEnd()}}checkComponentCond(e){const t=e.getAllTokens();for(let e=0;e<t.length-1;e++){const n=t[e],s=t[e+1];if(s.getStr().startsWith("'")&&s.getRow()===n.getRow()&&s.getCol()===n.getEnd().getCol())return n.getEnd()}}checkValueBodyLine(e){var t,n;const s=e.getChildren();for(let e=0;e<s.length;e++){const o=s[e];if(o instanceof a.TokenNode){const i=null===(t=s[e-1])||void 0===t?void 0:t.getLastToken(),r=null===(n=s[e+1])||void 0===n?void 0:n.getFirstToken();if("("===o.getFirstToken().getStr()&&r&&r.getRow()===o.getLastToken().getRow()&&r.getCol()===o.getLastToken().getEnd().getCol())return o.getFirstToken().getStart();if(")"===o.getFirstToken().getStr()&&i&&i.getRow()===o.getFirstToken().getRow()&&i.getEnd().getCol()===o.getFirstToken().getStart().getCol())return o.getLastToken().getEnd()}}}checkCond(e){const t=e.getAllTokens(),n=e.findAllExpressions(s.Dynamic);for(let e=0;e<t.length-1;e++){const s=t[e],o=t[e+1];if(o.getStr().startsWith("'")&&o.getRow()===s.getRow()&&o.getCol()===s.getEnd().getCol()){let e=!1;e:for(const t of n)for(const n of t.getAllTokens())if(n===o||n===s){e=!0;break e}if(!1===e)return s.getEnd()}}}checkSource(e){var t,n;const s=e.getAllTokens();if(!(s.length<2)){if(s.length>=4&&"CONV"===s[0].getStr().toUpperCase()){const s=e.getChildren(),o=null===(t=s[2])||void 0===t?void 0:t.getLastToken(),i=null===(n=s[3])||void 0===n?void 0:n.getFirstToken();if(o&&"("===o.getStr()&&i&&o.getRow()===i.getRow()&&o.getCol()+1===i.getStart().getCol())return i.getStart()}{const e=s[s.length-2],t=s[s.length-1];if(e.getStr().startsWith("'")&&e.getRow()===t.getRow()&&e.getEnd().getCol()===t.getStart().getCol())return t.getEnd()}}}checkMethodCallParam(e){const t=e.getChildren();{const e=t[0].getFirstToken(),n=t[1].getFirstToken();if(e.getRow()===n.getRow()&&e.getCol()+1===n.getStart().getCol())return n.getStart()}{const e=t[t.length-2].getLastToken(),n=t[t.length-1].getFirstToken();if(e.getRow()===n.getRow()&&e.getEnd().getCol()===n.getStart().getCol())return n.getStart()}}}t.ParserMissingSpace=u},39160(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeTableKey=void 0;const s=n(82245),o=n(20572);t.TypeTableKey=class{static runSyntax(e,t){if(t instanceof o.TableType){const n=t.getRowType();if(n instanceof o.StructureType)for(const t of e.findAllExpressions(s.FieldSub)){const e=t.concatTokens().replace(/^!/,"");if(!1===e.includes("-")&&void 0===n.getComponentByName(e)&&"TABLE_LINE"!==e.toUpperCase())return new o.UnknownType(`Field ${e} not part of structure`)}}}}},39504(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndEnhancementSection=void 0;const s=n(3125),o=n(49028);t.EndEnhancementSection=class{getMatcher(){const e=(0,s.str)("END-ENHANCEMENT-SECTION");return(0,s.verNot)(o.Version.Cloud,e)}}},39616(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WInstanceArrowW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" -> "}}t.WInstanceArrowW=o},39620(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Report=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301);t.Report=class{getMatcher(){const e=(0,s.seq)((0,s.tok)(r.ParenLeft),o.Integer,(0,s.tok)(r.ParenRightW)),t=(0,s.str)("NO STANDARD PAGE HEADING"),n=(0,s.seq)("LINE-SIZE",o.Integer),a=(0,s.seq)("LINE-COUNT",o.Integer,(0,s.opt)(e)),c=(0,s.seq)("MESSAGE-ID",o.MessageClass),l=(0,s.seq)("USING DATABASE",o.Field),d=(0,s.seq)("REPORT",(0,s.opt)(o.ReportName),(0,s.opt)((0,s.per)(t,n,a,l,c)));return(0,s.verNot)(i.Version.Cloud,d)}}},39628(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLHints=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.altPrio)("ORACLE","ADABAS","AS400","DB2","HDB","MSSQLNT","SYBASE","DB6","INFORMIX");return(0,s.seq)("%_HINTS",(0,s.plus)((0,s.seq)(e,(0,s.alt)(o.Constant,o.FieldSub))))}}t.SQLHints=i},39632(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StrictSQL=t.StrictSQLConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(49028),l=n(86696),d=n(71249);class u extends a.BasicRuleConfig{}t.StrictSQLConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"strict_sql",title:"Strict SQL",shortDescription:"Strict SQL",extendedInformation:"https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapinto_clause.htm\n\nhttps://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abenopensql_strict_mode_750.htm\n\nAlso see separate rule sql_escape_host_variables\n\nActivates from v750 and up",tags:[l.RuleTag.Upport,l.RuleTag.Quickfix],badExample:"SELECT * FROM ztabl INTO TABLE @rt_content WHERE type = @iv_type ORDER BY PRIMARY KEY.",goodExample:"SELECT * FROM ztabl WHERE type = @iv_type ORDER BY PRIMARY KEY INTO TABLE @rt_content."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],r=t.getType();if("INTF"===r||"TYPE"===r)return[];if(this.reg.getConfig().getVersion()<c.Version.v750&&this.reg.getConfig().getVersion()!==c.Version.Cloud)return[];for(const t of e.getStatements())if(t.get()instanceof s.Select||t.get()instanceof s.SelectLoop){const s=t.findDirectExpression(o.Select),r=null==s?void 0:s.findDirectExpression(o.SQLCond),a=null==s?void 0:s.findDirectExpression(o.SQLOrderBy),c=(null==s?void 0:s.findDirectExpression(o.SQLIntoStructure))||(null==s?void 0:s.findDirectExpression(o.SQLIntoList))||(null==s?void 0:s.findDirectExpression(o.SQLIntoTable));if(void 0===c||void 0===r)continue;if(r.getFirstToken().getStart().isBefore(c.getFirstToken().getStart()))continue;const l=d.EditHelper.deleteRange(e,c.getFirstToken().getStart(),c.getLastToken().getEnd());let u=r.getLastToken();a&&a.getLastToken().getEnd().isAfter(u.getEnd())&&(u=a.getLastToken());const p=d.EditHelper.insertAt(e,u.getEnd()," "+c.concatTokens()),f=d.EditHelper.merge(p,l),g="INTO/APPENDING must be last in strict SQL",h=i.Issue.atToken(e,t.getFirstToken(),g,this.getMetadata().key,this.conf.severity,f);n.push(h)}return n}}t.StrictSQL=p},39665(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.regex)(/^!?[\w%$\*\/\?<>]+$/),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.optPrio)((0,s.regex)(/^\w+$/)))),(0,s.optPrio)((0,s.tok)(o.DashW)))}}t.FormName=i},39668(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.With=void 0;const s=n(82245),o=n(63171),i=n(56348);t.With=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Select))o.Select.runSyntax(n,t);for(const n of e.findAllExpressions(s.SelectLoop))i.SelectLoop.runSyntax(n,t)}}},39689(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Define=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Define=class{getMatcher(){const e=(0,s.seq)("DEFINE",o.MacroName);return(0,s.verNot)(i.Version.Cloud,e)}}},39754(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("FOR EVENT",o.EventName,"OF",o.ClassName,(0,s.optPrio)((0,s.seq)("IMPORTING",(0,s.plusPrio)(o.MethodParamName))))}}t.EventHandler=i},39877(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TABLEnhancementCategory=t.TABLEnhancementCategoryConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(86789);class a extends o.BasicRuleConfig{}t.TABLEnhancementCategoryConf=a,t.TABLEnhancementCategory=class{constructor(){this.conf=new a}getMetadata(){return{key:"tabl_enhancement_category",title:"TABL enhancement category must be set",shortDescription:"Checks that tables do not have the enhancement category 'not classified'.",extendedInformation:"SAP note 3063227 changes the default to 'Cannot be enhanced'.\n\nYou may use standard report RS_DDIC_CLASSIFICATION_FINAL for adjustment.",tags:[]}}getDescription(e){return"TABL enhancement category not classified in "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){if(!(e instanceof i.Table))return[];if(e.getEnhancementCategory()===i.EnhancementCategory.NotClassified){const t=new r.Position(1,1);return[s.Issue.atPosition(e.getFiles()[0],t,this.getDescription(e.getName()),this.getMetadata().key,this.conf.severity)]}return[]}}},39898(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSubrc=t.CheckSubrcConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(77465),a=n(99732),c=n(86696),l=n(52024),d=n(71249);class u extends r.BasicRuleConfig{constructor(){super(...arguments),this.openDataset=!0,this.authorityCheck=!0,this.selectSingle=!0,this.selectTable=!0,this.updateDatabase=!0,this.insertDatabase=!0,this.modifyDatabase=!0,this.deleteDatabase=!0,this.readTable=!0,this.assign=!0,this.find=!0}}t.CheckSubrcConf=u;class p extends a.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"check_subrc",title:"Check sy-subrc",shortDescription:"Check sy-subrc",extendedInformation:'Pseudo comment "#EC CI_SUBRC can be added to suppress findings\n\nIf sy-dbcnt is checked after database statements, it is considered okay.\n\n"SELECT SINGLE @abap_true FROM " is considered as an existence check, also "SELECT COUNT( * )" is considered okay\n\nIf IS ASSIGNED is checked after assigning, it is considered okay.\n\nFIND statement with MATCH COUNT is considered okay if subrc is not checked',tags:[c.RuleTag.SingleFile,c.RuleTag.Quickfix],pseudoComment:"EC CI_SUBRC",pragma:"##SUBRC_OK"}}getConfig(){return this.conf}setConfig(e){this.conf=e}buildFix(e,t){return{description:"Add ##SUBRC_OK",edit:d.EditHelper.insertAt(e,t.getLastToken().getStart()," ##SUBRC_OK")}}runParsed(e){const t=[],n=e.getStatements(),o="Check sy-subrc",r=this.getConfig();for(let a=0;a<n.length;a++){const c=n[a];if(!c.getPragmas().some((e=>e.getStr()===this.getMetadata().pragma)))if(!0===r.openDataset&&c.get()instanceof s.OpenDataset&&!1===this.isChecked(a,n))t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity));else if(!0===r.authorityCheck&&c.get()instanceof s.AuthorityCheck&&!1===this.isChecked(a,n))t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity));else if(!0===r.selectSingle&&c.get()instanceof s.Select&&c.concatTokens().toUpperCase().startsWith("SELECT SINGLE ")&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){if(c.concatTokens().toUpperCase().startsWith("SELECT SINGLE @ABAP_TRUE FROM "))continue;const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.selectTable&&c.get()instanceof s.Select&&!1===c.concatTokens().toUpperCase().startsWith("SELECT SINGLE ")&&!1===c.concatTokens().toUpperCase().startsWith("SELECT COUNT( * ) ")&&!1===c.concatTokens().toUpperCase().startsWith("SELECT COUNT(*) ")&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.updateDatabase&&c.get()instanceof s.UpdateDatabase&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.deleteDatabase&&c.get()instanceof s.DeleteDatabase&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.insertDatabase&&c.get()instanceof s.InsertDatabase&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.modifyDatabase&&c.get()instanceof s.ModifyDatabase&&!1===this.isChecked(a,n)&&!1===this.checksDbcnt(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.readTable&&c.get()instanceof s.ReadTable&&!1===this.isChecked(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.assign&&c.get()instanceof s.Assign&&!1===this.isSimpleAssign(c)&&!1===this.isChecked(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}else if(!0===r.find&&c.get()instanceof s.Find&&!1===this.isExemptedFind(c)&&!1===this.isChecked(a,n)){const n=this.buildFix(e,c);t.push(i.Issue.atStatement(e,c,o,this.getMetadata().key,this.conf.severity,void 0,[n]))}}return t}isSimpleAssign(e){if(5===e.getChildren().length){const t=e.findDirectExpression(o.AssignSource);if(1===(null==t?void 0:t.getChildren().length)&&void 0!==t.findDirectExpression(o.Source))return!0}return!1}isExemptedFind(e){return!0===e.concatTokens().toUpperCase().includes(" MATCH COUNT ")}checksDbcnt(e,t){for(let n=e+1;n<t.length;n++){const e=t[n],o=e.concatTokens().toUpperCase();if(!(e.get()instanceof l.Comment||e.get()instanceof s.EndIf||e.get()instanceof s.EndTestSeam))return o.includes("SY-DBCNT")}return!1}isChecked(e,t){var n,i;let r,a;if(t[e].get()instanceof s.Assign||t[e].get()instanceof s.ReadTable){const s=null===(i=null===(n=t[e].findFirstExpression(o.FSTarget))||void 0===n?void 0:n.findFirstExpression(o.FieldSymbol))||void 0===i?void 0:i.getFirstToken().getStr();r=(null==s?void 0:s.toUpperCase())+" IS ASSIGNED",a=(null==s?void 0:s.toUpperCase())+" IS NOT ASSIGNED"}for(let n=e+1;n<t.length;n++){const e=t[n],o=e.concatTokens().toUpperCase();if(!(e.get()instanceof l.Comment)){if(e.get()instanceof s.EndIf||e.get()instanceof s.EndTestSeam)continue;return!(!r||!o.includes(r))||!(!a||!o.includes(a))||o.includes(" SY-SUBRC")||o.includes("CL_ABAP_UNIT_ASSERT=>ASSERT_SUBRC")}if(o.includes(""+this.getMetadata().pseudoComment))return!0}return!1}}t.CheckSubrc=p},39901(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectSingleFullKey=t.SelectSingleFullKeyConf=void 0;const s=n(12620),o=n(77465),i=n(71249),r=n(86696),a=n(71759),c=n(52424),l=n(82245),d=n(50612),u=n(52024);class p extends o.BasicRuleConfig{constructor(){super(...arguments),this.allowPseudo=!0}}t.SelectSingleFullKeyConf=p,t.SelectSingleFullKey=class{constructor(){this.conf=new p}getMetadata(){return{key:"select_single_full_key",title:"Detect SELECT SINGLE which are possibily not unique",shortDescription:"Detect SELECT SINGLE which are possibily not unique",extendedInformation:"Table definitions must be known, ie. inside the errorNamespace\n\nIf the statement contains a JOIN it is not checked",pseudoComment:"EC CI_NOORDER",tags:[r.RuleTag.Quickfix]}}initialize(e){return this.reg=e,this}getConfig(){return void 0===this.conf&&(this.conf={allowPseudo:!0}),void 0===this.conf.allowPseudo&&(this.conf.allowPseudo=!0),this.conf}setConfig(e){this.conf=e}buildFix(e,t){return{description:'Add "#EC CI_NOORDER',edit:i.EditHelper.insertAt(e,t.getLastToken().getStart(),' "#EC CI_NOORDER')}}run(e){var t,n;if(!(e instanceof s.ABAPObject))return[];const o=new c.SyntaxLogic(this.reg,e).run();if(o.issues.length>0)return[];const i=[];for(const s of e.getABAPFiles()){const e=s.getStatements();for(let r=0;r<e.length;r++){const c=e[r];if(!(c.get()instanceof d.Select))continue;if(c.findFirstExpression(l.SQLJoin))continue;if(void 0===c.findTokenSequencePosition("SELECT","SINGLE"))continue;const p=c.findFirstExpression(l.DatabaseTable);if(void 0===p)continue;const f=e[r+1];if((null==f?void 0:f.get())instanceof u.Comment&&f.concatTokens().includes(this.getMetadata().pseudoComment+"")){!0!==this.getConfig().allowPseudo&&i.push(a.Issue.atStatement(s,c,"Pseudo comment not allowed",this.getMetadata().key,this.getConfig().severity));continue}const g=this.findReference(p.getFirstToken().getStart(),o.spaghetti,s),h=this.reg.getObject("TABL",g);if(void 0===h)continue;const T=h.listKeys(this.reg),m=c.findFirstExpression(l.SQLCond),y=new Set;for(const e of T)"MANDT"!==e&&y.add(e);for(const e of(null==m?void 0:m.findAllExpressionsRecursive(l.SQLCompare))||[])if(3===e.getChildren().length){const s=null===(t=e.findDirectExpression(l.SQLFieldName))||void 0===t?void 0:t.concatTokens().toUpperCase(),o=null===(n=e.findDirectExpression(l.SQLCompareOperator))||void 0===n?void 0:n.concatTokens().toUpperCase();!s||"="!==o&&"EQ"!==o||y.delete(s)}if(y.size>0){const e=this.buildFix(s,c);i.push(a.Issue.atStatement(s,c,"SELECT SINGLE possibily not unique",this.getMetadata().key,this.getConfig().severity,void 0,[e]))}}}return i}findReference(e,t,n){const s=t.lookupPosition(e,n.getFilename());return null==s?void 0:s.findTableReference(e)}}},39931(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Select=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.SelectLoop),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndSelect))}}},40054(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PerformTables=void 0;const s=n(3125),o=n(83568);class i extends s.Expression{getRunnable(){return(0,s.seq)("TABLES",(0,s.plus)(o.Source))}}t.PerformTables=i},40134(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CommentedCode=t.CommentedCodeConf=void 0;const s=n(71759),o=n(86789),i=n(99732),r=n(77465),a=n(52024),c=n(84383),l=n(50612),d=n(26571),u=n(86696),p=n(71249),f=n(67718);class g extends r.BasicRuleConfig{constructor(){super(...arguments),this.allowIncludeInFugr=!0}}t.CommentedCodeConf=g;class h extends i.ABAPRule{constructor(){super(...arguments),this.conf=new g}getMetadata(){return{key:"commented_code",title:"Find commented code",shortDescription:"Detects usage of commented out code.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#delete-code-instead-of-commenting-it\nhttps://docs.abapopenchecks.org/checks/14/",tags:[u.RuleTag.Styleguide,u.RuleTag.Quickfix,u.RuleTag.SingleFile],badExample:"* WRITE 'hello world'."}}getMessage(){return"Commented code"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){let n=[];const s=e.getRawRows();let i,r,a="";for(let c=0;c<s.length;c++)this.isCommentLine(s[c])?(""===a&&(r=new o.Position(c+1,1)),a=a+s[c].trim().substr(1)+"\n",i=new o.Position(c+1,s[c].length+1)):""!==a&&r&&i&&(n=n.concat(this.check(a.trim(),e,r,i,t)),a="");return r&&i&&(n=n.concat(this.check(a.trim(),e,r,i,t))),n}check(e,t,n,o,i){if(""===e||"."!==e.charAt(e.length-1))return[];const r=new f.MemoryFile("_foobar.prog.abap",e),u=(new d.ABAPParser).parse([r]).output[0].getStatements();if(0===u.length)return[];let g=!1;for(const e of u){const t=e.get();if(!(!0===this.getConfig().allowIncludeInFugr&&i instanceof c.FunctionGroup&&t instanceof l.Include||t instanceof a.Unknown||t instanceof a.Empty||t instanceof a.Comment)){g=!0;break}}if(!g)return[];const h=p.EditHelper.deleteRange(t,n,o);return[s.Issue.atRange(t,n,o,this.getMessage(),this.getMetadata().key,this.conf.severity,h)]}isCommentLine(e){return"*"===e.substr(0,1)||'"'===e.trim().substr(0,1)&&"!"!==e.trim().substr(1,1)}}t.CommentedCode=h},40157(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Decimals=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("DECIMALS",o.Integer)}}t.Decimals=i},40368(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Case=void 0;const s=n(82245),o=n(93170);t.Case=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},40429(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLocale=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetLocale=class{getMatcher(){const e=(0,s.seq)("COUNTRY",o.Source),t=(0,s.seq)("MODIFIER",o.Source),n=(0,s.seq)("SET LOCALE LANGUAGE",o.Source,(0,s.opt)(e),(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},40578(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Module=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Module=class{getMatcher(){const e=(0,s.seq)("SWITCH",o.NamespaceSimpleName),t=(0,s.seq)("MODULE",o.FormName,(0,s.opt)((0,s.alt)("INPUT","OUTPUT","ON CHAIN-REQUEST","ON CHAIN-INPUT","AT EXIT-COMMAND",e)));return(0,s.verNot)(i.Version.Cloud,t)}}},40837(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSParserError=t.CDSParserErrorConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=n(84383);class a extends i.BasicRuleConfig{}t.CDSParserErrorConf=a,t.CDSParserError=class{constructor(){this.conf=new a}getMetadata(){return{key:"cds_parser_error",title:"CDS Parser Error",shortDescription:"CDS parsing",extendedInformation:"Parses CDS and issues parser errors",tags:[o.RuleTag.Syntax,o.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){const t=[];if("DDLS"===e.getType()&&e instanceof r.DataDefinition||"DDLX"===e.getType()&&e instanceof r.CDSMetadataExtension){const n=e.hasParserError(),o=e.findSourceFile();if(!0===n&&o){const e="CDS Parser error"+(0===o.getRaw().length?", empty file":"");t.push(s.Issue.atRow(o,1,e,this.getMetadata().key,this.getConfig().severity))}}return t}}},40924(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalConditions=t.IdenticalConditionsConf=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(71759),a=n(77465),c=n(99732),l=n(86696),d=n(75457);class u{constructor(){this.arr=[],this.arr=[]}push(e){this.arr.push(e.concatTokens())}findFirstDuplicate(){return this.arr.find((e=>this.arr.indexOf(e)!==this.arr.lastIndexOf(e)))}}class p extends a.BasicRuleConfig{}t.IdenticalConditionsConf=p;class f extends c.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"identical_conditions",title:"Identical conditions",shortDescription:"Find identical conditions in IF + CASE + WHILE etc\n\nPrerequsites: code is pretty printed with identical cAsE",tags:[l.RuleTag.SingleFile],badExample:"IF foo = bar OR 1 = a OR foo = bar.\nENDIF.\nCASE bar.\n  WHEN '1'.\n  WHEN 'A' OR '1'.\nENDCASE.",goodExample:"IF foo = bar OR 1 = a.\nENDIF.\nCASE bar.\n  WHEN '1'.\n  WHEN 'A'.\nENDCASE."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){let t=[];const n=e.getStructure();if(void 0===n)return[];for(const s of n.findAllStructures(i.If))t=t.concat(this.analyzeIf(e,s));for(const s of n.findAllStructures(i.Case))t=t.concat(this.analyzeWhen(e,s));for(const o of n.findAllExpressions(s.Cond))t=t.concat(this.analyzeCond(e,o));return t}analyzeCond(e,t){const n=new u;let s="";for(const e of t.getChildren())if(e instanceof d.ExpressionNode)n.push(e);else if(""===s)s=e.get().getStr().toUpperCase();else if(s!==e.get().getStr().toUpperCase())return[];const o=n.findFirstDuplicate();if(o){const n="Identical conditions: "+o;return[r.Issue.atToken(e,t.getFirstToken(),n,this.getMetadata().key,this.conf.severity)]}return[]}analyzeIf(e,t){var n;const a=new u,c=t.findDirectStatement(o.If);if(void 0===c)throw new Error("identical_conditions, no IF found");const l=null==c?void 0:c.findDirectExpression(s.Cond);l&&a.push(l);for(const e of t.findDirectStructures(i.ElseIf)){const t=null===(n=e.findDirectStatement(o.ElseIf))||void 0===n?void 0:n.findDirectExpression(s.Cond);t&&a.push(t)}const d=a.findFirstDuplicate();if(d){const t="Identical conditions: "+d;return[r.Issue.atStatement(e,c,t,this.getMetadata().key,this.conf.severity)]}return[]}analyzeWhen(e,t){const n=new u,a=t.findDirectStatement(o.Case);if(void 0===a)throw new Error("identical_conditions, no CASE found");for(const e of t.findDirectStructures(i.When)){const t=e.findDirectStatement(o.When);if(void 0!==t)for(const e of t.findAllExpressions(s.Source))n.push(e)}const c=n.findFirstDuplicate();if(c){const t="Identical conditions: "+c;return[r.Issue.atStatement(e,a,t,this.getMetadata().key,this.conf.severity)]}return[]}}t.IdenticalConditions=f},40950(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedObjectTypes=t.AllowedObjectTypesConf=void 0;const s=n(86696),o=n(71759),i=n(77465),r=n(86789);class a extends i.BasicRuleConfig{constructor(){super(...arguments),this.allowed=[]}}t.AllowedObjectTypesConf=a,t.AllowedObjectTypes=class{constructor(){this.conf=new a}getMetadata(){return{key:"allowed_object_types",title:"Check allowed object types",shortDescription:"Restricts the set of allowed object types.",extendedInformation:'"allowed" is a list of 4 character R3TR object types, example: ["CLAS", "INTF"]',tags:[s.RuleTag.SingleFile]}}initialize(e){return this}getDescription(e){return"Object type "+e+" not allowed"}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=this.getConfig().allowed;if(void 0===t||0===t.length)return[];const n=e.getType();if(t.indexOf(n)<0){const t=new r.Position(1,1);return[o.Issue.atPosition(e.getFiles()[0],t,this.getDescription(n),this.getMetadata().key,this.conf.severity)]}return[]}}},41027(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Find=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(93170),a=n(9646);t.Find=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))r.Source.runSyntax(n,t);const n=e.findExpressionAfterToken("RESULTS");if(n&&n.get()instanceof s.Target){const s=new i.StructureType([{name:"OFFSET",type:i.IntegerType.get()},{name:"LENGTH",type:i.IntegerType.get()}],"SUBMATCH_RESULT","SUBMATCH_RESULT"),o=new i.StructureType([{name:"LINE",type:i.IntegerType.get()},{name:"OFFSET",type:i.IntegerType.get()},{name:"LENGTH",type:i.IntegerType.get()},{name:"SUBMATCHES",type:new i.TableType(s,{withHeader:!1,keyType:i.TableKeyType.default})}],"MATCH_RESULT","MATCH_RESULT");e.concatTokens().toUpperCase().startsWith("FIND FIRST")?this.inline(n,t,o):this.inline(n,t,new i.TableType(o,{withHeader:!1,keyType:i.TableKeyType.default},"MATCH_RESULT_TAB"))}const c=e.findExpressionsAfterToken("OFFSET");for(const e of c)e.get()instanceof s.Target&&this.inline(e,t,i.IntegerType.get());const l=e.findExpressionAfterToken("LINE");l&&l.get()instanceof s.Target&&this.inline(l,t,i.IntegerType.get());const d=e.findExpressionAfterToken("COUNT");d&&d.get()instanceof s.Target&&this.inline(d,t,i.IntegerType.get());const u=e.findExpressionAfterToken("LENGTH");if(u&&u.get()instanceof s.Target&&this.inline(u,t,i.IntegerType.get()),e.findDirectTokenByText("SUBMATCHES"))for(const r of e.findDirectExpressions(s.Target)){if(r===n||r===l||r===d||r===u)continue;if(c.indexOf(r)>=0)continue;const e=null==r?void 0:r.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,i.StringType.get()):a.Target.runSyntax(r,t)}}inline(e,t,n){const i=e.findDirectExpression(s.InlineData);i?o.InlineData.runSyntax(i,t,n):a.Target.runSyntax(e,t)}}},41110(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RFCErrorHandling=t.RFCErrorHandlingConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(82245),c=n(86696);class l extends i.BasicRuleConfig{}t.RFCErrorHandlingConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"rfc_error_handling",title:"RFC error handling",tags:[c.RuleTag.SingleFile],shortDescription:"Checks that exceptions 'system_failure' and 'communication_failure' are handled in RFC calls",extendedInformation:"https://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abenrfc_exception.htm",badExample:"CALL FUNCTION 'ZRFC'\n  DESTINATION lv_rfc.",goodExample:"CALL FUNCTION 'ZRFC'\n  DESTINATION lv_rfc\n  EXCEPTIONS\n    system_failure        = 1 MESSAGE msg\n    communication_failure = 2 MESSAGE msg\n    resource_failure      = 3\n    OTHERS                = 4."}}getMessage(){return"RFC error handling: At least one unhandled exception from SYSTEM_FAILURE, COMMUNICATION_FAILURE, RESOURCE_FAILURE"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements()){const o=n.getFirstToken();if(!(n.get()instanceof r.CallFunction))continue;if(!n.findFirstExpression(a.Destination))continue;const i=n.findFirstExpression(a.ParameterListExceptions);if(void 0===i){const n=s.Issue.atToken(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(n);continue}const c=i.findAllExpressions(a.ParameterName),l=[];for(const e of c)l.push(e.getFirstToken().getStr().toUpperCase());if(l.indexOf("SYSTEM_FAILURE")<0||l.indexOf("COMMUNICATION_FAILURE")<0||l.indexOf("RESOURCE_FAILURE")<0){const n=s.Issue.atToken(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(n)}}return t}}t.RFCErrorHandling=d},41187(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleTarget=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(91675),a=n(97329);class c extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.InstanceArrow),r.AttributeName),t=(0,s.seq)((0,s.tok)(i.Dash),o.ComponentName),n=(0,s.starPrio)((0,s.altPrio)(a.Dereference,e,t,o.TableExpression)),c=(0,s.seq)((0,s.altPrio)(o.Cast,o.NewObject),o.Arrow,o.FieldAll),l=(0,s.seq)(o.ClassName,(0,s.tok)(i.StaticArrow),r.AttributeName),d=(0,s.altPrio)(c,l,o.TargetField,o.TargetFieldSymbol),u=(0,s.seq)((0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength)),p=(0,s.altPrio)(o.TableBody,u);return(0,s.seq)(d,n,p)}}t.SimpleTarget=c},41239(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceField=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return new o.Field}}t.SourceField=i},41370(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassAttribute=void 0;const s=n(15838);class o extends s.TypedIdentifier{constructor(e,t,n,s){super(e.getToken(),e.getFilename(),e.getType(),n,s),this.visibility=t}getVisibility(){return this.visibility}}t.ClassAttribute=o},41404(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Export=void 0;const s=n(3125),o=n(89301),i=n(82245);t.Export=class{getMatcher(){const e=(0,s.seq)((0,s.altPrio)("FROM","="),i.Source),t=(0,s.seq)("CLIENT",i.Source),n=(0,s.seq)("ID",i.Source),r=(0,s.seq)("USING",i.Source),a=(0,s.seq)(i.NamespaceSimpleName,(0,s.tok)(o.ParenLeft),(0,s.regex)(/^[\w$%\^~]{2}$/),(0,s.tok)(o.ParenRightW)),c=(0,s.seq)("DATA BUFFER",i.Target),l=(0,s.seq)("MEMORY",(0,s.opt)((0,s.seq)("ID",i.Source))),d=(0,s.seq)("INTERNAL TABLE",i.Target),u=(0,s.seq)((0,s.alt)("SHARED MEMORY","SHARED BUFFER"),a,(0,s.per)(e,t,n)),p=(0,s.seq)("DATABASE",a,(0,s.per)(e,t,n,r)),f=(0,s.alt)(c,l,p,d,u),g=(0,s.alt)(i.FieldSub,i.FieldSymbol),h=(0,s.alt)((0,s.plus)((0,s.altPrio)((0,s.seq)(g,e),g)),i.Dynamic,i.Constant),T=(0,s.seq)("COMPRESSION",(0,s.alt)("ON","OFF")),m=(0,s.seq)("CODE PAGE HINT",i.Source);return(0,s.seq)("EXPORT",h,"TO",f,(0,s.opt)(T),(0,s.opt)(m))}}},41606(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBase=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("BASE",o.Source)}}t.ValueBase=i},41613(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Catch=void 0;const s=n(82245),o=n(15838),i=n(69953),r=n(20572),a=n(9646),c=n(36453),l=n(82054);t.Catch=class{runSyntax(e,t){var n,d;const u=new Set;for(const n of e.findDirectExpressions(s.ClassName)){const s=n.getFirstToken(),o=s.getStr().toUpperCase(),i=t.scope.existsObject(o);if(null==i?void 0:i.id)t.scope.addReference(s,i.id,c.ReferenceType.ObjectOrientedReference,t.filename);else{if(!1!==t.scope.getDDIC().inErrorNamespace(o)){const e="CATCH, unknown class "+o;return void t.issues.push((0,l.syntaxIssue)(t,s,e))}{const e={ooName:o,ooType:"Void"};t.scope.addReference(s,void 0,c.ReferenceType.ObjectOrientedVoidReference,t.filename,e)}}if(u.has(o)){const n="Duplicate class name in CATCH: "+o;return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}u.add(o)}const p=e.findDirectExpression(s.Target),f=null===(n=e.findDirectExpression(s.ClassName))||void 0===n?void 0:n.getFirstToken().getStr();if(null==p?void 0:p.findDirectExpression(s.InlineData)){const e=null===(d=p.findFirstExpression(s.TargetField))||void 0===d?void 0:d.getFirstToken(),n=t.scope.existsObject(f);if(e&&f&&(null==n?void 0:n.id)){const s=new o.TypedIdentifier(e,t.filename,new r.ObjectReferenceType(n.id),["inline"]);t.scope.addIdentifier(s),t.scope.addReference(e,s,c.ReferenceType.DataWriteReference,t.filename)}else if(e&&!1===t.scope.getDDIC().inErrorNamespace(f)){const n=new o.TypedIdentifier(e,t.filename,r.VoidType.get(f),["inline"]);t.scope.addIdentifier(n),t.scope.addReference(e,n,c.ReferenceType.DataWriteReference,t.filename)}else if(e){const n='Catch, could not determine type for "'+e.getStr()+'"',s=new o.TypedIdentifier(e,t.filename,new i.UnknownType(n),["inline"]);t.scope.addIdentifier(s),t.scope.addReference(e,s,c.ReferenceType.DataWriteReference,t.filename)}}else p&&a.Target.runSyntax(p,t)}}},41677(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExecSQL=void 0;const s=n(50612),o=n(52024),i=n(58720);t.ExecSQL=class{getMatcher(){return(0,i.beginEnd)((0,i.sta)(s.ExecSQL),(0,i.star)((0,i.sta)(o.NativeSQL)),(0,i.sta)(s.EndExec))}}},41758(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetProperty=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetProperty=class{getMatcher(){const e=(0,s.seq)("GET PROPERTY OF",o.FieldSub,(0,s.alt)(o.Source,o.ConstantString),"=",o.Source,(0,s.opt)("NO FLUSH"),(0,s.opt)((0,s.alt)("QUEUE-ONLY","QUEUEONLY")),(0,s.opt)(o.OLEExporting));return(0,s.verNot)(i.Version.Cloud,e)}}},41771(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Sum=void 0;const s=n(3125),o=n(49028);t.Sum=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"SUM")}}},42e3(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DashW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"- "}}t.DashW=o},42246(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreakStyle=t.LineBreakStyleConf=void 0;const s=n(71759),o=n(77465),i=n(86696);class r extends o.BasicRuleConfig{}t.LineBreakStyleConf=r,t.LineBreakStyle=class{constructor(){this.conf=new r}getMetadata(){return{key:"line_break_style",title:"Makes sure line breaks are consistent in the ABAP code",shortDescription:"Enforces LF as newlines in ABAP files\n\nabapGit does not work with CRLF",tags:[i.RuleTag.Whitespace,i.RuleTag.SingleFile]}}initialize(e){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=[];for(const n of e.getFiles())if(n.getFilename().endsWith(".abap")){const e=n.getRawRows();for(let o=0;o<e.length;o++)if(!0===e[o].endsWith("\r")){const e="Line contains carriage return",i=s.Issue.atRow(n,o+1,e,this.getMetadata().key,this.conf.severity);t.push(i);break}}return t}}},42321(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LogPoint=void 0;const s=n(82245),o=n(93170);t.LogPoint=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},42388(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandMacros=t.ExpandMacrosConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(71249),c=n(52024),l=n(297);class d extends i.BasicRuleConfig{}t.ExpandMacrosConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"expand_macros",title:"Expand Macros",shortDescription:"Allows expanding macro calls with quick fixes",extendedInformation:"Macros: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abenmacros_guidl.htm\n\nNote that macros/DEFINE cannot be used in the ABAP Cloud programming model",badExample:"DEFINE _hello.\n  WRITE 'hello'.\nEND-OF-DEFINITION.\n_hello.",goodExample:"WRITE 'hello'.",tags:[r.RuleTag.Styleguide,r.RuleTag.Quickfix,r.RuleTag.Upport]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStatements();for(let o=0;o<n.length;o++){const i=n[o];if(!(i.get()instanceof c.MacroCall))continue;let r="";for(let e=o+1;e<n.length;e++){const t=n[e];if(!(t.getFirstToken().getStart()instanceof l.VirtualPosition))break;t.get()instanceof c.MacroCall||(""!==r&&(r+="\n"),r+=t.concatTokensVirtual())}i.getColon()&&(r+="\n");const d=a.EditHelper.deleteStatement(e,i),u=a.EditHelper.insertAt(e,i.getStart(),r),p=a.EditHelper.merge(d,u);t.push(s.Issue.atStatement(e,i,"Expand macro call",this.getMetadata().key,this.conf.severity,p));break}return t}}t.ExpandMacros=u},42420(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadTableTarget=void 0;const s=n(3125),o=n(90179),i=n(57468);class r extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.seq)("ASSIGNING",o.FSTarget),(0,s.seq)((0,s.optPrio)("REFERENCE"),"INTO",i.Target),"TRANSPORTING NO FIELDS")}}t.ReadTableTarget=r},42500(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransformation=void 0;const s=n(3125),o=n(82245);t.CallTransformation=class{getMatcher(){const e=(0,s.seq)("OPTIONS",o.CallTransformationOptions),t=(0,s.seq)("PARAMETERS",o.CallTransformationParameters),n=(0,s.seq)("OBJECTS",o.CallTransformationParameters),i=(0,s.seq)("XML",o.SimpleSource3),r=(0,s.seq)("SOURCE",(0,s.alt)(o.CallTransformationParameters,i)),a=(0,s.seq)("XML",o.Target),c=(0,s.seq)("RESULT",(0,s.alt)(o.CallTransformationParameters,a));return(0,s.seq)("CALL TRANSFORMATION",(0,s.alt)(o.NamespaceSimpleName,o.Dynamic),(0,s.per)(e,t,n,r,c))}}},42647(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CGenericType=void 0;const s=n(97502);class o extends s.AbstractType{static get(){return this.singleton}constructor(){super()}toText(){return"```c```"}isGeneric(){return!0}toABAP(){throw new Error("c, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_CGENERIC"}}t.CGenericType=o,o.singleton=new o},42827(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassData=void 0;const s=n(3125),o=n(82245);t.ClassData=class{getMatcher(){return(0,s.seq)("CLASS-DATA",o.DataDefinition)}}},42880(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteCluster=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028);t.DeleteCluster=class{getMatcher(){const e=(0,s.seq)("CLIENT",i.Source),t=(0,s.seq)("DELETE FROM DATABASE",i.NamespaceSimpleName,(0,s.tok)(o.ParenLeft),i.SimpleName,(0,s.tok)(o.ParenRightW),(0,s.opt)(e),"ID",i.Source);return(0,s.verNot)(r.Version.Cloud,t)}}},42904(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;const s=n(3125),o=n(82245);t.Form=class{getMatcher(){const e=(0,s.seq)((0,s.opt)(o.FormTables),(0,s.opt)(o.FormUsing),(0,s.opt)(o.FormChanging),(0,s.opt)(o.FormRaising));return(0,s.seq)("FORM",o.FormName,(0,s.alt)("IMPLEMENTATION",e))}}},42952(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SuppressDialog=void 0;const s=n(3125),o=n(49028);t.SuppressDialog=class{getMatcher(){const e=(0,s.str)("SUPPRESS DIALOG");return(0,s.verNot)(o.Version.Cloud,e)}}},42991(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.APIReleaseState=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"APIS"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.APIReleaseState=o},43130(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;const s=n(3125),o=n(83568);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("=",o.Source),t=(0,s.altPrio)("1","2","3","4","5","6","7"),n=(0,s.altPrio)("COL_BACKGROUND","COL_HEADING","COL_NORMAL","COL_TOTAL","COL_KEY","COL_POSITIVE","COL_NEGATIVE","COL_GROUP"),i=(0,s.alt)(e,(0,s.altPrio)("ON","OFF","COLOR OFF",(0,s.altPrio)(t,n))),r=(0,s.altPrio)("ON","OFF");return(0,s.seq)("COLOR",(0,s.opt)((0,s.seq)(i,(0,s.opt)(r))))}}t.Color=i},43187(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOLE=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CreateOLE=class{getMatcher(){const e=(0,s.seq)("CREATE OBJECT",o.Target,o.Source,(0,s.opt)("NO FLUSH"),(0,s.opt)("QUEUE-ONLY"));return(0,s.verNot)(i.Version.Cloud,e)}}},43228(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XSequenceType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```xsequence```"}isGeneric(){return!0}toABAP(){throw new Error("xsequence, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_XSEQUENCE"}}t.XSequenceType=o},43278(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotate=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.star)(s.CDSAnnotation),"ANNOTATE",(0,o.alt)("ENTITY","VIEW"),s.CDSName,"WITH",(0,o.str)("{"),(0,o.plus)((0,o.seq)(s.CDSElement,";")),(0,o.str)("}"),(0,o.opt)(";"))}}t.CDSAnnotate=i},43298(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopExtract=void 0;const s=n(3125);t.LoopExtract=class{getMatcher(){return(0,s.str)("LOOP")}}},43332(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BeginEndNames=t.BeginEndNamesConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(94967),a=n(82245),c=n(50612),l=n(52024),d=n(86696),u=n(71249);class p extends i.BasicRuleConfig{}t.BeginEndNamesConf=p;class f extends o.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"begin_end_names",title:"Check BEGIN END names",shortDescription:"Check BEGIN OF and END OF names match, plus there must be statements between BEGIN and END",tags:[d.RuleTag.Syntax,d.RuleTag.Quickfix,d.RuleTag.SingleFile],badExample:"DATA: BEGIN OF stru,\n        field TYPE i,\n      END OF structure_not_the_same.",goodExample:"DATA: BEGIN OF stru,\n        field TYPE i,\n      END OF stru."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();return void 0===n||!0===e.getStatements().some((e=>e.get()instanceof l.Unknown))?[]:(t.push(...this.test(n,r.Data,c.DataBegin,c.DataEnd,e)),t.push(...this.test(n,r.ClassData,c.ClassDataBegin,c.ClassDataEnd,e)),t.push(...this.test(n,r.Constants,c.ConstantBegin,c.ConstantEnd,e)),t.push(...this.test(n,r.Statics,c.StaticBegin,c.StaticEnd,e)),t.push(...this.test(n,r.TypeEnum,c.TypeEnumBegin,c.TypeEnumEnd,e)),t.push(...this.test(n,r.Types,c.TypeBegin,c.TypeEnd,e)),t)}test(e,t,n,o,i){const r=[];for(const c of e.findAllStructuresRecursive(t)){let e=c.findDirectStatements(n)[0].findFirstExpression(a.NamespaceSimpleName);if(void 0===e&&(e=c.findDirectStatements(n)[0].findFirstExpression(a.DefinitionName)),void 0===e)continue;const t=e.getFirstToken();let l=c.findDirectStatements(o)[0].findFirstExpression(a.NamespaceSimpleName);if(void 0===l&&(l=c.findDirectStatements(o)[0].findFirstExpression(a.DefinitionName)),void 0===l)continue;const d=l.getFirstToken();if(t.getStr().toUpperCase()!==d.getStr().toUpperCase()){const e=u.EditHelper.replaceRange(i,d.getStart(),d.getEnd(),t.getStr()),n="BEGIN END names must match",o=s.Issue.atToken(i,t,n,this.getMetadata().key,this.conf.severity,e);r.push(o)}if(2===c.getChildren().length){const e="There must be statements between BEGIN and END",n=s.Issue.atToken(i,t,e,this.getMetadata().key,this.conf.severity);r.push(n)}}return r}}t.BeginEndNames=f},43372(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParenRightW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return") "}}t.ParenRightW=o},43380(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypesNaming=t.TypesNamingConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(77465),c=n(86696),l=n(84383);class d extends a.BasicRuleConfig{constructor(){super(...arguments),this.pattern="^TY_.+$"}}t.TypesNamingConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"types_naming",title:"TYPES naming conventions",shortDescription:"Allows you to enforce a pattern for TYPES definitions",extendedInformation:"Does not run for TYPE POOLS",tags:[c.RuleTag.Naming,c.RuleTag.SingleFile],badExample:"TYPES foo TYPE i.",goodExample:"TYPES ty_foo TYPE i."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],o=new RegExp(this.conf.pattern,"i");let a=0;if(t instanceof l.TypePool)return[];for(const t of e.getStatements()){let c;if(t.get()instanceof i.Type&&0===a)c=t.findFirstExpression(r.NamespaceSimpleName);else{if(!(t.get()instanceof i.TypeBegin||t.get()instanceof i.TypeEnumBegin)){if(t.get()instanceof i.TypeEnd||t.get()instanceof i.TypeEnumEnd){a-=1;continue}continue}0===a&&(c=t.findFirstExpression(r.NamespaceSimpleName)),a+=1}if(void 0===c)continue;const l=c.getFirstToken();if(!o.exec(l.getStr())){const t='Bad TYPES naming, expected "'+this.conf.pattern+'", got "'+l.getStr()+'"',o=s.Issue.atToken(e,l,t,this.getMetadata().key,this.conf.severity);n.push(o)}}return n}}t.TypesNaming=u},43397(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Form=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Form),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndForm))}}},43438(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Colon=void 0;const s=n(61785);class o extends s.AbstractToken{}t.Colon=o},43457(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Uline=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Uline=class{getMatcher(){const e=(0,s.seq)("ULINE",(0,s.optPrio)(o.WriteOffsetLength),(0,s.optPrio)("NO-GAP"));return(0,s.verNot)(i.Version.Cloud,e)}}},43647(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MSAGReferences=void 0,t.MSAGReferences=class{constructor(){this.nameNumberIndex={},this.filenameIndex={}}addUsing(e,t,n,s){3===s.length&&(void 0===this.filenameIndex[e]&&(this.filenameIndex[e]=[]),this.filenameIndex[e].push({token:t,messageClass:n,number:s}),void 0===this.nameNumberIndex[n]&&(this.nameNumberIndex[n]={}),void 0===this.nameNumberIndex[n][s]&&(this.nameNumberIndex[n][s]=[]),this.nameNumberIndex[n][s].push({filename:e,token:t}))}clear(e){for(const t of e.getFiles()){const e=t.getFilename();for(const t of this.filenameIndex[e]||[])this.nameNumberIndex[t.messageClass][t.number]=this.nameNumberIndex[t.messageClass][t.number].filter((t=>t.filename!==e));delete this.filenameIndex[e]}}listByFilename(e){return this.filenameIndex[e]||[]}listByMessage(e,t){var n;return(null===(n=this.nameNumberIndex[e])||void 0===n?void 0:n[t])||[]}}},43664(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancementSpot=void 0;const s=n(80300),o=n(86219);class i extends s.AbstractObject{getType(){return"ENHS"}getDescription(){}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.badis=void 0,super.setDirty()}listBadiDefinitions(){return void 0===this.badis&&(this.badis=this.parseXML()),this.badis}parseXML(){var e,t;const n=super.parseRaw2();if(void 0===n)return[];const s=[];for(const i of(0,o.xmlToArray)(null===(t=null===(e=n.abapGit["asx:abap"]["asx:values"])||void 0===e?void 0:e.BADI_DATA)||void 0===t?void 0:t.ENH_BADI_DATA))s.push({name:i.BADI_NAME,interface:i.INTERFACE_NAME});return s}}t.EnhancementSpot=i},43693(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CyclomaticComplexityStats=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(12620);t.CyclomaticComplexityStats=class{static run(e){var t,n,a;const c=[];if(!(e instanceof r.ABAPObject))return[];for(const r of e.getABAPFiles())for(const e of(null===(t=r.getStructure())||void 0===t?void 0:t.findAllStructures(i.Method))||[]){let t=0;for(const n of e.findAllStatementNodes()){const e=n.get();(e instanceof o.Assert||e instanceof o.Check||e instanceof o.ElseIf||e instanceof o.If||e instanceof o.While||e instanceof o.Case||e instanceof o.SelectLoop||e instanceof o.Catch||e instanceof o.Cleanup||e instanceof o.EndAt||e instanceof o.Loop)&&(t+=1)}const i=null===(a=null===(n=e.findDirectStatement(o.MethodImplementation))||void 0===n?void 0:n.findDirectExpression(s.MethodName))||void 0===a?void 0:a.getFirstToken().getStr();c.push({file:r,pos:e.getFirstToken().getStart(),name:i||"Error!",count:t})}return c}}},44036(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticArrowW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"=> "}}t.StaticArrowW=o},44195(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"TRAN"}setDirty(){this.parsedXML=void 0,super.setDirty()}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getCInfo(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.cinfo}getProgramName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.programName}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}parse(){var e,t,n;if(this.parsedXML)return{updated:!1,runtime:0};const s=Date.now();this.parsedXML={};const o=super.parseRaw2();return void 0===o||void 0===o.abapGit||void 0===o.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.description=null===(e=o.abapGit["asx:abap"]["asx:values"].TSTCT)||void 0===e?void 0:e.TTEXT,this.parsedXML.programName=null===(t=o.abapGit["asx:abap"]["asx:values"].TSTC)||void 0===t?void 0:t.PGMNA,this.parsedXML.cinfo=null===(n=o.abapGit["asx:abap"]["asx:values"].TSTC)||void 0===n?void 0:n.CINFO,{updated:!0,runtime:Date.now()-s})}}t.Transaction=o},44273(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSWithParameters=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.starPrio)(s.CDSAnnotation),s.CDSName,":",s.CDSType);return(0,o.seq)("WITH PARAMETERS",e,(0,o.star)((0,o.seq)(",",e)))}}t.CDSWithParameters=i},44322(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DialogModule=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DIAL"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.DialogModule=o},44379(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WithName=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.tok)(s.WPlus),(0,o.regex)(/^\w+$/))}}t.WithName=i},44489(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceField=void 0;const s=n(20572),o=n(36453),i=n(82054);t.SourceField=class{static runSyntax(e,t,n,r=!0){const a=e.getFirstToken(),c=a.getStr(),l=t.scope.findVariable(c);if(void 0===l){const n='"'+c+'" not found, findTop';return!0===r&&t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(i.CheckSyntaxKey)}if(n&&t.scope.addReference(a,l,n,t.filename),c.includes("~")){const e=t.scope.findInterfaceDefinition(c.split("~")[0]);e&&t.scope.addReference(a,e,o.ReferenceType.ObjectOrientedReference,t.filename)}return l.getType()}}},44519(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParameters=void 0;const s=n(36207),o=n(82245),i=n(75457),r=n(15838),a=n(20572),c=n(10855),l=n(82956),d=n(2416),u=n(36453),p=n(93422),f=n(2403);t.MethodParameters=class{constructor(e,t,n){if(!(e.get()instanceof s.MethodDef))throw new Error("MethodDefinition, expected MethodDef as part of input node");this.importing=[],this.exporting=[],this.changing=[],this.optional=[],this.defaults={},this.returning=void 0,this.preferred=void 0,this.exceptions=[],this.filename=t.filename;const o=t.scope.getName();t.scope.push(f.ScopeType.MethodDefinition,"method definition",e.getStart(),t.filename),this.parse(e,t,o,n),t.scope.pop(e.getEnd())}getFilename(){return this.filename}getOptional(){return this.optional}getAll(){const e=[],t=this.getReturning();return t&&e.push(t),e.push(...this.getImporting()),e.push(...this.getExporting()),e.push(...this.getChanging()),e}getDefaultImporting(){if(0===this.importing.length)return;if(1===this.importing.length)return this.importing[0].getName().toUpperCase();if(this.preferred)return this.preferred;let e=this.importing.map((e=>e.getName().toUpperCase()));return e=e.filter((e=>this.optional.indexOf(e)<0)),1===e.length?e[0]:void 0}getImporting(){return this.importing}getRequiredParameters(){var e;const t=[];for(const n of this.getImporting())!0!==this.getOptional().some((e=>e.toUpperCase()===n.getName().toUpperCase()))&&(null===(e=this.preferred)||void 0===e?void 0:e.toUpperCase())!==n.getName().toUpperCase()&&t.push(n);for(const e of this.getChanging())!0!==this.getOptional().some((t=>t.toUpperCase()===e.getName().toUpperCase()))&&t.push(e);return t}getExporting(){return this.exporting}getChanging(){return this.changing}getReturning(){return this.returning}getExceptions(){return this.exceptions}getParameterDefault(e){return this.defaults[e.toUpperCase()]}parse(e,t,n,s){var i,l;const p=e.findFirstExpression(o.EventHandler);if(p){const n=null===(i=e.findFirstExpression(o.ClassName))||void 0===i?void 0:i.getFirstToken(),s=null==n?void 0:n.getStr(),c=t.scope.findObjectDefinition(s),f=!c&&!t.scope.getDDIC().inErrorNamespace(s);c?t.scope.addReference(n,c,u.ReferenceType.ObjectOrientedReference,t.filename):f&&s&&t.scope.addReference(n,void 0,u.ReferenceType.ObjectOrientedVoidReference,this.filename,{ooName:s.toUpperCase()});const g=null===(l=e.findFirstExpression(o.EventName))||void 0===l?void 0:l.getFirstToken().getStr(),h=new d.ObjectOriented(t.scope).searchEvent(c,g);for(const e of p.findAllExpressions(o.MethodParamName)){const t=e.getFirstToken(),n=t.getStr().toUpperCase().replace("!","");if(this.optional.push(n),"SENDER"===n&&c){this.importing.push(new r.TypedIdentifier(t,this.filename,new a.ObjectReferenceType(c),["event_parameter"]));continue}const o=null==h?void 0:h.getParameters().find((e=>e.getName().toUpperCase()===n));if(o)this.importing.push(new r.TypedIdentifier(t,this.filename,o.getType(),["event_parameter"]));else if(f)this.importing.push(new r.TypedIdentifier(t,this.filename,a.VoidType.get(s),["event_parameter"]));else{const e=new a.UnknownType(`handler parameter not found "${n}"`);this.importing.push(new r.TypedIdentifier(t,this.filename,e,["event_parameter"]))}}return}const f=e.findFirstExpression(o.MethodDefImporting);f&&(this.add(this.importing,f,t,["importing"],s),f.findDirectTokenByText("PREFERRED")&&(this.preferred=f.getLastToken().getStr().toUpperCase(),this.preferred.startsWith("!")&&(this.preferred=this.preferred.substring(1))));const g=e.findFirstExpression(o.MethodDefExporting);g&&this.add(this.exporting,g,t,["exporting"],s);const h=e.findFirstExpression(o.MethodDefChanging);h&&this.add(this.changing,h,t,["changing"],s);const T=e.findFirstExpression(o.MethodDefReturning);T&&(this.returning=c.MethodDefReturning.runSyntax(T,t,["returning"])),this.workaroundRAP(e,t,n)}workaroundRAP(e,t,n){const s=e.findExpressionAfterToken("RESULT"),i=e.findExpressionAfterToken("IMPORTING");if(i){for(const n of e.findDirectExpressions(o.MethodParamName))n!==s&&this.importing.push(new r.TypedIdentifier(n.getFirstToken(),t.filename,a.VoidType.get("RapMethodParameter"),["importing"]));const n=e.concatTokens().toUpperCase();if(n.includes(" FOR VALIDATE ")||n.includes(" FOR BEHAVIOR ")||n.includes(" FOR DETERMINE ")||n.includes(" FOR FEATURES ")||n.includes(" FOR INSTANCE FEATURES ")||n.includes(" FOR LOCK ")||n.includes(" FOR NUMBERING ")||n.includes(" FOR READ ")||n.includes(" FOR VALIDATION ")||n.includes(" FOR MODIFY ")){const e=i.getFirstToken();this.exporting.push(new r.TypedIdentifier(new p.Identifier(e.getStart(),"failed"),t.filename,a.VoidType.get("RapMethodParameter"),["exporting"])),this.exporting.push(new r.TypedIdentifier(new p.Identifier(e.getStart(),"mapped"),t.filename,a.VoidType.get("RapMethodParameter"),["exporting"])),this.exporting.push(new r.TypedIdentifier(new p.Identifier(e.getStart(),"reported"),t.filename,a.VoidType.get("RapMethodParameter"),["exporting"]))}}if(s){const e=s.getFirstToken();this.importing.push(new r.TypedIdentifier(e,t.filename,a.VoidType.get("RapMethodParameter"),["exporting"]))}if("CL_ABAP_BEHAVIOR_SAVER"===n.toUpperCase()){const e=this.changing.map((e=>new r.TypedIdentifier(e.getToken(),t.filename,a.VoidType.get("RapMethodParameter"),e.getMeta())));for(;this.changing.length>0;)this.changing.shift();this.changing.push(...e);const n=this.importing.map((e=>new r.TypedIdentifier(e.getToken(),t.filename,a.VoidType.get("RapMethodParameter"),e.getMeta())));for(;this.importing.length>0;)this.importing.shift();this.importing.push(...n)}}add(e,t,n,s,r){var a,c;for(const d of t.findAllExpressions(o.MethodParamOptional)){const t=d.findDirectExpression(o.MethodParam);if(void 0===t)continue;const u=[];"VALUE"===t.getFirstToken().getStr().toUpperCase()&&"("===(null===(a=t.getChildren()[1])||void 0===a?void 0:a.getFirstToken().getStr())?u.push("pass_by_value"):s.includes("importing")&&u.push("read_only"),!0===r&&u.push("abstract");const p=l.MethodParam.runSyntax(t,n,[...s,...u]);if(n.scope.addIdentifier(p),e.push(p),d.findDirectTokenByText("OPTIONAL")){const t=e[e.length-1].getName().toUpperCase();this.optional.push(t)}else if(d.findFirstExpression(o.Default)){const t=e[e.length-1].getName().toUpperCase();this.optional.push(t);const n=null===(c=d.findFirstExpression(o.Default))||void 0===c?void 0:c.getLastChild();n&&n instanceof i.ExpressionNode&&(this.defaults[t]=n)}}if(e.length>0)return;const d=t.findAllExpressions(o.MethodParam);for(const t of d)e.push(l.MethodParam.runSyntax(t,n,s))}}},44647(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Private=void 0;const s=n(3125);t.Private=class{getMatcher(){return(0,s.str)("PRIVATE SECTION")}}},44684(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArtifactsABAP=void 0;const s=n(50612),o=n(82245),i=n(3125),r=n(94967);class a{constructor(){this.words=[]}add(e,t){for(const n of e){const e=this.find(n);e>=0?this.words[e].source.push(t):this.words.push({word:n,source:[t]})}}get(){return this.words}find(e){for(let t=0;t<this.words.length;t++)if(this.words[t].word===e)return t;return-1}}function c(e){return e.constructor.name}t.ArtifactsABAP=class{static getStructures(){const e=[],t=r;for(const n in r)"function"==typeof t[n]&&e.push(new t[n]);return e}static getExpressions(){const e=[],t=o;for(const n in o)"function"==typeof t[n]&&e.push(t[n]);return e}static getStatements(){const e=[],t=s;for(const n in s)"function"==typeof t[n]&&e.push(new t[n]);return e}static getKeywords(){const e=new a;for(const t of this.getStatements())e.add(i.Combi.listKeywords(t.getMatcher()),"statement_"+c(t));for(const t of this.getExpressions())e.add(i.Combi.listKeywords((new t).getRunnable()),"expression_"+c(t));return e.get()}}},44863(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignPseudoComments=t.AlignPseudoCommentsConf=void 0;const s=n(99732),o=n(77465),i=n(86696),r=n(71759),a=n(52024),c=n(86789),l=n(71249);class d extends o.BasicRuleConfig{}t.AlignPseudoCommentsConf=d;class u extends s.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"align_pseudo_comments",title:"Align pseudo comments",shortDescription:"Align code inspector pseudo comments in statements",tags:[i.RuleTag.SingleFile,i.RuleTag.Whitespace,i.RuleTag.Quickfix],badExample:"WRITE 'sdf'. \"#EC sdf",goodExample:"WRITE 'sdf'.                                                \"#EC sdf"}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n;for(const s of e.getStatements()){if(!(s.get()instanceof a.Comment)){n=s.getLastToken().getEnd();continue}const o=s.concatTokens().length,i=s.getFirstToken();if(!1===i.getStr().startsWith('"#'))continue;if(void 0===n)continue;let d=61;o>10&&(d=72-o);const u=i.getStart().getCol();if(n.getCol()<d&&u!==d){let n;if(u<d)n=l.EditHelper.insertAt(e,i.getStart()," ".repeat(d-u));else{const t=new c.Position(i.getStart().getRow(),d);n=l.EditHelper.deleteRange(e,t,i.getStart())}const o="Align pseudo comment to column "+d;t.push(r.Issue.atStatement(e,s,o,this.getMetadata().key,this.conf.severity,n))}}return t}}t.AlignPseudoComments=u},44937(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LexerBuffer=void 0,t.LexerBuffer=class{constructor(){this.buf=""}add(e){return this.buf=this.buf+e,this.buf}get(){return this.buf}clear(){this.buf=""}countIsEven(e){let t=0;for(let n=0;n<this.buf.length;n+=1)this.buf.charAt(n)===e&&(t+=1);return t%2==0}}},45031(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseEvent=void 0;const s=n(3125),o=n(82245);t.RaiseEvent=class{getMatcher(){const e=(0,s.seq)("EXPORTING",o.ParameterListS);return(0,s.seq)("RAISE EVENT",o.EventName,(0,s.opt)(e))}}},45061(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReportName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.regex)(/^[\w/$%&]+$/),(0,s.star)((0,s.seq)((0,s.tok)(o.Dash),(0,s.regex)(/^\w+$/))))}}t.ReportName=i},45134(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventConsumer=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"EEEC"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.EventConsumer=o},45137(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Downport=t.DownportConf=void 0;const s=n(52501),o=n(89301),i=n(82245),r=n(50612),a=n(50612),c=n(52024),l=n(94967),d=n(56727),u=n(36453),p=n(2403),f=n(52424),g=n(75457),h=n(15838),T=n(20572),m=n(81164),y=n(71249),S=n(71759),v=n(84383),E=n(12620),C=n(86789),b=n(31481),I=n(79543),D=n(49028),x=n(297),P=n(77465),A=n(86696);class N extends P.BasicRuleConfig{}t.DownportConf=N;class O extends Error{constructor(e){super(),this.issue=e}}class R{constructor(e){this.spag=e}renameVariable(e,t,n,s){let o;const i=this.findReferences(e,t);i.sort(((e,t)=>e.start.equals(t.start)?0:e.start.isAfter(t.start)?1:-1));for(const e of i){const t=y.EditHelper.replaceRange(n,e.start,e.end,s);o=void 0===o?t:y.EditHelper.merge(t,o)}return o}findReferences(e,t){var n,s;const o=[];function i(e){return o.some((t=>t.start.equals(e.start)))}for(const r of this.spag.getData().references)if((null===(n=r.resolved)||void 0===n?void 0:n.getName())===e&&(null===(s=r.resolved)||void 0===s?void 0:s.getStart().equals(t))){const e={start:r.position.getStart(),end:r.position.getEnd()};!1===i(e)&&o.push(e)}for(const n of this.spag.getChildren()){const s=new R(n).findReferences(e,t);for(const e of s)!1===i(e)&&o.push(e)}return o}findRecursiveDuplicate(e,t){var n;const s=this.spag.findVariable(e);if(!1===(null==s?void 0:s.getStart().equals(t)))return s;for(const s of(null===(n=this.spag)||void 0===n?void 0:n.getChildren())||[]){const n=new R(s).findRecursiveDuplicate(e,t);if(n)return n}}isDuplicateName(e,t){let n=this.spag.getParent();for(;(null==n?void 0:n.getIdentifier().stype)===p.ScopeType.Let||(null==n?void 0:n.getIdentifier().stype)===p.ScopeType.For;)n=n.getParent();if(void 0!==n)return void 0!==new R(n).findRecursiveDuplicate(e,t)}}t.Downport=class{constructor(){this.conf=new N}getMetadata(){return{key:"downport",title:"Downport statement",shortDescription:"Downport functionality",extendedInformation:'Much like the \'commented_code\' rule this rule loops through unknown statements and tries parsing with\na higher level language version. If successful, various rules are applied to downport the statement.\nTarget downport version is always v702, thus rule is only enabled if target version is v702.\n\nCurrent rules:\n* NEW transformed to CREATE OBJECT, opposite of https://rules.abaplint.org/use_new/\n* DATA() definitions are outlined, opposite of https://rules.abaplint.org/prefer_inline/\n* FIELD-SYMBOL() definitions are outlined\n* CONV is outlined\n* COND is outlined\n* REDUCE is outlined\n* SWITCH is outlined\n* FILTER is outlined\n* APPEND expression is outlined\n* INSERT expression is outlined\n* EMPTY KEY is changed to DEFAULT KEY, opposite of DEFAULT KEY in https://rules.abaplint.org/avoid_use/\n* CAST changed to ?=\n* LOOP AT method_call( ) is outlined\n* VALUE # with structure fields\n* VALUE # with internal table lines\n* Table Expressions are outlined\n* SELECT INTO @DATA definitions are outlined\n* Some occurrences of string template formatting option ALPHA changed to function module call\n* SELECT/INSERT/MODIFY/DELETE/UPDATE "," in field list removed, "@" in source/targets removed\n* PARTIALLY IMPLEMENTED removed, it can be quick fixed via rule implement_methods\n* RAISE EXCEPTION ... MESSAGE\n* Moving with +=, -=, /=, *=, &&= is expanded\n* line_exists and line_index is downported to READ TABLE\n* ENUMs, but does not nessesarily give the correct type and value\n* MESSAGE with non simple source\n\nOnly one transformation is applied to a statement at a time, so multiple steps might be required to do the full downport.\n\nMake sure to test the downported code, it might not always be completely correct.',tags:[A.RuleTag.Downport,A.RuleTag.Quickfix]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){this.lowReg=e;const t=this.lowReg.getConfig().getVersion();return t!==D.Version.v702&&t!==D.Version.OpenABAP||this.initHighReg(),this}listMainForInclude(e){return void 0===e?[]:(void 0===this.graph&&(this.graph=new I.IncludeGraph(this.lowReg)),this.graph.listMainForInclude(e))}containsError(e){for(const t of e.getABAPFiles()){for(const e of t.getStatements())if(e.get()instanceof c.Unknown)return!0;if(void 0===t.getStructure())return!0}return!1}run(e){var t;const n=[];this.counter=1;const s=this.lowReg.getConfig().getVersion();if(s!==D.Version.v702&&s!==D.Version.OpenABAP)return n;if(!(e instanceof E.ABAPObject))return n;const o=this.highReg.getObject(e.getType(),e.getName());if(void 0===o||!(o instanceof E.ABAPObject))return n;let a=o;if(this.containsError(o))return n;if(e instanceof v.Program&&e.isInclude()){const n=this.listMainForInclude(null===(t=e.getMainABAPFile())||void 0===t?void 0:t.getFilename());if(n.length<=0)return[];const s=this.highReg.getFileByName(n[0]);if(void 0===s)return[];a=this.highReg.findObjectForFile(s)}for(const t of e.getABAPFiles()){let e;const s=o.getABAPFileByName(t.getFilename());if(void 0===s)continue;const l=t.getStatements(),d=s.getStatements();if(l.length!==d.length)continue;void 0===e&&(e=new f.SyntaxLogic(this.highReg,a).run());let u=!1;for(let o=0;o<l.length;o++){const r=l[o],a=d[o];if(r.get()instanceof c.Unknown&&!(a.get()instanceof c.Unknown)||a.findFirstExpression(i.InlineData)){u=!0;try{const o=this.checkStatement(r,a,t,e,s);o&&n.push(o)}catch(e){if(e instanceof O){n.push(e.issue);break}throw e}}}if(0===n.length&&u)for(let s=0;s<l.length;s++){const o=d[s];if(o.get()instanceof r.Data){const s=this.anonymousTableType(o,t,e);s&&n.push(s)}}if(0===n.length&&t.getRaw().includes(" xsdbool("))for(let s=0;s<l.length;s++){const o=d[s],i=this.replaceXsdBool(o,t,e);i&&n.push(i)}}return n}initHighReg(){const e=m.Config.getDefault().get(),t=this.lowReg.getConfig().get();e.syntax.errorNamespace=t.syntax.errorNamespace,e.syntax.globalConstants=t.syntax.globalConstants,e.syntax.globalMacros=t.syntax.globalMacros,this.highReg=new b.Registry;for(const e of this.lowReg.getObjects())for(const t of e.getFiles())!0===this.lowReg.isDependency(e)?this.highReg.addDependency(t):this.highReg.addFile(t);this.highReg.parse()}checkStatement(e,t,n,s,o){if(e.getFirstToken().getStart()instanceof x.VirtualPosition)return;let r=this.downportEnum(e,t,n,s,o);if(r)return r;if(r=this.partiallyImplemented(t,n),r)return r;if(r=this.raiseException(t,n,s),r)return r;if(r=this.emptyKey(e,t,n),r)return r;if(r=this.stringTemplateAlpha(e,t,n,s),r)return r;if(r=this.moveWithOperator(e,t,n),r)return r;if(r=this.moveWithSimpleValue(e,t,n),r)return r;if(r=this.assignWithTable(e,t,n),r)return r;if(r=this.assignComponent(e,t,n,s),r)return r;if(r=this.downportRefSimple(t,n,s),r)return r;if(r=this.downportCorrespondingSimple(t,n),r)return r;if(r=this.downportRef(e,t,n,s),r)return r;if(r=this.downportLoopGroup(t,n,s,o),r)return r;if(r=this.callFunctionParameterSimple(t,n,s),r)return r;if(r=this.moveWithTableTarget(e,t,n,s),r)return r;if(r=this.downportSelectInline(e,t,n,s),r)return r;if(r=this.downportSelectExistence(e,t,n,s),r)return r;if(r=this.downportSQLMoveInto(e,t,n,s),r)return r;if(r=this.downportSQLExtras(e,t,n,s),r)return r;if(r=this.outlineLoopInput(e,t,n,s),r)return r;if(r=this.outlineLoopTarget(t,n,s),r)return r;let a=!1,c=!1;const l=t.findFirstExpression(i.ValueBody),d=t.findFirstExpression(i.ReduceBody);if(l&&d){const e=l.getFirstToken(),t=d.getFirstToken();e.getStart().isBefore(t.getStart())?c=!0:a=!0}return!0!==a&&(r=this.outlineValue(e,t,n,s),r)||!0!==c&&(r=this.outlineReduce(e,t,n,s),r)?r:(r=this.outlineCorresponding(e,t,n,s),r||(r=this.downportSelectFields(e,t,n,s),r||(r=this.outlineSwitch(e,t,n,s),r||(r=this.outlineFilter(e,t,n,s),r||(r=this.outlineCast(e,t,n,s),r||(r=this.outlineConv(e,t,n,s),r||(r=this.outlineCond(e,t,n,s),r||(r=this.outlineCatchSimple(t,n),r||(r=this.outlineGetReferenceSimple(t,n),r||(r=this.outlineDataSimple(t,n,s),r||(r=this.outlineData(t,n,s),r||(r=this.outlineFS(e,t,n,s),r||(r=this.newToCreateObject(e,t,n,s),r||(r=this.replaceLineFunctions(t,n,s,o),r||(r=this.getReference(t,n,s),r||(r=this.replaceContains(t,n,s),r||(r=this.replaceMethodConditional(e,t,n,s),r||(r=this.replaceTableExpression(e,t,n,s),r||(r=this.replaceAppendExpression(t,n,s),r||(r=this.replaceInsertExpression(t,n,s),r||(r=this.downportMessageSource(t,n,s),r||(r=this.downportMessage(t,n,s),r||(r=this.downportReadTable(t,n,s),r||void 0)))))))))))))))))))))))}downportSQLMoveInto(e,t,n,s){var o;if(!(e.get()instanceof c.Unknown))return;const r=null===(o=t.findFirstExpression(i.Select))||void 0===o?void 0:o.findDirectExpression(i.SQLCond);if(void 0===r)return;let a=t.findFirstExpression(i.SQLIntoList);if(void 0===a&&(a=t.findFirstExpression(i.SQLIntoStructure)),void 0===a&&(a=t.findFirstExpression(i.SQLIntoTable)),void 0===a)return;if(!1===r.getLastToken().getEnd().isBefore(a.getFirstToken().getStart()))return;const l=t.findFirstExpression(i.SQLFrom);if(void 0===l)return;const d=y.EditHelper.insertAt(n,l.getLastToken().getEnd()," "+a.concatTokens()),u=y.EditHelper.deleteRange(n,a.getFirstToken().getStart(),a.getLastToken().getEnd()),p=y.EditHelper.merge(u,d);return S.Issue.atToken(n,e.getFirstToken(),"SQL, move INTO",this.getMetadata().key,this.conf.severity,p)}downportSQLExtras(e,t,n,s){if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Select||t.get()instanceof r.SelectLoop||t.get()instanceof r.UpdateDatabase||t.get()instanceof r.ModifyDatabase||t.get()instanceof r.DeleteDatabase||t.get()instanceof r.InsertDatabase))return;let a;const l=e=>{const t=y.EditHelper.deleteToken(n,e);a=void 0===a?t:y.EditHelper.merge(a,t)},d=[t.findAllExpressionsRecursive(i.SQLTarget),t.findAllExpressionsRecursive(i.SQLSource),t.findAllExpressionsRecursive(i.SQLSourceNoSpace),t.findAllExpressionsRecursive(i.SQLSourceSimple)].flat();for(const r of d.reverse())if(r.getFirstToken()instanceof o.WAt||r.getFirstToken()instanceof o.At){const a=r.getAllTokens();if(a[1]instanceof o.ParenLeftW&&a[a.length-1]instanceof o.WParenRightW){const o=r.findDirectExpression(i.Source),a=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),c=y.EditHelper.insertAt(n,t.getStart(),`DATA(${a}) = ${null==o?void 0:o.concatTokens()}.\n`),l=y.EditHelper.replaceRange(n,r.getFirstToken().getStart(),r.getLastToken().getEnd(),"@"+a),d=y.EditHelper.merge(l,c);return S.Issue.atToken(n,e.getFirstToken(),"SQL, outline complex @",this.getMetadata().key,this.conf.severity,d)}l(r.getFirstToken())}for(const e of t.findAllExpressionsMulti([i.SQLFieldList,i.SQLFieldListLoop,i.SQLOrderBy],!0))for(const t of e.getDirectTokens())","===t.getStr()&&l(t);if(void 0!==a)return S.Issue.atToken(n,e.getFirstToken(),"SQL, remove @ and ,",this.getMetadata().key,this.conf.severity,a);for(const s of t.findAllExpressionsRecursive(i.SQLIn)){const t=s.getChildren(),i=t[1];if(!(i.get()instanceof o.WParenLeftW))continue;const r=t[t.length-1];if(r.get()instanceof o.WParenRightW||r.get()instanceof o.WParenRight){const t=i.getFirstToken().getEnd(),s=new C.Position(t.getRow(),t.getCol()+1),o=y.EditHelper.deleteRange(n,t,s),c=r.getFirstToken().getStart(),l=new C.Position(c.getRow(),c.getCol()-1),d=y.EditHelper.deleteRange(n,l,c);return a=y.EditHelper.merge(d,o),S.Issue.atToken(n,e.getFirstToken(),"SQL, remove spaces",this.getMetadata().key,this.conf.severity,a)}}}downportSelectExistence(e,t,n,s){var o,a,l,d;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Select))return;const u=t.findFirstExpression(i.SQLFieldList);if("@ABAP_TRUE"!==(null==u?void 0:u.concatTokens().toUpperCase()))return;const p=null===(a=null===(o=t.findFirstExpression(i.SQLCond))||void 0===o?void 0:o.findFirstExpression(i.SQLFieldName))||void 0===a?void 0:a.concatTokens();if(void 0===p)return;const f=t.findFirstExpression(i.SQLIntoStructure);if(void 0===f)return;const g=null===(d=null===(l=f.findFirstExpression(i.SQLTarget))||void 0===l?void 0:l.findFirstExpression(i.Target))||void 0===d?void 0:d.concatTokens(),h=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),T=y.EditHelper.replaceRange(n,u.getFirstToken().getStart(),u.getLastToken().getEnd(),p),m=y.EditHelper.replaceRange(n,null==f?void 0:f.getFirstToken().getStart(),null==f?void 0:f.getLastToken().getEnd(),`INTO @DATA(${h})`);let v=y.EditHelper.merge(m,T);const E=y.EditHelper.insertAt(n,t.getLastToken().getEnd(),`\nCLEAR ${g}.\nIF sy-subrc = 0.\n  ${g} = abap_true.\nENDIF.`);return v=y.EditHelper.merge(v,E),S.Issue.atToken(n,e.getFirstToken(),"SQL, refactor existence check",this.getMetadata().key,this.conf.severity,v)}downportSelectInline(e,t,n,s){if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Select||t.get()instanceof r.SelectLoop))return;let o=this.downportSelectSingleInline(e,t,n,s);return o||(o=this.downportSelectTableInline(e,t,n,s),o||void 0)}downportSelectFields(e,t,n,s){var o;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Select))return;const a=t.findFirstExpression(i.SQLFields);if(void 0===a)return;const l=null===(o=a.getLastChild())||void 0===o?void 0:o.concatTokens();if(void 0===l)return;const d=y.EditHelper.deleteRange(n,a.getFirstToken().getStart(),a.getLastToken().getEnd()),u=y.EditHelper.insertAt(n,t.getFirstToken().getEnd()," "+l),p=y.EditHelper.merge(d,u);return S.Issue.atToken(n,a.getFirstToken(),"Replace FIELDS",this.getMetadata().key,this.conf.severity,p)}downportSelectSingleInline(e,t,n,s){var o,r,a,l;if(!(e.get()instanceof c.Unknown))return;const d=(null===(o=t.findFirstExpression(i.SQLIntoStructure))||void 0===o?void 0:o.findDirectExpressions(i.SQLTarget))||[];if(1!==d.length)return;const u=d[0].findFirstExpression(i.InlineData);if(void 0===u)return;const p=t.findAllExpressions(i.SQLFromSource);if(1!==p.length)return;const f=null===(r=p[0].findDirectExpression(i.DatabaseTable))||void 0===r?void 0:r.concatTokens();if(void 0===f)return;const h=" ".repeat(t.getFirstToken().getStart().getCol()-1);let T=t.findFirstExpression(i.SQLFieldList);if(void 0===T&&(T=t.findFirstExpression(i.SQLFieldListLoop)),void 0===T)return;let m="";const v=T.findAllExpressions(i.SQLFieldName),E=(null===(a=u.findFirstExpression(i.TargetField))||void 0===a?void 0:a.concatTokens())||"error";if(1===v.length)m=`DATA ${E} TYPE ${f}-${v[0].concatTokens()}.`;else if("*"===T.concatTokens())m=`DATA ${E} TYPE ${f}.`;else if("COUNT( * )"===T.concatTokens().toUpperCase())m=`DATA ${E} TYPE i.`;else if("@ABAP_TRUE"===T.concatTokens().toUpperCase()||"@ABAP_FALSE"===T.concatTokens().toUpperCase())m=`DATA ${E} TYPE abap_bool.`;else if(1===T.getChildren().length&&T.getChildren()[0].get()instanceof i.SQLAggregation){const e=T.getChildren()[0];e instanceof g.ExpressionNode&&(m=`DATA ${E} TYPE ${f}-${null===(l=e.findFirstExpression(i.SQLArithmetics))||void 0===l?void 0:l.concatTokens()}.`)}else{for(const e of v){const t=e.concatTokens();m+=h+"        "+t+" TYPE "+f+"-"+t+",\n"}m=`DATA: BEGIN OF ${E},\n${m}${h}      END OF ${E}.`}const C=y.EditHelper.insertAt(n,t.getStart(),`${m}\n${h}`),b=y.EditHelper.replaceRange(n,u.getFirstToken().getStart(),u.getLastToken().getEnd(),E),I=y.EditHelper.merge(b,C);return S.Issue.atToken(n,u.getFirstToken(),"Outline SELECT @DATA",this.getMetadata().key,this.conf.severity,I)}downportSelectTableInline(e,t,n,s){var o,r,a,l,d,u,p;if(!(e.get()instanceof c.Unknown))return;const f=(null===(o=t.findFirstExpression(i.SQLIntoTable))||void 0===o?void 0:o.findDirectExpressions(i.SQLTarget))||[];if(1!==f.length)return;const g=" ".repeat(t.getFirstToken().getStart().getCol()-1),h=f[0].findFirstExpression(i.InlineData);if(void 0===h)return;const T=t.findAllExpressions(i.SQLFromSource);if(0===T.length)return S.Issue.atToken(n,t.getFirstToken(),"Error outlining, sqlFrom not found",this.getMetadata().key,this.conf.severity);let m=null===(r=T[0].findDirectExpression(i.DatabaseTable))||void 0===r?void 0:r.concatTokens();if(void 0===m)return;const v={};for(const e of T){const t=null===(a=e.findDirectExpression(i.DatabaseTable))||void 0===a?void 0:a.concatTokens().toUpperCase();void 0!==t&&(v[(null===(l=e.findDirectExpression(i.SQLAsName))||void 0===l?void 0:l.concatTokens().toUpperCase())||t]=t)}const E=t.findFirstExpression(i.SQLFieldList);if(void 0===E)return;let C="";for(const e of E.findAllExpressions(i.SQLField)){let t=null===(d=e.findFirstExpression(i.SQLFieldName))||void 0===d?void 0:d.concatTokens();if(void 0===t)continue;if(t.includes("~")){const e=t.split("~");m=e[0],t=e[1]}const n=v[m.toUpperCase()]+"-"+t;t=(null===(u=e.findFirstExpression(i.SQLAsName))||void 0===u?void 0:u.concatTokens())||t,C+=g+"        "+t+" TYPE "+n.toLowerCase()+",\n"}const b=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),I=(null===(p=h.findFirstExpression(i.TargetField))||void 0===p?void 0:p.concatTokens())||"error";let D=y.EditHelper.insertAt(n,t.getStart(),`TYPES: BEGIN OF ${b},\n${C}${g}      END OF ${b}.\n${g}DATA ${I} TYPE STANDARD TABLE OF ${b} WITH DEFAULT KEY.\n${g}`);""===C&&(D=y.EditHelper.insertAt(n,t.getStart(),`DATA ${I} TYPE STANDARD TABLE OF ${m} WITH DEFAULT KEY.\n${g}`));const x=y.EditHelper.replaceRange(n,h.getFirstToken().getStart(),h.getLastToken().getEnd(),I),P=y.EditHelper.merge(x,D);return S.Issue.atToken(n,h.getFirstToken(),"Outline SELECT @DATA",this.getMetadata().key,this.conf.severity,P)}anonymousTableType(e,t,n){if(!(e.get()instanceof r.Data))return;const s=e.findFirstExpression(i.TypeTable);if(void 0===s)return;const o=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),a=`TYPES ${o} ${s.concatTokens()}.\n`,c=y.EditHelper.insertAt(t,e.getStart(),a),l=y.EditHelper.replaceRange(t,s.getFirstToken().getStart(),s.getLastToken().getEnd(),"TYPE "+o),d=y.EditHelper.merge(l,c);return S.Issue.atToken(t,e.getFirstToken(),"Add type for table definition",this.getMetadata().key,this.conf.severity,d)}downportMessage(e,t,n){var s,o;if(!(e.get()instanceof r.Message))return;if(void 0===e.findExpressionAfterToken("WITH"))return;const a=e.findExpressionAfterToken("LIKE");for(const r of e.findAllExpressions(i.Source)){if(r===a)continue;if(1===r.getChildren().length&&(null===(s=r.getFirstChild())||void 0===s?void 0:s.get())instanceof i.Constant)continue;if(1===r.getChildren().length&&(null===(o=r.getFirstChild())||void 0===o?void 0:o.get())instanceof i.FieldChain)continue;const c=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),l=" ".repeat(e.getFirstToken().getStart().getCol()-1),d=e.getFirstToken(),u=`DATA(${c}) = ${r.concatTokens()}.\n${l}`,p=y.EditHelper.insertAt(t,d.getStart(),u),f=y.EditHelper.replaceRange(t,r.getFirstToken().getStart(),r.getLastToken().getEnd(),c),g=y.EditHelper.merge(f,p);return S.Issue.atToken(t,e.getFirstToken(),"Refactor MESSAGE WITH source",this.getMetadata().key,this.conf.severity,g)}}replaceAppendExpression(e,t,n){if(!(e.get()instanceof r.Append))return;const s=e.getChildren();if(s[1].get()instanceof i.Source){const o=s[1],r=e.findDirectExpression(i.Target);if(void 0===r)return;const a=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),c=" ".repeat(e.getFirstToken().getStart().getCol()-1),l=e.getFirstToken(),d=y.EditHelper.insertAt(t,l.getStart(),`DATA ${a} LIKE LINE OF ${null==r?void 0:r.concatTokens()}.\n${c}${a} = ${o.concatTokens()}.\n${c}`),u=y.EditHelper.replaceRange(t,o.getFirstToken().getStart(),o.getLastToken().getEnd(),a),p=y.EditHelper.merge(u,d);return S.Issue.atToken(t,e.getFirstToken(),"Outline APPEND source expression",this.getMetadata().key,this.conf.severity,p)}}downportReadTable(e,t,n){if(!(e.get()instanceof r.ReadTable))return;const s=e.findExpressionAfterToken("TABLE");if((null==s?void 0:s.get())instanceof i.Source){const o=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),i=" ".repeat(e.getFirstToken().getStart().getCol()-1),r=e.getFirstToken(),a=y.EditHelper.insertAt(t,r.getStart(),`DATA(${o}) = ${s.concatTokens()}.\n`+i),c=y.EditHelper.replaceRange(t,s.getFirstToken().getStart(),s.getLastToken().getEnd(),o),l=y.EditHelper.merge(c,a);return S.Issue.atToken(t,e.getFirstToken(),"Outline table source",this.getMetadata().key,this.conf.severity,l)}}downportMessageSource(e,t,n){var s;if(!(e.get()instanceof r.Message))return;const o=e.findExpressionAfterToken("MESSAGE");if((null==o?void 0:o.get())instanceof i.MessageSourceSource&&(null===(s=o.getFirstChild())||void 0===s?void 0:s.get())instanceof i.Source){const s=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),i=" ".repeat(e.getFirstToken().getStart().getCol()-1),r=e.getFirstToken(),a=y.EditHelper.insertAt(t,r.getStart(),`DATA(${s}) = ${o.concatTokens()}.\n`+i),c=y.EditHelper.replaceRange(t,o.getFirstToken().getStart(),o.getLastToken().getEnd(),s),l=y.EditHelper.merge(c,a);return S.Issue.atToken(t,e.getFirstToken(),"Outline message source",this.getMetadata().key,this.conf.severity,l)}}replaceInsertExpression(e,t,n){if(!(e.get()instanceof r.InsertInternal))return;const s=e.getChildren();if(s[1].get()instanceof i.Source){const o=s[1],r=e.findDirectExpression(i.Target);if(void 0===r)return;const a=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),c=" ".repeat(e.getFirstToken().getStart().getCol()-1),l=e.getFirstToken(),d=y.EditHelper.insertAt(t,l.getStart(),`DATA ${a} LIKE LINE OF ${null==r?void 0:r.concatTokens()}.\n${c}${a} = ${o.concatTokens()}.\n${c}`),u=y.EditHelper.replaceRange(t,o.getFirstToken().getStart(),o.getLastToken().getEnd(),a),p=y.EditHelper.merge(u,d);return S.Issue.atToken(t,e.getFirstToken(),"Outline INSERT source expression",this.getMetadata().key,this.conf.severity,p)}}replaceTableExpression(e,t,n,s){if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.FieldChain)){const o=e.findDirectExpression(i.TableExpression);if(void 0===o)continue;const a=t.concatTokens().toUpperCase();if(a.includes(" LINE_EXISTS( ")||a.includes(" LINE_INDEX( "))continue;let c,l="";for(const t of e.getChildren()){if(void 0===c)c=t.getFirstToken();else if(t===o)break;l+=t.concatTokens()}if(void 0===c)continue;const d=this.tableCondition(o),u=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),p=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),f=" ".repeat(t.getFirstToken().getStart().getCol()-1),g=t.getFirstToken(),h=y.EditHelper.insertAt(n,g.getStart(),`DATA ${u} LIKE LINE OF ${l}.\n${f}DATA ${p} LIKE sy-tabix.\n${f}${p} = sy-tabix.\n${f}READ TABLE ${l} ${d}INTO ${u}.\n${f}sy-tabix = ${p}.\n${f}IF sy-subrc <> 0.\n${f}  RAISE EXCEPTION TYPE cx_sy_itab_line_not_found.\n${f}ENDIF.\n${f}`),T=y.EditHelper.replaceRange(n,c.getStart(),o.getLastToken().getEnd(),u),m=y.EditHelper.merge(T,h);if(t.get()instanceof r.ElseIf)throw"downport, unable to downport table expression in ELSEIF";return S.Issue.atToken(n,t.getFirstToken(),"Outline table expression",this.getMetadata().key,this.conf.severity,m)}}tableCondition(e){let t="",n="";for(const s of e.getChildren()||[])if("["!==s.getFirstToken().getStr()&&"]"!==s.getFirstToken().getStr()){if(s.get()instanceof i.ComponentChainSimple&&""===t)t=""===n?"WITH KEY ":"WITH TABLE KEY "+n+" COMPONENTS ";else if(s.get()instanceof i.Source&&""===t)t="INDEX ";else{if(s instanceof g.TokenNode&&"KEY"===s.getFirstToken().getStr().toUpperCase())continue;if(s.get()instanceof i.SimpleName){n=s.concatTokens();continue}}t+=s.concatTokens()+" "}return t}outlineCatchSimple(e,t){var n,s;if(this.lowReg.getConfig().getVersion()===D.Version.OpenABAP)return;if(!(e.get()instanceof r.Catch))return;const o=e.findFirstExpression(i.Target);if(!((null===(n=null==o?void 0:o.getFirstChild())||void 0===n?void 0:n.get())instanceof i.InlineData))return;const a=e.findDirectExpressions(i.ClassName);if(1!==a.length)return;const c=a[0].concatTokens(),l=null===(s=o.findFirstExpression(i.TargetField))||void 0===s?void 0:s.concatTokens(),d=`  DATA ${l} TYPE REF TO ${c}.\n${" ".repeat(e.getFirstToken().getStart().getCol()-1)}CATCH ${c} INTO ${l}.`,u=y.EditHelper.replaceRange(t,e.getStart(),e.getEnd(),d);return S.Issue.atToken(t,e.getFirstToken(),"Outline DATA",this.getMetadata().key,this.conf.severity,u)}outlineGetReferenceSimple(e,t){var n,s,o;if(!(e.get()instanceof r.GetReference))return;const a=e.findFirstExpression(i.Target);if(!((null===(n=null==a?void 0:a.getFirstChild())||void 0===n?void 0:n.get())instanceof i.InlineData))return;const c=e.findFirstExpression(i.Source);if(!((null===(s=null==c?void 0:c.getFirstChild())||void 0===s?void 0:s.get())instanceof i.FieldChain))return;const l=(null===(o=a.findFirstExpression(i.TargetField))||void 0===o?void 0:o.concatTokens())||"errorError",d=" ".repeat(e.getFirstToken().getStart().getCol()-1),u=a.getFirstToken(),p=a.getLastToken(),f=y.EditHelper.insertAt(t,e.getStart(),`DATA ${l} LIKE REF TO ${c.concatTokens()}.\n${d}`),g=y.EditHelper.replaceRange(t,u.getStart(),p.getEnd(),l),h=y.EditHelper.merge(g,f);return S.Issue.atToken(t,e.getFirstToken(),"Outline DATA",this.getMetadata().key,this.conf.severity,h)}outlineDataSimple(e,t,n){var s,o,a;if(!(e.get()instanceof r.Move))return;if(this.lowReg.getConfig().getVersion()===D.Version.OpenABAP)return;const c=e.findFirstExpression(i.Target);if(!((null===(s=null==c?void 0:c.getFirstChild())||void 0===s?void 0:s.get())instanceof i.InlineData))return;let l="";const d=e.findFirstExpression(i.Source);if(void 0===d)return;if(1!==d.getChildren().length)return;if(!((null===(o=d.getFirstChild())||void 0===o?void 0:o.get())instanceof i.FieldChain))return;if(d.findFirstExpression(i.FieldOffset))return;if(d.findFirstExpression(i.FieldLength))return;if(d.findFirstExpression(i.TableExpression)){const e=d.findDirectExpression(i.FieldChain);if(!(void 0!==e&&2===e.getChildren().length&&e.getChildren()[0].get()instanceof i.SourceField&&e.getChildren()[1].get()instanceof i.TableExpression))return;l="LINE OF "+e.getChildren()[0].concatTokens()}else{const e=n.spaghetti.lookupPosition(d.getFirstToken().getStart(),t.getFilename());if(e){const t=e.findVariable(d.concatTokens());if(t&&!0===t.getType().isGeneric())return}l=d.concatTokens()}const u=null===(a=c.findFirstExpression(i.TargetField))||void 0===a?void 0:a.concatTokens(),p=" ".repeat(e.getFirstToken().getStart().getCol()-1),f=e.getFirstToken(),g=e.getLastToken(),h=y.EditHelper.insertAt(t,f.getStart(),`DATA ${u} LIKE ${l}.\n${p}`),T=y.EditHelper.replaceRange(t,f.getStart(),g.getEnd(),`${u} = ${d.concatTokens()}.`),m=y.EditHelper.merge(T,h);return S.Issue.atToken(t,e.getFirstToken(),"Outline DATA",this.getMetadata().key,this.conf.severity,m)}partiallyImplemented(e,t){if(this.lowReg.getConfig().getVersion()!==D.Version.OpenABAP&&e.get()instanceof r.InterfaceDef){const n=e.findDirectTokenByText("PARTIALLY");if(void 0===n)return;const s=e.findDirectTokenByText("IMPLEMENTED");if(void 0===s)return;const o=y.EditHelper.deleteRange(t,n.getStart(),s.getEnd());return S.Issue.atToken(t,n,"Downport PARTIALLY IMPLEMENTED",this.getMetadata().key,this.conf.severity,o)}}raiseException(e,t,n){var s,o,a,c,l,d,u;if(!(e.get()instanceof r.Raise))return;let p,f,g=e.findDirectTokenByText("ID");if(g){p=e.findDirectExpressions(i.Source)[0].concatTokens();const t=e.findExpressionAfterToken("NUMBER");if(void 0===t)throw"downport raiseException, could not find number";f=t.concatTokens(),t.get()instanceof i.MessageNumber&&(f="'"+f+"'")}else{const t=e.findDirectExpression(i.MessageSource);if(void 0===t)return;p=t.findDirectExpression(i.MessageClass)?"'"+(null===(o=null===(s=t.findDirectExpression(i.MessageClass))||void 0===s?void 0:s.concatTokens())||void 0===o?void 0:o.toUpperCase())+"'":null===(a=t.findExpressionAfterToken("ID"))||void 0===a?void 0:a.concatTokens(),f=t.findDirectExpression(i.MessageTypeAndNumber)?"'"+(null===(c=t.findDirectExpression(i.MessageTypeAndNumber))||void 0===c?void 0:c.concatTokens().substring(1))+"'":null===(l=t.findExpressionAfterToken("NUMBER"))||void 0===l?void 0:l.concatTokens(),g=e.getFirstToken()}const h=(null===(d=e.findDirectExpression(i.RaiseWith))||void 0===d?void 0:d.findDirectExpressionsMulti([i.SimpleSource1,i.Source]))||[],T=(null===(u=e.findDirectExpression(i.ClassName))||void 0===u?void 0:u.concatTokens())||"ERROR",m=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),v=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),E=" ".repeat(e.getFirstToken().getStart().getCol()-1);let C=`DATA ${m} LIKE if_t100_message=>t100key.\n${E}${m}-msgid = ${p}.\n${E}${m}-msgno = ${f}.\n`;h.length>0&&(C+=`${E}${m}-attr1 = 'IF_T100_DYN_MSG~MSGV1'.\n${E}${m}-attr2 = 'IF_T100_DYN_MSG~MSGV2'.\n${E}${m}-attr3 = 'IF_T100_DYN_MSG~MSGV3'.\n${E}${m}-attr4 = 'IF_T100_DYN_MSG~MSGV4'.\n`),C+=`${E}DATA ${v} TYPE REF TO ${T}.\n${E}CREATE OBJECT ${v}.\n${E}${v}->if_t100_message~t100key = ${m}.\n`,h.length>0&&(C+=`${E}${v}->if_t100_dyn_msg~msgty = 'E'.\n`);let b=1;for(const e of h)C+=`${E}${v}->if_t100_dyn_msg~msgv${b} = ${e.concatTokens()}.\n`,b++;C+=`${E}RAISE EXCEPTION ${v}.`;const I=y.EditHelper.replaceRange(t,e.getStart(),e.getEnd(),C);return S.Issue.atToken(t,g,"Downport RAISE EXCEPTION MESSAGE",this.getMetadata().key,this.conf.severity,I)}emptyKey(e,t,n){if(e.get()instanceof c.Unknown)for(let e of t.findAllExpressions(i.TypeTable)){const t=e.findDirectExpression(i.TypeTableKey);if(void 0===t)continue;if(e=t,!1===e.concatTokens().toUpperCase().includes("WITH EMPTY KEY"))continue;const s=e.findDirectTokenByText("EMPTY");if(void 0===s)continue;const o=y.EditHelper.replaceToken(n,s,"DEFAULT");return S.Issue.atToken(n,e.getFirstToken(),"Downport EMPTY KEY",this.getMetadata().key,this.conf.severity,o)}}callFunctionParameterSimple(e,t,n){if(!(e.get()instanceof r.CallFunction))return;let s;for(const t of e.findAllExpressions(i.FunctionExportingParameter))if(s=t.findDirectExpression(i.Source),s&&(s.findDirectExpression(i.FieldChain)||s.findDirectExpression(i.Constant)||s.findDirectExpression(i.TextElement)))s=void 0;else if(void 0!==s)break;if(void 0===s)return;const o=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),a=`DATA(${o}) = ${s.concatTokens()}.\n`,c=y.EditHelper.insertAt(t,e.getFirstToken().getStart(),a),l=y.EditHelper.replaceRange(t,s.getFirstToken().getStart(),s.getLastToken().getEnd(),o),d=y.EditHelper.merge(l,c);return S.Issue.atToken(t,e.getFirstToken(),"Downport, call function parameter",this.getMetadata().key,this.conf.severity,d)}downportCorrespondingSimple(e,t){var n;if(!(e.get()instanceof r.Move)||4!==e.getChildren().length||"CORRESPONDING"!==e.getChildren()[2].getFirstToken().getStr().toUpperCase())return;const s=e.findDirectExpression(i.Target);if(void 0===s)return;const o=null===(n=e.findFirstExpression(i.Source))||void 0===n?void 0:n.findFirstExpression(i.CorrespondingBody);if(1===(null==o?void 0:o.getChildren().length)&&!1===s.concatTokens().toUpperCase().startsWith("DATA(")){const n=`MOVE-CORRESPONDING ${o.concatTokens()} TO ${s.concatTokens()}`,i=e.getFirstToken().getStart(),r=e.getLastToken().getStart(),a=y.EditHelper.replaceRange(t,i,r,n);return S.Issue.atToken(t,e.getFirstToken(),"Downport, simple CORRESPONDING move",this.getMetadata().key,this.conf.severity,a)}if(2===(null==o?void 0:o.getChildren().length)&&void 0!==o.findDirectExpression(i.CorrespondingBodyBase)){const n=o.findDirectExpression(i.CorrespondingBodyBase);let r=`${s.concatTokens()} = ${n.getChildren()[2].concatTokens()}.\n`;r+=`MOVE-CORRESPONDING ${o.getChildren()[1].concatTokens()} TO ${s.concatTokens()}`;const a=e.getFirstToken().getStart(),c=e.getLastToken().getStart(),l=y.EditHelper.replaceRange(t,a,c,r);return S.Issue.atToken(t,e.getFirstToken(),"Downport, CORRESPONDING BASE move",this.getMetadata().key,this.conf.severity,l)}}downportRefSimple(e,t,n){var s,o;if(!(e.get()instanceof r.Move)||4!==e.getChildren().length||"REF"!==e.getChildren()[2].getFirstToken().getStr().toUpperCase())return;const a=e.findDirectExpression(i.Target);if(void 0===a)return;const c=null===(s=e.findFirstExpression(i.Source))||void 0===s?void 0:s.findDirectExpression(i.Source);if(void 0===c||1!==c.getChildren().length)return;let l="";if(c.findFirstExpression(i.TableExpression)){const s=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n);l=`ASSIGN ${c.concatTokens()} TO FIELD-SYMBOL(<${s}>).\nIF sy-subrc <> 0.\n  RAISE EXCEPTION TYPE cx_sy_itab_line_not_found.\nENDIF.\nGET REFERENCE OF <${s}> INTO ${a.concatTokens()}`}else{const s=a.concatTokens();if(l=`GET REFERENCE OF ${c.concatTokens()} INTO ${s}`,s.toUpperCase().startsWith("DATA(")){const s=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),t.getFilename());if(void 0!==s){const e=s.findVariable(c.concatTokens());if((null==e?void 0:e.getType())instanceof T.AnyType){const e=null===(o=a.findFirstExpression(i.TargetField))||void 0===o?void 0:o.concatTokens();l=`DATA ${e} TYPE REF TO data.\nGET REFERENCE OF ${c.concatTokens()} INTO ${e}`}}}}const d=e.getFirstToken().getStart(),u=e.getLastToken().getStart(),p=y.EditHelper.replaceRange(t,d,u,l);return S.Issue.atToken(t,e.getFirstToken(),"Downport, simple REF move",this.getMetadata().key,this.conf.severity,p)}downportLoopGroup(e,t,n,s){var o,a,c,d,u,p,f,g,h,m,v,E,C;if(!(e.get()instanceof r.Loop))return;const b=e.findDirectExpression(i.LoopGroupBy);if(void 0===b)return;const I=(null===(o=b.findFirstExpression(i.TargetField))||void 0===o?void 0:o.concatTokens())||(null===(a=b.findFirstExpression(i.TargetFieldSymbol))||void 0===a?void 0:a.concatTokens().replace("<","_").replace(">","_"))||"nameNotFound",D=(null===(c=e.findFirstExpression(i.SimpleSource2))||void 0===c?void 0:c.concatTokens())||"nameNotFound",x=(null===(d=e.findFirstExpression(i.TargetField))||void 0===d?void 0:d.concatTokens())||(null===(u=e.findFirstExpression(i.TargetFieldSymbol))||void 0===u?void 0:u.concatTokens())||"nameNotFound",P=(null===(p=b.findDirectExpression(i.LoopGroupByTarget))||void 0===p?void 0:p.concatTokens())||"",A=null===(f=e.findFirstExpression(i.LoopTarget))||void 0===f?void 0:f.concatTokens().toUpperCase().startsWith("REFERENCE INTO ");let N="typeNotFound";const O=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),t.getFilename());if(void 0!==O){const e=O.findVariable(D),t=null==e?void 0:e.getType();t instanceof T.TableType&&(N=t.getRowType().getQualifiedName()||"typeNotFound")}let R,M,k=`TYPES: BEGIN OF ${I}type,\n`,F="";for(const e of b.findAllExpressions(i.LoopGroupByComponent)){const t=e.findFirstExpression(i.ComponentName);let n=(null===(g=e.findFirstExpression(i.Source))||void 0===g?void 0:g.concatTokens())||"todo";(null===(h=e.concatTokens())||void 0===h?void 0:h.toUpperCase().endsWith(" = GROUP SIZE"))?(n="i",R=null==t?void 0:t.concatTokens()):(null===(m=e.concatTokens())||void 0===m?void 0:m.toUpperCase().endsWith(" = GROUP INDEX"))?(n="i",M=null==t?void 0:t.concatTokens()):(""!==F&&(F+=" "),F+=e.concatTokens(),n=n.replace(x,N),n=n.replace("->","-")),k+=`         ${null==t?void 0:t.concatTokens()} TYPE ${n},\n`}const L=b.findDirectExpression(i.Source);let _="";if(L){let e=L.concatTokens();e=e.replace(x,N),e=e.replace("->","-"),_=L.concatTokens().split("-")[1],k+=`         ${_} TYPE ${e},\n`,F=_+" = "+L.concatTokens()}const w=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),j=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),B=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n);k+=`         items LIKE ${D},\n       END OF ${I}type.\nDATA ${I}tab TYPE STANDARD TABLE OF ${I}type WITH DEFAULT KEY.\nDATA ${w} LIKE LINE OF ${I}tab.\nLOOP AT ${D} ${null===(v=e.findFirstExpression(i.LoopTarget))||void 0===v?void 0:v.concatTokens()}.\n`,void 0!==M&&(k+=`DATA(${B}) = sy-tabix.\n`),k+=`READ TABLE ${I}tab ASSIGNING FIELD-SYMBOL(<${j}>) WITH KEY ${F}.\nIF sy-subrc = 0.\n`,void 0!==R&&(k+=`  <${j}>-${R} = <${j}>-${R} + 1.\n`),k+=`  INSERT ${x}${A?"->*":""} INTO TABLE <${j}>-items.\nELSE.\n`,k+=`  CLEAR ${w}.\n`;for(const e of b.findAllExpressions(i.LoopGroupByComponent)){const t=e.concatTokens();t.endsWith(" GROUP INDEX")?k+=`  ${w}-${M} = ${B}.\n`:t.endsWith(" GROUP SIZE")?k+=`  ${w}-${R} = 1.\n`:k+=`  ${w}-${t}.\n`}""!==_&&(k+=`  ${w}-${_} = ${x}-${_}.\n`),k+=`  INSERT ${x}${A?"->*":""} INTO TABLE ${w}-items.\n`,k+=`  INSERT ${w} INTO TABLE ${I}tab.\n`,k+=`ENDIF.\nENDLOOP.\nLOOP AT ${I}tab ${P}.`;let U=y.EditHelper.replaceRange(t,e.getFirstToken().getStart(),e.getLastToken().getEnd(),k);for(const n of(null===(E=s.getStructure())||void 0===E?void 0:E.findAllStructures(l.Loop))||[])if(n.findDirectStatement(r.Loop)===e)for(const e of n.findAllStatements(r.Loop))if(null===(C=e.concatTokens())||void 0===C?void 0:C.toUpperCase().startsWith("LOOP AT GROUP ")){const n=e.findFirstExpression(i.SimpleSource2);if(void 0===n)continue;const s=`LOOP AT ${(null==n?void 0:n.concatTokens())||"nameNotFound"}${A?"->":"-"}items`,o=y.EditHelper.replaceRange(t,e.getFirstToken().getStart(),n.getLastToken().getEnd(),s);U=y.EditHelper.merge(o,U)}return S.Issue.atToken(t,e.getFirstToken(),"Downport, LOOP GROUP",this.getMetadata().key,this.conf.severity,U)}downportRef(e,t,n,s){if(!(e.get()instanceof c.Unknown))return;let o;for(const e of t.findAllExpressionsRecursive(i.Source))"REF"===e.getFirstToken().getStr().toUpperCase()&&e.findDirectExpression(i.TypeNameOrInfer)&&(o=e);if(void 0===o)return;const r=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),a=`DATA(${r}) = ${o.concatTokens()}.\n`,l=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),a),d=y.EditHelper.replaceRange(n,o.getFirstToken().getStart(),o.getLastToken().getEnd(),r),u=y.EditHelper.merge(d,l);return S.Issue.atToken(n,t.getFirstToken(),"Downport, REF",this.getMetadata().key,this.conf.severity,u)}assignWithTable(e,t,n){var s,o;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Assign))return;if(5!==t.getChildren().length)return;const a=null===(o=null===(s=t.findDirectExpression(i.AssignSource))||void 0===s?void 0:s.findDirectExpression(i.Source))||void 0===o?void 0:o.findDirectExpression(i.FieldChain),l=null==a?void 0:a.getLastChild();if(!(void 0!==l&&l.get()instanceof i.TableExpression&&l instanceof g.ExpressionNode))return;let d="";if(3===l.getChildren().length){const e=l.findDirectExpression(i.Source);if(void 0===e)return;d=`INDEX ${e.concatTokens()}`}else{let e=l.concatTokens();e=e.substring(2),e=e.substring(0,e.length-2),d=`WITH KEY ${e}`}let u="";for(const e of a.getChildren()){if(e===l)break;u+=e.concatTokens()}const p=t.findDirectExpression(i.FSTarget),f=`READ TABLE ${u} ${d} ASSIGNING ${null==p?void 0:p.concatTokens()}.`,h=y.EditHelper.replaceRange(n,t.getFirstToken().getStart(),t.getLastToken().getEnd(),f);return S.Issue.atToken(n,t.getFirstToken(),"Downport, ASSIGN table expr",this.getMetadata().key,this.conf.severity,h)}assignComponent(e,t,n,s){if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Assign))return;const o=t.findDirectExpression(i.AssignSource);if(void 0===o||"COMPONENT"!==o.getFirstToken().getStr().toUpperCase())return;const a=o.findExpressionAfterToken("COMPONENT");if(void 0===a||a.get()instanceof i.SimpleSource3)return;const l=this.uniqueName(o.getFirstToken().getStart(),n.getFilename(),s),d=`DATA(${l}) = ${a.concatTokens()}.\n`,u=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),d),p=y.EditHelper.replaceRange(n,a.getFirstToken().getStart(),a.getLastToken().getEnd(),l),f=y.EditHelper.merge(p,u);return S.Issue.atToken(n,t.getFirstToken(),"Downport, ASSIGN COMPONENT source",this.getMetadata().key,this.conf.severity,f)}moveWithSimpleValue(e,t,n){if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Move)||4!==t.getChildren().length)return;const s=t.findDirectExpression(i.Target);if(void 0===s)return;const o=t.findDirectExpression(i.Source);if(void 0===o)return;if(void 0===s.findDirectExpression(i.TargetField))return;const a=o.findDirectExpression(i.ValueBody);if(void 0===a)return;const l=o.findDirectExpression(i.TypeNameOrInfer);if(void 0===l||"#"!==(null==l?void 0:l.concatTokens()))return;const d=a.findDirectExpressions(i.FieldAssignment);if(0===d.length)return;if(d.length!==a.getChildren().length)return;const u=" ".repeat(t.getFirstToken().getStart().getCol()-1);let p=`CLEAR ${s.concatTokens()}.\n`;for(const e of d)p+=u+s.concatTokens()+"-"+e.concatTokensWithLinebreaks()+".\n";p=p.trimEnd();const f=t.getFirstToken().getStart(),g=t.getLastToken().getEnd(),h=y.EditHelper.replaceRange(n,f,g,p);return S.Issue.atToken(n,t.getFirstToken(),"Downport, simple move",this.getMetadata().key,this.conf.severity,h)}downportEnum(e,t,n,s,o){var a,c,d,u,p;if(!(t.get()instanceof r.TypeEnumBegin))return;const f=null===(a=o.getStructure())||void 0===a?void 0:a.findFirstStructure(l.TypeEnum);if(void 0===f)return;if(f.getFirstStatement()!==t)return;const g=null===(c=t.findExpressionAfterToken("ENUM"))||void 0===c?void 0:c.concatTokens(),h=null===(d=t.findExpressionAfterToken("STRUCTURE"))||void 0===d?void 0:d.concatTokens();let T=`TYPES ${g} TYPE string.\nCONSTANTS: BEGIN OF ${h},\n`,m=1;for(const e of f.findDirectStatements(r.TypeEnum).concat(f.findDirectStatements(r.Type))){const t=null===(u=e.findFirstExpression(i.NamespaceSimpleName))||void 0===u?void 0:u.concatTokens();let n=null===(p=e.findFirstExpression(i.Value))||void 0===p?void 0:p.concatTokens();void 0===n&&(n="VALUE '"+m+++"'"),T+=`             ${t} TYPE ${g} ${n},\n`}T+=`           END OF ${h}.`;const v=f.getFirstToken().getStart(),E=f.getLastToken().getEnd(),C=y.EditHelper.replaceRange(n,v,E,T);return S.Issue.atToken(n,t.getFirstToken(),"Downport ENUM",this.getMetadata().key,this.conf.severity,C)}moveWithTableTarget(e,t,n,s){var o;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Move))return;const a=t.findDirectExpression(i.Target);if(void 0===a)return;const l=a.findDirectExpression(i.TableExpression);if(void 0===l)return;if(void 0===l.findDirectExpression(i.Source))return;let d=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s);d=`<${d}>`;const u=a.concatTokens().split("[")[0],p=this.tableCondition(l),f=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),g=" ".repeat(t.getFirstToken().getStart().getCol()-1),h=`FIELD-SYMBOLS ${d} LIKE LINE OF ${u}.\n${g}DATA ${f} LIKE sy-tabix.\n${g}${f} = sy-tabix.\n${g}READ TABLE ${u} ${p}ASSIGNING ${d}.\n${g}sy-tabix = ${f}.\n${g}IF sy-subrc <> 0.\n${g}  RAISE EXCEPTION TYPE cx_sy_itab_line_not_found.\n${g}ENDIF.\n${g}${d}`,T=a.getFirstToken().getStart(),m=null===(o=l.findDirectTokenByText("]"))||void 0===o?void 0:o.getEnd();if(void 0===m)return;const v=y.EditHelper.replaceRange(n,T,m,h);return S.Issue.atToken(n,t.getFirstToken(),"Downport, move with table target",this.getMetadata().key,this.conf.severity,v)}moveWithOperator(e,t,n){var s,o,a;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Move))return;const l=t.getChildren()[1];if(void 0===l)return;const d=l.getFirstToken();let u="";switch(d.getStr()){case"+":u=" + ";break;case"-":u=" - ";break;case"/=":u=" / ";break;case"*=":u=" * ";break;case"&&=":u=" && ";break;default:return}const p=null===(s=t.findDirectExpression(i.Target))||void 0===s?void 0:s.concatTokens();if(void 0===p)return;const f=null===(a=null===(o=t.findDirectExpression(i.Source))||void 0===o?void 0:o.getFirstChild())||void 0===a?void 0:a.getFirstToken().getStart();if(void 0===f)return;const g=y.EditHelper.replaceRange(n,d.getStart(),f,"= "+p+u);return S.Issue.atToken(n,t.getFirstToken(),"Expand operator",this.getMetadata().key,this.conf.severity,g)}stringTemplateAlpha(e,t,n,s){var o,r;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.StringTemplateSource)){const a=null===(o=e.findDirectExpression(i.StringTemplateFormatting))||void 0===o?void 0:o.concatTokens().toUpperCase();if(void 0===a||!1===(null==a?void 0:a.startsWith("ALPHA = ")))continue;let c="";switch(a){case"ALPHA = IN":c="CONVERSION_EXIT_ALPHA_INPUT";break;case"ALPHA = OUT":c="CONVERSION_EXIT_ALPHA_OUTPUT";break;default:return}const l=" ".repeat(t.getFirstToken().getStart().getCol()-1),d=null===(r=e.findDirectExpression(i.Source))||void 0===r?void 0:r.concatTokens(),u=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),p=`DATA ${u} TYPE string.\n${l}CALL FUNCTION '${c}'\n${l}  EXPORTING\n${l}    input  = ${d}\n${l}  IMPORTING\n${l}    output = ${u}.\n`,f=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),p),g=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),e.getLastToken().getEnd(),u),h=y.EditHelper.merge(g,f);return S.Issue.atToken(n,t.getFirstToken(),"Downport ALPHA",this.getMetadata().key,this.conf.severity,h)}}outlineLoopInput(e,t,n,s){var o,a;if(!(e.get()instanceof c.Unknown))return;if(!(t.get()instanceof r.Loop))return;if(null===(o=t.findDirectExpression(i.LoopSource))||void 0===o?void 0:o.findDirectExpression(i.SimpleSource2))return;const l=null===(a=t.findDirectExpression(i.LoopSource))||void 0===a?void 0:a.findDirectExpression(i.Source);if(void 0===l)return;const d=this.uniqueName(t.getFirstToken().getStart(),n.getFilename(),s),u=`DATA(${d}) = ${l.concatTokens()}.\n`+" ".repeat(t.getFirstToken().getStart().getCol()-1),p=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),u),f=y.EditHelper.replaceRange(n,l.getFirstToken().getStart(),l.getLastToken().getEnd(),d),g=y.EditHelper.merge(f,p);return S.Issue.atToken(n,t.getFirstToken(),"Outline LOOP input",this.getMetadata().key,this.conf.severity,g)}outlineLoopTarget(e,t,n){var s,o,a,c,l,d,u;if(!(e.get()instanceof r.Loop))return;if(this.lowReg.getConfig().getVersion()===D.Version.OpenABAP)return;const p=null===(s=e.findDirectExpression(i.LoopSource))||void 0===s?void 0:s.findDirectExpression(i.SimpleSource2);if(void 0===p)return;const f=null==p?void 0:p.concatTokens();if(void 0===f)return;let g;const h=n.spaghetti.lookupPosition(p.getFirstToken().getStart(),t.getFilename());h&&(g=h.findVariable(p.concatTokens()));const m=e.concatTokens().toUpperCase();if(m.includes(" GROUP BY ")||m.startsWith("LOOP AT GROUP "))return;const v=m.includes(" REFERENCE INTO "),E=" ".repeat(e.getFirstToken().getStart().getCol()-1),C=null===(a=null===(o=e.findDirectExpression(i.LoopTarget))||void 0===o?void 0:o.findDirectExpression(i.Target))||void 0===a?void 0:a.findDirectExpression(i.InlineData);if(C){const s=(null===(c=C.findDirectExpression(i.TargetField))||void 0===c?void 0:c.concatTokens())||"DOWNPORT_ERROR";let o=`DATA ${s} LIKE LINE OF ${f}.\n${E}`;if(v){const i=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n);o=`DATA ${i} LIKE LINE OF ${f}.\n${E}DATA ${s} LIKE REF TO ${i}.\n${E}`}const r=y.EditHelper.insertAt(t,e.getFirstToken().getStart(),o),a=y.EditHelper.replaceRange(t,C.getFirstToken().getStart(),C.getLastToken().getEnd(),s),l=y.EditHelper.merge(a,r);return S.Issue.atToken(t,e.getFirstToken(),"Outline LOOP data target",this.getMetadata().key,this.conf.severity,l)}const b=null===(d=null===(l=e.findDirectExpression(i.LoopTarget))||void 0===l?void 0:l.findDirectExpression(i.FSTarget))||void 0===d?void 0:d.findDirectExpression(i.InlineFS);if(b){const n=(null===(u=b.findDirectExpression(i.TargetFieldSymbol))||void 0===u?void 0:u.concatTokens())||"DOWNPORT_ERROR";let s=`LIKE LINE OF ${f}`;const o=null==g?void 0:g.getType();o instanceof T.TableType&&o.getRowType()instanceof T.AnyType&&(s="TYPE ANY");const r=`FIELD-SYMBOLS ${n} ${s}.\n${E}`,a=y.EditHelper.insertAt(t,e.getFirstToken().getStart(),r),c=y.EditHelper.replaceRange(t,b.getFirstToken().getStart(),b.getLastToken().getEnd(),n),l=y.EditHelper.merge(c,a);return S.Issue.atToken(t,e.getFirstToken(),"Outline LOOP fs target",this.getMetadata().key,this.conf.severity,l)}}outlineFor(e,t,n,s){var o,r,a,c,l,d,u,p,f;let g="",h="";const T=null===(o=e.findFirstExpression(i.Source))||void 0===o?void 0:o.concatTokens();let m=e.findFirstExpression(i.TargetField),y=null==m?void 0:m.concatTokens();const S=e.findExpressionAfterToken("OF");if(void 0!==S&&(m=S,y=null==S?void 0:S.concatTokens()),(null===(a=null===(r=e.findDirectExpression(i.InlineLoopDefinition))||void 0===r?void 0:r.getFirstChild())||void 0===a?void 0:a.get())instanceof i.TargetFieldSymbol&&(m=void 0,y=void 0),m){const e=m.getFirstToken().getStart(),t=s.spaghetti.lookupPosition(e,n.getFilename());y&&t&&new R(t).isDuplicateName(y,e)&&this.renameVariable(t,y,e,n,s)}let v=(null===(c=e.findDirectExpression(i.ComponentCond))||void 0===c?void 0:c.concatTokens())||"";""!==v&&(v=" WHERE "+v);const E=e.findDirectExpression(i.InlineLoopDefinition),C=null===(l=null==E?void 0:E.findExpressionAfterToken("INTO"))||void 0===l?void 0:l.concatTokens();if(e.findDirectTokenByText("UNTIL")||e.findDirectTokenByText("WHILE")){const o=e.findDirectExpression(i.InlineFieldDefinition),r=null===(d=null==o?void 0:o.findFirstExpression(i.Field))||void 0===d?void 0:d.concatTokens(),a=this.uniqueName(e.getFirstToken().getStart(),n.getFilename(),s);g+=t+"DATA "+r+" TYPE i.\n";const c=null==o?void 0:o.getChildren()[2];(null==c?void 0:c.get())instanceof i.Source&&(g+=t+r+" = "+c.concatTokens()+".\n");const l=e.findDirectTokenByText("UNTIL")?" NOT":"",u=e.findFirstExpression(i.Cond);g+=t+`DATA ${a} LIKE sy-index.\n`,g+=t+`${a} = sy-index.\n`,g+=t+`WHILE${l} ${null==u?void 0:u.concatTokens()}.\n`,g+=t+`  sy-index = ${a}.\n`;const p=e.findExpressionAfterToken("THEN");h+=p?`  ${r} = ${p.concatTokens()}.\n`:`  ${r} = ${r} + 1.\n`,h+=t+"ENDWHILE"}else if(void 0!==y){let n=null===(u=e.findExpressionAfterToken("FROM"))||void 0===u?void 0:u.concatTokens();n=n?" FROM "+n:"";let s=null===(p=e.findExpressionAfterToken("TO"))||void 0===p?void 0:p.concatTokens();s=s?" TO "+s:"";let o="";for(const t of e.findDirectExpressions(i.LoopGroupByComponent))""!==o&&(o+=" "),o+=t.concatTokens();""!==o&&(o=" GROUP BY ( "+o+" )");const r=e.findDirectExpression(i.FieldChain);r&&(o=" GROUP BY "+r.concatTokens()),e.findDirectTokenByText("ASCENDING")&&(o+=" ASCENDING"),e.findDirectTokenByText("DESCENDING")&&(o+=" DESCENDING");const a=e.findExpressionAfterToken("GROUPS");if(a){const e=a.concatTokens();e.startsWith("<")?o+=" ASSIGNING FIELD-SYMBOL("+e+")":o+=" INTO DATA("+e+")"}let c="";e.concatTokens().toUpperCase().includes(" IN GROUP ")&&(c="-items");let l="INTO DATA";y.startsWith("<")&&(l="ASSIGNING FIELD-SYMBOL"),g+=t+`LOOP AT ${T}${c} ${l}(${y})${n}${s}${v}${o}.\n`,C&&(g+=t+"  DATA("+C+") = sy-tabix.\n"),h="ENDLOOP"}else void 0===y&&(g+=t+`LOOP AT ${T} ASSIGNING FIELD-SYMBOL(${null===(f=e.findFirstExpression(i.TargetFieldSymbol))||void 0===f?void 0:f.concatTokens()})${v}.\n`,C&&(g+=t+"  DATA("+C+") = sy-tabix.\n"),h="ENDLOOP");const b=e.findDirectExpression(i.Let);return b&&(g+=this.outlineLet(b,t,s,n)),{body:g,end:h}}outlineFilter(e,t,n,s){var o;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Source)){const r=e.getFirstToken();if("FILTER"!==r.getStr().toUpperCase())continue;const a=e.findDirectExpression(i.FilterBody);if(void 0===a)continue;const c=null===(o=a.findDirectExpression(i.Source))||void 0===o?void 0:o.concatTokens();if(void 0===c)continue;let l=this.findType(e,n,s);l=void 0===l?"LIKE "+c:"TYPE "+l;const d=this.uniqueName(r.getStart(),n.getFilename(),s),u=this.uniqueName(r.getStart(),n.getFilename(),s),p=" ".repeat(t.getFirstToken().getStart().getCol()-1);let f="";f+=`DATA ${d} ${l}.\n`,f+=`${p}LOOP AT ${c} INTO DATA(${u}) ${a.concatTokens().substring(c.length+1)}.\n`,f+=`${p}  INSERT ${u} INTO TABLE ${d}.\n`,f+=`${p}ENDLOOP.\n${p}`;const g=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),f),h=y.EditHelper.replaceRange(n,r.getStart(),e.getLastToken().getEnd(),d),T=y.EditHelper.merge(h,g);return S.Issue.atToken(n,r,"Downport FILTER",this.getMetadata().key,this.conf.severity,T)}}outlineSwitch(e,t,n,s){var o,a,l,d;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Source)){const c=e.getFirstToken();if("SWITCH"!==c.getStr().toUpperCase())continue;let u=this.findType(e,n,s);if(void 0===u){if(t.get()instanceof r.Move&&t.findDirectExpression(i.Source)===e&&void 0!==(null===(o=t.findDirectExpression(i.Target))||void 0===o?void 0:o.findDirectExpression(i.TargetField))&&(u="LIKE "+(null===(a=t.findDirectExpression(i.Target))||void 0===a?void 0:a.concatTokens())),void 0===u)continue}else u="TYPE "+u;const p=this.uniqueName(c.getStart(),n.getFilename(),s),f=" ".repeat(t.getFirstToken().getStart().getCol()-1);let h="",T="";const m=e.findDirectExpression(i.SwitchBody);if(void 0===m)continue;for(const e of(null===(l=null==m?void 0:m.findDirectExpression(i.Let))||void 0===l?void 0:l.findDirectExpressions(i.InlineFieldDefinition))||[])T=e.getFirstToken().getStr(),h+=f+`DATA(${T}) = ${null===(d=m.findFirstExpression(i.Source))||void 0===d?void 0:d.concatTokens()}.\n`;h+=`DATA ${p} ${u}.\n`;let v=!1,E=!1;for(const e of m.getChildren())e.get()instanceof i.Source&&!1===v?(h+=f+`CASE ${e.concatTokens()}.`,v=!0):e instanceof g.TokenNode&&"THEN"===e.concatTokens().toUpperCase()?(E=!0,h+=".\n"):e instanceof g.TokenNode&&"WHEN"===e.concatTokens().toUpperCase()?(E=!1,h+=`\n${f}  WHEN `):e instanceof g.TokenNode&&"OR"===e.concatTokens().toUpperCase()?h+=" OR ":e instanceof g.TokenNode&&"ELSE"===e.concatTokens().toUpperCase()?(E=!0,h+=`\n${f}  WHEN OTHERS.\n`):h+=!1===E?e.concatTokens():f+"    "+p+" = "+e.concatTokens()+".";h+="\n"+f+"ENDCASE.\n"+f;const C=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),h),b=y.EditHelper.replaceRange(n,c.getStart(),e.getLastToken().getEnd(),p),I=y.EditHelper.merge(b,C);return S.Issue.atToken(n,c,"Downport SWITCH",this.getMetadata().key,this.conf.severity,I)}}outlineReduce(e,t,n,s){var o,r;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Source)){const a=e.getFirstToken();if("REDUCE"!==a.getStr().toUpperCase())continue;const c=this.findType(e,n,s);if(void 0===c)continue;const l=this.uniqueName(a.getStart(),n.getFilename(),s),d=" ".repeat(t.getFirstToken().getStart().getCol()-1);let u="",p="";const f=e.findDirectExpression(i.ReduceBody);if(void 0===f)continue;const g=f.findDirectExpression(i.Let);g&&(u+=this.outlineLet(g,d,s,n));let h="";for(const e of f.findDirectExpressions(i.InlineFieldDefinition)){p=e.getFirstToken().getStr(),""===h&&(h=p);const t=s.spaghetti.lookupPosition(e.getFirstToken().getStart(),n.getFilename());t&&new R(t).isDuplicateName(p,e.getFirstToken().getStart())&&this.renameVariable(t,p,e.getFirstToken().getStart(),n,s);const a=null===(o=e.findFirstExpression(i.Source))||void 0===o?void 0:o.concatTokens(),l=null===(r=e.findFirstExpression(i.TypeName))||void 0===r?void 0:r.concatTokens();a?a.toUpperCase().startsWith("VALUE #")?u+=d+`DATA(${p}) = ${a.replace("#",c)}.\n`:u+=d+`DATA(${p}) = ${a}.\n`:u+=d+`DATA ${p} TYPE ${l}.\n`}let T="";for(const e of(null==f?void 0:f.findDirectExpressions(i.For))||[]){const t=this.outlineFor(e,d,n,s);u+=t.body,T=t.end+".\n"+T}const m=f.findDirectExpression(i.ReduceNext);if(void 0===m)continue;for(const e of m.getChildren()){const t=e.concatTokens();"NEXT"!==t.toUpperCase()&&(e.get()instanceof i.SimpleTarget?u+=d+"  "+t+" ":e.get()instanceof i.Source?u+=" "+t+".\n":u+=t)}u+=d+T,u+=d+`${l} = ${h}.\n`;const v=`DATA ${l} TYPE ${c}.\n`+u+d,E=e.findDirectTokenByText(")"),C=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),v),b=y.EditHelper.replaceRange(n,a.getStart(),E.getEnd(),l),I=y.EditHelper.merge(b,C);return S.Issue.atToken(n,a,"Downport REDUCE",this.getMetadata().key,this.conf.severity,I)}}outlineCorresponding(e,t,n,s){var o;if(!(e.get()instanceof c.Unknown))return;const a=t.findAllExpressionsRecursive(i.Source);for(const e of a){const a=e.getFirstToken();if("CORRESPONDING"!==a.getStr().toUpperCase())continue;const c=e.findDirectExpression(i.CorrespondingBody);if("BASE"===(null==c?void 0:c.getFirstToken().getStr().toUpperCase()))continue;const l=this.uniqueName(a.getStart(),n.getFilename(),s),d=" ".repeat(t.getFirstToken().getStart().getCol()-1);let u=this.findType(e,n,s);if(void 0===u){if(t.get()instanceof r.Move&&t.findDirectExpression(i.Source)===e&&(u="LIKE "+(null===(o=t.findDirectExpression(i.Target))||void 0===o?void 0:o.concatTokens())),void 0===u)continue}else u="TYPE "+u;const p=`DATA ${l} ${u}.\n`+d+`CLEAR ${l}.\n`+d+`MOVE-CORRESPONDING ${null==c?void 0:c.concatTokens()} TO ${l}.\n`+d,f=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),p),g=y.EditHelper.replaceRange(n,a.getStart(),e.getLastToken().getEnd(),l),h=y.EditHelper.merge(g,f);return S.Issue.atToken(n,a,"Downport CORRESPONDING",this.getMetadata().key,this.conf.severity,h)}}outlineValue(e,t,n,s){var o,a,l,d;if(!(e.get()instanceof c.Unknown))return;const u=t.findAllExpressionsRecursive(i.Source);for(const e of u){const c=e.getFirstToken();if("VALUE"!==c.getStr().toUpperCase())continue;const u=e.findDirectExpression(i.ValueBody);let p=this.findType(e,n,s);if(void 0===p){if(t.get()instanceof r.Move&&t.findDirectExpression(i.Source)===e&&(p="LIKE "+(null===(o=t.findDirectExpression(i.Target))||void 0===o?void 0:o.concatTokens())),void 0===p)continue}else p="TYPE "+p;const f=this.uniqueName(c.getStart(),n.getFilename(),s);let h=" ".repeat(t.getFirstToken().getStart().getCol()-1),T="";const m=null===(a=null==u?void 0:u.findDirectExpression(i.ValueBase))||void 0===a?void 0:a.findExpressionAfterToken("BASE");m&&(T+=h+f+" = "+m.concatTokens()+".\n");let v,E="",C=f,b=!1,I="";void 0!==(null==u?void 0:u.findDirectExpression(i.ValueBodyLine))&&(C=this.uniqueName(c.getStart(),n.getFilename(),s),I=h+((null==u?void 0:u.findDirectExpression(i.For))?"  ":"")+`DATA ${C} LIKE LINE OF ${f}.\n`);for(const e of(null==u?void 0:u.getChildren())||[]){if(e.get()instanceof i.FieldAssignment)!1===b&&(T+=I,b=!0),T+=h+C+"-"+e.concatTokens()+".\n";else if(e instanceof g.ExpressionNode&&e.get()instanceof i.For){const t=this.outlineFor(e,h,n,s);T+=t.body,E=t.end+".\n"+E,h+="  "}else e instanceof g.ExpressionNode&&e.get()instanceof i.Source?1===(null==u?void 0:u.getChildren().length)&&(T+=h+f+" = "+e.concatTokens()+".\n"):e instanceof g.ExpressionNode&&e.get()instanceof i.Let&&(T+=this.outlineLet(e,h,s,n));if(e instanceof g.ExpressionNode&&e.get()instanceof i.ValueBodyLine){let t=!1;for(const n of(null==e?void 0:e.getChildren())||[])n.get()instanceof i.FieldAssignment?(!1===b&&(T+=I,b=!0),T+=h+C+"-"+n.concatTokensWithLinebreaks()+".\n"):n.get()instanceof i.Source||n.get()instanceof i.ValueBodyLines?(T+=h+"INSERT "+n.concatTokens()+` INTO TABLE ${f}.\n`,t=!0):")"===n.concatTokens()&&(!1===b&&"("===(null==v?void 0:v.concatTokens())&&(T+=I,b=!0),!1===t&&(T+=h+`INSERT ${C} INTO TABLE ${f}.\n`)),v=n}}if(""===T&&"OPTIONAL"===(null===(l=null==u?void 0:u.getLastChild())||void 0===l?void 0:l.getFirstToken().getStr().toUpperCase())){const e=u.findFirstExpression(i.FieldChain),t=this.uniqueName(c.getStart(),n.getFilename(),s);let o,r="",a="";for(const t of(null==e?void 0:e.getChildren())||[])t.get()instanceof i.TableExpression&&t instanceof g.ExpressionNode?o=t:void 0===o?r+=t.concatTokens():a+=t.concatTokens();let l="";l=3===(null==o?void 0:o.getChildren().length)?"INDEX "+(null===(d=null==o?void 0:o.findDirectExpression(i.Source))||void 0===d?void 0:d.concatTokens()):"WITH KEY "+(null==o?void 0:o.concatTokens().replace("[ ","").replace(" ]","")),T+=h+`READ TABLE ${r} INTO DATA(${t}) ${l}.\n`+h+"IF sy-subrc = 0.\n"+h+`  ${f} = ${t}${a}.\n`+h+"ENDIF.\n",p.includes("LIKE DATA(")&&(p=`LIKE LINE OF ${r}`)}""!==E&&(h=h.substring(2),T+=h+E);const D=`DATA ${f} ${p}.\n`+h+`CLEAR ${f}.\n`+T+h,x=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),D),P=y.EditHelper.replaceRange(n,c.getStart(),e.getLastToken().getEnd(),f),A=y.EditHelper.merge(P,x);return S.Issue.atToken(n,c,"Downport VALUE",this.getMetadata().key,this.conf.severity,A)}}outlineLet(e,t,n,s){var o;let r="";for(const a of e.findDirectExpressions(i.InlineFieldDefinition)){const e=a.getFirstChild();if(void 0===e)continue;const c=e.concatTokens().toLowerCase(),l=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),s.getFilename());if(void 0===l)continue;new R(l).isDuplicateName(c,e.getFirstToken().getStart())&&this.renameVariable(l,c,e.getFirstToken().getStart(),s,n);const d=l.findVariable(c);if(void 0===d){const e=a.findFirstExpression(i.Source);e&&(r+=t+"DATA("+c+`) = ${e.concatTokens()}.\n`);continue}r+=t+"DATA "+c+` TYPE ${d.getType().getQualifiedName()?null===(o=d.getType().getQualifiedName())||void 0===o?void 0:o.toLowerCase():d.getType().toABAP()}.\n`;const u=a.findFirstExpression(i.Source);u&&(r+=t+c+` = ${u.concatTokens()}.\n`)}return r}renameVariable(e,t,n,s,o){const i=this.uniqueName(n,s.getFilename(),o),r=new R(e).renameVariable(t,n,s,i),a=S.Issue.atPosition(s,n,"Rename before outline",this.getMetadata().key,this.conf.severity,r);throw new O(a)}findType(e,t,n,s=!1){var o,r;const a=e.findDirectExpression(i.TypeNameOrInfer);if(void 0===a)return;const c=a.getFirstToken(),l=a.concatTokens().toLowerCase();if("#"!==l)return s?"REF TO "+l:l;const d=n.spaghetti.lookupPosition(c.getStart(),t.getFilename());if(void 0===d)return;let p;for(const e of(null==d?void 0:d.getData().references)||[])if(e.referenceType===u.ReferenceType.InferredType&&e.resolved&&e.position.getStart().equals(c.getStart())&&e.resolved instanceof h.TypedIdentifier&&!0===(null===(o=e.extra)||void 0===o?void 0:o.foundQualified)){p=e.resolved;break}return void 0!==p?p.getType()instanceof T.ObjectReferenceType?p.getType().toABAP():null===(r=p.getType().getQualifiedName())||void 0===r?void 0:r.toLowerCase():void 0}outlineFS(e,t,n,s){var o,a;if(e.get()instanceof c.Unknown&&!(t.get()instanceof r.Loop))for(const e of t.findAllExpressionsRecursive(i.InlineFS)){const r=null===(o=e.findDirectExpression(i.TargetFieldSymbol))||void 0===o?void 0:o.getFirstToken();if(void 0===r)continue;const c=r.getStr();let l="";if(t.concatTokens().toUpperCase().startsWith("APPEND INITIAL LINE TO "))l="LIKE LINE OF "+(null===(a=t.findFirstExpression(i.Target))||void 0===a?void 0:a.concatTokens());else{const t=s.spaghetti.lookupPosition(r.getStart(),n.getFilename());if(void 0===t)continue;const o=t.findVariable(c);if(void 0===o)continue;if(o.getType()instanceof T.VoidType)return S.Issue.atToken(n,e.getFirstToken(),"Error outlining voided type",this.getMetadata().key,this.conf.severity);l="TYPE ",l+=o.getType().getQualifiedName()?o.getType().getQualifiedName().toLowerCase():o.getType().toABAP()}const d=`FIELD-SYMBOLS ${c} ${l}.\n`+" ".repeat(t.getFirstToken().getStart().getCol()-1),u=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),d),p=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),e.getLastToken().getEnd(),c),f=y.EditHelper.merge(p,u);return S.Issue.atToken(n,e.getFirstToken(),"Outline FIELD-SYMBOL",this.getMetadata().key,this.conf.severity,f)}}outlineData(e,t,n){var s,o;if(this.lowReg.getConfig().getVersion()!==D.Version.OpenABAP)for(const r of e.findAllExpressionsRecursive(i.InlineData)){const a=null===(s=r.findDirectExpression(i.TargetField))||void 0===s?void 0:s.getFirstToken();if(void 0===a)continue;const c=a.getStr(),l=n.spaghetti.lookupPosition(a.getStart(),t.getFilename());if(void 0===l)continue;const d=l.findVariable(c);if(void 0===d)continue;if(d.getType()instanceof T.VoidType&&void 0===d.getType().getQualifiedName())continue;if(d.getType()instanceof T.StructureType&&void 0===d.getType().getQualifiedName())continue;let u=d.getType().getQualifiedName()?null===(o=d.getType().getQualifiedName())||void 0===o?void 0:o.toLowerCase():d.getType().toABAP();if(d.getType()instanceof T.ObjectReferenceType&&(u=d.getType().toABAP()),""===u)continue;const p=`DATA ${c} TYPE ${u}.\n`+" ".repeat(e.getFirstToken().getStart().getCol()-1),f=y.EditHelper.insertAt(t,e.getFirstToken().getStart(),p),g=y.EditHelper.replaceRange(t,r.getFirstToken().getStart(),r.getLastToken().getEnd(),c),h=y.EditHelper.merge(g,f);return S.Issue.atToken(t,r.getFirstToken(),"Outline DATA",this.getMetadata().key,this.conf.severity,h)}}outlineCond(e,t,n,s){var o,a;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Source)){if("COND"!==e.getFirstToken().getStr().toUpperCase())continue;const c=e.findDirectExpression(i.CondBody);if(void 0===c)continue;const l=this.uniqueName(e.getFirstToken().getStart(),n.getFilename(),s);let d=this.findType(e,n,s);if(void 0===d){if(t.get()instanceof r.Move&&t.findDirectExpression(i.Source)===e&&void 0!==(null===(o=t.findDirectExpression(i.Target))||void 0===o?void 0:o.findDirectExpression(i.TargetField))&&(d="LIKE "+(null===(a=t.findDirectExpression(i.Target))||void 0===a?void 0:a.concatTokens())),void 0===d)continue}else d="TYPE "+d;const u=" ".repeat(t.getFirstToken().getStart().getCol()-1),p=this.buildCondBody(c,l,u,n,s),f=e.findDirectTokenByText(")"),g=`DATA ${l} ${d}.\n`+p,h=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),g),T=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),f.getEnd(),l),m=y.EditHelper.merge(T,h);return S.Issue.atToken(n,e.getFirstToken(),"Downport COND",this.getMetadata().key,this.conf.severity,m)}}buildCondBody(e,t,n,s,o){let r="",a=!0,c=!0;for(const l of e.getChildren())if(l instanceof g.TokenNode)switch(l.getFirstToken().getStr().toUpperCase()){case"WHEN":!0===a?(r+=n+"IF ",a=!1):r+=n+"ELSEIF ";break;case"THEN":r+=".\n";break;case"ELSE":r+=n+"ELSE.\n",c=!1;break;default:throw"buildCondBody, unexpected token"}else if(l.get()instanceof i.Cond)r+=l.concatTokens();else if(l.get()instanceof i.Let)r+=this.outlineLet(l,n,o,s);else if(l.get()instanceof i.Source)r+=n+"  "+t+" = "+l.concatTokens()+".\n";else{if(!(l.get()instanceof i.Throw))throw"buildCondBody, unexpected expression, "+l.get().constructor.name;r+=n+"  "+l.concatTokens().replace(/THROW /i,"RAISE EXCEPTION NEW ")+".\n"}return c&&(r+=n+"ELSE.\n",r+=n+`  CLEAR ${t}.\n`),r+=n+"ENDIF.\n",r+=n,r}outlineConv(e,t,n,s){var o;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Source)){if("CONV"!==e.getFirstToken().getStr().toUpperCase())continue;const r=e.findDirectTokenByText(")");if(void 0===r)continue;const a=null===(o=e.findDirectExpression(i.ConvBody))||void 0===o?void 0:o.concatTokens();if(void 0===a)continue;const c=this.uniqueName(e.getFirstToken().getStart(),n.getFilename(),s),l=this.findType(e,n,s),d=" ".repeat(t.getFirstToken().getStart().getCol()-1),u=`DATA ${c} TYPE ${l}.\n`+d+`${c} = ${a}.\n`+d,p=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),u),f=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),r.getEnd(),c),g=y.EditHelper.merge(f,p);return S.Issue.atToken(n,e.getFirstToken(),"Downport CONV",this.getMetadata().key,this.conf.severity,g)}}outlineCast(e,t,n,s){var o;if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Cast)){const r=this.uniqueName(e.getFirstToken().getStart(),n.getFilename(),s),a=this.findType(e,n,s,!0),c=null===(o=e.findDirectExpression(i.Source))||void 0===o?void 0:o.concatTokens(),l=`DATA ${r} TYPE ${a}.\n`+" ".repeat(t.getFirstToken().getStart().getCol()-1)+`${r} ?= ${c}.\n`+" ".repeat(t.getFirstToken().getStart().getCol()-1),d=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),l),u=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),e.getLastToken().getEnd(),r),p=y.EditHelper.merge(u,d);return S.Issue.atToken(n,e.getFirstToken(),"Downport CAST",this.getMetadata().key,this.conf.severity,p)}}uniqueName(e,t,n){const o=n.spaghetti.lookupPosition(e,t);if(void 0===o){const e="temprr"+this.counter;return this.counter++,e}let i="";for(o.getIdentifier().stype===p.ScopeType.ClassDefinition&&(i="_"+s.createHash("sha1").update(o.getIdentifier().sname).digest("hex").substring(0,10));;){const e="temp"+this.counter+i,t=this.existsRecursive(o,e);if(this.counter++,!1===t)return e}}existsRecursive(e,t){if(e.findVariable(t)||e.findType(t))return!0;for(const n of e.getChildren())if(n.findVariable(t)||n.findType(t)||this.existsRecursive(n,t))return!0;return!1}replaceXsdBool(e,t,n){if(this.lowReg.getConfig().getVersion()===D.Version.OpenABAP)return;const s=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),t.getFilename());for(const n of(null==s?void 0:s.getData().references)||[])if(n.referenceType===u.ReferenceType.BuiltinMethodReference&&"XSDBOOL"===n.position.getName().toUpperCase()){const s=n.position.getToken();let o;for(const t of e.findAllExpressionsRecursive(i.Source))if(t.getFirstToken().getStart().equals(s.getStart())){o=t;break}const r=null==o?void 0:o.getChildren();if(void 0===o||4!==(null==r?void 0:r.length))continue;const a="CONV xsdboolean( boolc( "+r[2].concatTokens()+" ) )",c=y.EditHelper.replaceRange(t,o.getFirstToken().getStart(),o.getLastToken().getEnd(),a);return S.Issue.atToken(t,s,"Use BOOLC",this.getMetadata().key,this.conf.severity,c)}}findMethodCallExpression(e,t){var n;for(const s of e.findAllExpressions(i.MethodCall))if(null===(n=s.findDirectExpression(i.MethodName))||void 0===n?void 0:n.getFirstToken().getStart().equals(t.getStart()))return s}replaceMethodConditional(e,t,n,s){if(e.get()instanceof c.Unknown)for(const e of t.findAllExpressionsRecursive(i.Compare)){const o=e.findDirectExpression(i.MethodCallChain);if(void 0===o)continue;const r=o.concatTokens().toUpperCase();if(r.startsWith("LINE_EXISTS( ")||r.startsWith("LINE_INDEX( "))continue;let a=!1;const c=s.spaghetti.lookupPosition(t.getFirstToken().getStart(),n.getFilename());for(const e of(null==c?void 0:c.getData().references)||[])if(e.referenceType===u.ReferenceType.BuiltinMethodReference&&d.BuiltIn.isPredicate(o.getFirstToken().getStr().toUpperCase())){a=!0;break}const l=o.getLastToken().getEnd();let p=y.EditHelper.insertAt(n,l," IS NOT INITIAL");if(!0===a){p=y.EditHelper.insertAt(n,l," ) = abap_true");const e=y.EditHelper.insertAt(n,o.getFirstToken().getStart(),"boolc( ");p=y.EditHelper.merge(p,e)}return S.Issue.atToken(n,o.getFirstToken(),"Downport method conditional",this.getMetadata().key,this.conf.severity,p)}}getReference(e,t,n){var s,o,a;if(!(e.get()instanceof r.GetReference))return;const c=null===(s=e.findDirectExpression(i.Target))||void 0===s?void 0:s.findDirectExpression(i.InlineData);if(void 0===c)return;const l=null===(o=c.findDirectExpression(i.TargetField))||void 0===o?void 0:o.concatTokens(),d=null===(a=e.findDirectExpression(i.Source))||void 0===a?void 0:a.concatTokens();if(void 0===l||void 0===d)return;const u=`DATA ${l} LIKE REF TO ${d}.\n`,p=y.EditHelper.insertAt(t,e.getFirstToken().getStart(),u),f=y.EditHelper.replaceRange(t,c.getFirstToken().getStart(),c.getLastToken().getEnd(),l),g=y.EditHelper.merge(f,p);return S.Issue.atToken(t,c.getFirstToken(),"Downport, outline DATA ref",this.getMetadata().key,this.conf.severity,g)}replaceContains(e,t,n){const s=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),t.getFilename());let o=!1;for(const t of e.findAllExpressionsRecursive(i.Compare))if(o=void 0!==t.findDirectExpression(i.MethodCallChain),!0===o)break;if(!1!==o)for(const n of(null==s?void 0:s.getData().references)||[])if(n.referenceType===u.ReferenceType.BuiltinMethodReference&&"CONTAINS"===n.position.getName().toUpperCase()){const s=n.position.getToken(),o=this.findMethodCallExpression(e,s);if(void 0===o)continue;const r=o.findAllExpressions(i.Source).map((e=>e.concatTokens()));if(2!==r.length)continue;const a=r[0]+" CS "+r[1],c=o.getFirstToken().getStart(),l=o.getLastToken().getEnd(),d=y.EditHelper.replaceRange(t,c,l,a);return S.Issue.atToken(t,s,"Downport contains()",this.getMetadata().key,this.conf.severity,d)}}replaceLineFunctions(e,t,n,s){var o,r;if(this.lowReg.getConfig().getVersion()===D.Version.OpenABAP)return;const c=n.spaghetti.lookupPosition(e.getFirstToken().getStart(),t.getFilename());for(const l of(null==c?void 0:c.getData().references)||[]){if(l.referenceType!==u.ReferenceType.BuiltinMethodReference)continue;const c=l.position.getName().toUpperCase();if("LINE_EXISTS"===c||"LINE_INDEX"===c){const d=l.position.getToken(),u=this.findMethodCallExpression(e,d);if(void 0===u)continue;let p="";for(const e of(null===(o=null==u?void 0:u.findFirstExpression(i.TableExpression))||void 0===o?void 0:o.getChildren())||[])"["!==e.getFirstToken().getStr()&&"]"!==e.getFirstToken().getStr()&&(e.get()instanceof i.ComponentChainSimple&&""===p?p="WITH KEY ":e.get()instanceof i.Source&&""===p&&(p="INDEX "),p+=e.concatTokens()+" ");const f=null===(r=u.findFirstExpression(i.Source))||void 0===r?void 0:r.concatTokens().split("[")[0],g=this.uniqueName(e.getFirstToken().getStart(),t.getFilename(),n),h=" ".repeat(e.getFirstToken().getStart().getCol()-1),T=`DATA ${g} LIKE sy-subrc.\n`+h+`READ TABLE ${f} ${p}TRANSPORTING NO FIELDS.\n`+h+g+` = ${"LINE_EXISTS"===c?"sy-subrc":"sy-tabix"}.\n`+h;let m=e.getFirstToken().getStart();if(e.get()instanceof a.ElseIf&&(m=this.findStartOfIf(e,s),void 0===m))continue;const v=y.EditHelper.insertAt(t,m,T),E=u.getFirstToken().getStart(),C=u.getLastToken().getEnd(),b=y.EditHelper.replaceRange(t,E,C,g+("LINE_EXISTS"===c?" = 0":"")),I=y.EditHelper.merge(b,v);return S.Issue.atToken(t,d,"Replace line function",this.getMetadata().key,this.conf.severity,I)}}}findStartOfIf(e,t){const n=t.getStructure();for(const t of(null==n?void 0:n.findAllStructuresRecursive(l.If))||[])for(const n of t.findDirectStructures(l.ElseIf))if(n.getFirstStatement()===e)return t.getFirstToken().getStart()}newToCreateObject(e,t,n,s){if(!(e.get()instanceof c.Unknown))return;const o=t.findDirectExpression(i.Source);let a;if(t.get()instanceof r.Move&&o&&"NEW"===o.getFirstToken().getStr().toUpperCase()){const e=t.findDirectExpression(i.Target),r=null==o?void 0:o.findFirstExpression(i.NewObject);if(e&&r&&o.concatTokens()===r.concatTokens()&&void 0===e.findDirectExpression(i.InlineData)){const o=this.newParameters(r,e.concatTokens(),s,n);void 0!==o&&(a=y.EditHelper.replaceRange(n,t.getFirstToken().getStart(),t.getLastToken().getEnd(),o))}}if(void 0===a&&t.findAllExpressions(i.NewObject)){const e=t.findFirstExpression(i.NewObject);if(void 0===e)return;const o=this.uniqueName(e.getFirstToken().getStart(),n.getFilename(),s),r=this.newParameters(e,o,s,n);if(void 0===r)return;const c=this.findType(e,n,s),l=" ".repeat(t.getFirstToken().getStart().getCol()-1),d=`DATA ${o} TYPE REF TO ${c}.\n`+l+r+"\n"+l;if(e.getFirstToken().getStart().equals(t.getFirstToken().getStart())&&e.getLastToken().getEnd().equals(t.getLastToken().getStart()))a=y.EditHelper.replaceRange(n,t.getFirstToken().getStart(),t.getLastToken().getEnd(),r);else{const s=y.EditHelper.insertAt(n,t.getFirstToken().getStart(),d),i=y.EditHelper.replaceRange(n,e.getFirstToken().getStart(),e.getLastToken().getEnd(),o);a=y.EditHelper.merge(i,s)}}return a?S.Issue.atToken(n,t.getFirstToken(),"Use CREATE OBJECT instead of NEW",this.getMetadata().key,this.conf.severity,a):void 0}newParameters(e,t,n,s){var o,r,a;const c=null===(o=e.findDirectExpression(i.TypeNameOrInfer))||void 0===o?void 0:o.getFirstToken();let l="#"===(null==c?void 0:c.getStr())?"":" TYPE "+(null==c?void 0:c.getStr());const d=e.findFirstExpression(i.ParameterListS);if(d)l=d?l+" EXPORTING "+d.concatTokens():l;else if(c){const t=null===(r=e.findDirectExpression(i.Source))||void 0===r?void 0:r.concatTokens();if(t){const e=n.spaghetti.lookupPosition(null==c?void 0:c.getStart(),s.getFilename());let o;for(const t of(null==e?void 0:e.getData().references)||[])(t.referenceType===u.ReferenceType.InferredType||t.referenceType===u.ReferenceType.ObjectOrientedReference)&&t.resolved&&t.position.getStart().equals(c.getStart())&&(o=t.resolved);if(o instanceof h.TypedIdentifier){const t=o.getType();if(!(t instanceof T.ObjectReferenceType))throw new Error("newParameters, downport, unexpected");if(o=null==e?void 0:e.findClassDefinition(t.getQualifiedName()),void 0===o){const e=this.highReg.getObject("CLAS",t.getQualifiedName());o=null==e?void 0:e.getDefinition()}}if(o&&void 0===o.getMethodDefinitions)return;const i=null===(a=this.findConstructor(o,e))||void 0===a?void 0:a.getParameters().getDefaultImporting();l+=i?" EXPORTING "+i+" = "+t:void 0===e?" SpagUndefined ERROR":void 0===o?" ClassDefinitionNotFound ERROR":" SomeError ERROR"}}return`CREATE OBJECT ${t}${l}.`}findConstructor(e,t){let n=e;for(;void 0!==n;){const e=null==n?void 0:n.getMethodDefinitions().getByName("CONSTRUCTOR");if(e)return e;const s=n.getSuperClass();if(!s)return;n=null==t?void 0:t.findClassDefinition(s)}}}},45363(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(75457),a=n(15838),c=n(20572),l=n(80017),d=n(29780),u=n(20572),p=n(2403);class f{runSyntax(e,t,n){const g=e.findFirstExpression(s.NamespaceSimpleName).getFirstToken(),h=[];let T;void 0===n&&(n="");for(const s of e.getChildren()){const e=s.get();if(s instanceof r.StatementNode){if(e instanceof o.Type){const e=(new d.Type).runSyntax(s,t,n+g.getStr()+"-");e&&h.push({name:e.getName(),type:e.getType()})}else if(e instanceof o.IncludeType){const e=(new l.IncludeType).runSyntax(s,t);e instanceof c.VoidType||e instanceof u.UnknownType?T=e:h.push(...e)}}else if(s instanceof r.StructureNode&&e instanceof i.Types){const e=(new f).runSyntax(s,t,n+g.getStr()+"-");e&&h.push({name:e.getName(),type:e.getType()})}}if(T)return new a.TypedIdentifier(g,t.filename,T);if(0===h.length)return;let m=n+g.getStr();return t.scope.getType()!==p.ScopeType.ClassDefinition&&t.scope.getType()!==p.ScopeType.Interface||(m=t.scope.getName()+"=>"+m),new a.TypedIdentifier(g,t.filename,new u.StructureType(h,m))}}t.Types=f},45455(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BSPApplication=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WAPA"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BSPApplication=o},45496(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorityCheck=void 0;const s=n(82245),o=n(93170);t.AuthorityCheck=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},45627(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFunctionInput=void 0;const s=n(28377),o=n(49028),i=n(89301),r=n(3125),a=n(51849),c=n(37210),l=n(76342),d=n(83568),u=n(53504),p=n(16732);class f extends r.Expression{getRunnable(){const e=(0,r.seq)((0,r.tok)(i.ParenLeftW),d.Source,(0,r.tok)(i.WParenRightW)),t=(0,r.ver)(o.Version.v740sp05,(0,r.seq)((0,r.tok)(i.WAt),(0,r.altPrio)(l.SimpleSource3,e))),n=(0,r.altPrio)(p.SQLFunction,u.SQLAggregation,c.SQLFieldName,a.SQLAliasField,s.Constant,t),f=(0,r.altPrio)("+","-","*","/","&&");return(0,r.seq)(n,(0,r.starPrio)((0,r.seq)(f,n)))}}t.SQLFunctionInput=f},45769(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldChain=void 0;const s=n(75457),o=n(82245),i=n(89301),r=n(20572),a=n(66228),c=n(98885),l=n(36453),d=n(87309),u=n(68278),p=n(28096),f=n(82245),g=n(86667),h=n(53280),T=n(44489),m=n(82054),y=n(49028);t.FieldChain=class{static runSyntax(e,t,n,l=!1){var h,T,S;if((null===(h=e.getFirstChild())||void 0===h?void 0:h.get())instanceof o.SourceField&&e.findDirectExpression(o.ComponentName)){const s=e.concatTokens().replace(/ /g,""),i=(null===(T=e.findDirectExpression(o.FieldOffset))||void 0===T?void 0:T.concatTokens())||"",r=(null===(S=e.findDirectExpression(o.FieldLength))||void 0===S?void 0:S.concatTokens())||"",a=t.scope.findVariable(s.replace(i,"").replace(r,""));if(a)return n&&t.scope.addReference(e.getFirstToken(),a,n,t.filename),a.getType()}let v;const E=e.getChildren();v=this.findTop(E[0],t,n);for(let e=1;e<E.length;e++){const h=E[e];if(void 0===h)break;if(h.get()instanceof i.DashW){const e="Ending with dash";return t.issues.push((0,m.syntaxIssue)(t,h.getFirstToken(),e)),r.VoidType.get(m.CheckSyntaxKey)}if(h.get()instanceof i.Dash){if(v instanceof r.UnknownType)return r.VoidType.get(m.CheckSyntaxKey);if(!(v instanceof r.StructureType||v instanceof r.TableType&&v.isWithHeader()||v instanceof r.VoidType)){if(!(v instanceof r.TableType&&!1===v.isWithHeader())){const e="Not a structure, FieldChain, "+(null==v?void 0:v.constructor.name)+", "+h.concatTokens();return t.issues.push((0,m.syntaxIssue)(t,h.getFirstToken(),e)),r.VoidType.get(m.CheckSyntaxKey)}{let n="";for(let t=0;t<e;t++)n+=E[t].concatTokens();if(!t.scope.isAllowHeaderUse(n)){const e="Table without header, cannot access fields, "+n;return t.issues.push((0,m.syntaxIssue)(t,h.getFirstToken(),e)),r.VoidType.get(m.CheckSyntaxKey)}v=v.getRowType(),v instanceof r.StructureType||v instanceof r.VoidType||(v=new r.StructureType([{name:"TABLE_LINE",type:v}]))}}}else if(h.get()instanceof i.InstanceArrow){if(!(v instanceof r.ObjectReferenceType||v instanceof r.DataReference||v instanceof r.VoidType)){const e="Not an object reference, field chain";return t.issues.push((0,m.syntaxIssue)(t,h.getFirstToken(),e)),r.VoidType.get(m.CheckSyntaxKey)}}else if(h.get()instanceof f.Dereference){if(v=g.Dereference.runSyntax(h,v,t),!1===l&&!0===(null==v?void 0:v.isGeneric())&&t.scope.getVersion()<y.Version.v756&&t.scope.getVersion()!==y.Version.Cloud)throw new Error("A generic reference cannot be dereferenced")}else if(h.get()instanceof o.ComponentName)v instanceof r.TableType&&v.isWithHeader()&&(v=v.getRowType()),v=a.ComponentName.runSyntax(v,h,t);else if(h instanceof s.ExpressionNode&&h.get()instanceof o.TableExpression){if(!(v instanceof r.TableType||v instanceof r.VoidType||v instanceof r.UnknownType)){const e="Table expression, expected table";return t.issues.push((0,m.syntaxIssue)(t,h.getFirstToken(),e)),r.VoidType.get(m.CheckSyntaxKey)}p.TableExpression.runSyntax(h,t,v),v instanceof r.VoidType||v instanceof r.UnknownType||(v=v.getRowType())}else if(h.get()instanceof o.AttributeName)v=c.AttributeName.runSyntax(v,h,t,n);else if(h.get()instanceof o.FieldOffset&&h instanceof s.ExpressionNode){const e=d.FieldOffset.runSyntax(h,t);e&&(v instanceof r.CharacterType?v=new r.CharacterType(v.getLength()-e):v instanceof r.HexType&&(v=new r.HexType(v.getLength()-e)))}else if(h.get()instanceof o.FieldLength&&h instanceof s.ExpressionNode){const e=u.FieldLength.runSyntax(h,t);e&&(v instanceof r.CharacterType?v=new r.CharacterType(e):v instanceof r.HexType&&(v=new r.HexType(e)))}}return v}static findTop(e,t,n){if(void 0!==e){if(e instanceof s.ExpressionNode&&e.get()instanceof o.SourceFieldSymbol)return h.SourceFieldSymbol.runSyntax(e,t);if(e instanceof s.ExpressionNode&&e.get()instanceof o.SourceField)return T.SourceField.runSyntax(e,t,n);if(e instanceof s.ExpressionNode&&e.get()instanceof o.Field)return T.SourceField.runSyntax(e,t,n);if(e.get()instanceof o.ClassName){const n=e.getFirstToken(),s=n.getStr();if("OBJECT"===s.toUpperCase())return new r.GenericObjectReferenceType;const o=t.scope.existsObject(s);if(null==o?void 0:o.id)return t.scope.addReference(n,o.id,l.ReferenceType.ObjectOrientedReference,t.filename),new r.ObjectReferenceType(o.id);if(!1===t.scope.getDDIC().inErrorNamespace(s))return t.scope.addReference(n,void 0,l.ReferenceType.ObjectOrientedVoidReference,t.filename,{ooName:s.toUpperCase()}),r.VoidType.get(s);{const n="Unknown class "+s;return t.issues.push((0,m.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(m.CheckSyntaxKey)}}}}}},45823(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Continue=void 0;const s=n(3125);t.Continue=class{getMatcher(){return(0,s.str)("CONTINUE")}}},45893(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneTile=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN05"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneTile=o},45931(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCond=void 0;const s=n(82245),o=n(96808);class i{static runSyntax(e,t,n){for(const o of e.findDirectExpressions(s.ComponentCondSub)){const e=o.findDirectExpression(s.ComponentCond);e&&i.runSyntax(e,t,n)}for(const i of e.findDirectExpressions(s.ComponentCompare))o.ComponentCompare.runSyntax(i,t,n)}}t.ComponentCond=i},45935(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const s=n(3125),o=n(82245);t.Events=class{getMatcher(){const e=(0,s.seq)("EXPORTING",(0,s.plus)(o.MethodParamOptional));return(0,s.seq)((0,s.altPrio)("CLASS-EVENTS","EVENTS"),o.EventName,(0,s.optPrio)(e))}}},45955(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSWhere=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)("WHERE",s.CDSCondition)}}t.CDSWhere=i},46037(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLStructure=void 0;const s=n(3125),o=n(85562),i=n(80997),r=n(376);class a extends s.Expression{getRunnable(){return(0,s.seq)("DEFINE STRUCTURE",i.DDLName,"{",(0,s.plusPrio)((0,s.altPrio)(o.DDLStructureField,r.DDLInclude)),"}")}}t.DDLStructure=a},46070(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IAMApp=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA6"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.IAMApp=o},46075(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CaseType=void 0;const s=n(82245),o=n(93170);t.CaseType=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},46104(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KeepSingleParameterCallsOnOneLine=t.KeepSingleParameterCallsOnOneLineConf=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(82245),a=n(86696);class c extends o.BasicRuleConfig{constructor(){super(...arguments),this.length=120}}t.KeepSingleParameterCallsOnOneLineConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"keep_single_parameter_on_one_line",title:"Keep single parameters on one line",shortDescription:"Keep single parameter calls on one line",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#keep-single-parameter-calls-on-one-line",tags:[a.RuleTag.Whitespace,a.RuleTag.Styleguide,a.RuleTag.SingleFile],badExample:"call_method(\n  2 ).",goodExample:"call_method( 2 )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){let n=[];if("INTF"===t.getType())return[];if(void 0===e.getStructure())return[];for(const t of e.getStatements())if(!(!1===this.isMultiLine(t)||this.calcStatementLength(t)>this.getConfig().length||this.containsNewLineValue(t)||this.containsNewLineTableExpression(t)||this.containsFieldAssigments(t)||this.containsNewLineTemplate(t)))for(const s of t.findAllExpressions(r.MethodCallParam))n=n.concat(this.check(s,e));return n}containsFieldAssigments(e){return e.findAllExpressions(r.FieldAssignment).length>1}containsNewLineTableExpression(e){for(const t of e.findAllExpressions(r.TableExpression))if(t.getFirstToken().getRow()!==t.getLastToken().getRow())return!0;return!1}containsNewLineValue(e){for(const t of e.findAllExpressions(r.Source))if("VALUE"===t.getFirstToken().getStr().toUpperCase()&&t.getFirstToken().getRow()!==t.getLastToken().getRow())return!0;return!1}containsNewLineTemplate(e){for(const t of e.findAllExpressions(r.StringTemplate))for(const e of t.getAllTokens())if(e.getStr().includes("\\n"))return!0;return!1}check(e,t){if(!0===this.isSingleParameter(e)&&!0===this.isMultiLine(e)){for(const t of e.findAllExpressions(r.MethodCallParam))if(!1===this.isSingleParameter(t)&&!1===this.isWithoutParameters(t))return[];const n="Keep single parameter on one line";return[s.Issue.atToken(t,e.getFirstToken(),n,this.getMetadata().key,this.conf.severity)]}return[]}calcStatementLength(e){let t=0;for(const n of e.getTokens())0===t&&(t+=n.getStart().getCol()),t=t+n.getStr().length+1;return t}isMultiLine(e){const t=e.getFirstToken(),n=e.getLastToken();return t.getStart().getRow()<n.getStart().getRow()}isWithoutParameters(e){return 2===e.getChildren().length}isSingleParameter(e){if(e.findDirectExpression(r.Source)){for(const t of e.findAllExpressions(r.ParameterListS))if(t.getChildren().length>1)return!1;return!0}const t=e.findDirectExpression(r.ParameterListS);if(t)return 1===t.getChildren().length;const n=e.findDirectExpression(r.MethodParameters);if(n){if(n.getChildren().length>2)return!1;const e=n.findDirectExpression(r.ParameterListS);if(e&&1===e.getChildren().length)return!0;const t=n.findDirectExpression(r.ParameterListT);if(t&&1===t.getChildren().length)return!0}return!1}}t.KeepSingleParameterCallsOnOneLine=l},46141(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MoveCorresponding=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(49028),a=n(20572),c=n(82054);t.MoveCorresponding=class{runSyntax(e,t){const n=e.findDirectExpression(s.Source),l=e.findDirectExpression(s.SimpleTarget);if(void 0===n||void 0===l){const n="MoveCorresponding, source or target not found";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}const d=o.Source.runSyntax(n,t),u=i.Target.runSyntax(l,t);if(t.scope.getVersion()<r.Version.v740sp05&&t.scope.getVersion()!==r.Version.Cloud){if(d instanceof a.TableType&&!1===d.isWithHeader()){const n="MOVE-CORRESPONDING with tables possible from v740sp05";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}if(u instanceof a.TableType&&!1===u.isWithHeader()){const n="MOVE-CORRESPONDING with tables possible from v740sp05";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}}}}},46197(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Add=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Add=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},46216(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WBracketLeft=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ["}}t.WBracketLeft=o},46237(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OmitPrecedingZeros=t.OmitPrecedingZerosConf=void 0;const s=n(99732),o=n(77465),i=n(71759),r=n(82245),a=n(86696),c=n(50612),l=n(71249);class d extends o.BasicRuleConfig{}t.OmitPrecedingZerosConf=d;class u extends s.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"omit_preceding_zeros",title:"Omit preceding zeros",shortDescription:"Omit preceding zeros from integer constants",tags:[a.RuleTag.SingleFile,a.RuleTag.Quickfix],badExample:"int = -001.",goodExample:"int = -1."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],s="Omit preceding zeros";for(const o of e.getStatements()){for(const t of o.findAllExpressions(r.Integer)){const r=t.getLastToken(),a=r.getStr();if(a.length>1&&a.startsWith("0")){if(o.get()instanceof c.CallScreen||o.get()instanceof c.SetScreen)continue;const t=a.replace(/^0+/,""),d=l.EditHelper.replaceRange(e,r.getStart(),r.getEnd(),t),u=i.Issue.atToken(e,r,s,this.getMetadata().key,this.getConfig().severity,d);n.push(u)}}for(const a of o.findAllExpressions(r.ParameterException)){const o=null===(t=a.findDirectExpression(r.SimpleName))||void 0===t?void 0:t.getFirstToken(),c=null==o?void 0:o.getStr();if(o&&c&&c.length>1&&c.startsWith("0")){const t=c.replace(/^0+/,""),r=l.EditHelper.replaceRange(e,o.getStart(),o.getEnd(),t),a=i.Issue.atToken(e,o,s,this.getMetadata().key,this.getConfig().severity,r);n.push(a)}}}return n}}t.OmitPrecedingZeros=u},46268(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=void 0;const s=n(3125),o=n(49028);t.Summary=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"SUMMARY")}}},46291(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetBadi=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(53414);t.GetBadi=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t)}}},46493(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Procedural=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(20941),a=n(3646),c=n(2403),l=n(84383),d=n(15838),u=n(20572),p=n(5518),f=n(2416),g=n(36453);t.Procedural=class{constructor(e,t){this.scope=t,this.reg=e}addAllFormDefinitions(e,t){const n=e.getStructure();if(n){const s={scope:a.CurrentScope.buildDefault(this.reg,t),filename:e.getFilename(),issues:[]};for(const e of n.findAllStructures(i.Form))this.scope.addFormDefinitions([new r.FormDefinition(e,s)])}const s=e.getStructure();if(void 0===s)return;const c=s.findAllStatements(o.Include);for(const e of c){const n=this.findInclude(e,t);n&&this.addAllFormDefinitions(n,t)}}findInclude(e,t){const n=e.findFirstExpression(s.IncludeName);if(void 0===n)return;const o=n.getFirstToken().getStr();if(t instanceof l.FunctionGroup){const e=t.getInclude(o);if(void 0!==e)return e}const i=this.reg.getObject("PROG",o);if(void 0!==i)return i.getABAPFiles()[0];for(const e of this.reg.getObjectsByType("FUGR"))if(e instanceof l.FunctionGroup){const t=e.getInclude(o);if(t)return t}}findFunctionGroupScope(e){var t,n,i;for(const r of e.getModules()){if(!1===r.isGlobalParameters())continue;const a=e.getSequencedFiles().find((e=>e.getFilename().endsWith(".fugr."+r.getName().toLowerCase().replace(/\//g,"#")+".abap")));if(void 0===a)continue;const c=null===(i=null===(n=null===(t=a.getStructure())||void 0===t?void 0:t.findFirstStatement(o.FunctionModule))||void 0===n?void 0:n.findFirstExpression(s.Field))||void 0===i?void 0:i.getFirstToken();void 0!==c&&this.addFunctionScope(r,c,a.getFilename(),!0)}}findFunctionScope(e,t,n){if(!(e instanceof l.FunctionGroup))throw new Error("findFunctionScope, expected function group input");const o=t.findFirstExpression(s.Field).getFirstToken(),i=o.getStr();this.scope.push(c.ScopeType.FunctionModule,i,t.getFirstToken().getStart(),n);const r=e.getModule(i);if(void 0===r)throw new Error('Function module definition "'+i+'" not found');!0!==r.isGlobalParameters()&&this.addFunctionScope(r,o,n)}addFunctionScope(e,t,n,s=!1){var o,i,a,c,l;const h=new p.DDIC(this.reg),T=new Set;for(const m of e.getParameters()){let e;if(void 0===m.type||""===m.type)e=u.AnyType.get();else if(m.type.includes("=>")){const[s,o]=m.type.split("=>"),i=this.scope.findObjectDefinition(s);if(i){const s=i.getTypeDefinitions().getByName(o);s&&(this.scope.addReference(t,s,g.ReferenceType.TypeReference,n),e=s.getType())}}if(void 0===e&&(e=h.lookup(m.type).type),m.direction===r.FunctionModuleParameterDirection.tables&&(e=e instanceof u.TableType?new u.TableType(e.getRowType(),{withHeader:!0,keyType:u.TableKeyType.default}):new u.TableType(e,{withHeader:!0,keyType:u.TableKeyType.default})),(e instanceof u.UnknownType||e instanceof u.VoidType)&&(null===(o=m.type)||void 0===o?void 0:o.includes("-"))){const[t,n]=m.type.split("-"),s=h.lookupTableOrView(t).type;if(s&&s instanceof u.StructureType){const t=s.getComponentByName(n);t&&(e=t)}if(void 0===e||e instanceof u.UnknownType||e instanceof u.VoidType){const s=null===(i=this.scope.findType(t))||void 0===i?void 0:i.getType();if(s&&s instanceof u.StructureType){const t=s.getComponentByName(n);t&&(e=t)}}}else if((e instanceof u.UnknownType||e instanceof u.VoidType)&&(null===(a=m.type)||void 0===a?void 0:a.includes("=>"))){const[t,n]=m.type.split("=>"),s=this.scope.findObjectDefinition(t),o=new f.ObjectOriented(this.scope).searchTypeName(s,n);o&&(e=o.getType())}if((e instanceof u.UnknownType||e instanceof u.VoidType)&&m.type){const t=h.lookupBuiltinType(m.type);if(t&&(e=t),void 0===e||e instanceof u.UnknownType||e instanceof u.VoidType){const t=null===(c=this.scope.findType(m.type))||void 0===c?void 0:c.getType();t&&(e=t)}if(void 0===e||e instanceof u.UnknownType||e instanceof u.VoidType){const t=null===(l=this.scope.findTypePoolType(m.type))||void 0===l?void 0:l.getType();t&&(e=t)}}if(e instanceof u.UnknownType&&!1===new p.DDIC(this.reg).inErrorNamespace(m.type)&&(e=u.VoidType.get(m.type)),!T.has(m.name.toUpperCase())){const o=new d.TypedIdentifier(t,n,e);!0===s?void 0===this.scope.findVariable(m.name)&&this.scope.addNamedIdentifier(m.name,o):this.scope.addNamedIdentifier(m.name,o),T.add(m.name.toUpperCase())}}}}},46614(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayServiceGroupsMetadata=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWSG"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.GatewayServiceGroupsMetadata=o},46743(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTypes=void 0;const s=n(15838),o=n(75457),i=n(82245),r=n(50612),a=n(20572),c=n(2403),l=n(2416),d=n(88532),u=n(93422),p=n(36453),f=n(20572),g=n(45769),h=n(20941),T=n(82245),m=n(56727),y=n(86789);t.BasicTypes=class{constructor(e){this.input=e}lookupQualifiedName(e){var t;if(void 0===e)return;const n=this.input.scope.findType(e);if(n)return n;if(e.includes("=>")){const t=e.split("=>"),n=t[0],o=t[1],i=this.input.scope.findObjectDefinition(n);if(i)if(o.includes("-")){const e=o.split("-"),t=e[0],n=e[1],r=i.getTypeDefinitions().getByName(t),a=null==r?void 0:r.getType();if(r&&a instanceof f.StructureType){let t=a.getComponentByName(n);if(e[2]&&t instanceof f.StructureType&&(t=t.getComponentByName(e[2])),t)return new s.TypedIdentifier(r.getToken(),r.getFilename(),t)}}else{const e=i.getTypeDefinitions().getByName(o);if(e)return e}}else if(e.includes("-")){const t=e.split("-"),n=t[0],o=t[1],i=this.input.scope.findType(n);if(i){const e=i.getType();if(e instanceof f.StructureType){let n=e.getComponentByName(o);if(t[2]&&n instanceof f.StructureType&&(n=n.getComponentByName(t[2])),n)return new s.TypedIdentifier(i.getToken(),i.getFilename(),n)}}}const o=this.input.scope.getDDIC().lookupNoVoid(e),i=null===(t=null==o?void 0:o.object)||void 0===t?void 0:t.getIdentifier();if(i&&(null==o?void 0:o.type))return new s.TypedIdentifier(i.getToken(),i.getFilename(),o.type);const r=this.input.scope.getDDIC().lookupBuiltinType(e);if(r)return new s.TypedIdentifier(new u.Identifier(new y.Position(1,1),e),m.BuiltIn.filename,r);return this.input.scope.findTypePoolType(e)||void 0}resolveLikeName(e,t=!0){if(void 0===e)return;let n=e.findFirstExpression(i.FieldChain);if(void 0===n&&(n=e.findFirstExpression(i.TypeName)),void 0===n&&(n=e.findFirstExpression(i.FieldSub)),void 0===n&&(n=e.findFirstExpression(i.SimpleFieldChain)),void 0===n&&(n=e.findFirstExpression(i.SimpleFieldChain2)),void 0===n)throw new Error("resolveLikeName, chain undefined");const s=n.concatTokens();let r,c=[...n.getChildren()];if(0===c.length)return new a.UnknownType('Type error, could not resolve "'+s+'", resolveLikeName1');if(!c[1]||"=>"!==c[1].getFirstToken().getStr()&&"->"!==c[1].getFirstToken().getStr()){const e=c.shift().getFirstToken().getStr();let l=this.input.scope.findVariable(e);const d=this.input.scope.findVariable(s);if(d&&(c=[],l=d),r=null==l?void 0:l.getType(),void 0===l&&(l=this.input.scope.findExtraLikeType(e),r=null==l?void 0:l.getType()),l&&this.input.scope.addReference(null==n?void 0:n.getFirstToken(),l,p.ReferenceType.TypeReference,this.input.filename),void 0===r){const t=this.input.scope.getDDIC().lookupNoVoid(e);if(void 0!==t){const e={filename:this.input.filename,token:n.getFirstToken(),object:t.object};this.input.scope.getDDICReferences().addUsing(this.input.scope.getParentObj(),e)}r=null==t?void 0:t.type}if(void 0===r&&!1===this.input.scope.isAnyOO()&&!1===this.input.scope.getDDIC().inErrorNamespace(e))return this.input.scope.addReference(n.getChildren()[0].getFirstToken(),void 0,p.ReferenceType.VoidType,this.input.filename),a.VoidType.get(e);for(;c.length>0;){const e=c.shift();if("-"===e.getFirstToken().getStr()){if(r instanceof a.VoidType)return r}else if("[]"===e.concatTokens())r instanceof a.TableType&&(r=new f.TableType(r.getRowType(),{withHeader:!1,keyType:a.TableKeyType.default}));else if(e instanceof o.ExpressionNode&&e.get()instanceof i.FieldLength){const t=parseInt(e.concatTokens().replace("(","").replace(")",""),10);isNaN(t)?r=new a.UnknownType("Type error, invalid field length"):r instanceof a.DateType?r=t>8?new a.UnknownType("Type error, offset too long"):new a.CharacterType(t):r instanceof a.CharacterType&&(r=t<=r.getLength()?new a.CharacterType(t):new a.UnknownType("Type error, offset too long"))}else if(r instanceof a.TableType&&(r=r.getRowType()),r instanceof a.StructureType){if(r=r.getComponentByName(e.getFirstToken().getStr()),void 0===r)return new a.UnknownType("Type error, field not part of structure "+s)}else if(!(r instanceof a.VoidType))return new a.UnknownType("Type error, field not part of structure "+s)}if(r instanceof a.VoidType)return r;if(r instanceof f.TableType&&r.isWithHeader()&&!0===t)r=r.getRowType();else if(r instanceof a.TableType&&!0===r.isWithHeader()&&r.getRowType()instanceof a.VoidType)return r.getRowType()}else r=g.FieldChain.runSyntax(n,this.input,p.ReferenceType.TypeReference);return r||new a.UnknownType('Type error, could not resolve "'+s+'", resolveLikeName2')}cloneType(e,t){return e instanceof f.CharacterType&&t&&!1===t.includes("-")&&(e=e.cloneType({qualifiedName:t})),e}resolveTypeName(e,t,n,o){var i;if(void 0===e)return;const r=this.resolveTypeChain(e);if(r)return this.cloneType(r,o);const a=e.concatTokens().toUpperCase(),c=this.input.scope.getDDIC().lookupBuiltinType(a,t,n,o);if(void 0!==c)return c;const l=this.input.scope.findType(a);if(l){const t=e.getFirstToken();if(a.includes("~")){const e=a.split("~")[0],n=this.input.scope.findInterfaceDefinition(e);n&&this.input.scope.addReference(t,n,p.ReferenceType.ObjectOrientedReference,this.input.filename,{ooType:"INTF",ooName:e})}return this.input.scope.addReference(t,l,p.ReferenceType.TypeReference,this.input.filename),l.getType()}const d=null===(i=this.input.scope.findTypePoolType(a))||void 0===i?void 0:i.getType();if(d)return d;const u=this.input.scope.getDDIC().lookup(a);return u?(this.input.scope.getDDICReferences().addUsing(this.input.scope.getParentObj(),{object:u.object,token:e.getFirstToken(),filename:this.input.filename}),u.type instanceof s.TypedIdentifier?this.input.scope.addReference(e.getFirstToken(),u.type,p.ReferenceType.TypeReference,this.input.filename):u.type instanceof f.VoidType&&this.input.scope.addReference(e.getFirstToken(),void 0,p.ReferenceType.VoidType,this.input.filename),this.cloneType(u.type,o)):void 0}simpleType(e,t){let n=e.findFirstExpression(i.NamespaceSimpleName);if(void 0===n&&(n=e.findFirstExpression(i.DefinitionName)),void 0===n)return;let o,a=n.getFirstToken();n.countTokens()>1&&(a=new u.Identifier(a.getStart(),n.concatTokens())),e.get()instanceof r.Type?!0===this.input.scope.isTypePool()?o=a.getStr():(o=(t||"")+a.getStr(),this.input.scope.getType()!==c.ScopeType.ClassDefinition&&this.input.scope.getType()!==c.ScopeType.Interface||(o=this.input.scope.getName()+"=>"+o)):t&&(o=t+o);const l=this.parseType(e,o);return l?new s.TypedIdentifier(a,this.input.filename,l):void 0}parseTable(e,t){var n,s,o,r;const c=e.findFirstExpression(i.TypeName)||e.findFirstExpression(i.EntityAssociation),l=null===(n=e.findFirstExpression(i.TypeTable))||void 0===n?void 0:n.concatTokens().toUpperCase();if(void 0===l)return;let d;l.startsWith("TYPE STANDARD TABLE ")||l.startsWith("TYPE TABLE ")||l.startsWith("LIKE TABLE ")||l.startsWith("LIKE STANDARD TABLE ")?d=f.TableAccessType.standard:l.startsWith("TYPE SORTED TABLE ")||l.startsWith("LIKE SORTED TABLE ")?d=f.TableAccessType.sorted:(l.startsWith("TYPE HASHED TABLE ")||l.startsWith("LIKE HASHED TABLE "))&&(d=f.TableAccessType.hashed);const u=e.findAllExpressions(T.TypeTableKey),p=u[0],g=void 0!==(null==p?void 0:p.findDirectExpression(T.Field))&&"PRIMARY_KEY"!==(null===(s=null==p?void 0:p.findDirectExpression(T.Field))||void 0===s?void 0:s.concatTokens().toUpperCase()),h={name:"primary_key",type:d||f.TableAccessType.standard,isUnique:!g&&!0===(null==p?void 0:p.concatTokens().toUpperCase().includes("WITH UNIQUE ")),keyFields:[]};let m=1;if(!1===g)for(const e of(null==p?void 0:p.findDirectExpressions(T.FieldSub))||[])h.keyFields.push(e.concatTokens().toUpperCase());else m=0;const y=[];for(let e=m;e<u.length;e++){const t=u[e],n=null===(o=t.findDirectExpression(T.Field))||void 0===o?void 0:o.concatTokens();if(void 0===n)continue;const s={name:n,type:t.findDirectTokenByText("SORTED")?f.TableAccessType.sorted:f.TableAccessType.hashed,isUnique:!0===(null==t?void 0:t.concatTokens().toUpperCase().includes("WITH UNIQUE ")),keyFields:[]};for(const e of(null==t?void 0:t.findDirectExpressions(T.FieldSub))||[])s.keyFields.push(e.concatTokens().toUpperCase());y.push(s)}let S=a.TableKeyType.user;l.includes(" EMPTY KEY")?S=a.TableKeyType.empty:l.includes(" DEFAULT KEY")&&(S=a.TableKeyType.default);const v={withHeader:l.includes(" WITH HEADER LINE"),keyType:S,primaryKey:h,secondary:y};let E;if(l.startsWith("TYPE TABLE OF REF TO ")||l.startsWith("TYPE STANDARD TABLE OF REF TO ")||l.startsWith("TYPE SORTED TABLE OF REF TO ")||l.startsWith("TYPE HASHED TABLE OF REF TO ")){if(E=this.resolveTypeRef(c),E)return new a.TableType(E,v,t)}else if(l.startsWith("TYPE TABLE OF ")||l.startsWith("TYPE STANDARD TABLE OF ")||l.startsWith("TYPE SORTED TABLE OF ")||l.startsWith("TYPE HASHED TABLE OF ")){if(E=this.resolveTypeName(c),E)return new a.TableType(E,v,t)}else if(l.startsWith("LIKE TABLE OF ")||l.startsWith("LIKE STANDARD TABLE OF ")||l.startsWith("LIKE SORTED TABLE OF ")||l.startsWith("LIKE HASHED TABLE OF ")){if(E=this.resolveLikeName(e),E)return new a.TableType(E,v,t)}else{if("TYPE STANDARD TABLE"===l||"TYPE SORTED TABLE"===l||"TYPE HASHED TABLE"===l||"TYPE INDEX TABLE"===l||"TYPE ANY TABLE"===l)return new a.TableType(a.AnyType.get(),v);if(l.startsWith("TYPE RANGE OF ")){const n=e.findFirstExpression(i.TypeName);if(E=this.resolveTypeName(n),void 0===E)return new a.UnknownType("TYPE RANGE OF, could not resolve type");const s=new a.StructureType([{name:"sign",type:new a.CharacterType(1)},{name:"option",type:new a.CharacterType(2)},{name:"low",type:E},{name:"high",type:E}]);return v.primaryKey.type=f.TableAccessType.standard,new a.TableType(s,v,t)}if(l.startsWith("LIKE RANGE OF ")){const n=e.findFirstExpression(i.FieldChain);if(E=this.resolveLikeName(n),void 0===E)return new a.UnknownType("LIKE RANGE OF, could not resolve type");const s=new a.StructureType([{name:"sign",type:new a.CharacterType(1)},{name:"option",type:new a.CharacterType(2)},{name:"low",type:E},{name:"high",type:E}],t);return v.primaryKey.type=f.TableAccessType.standard,new a.TableType(s,v)}if(c&&(l.startsWith("TYPE TABLE FOR CREATE ")||l.startsWith("TYPE TABLE FOR READ ")||l.startsWith("TYPE TABLE FOR DELETE ")||l.startsWith("TYPE TABLE FOR UPDATE "))){const e=c.concatTokens();return(null===(r=this.input.scope.getDDIC().lookupDDLS(e))||void 0===r?void 0:r.type)?new a.TableType(f.VoidType.get("RAP-TODO"),v):this.input.scope.getDDIC().inErrorNamespace(e)?new a.UnknownType(`DDLS ${e} not found`):a.VoidType.get(e)}}return this.parseType(e,t)}parseType(e,t){var n,o,c,l,d,u,p,f;const g=e.findFirstExpression(i.TypeName);let h,T=null===(n=e.findFirstExpression(i.Type))||void 0===n?void 0:n.concatTokens().toUpperCase();if(void 0===T&&(T=null===(o=e.findFirstExpression(i.TypeParam))||void 0===o?void 0:o.concatTokens().toUpperCase()),void 0===T&&(T=null===(c=e.findFirstExpression(i.TypeTable))||void 0===c?void 0:c.concatTokens().toUpperCase(),!1===(null==T?void 0:T.startsWith("TYPE"))&&!1===(null==T?void 0:T.startsWith("LIKE"))&&(T="TYPE")),void 0===T&&(T=null===(l=e.findFirstExpression(i.FormParamType))||void 0===l?void 0:l.concatTokens().toUpperCase()),void 0===T&&e.get()instanceof r.Parameter&&e.findDirectTokenByText("LIKE")&&(T="LIKE "+(null==g?void 0:g.concatTokens())),void 0===T&&(T="TYPE"),T.startsWith("LIKE LINE OF ")){const t=null===(d=e.findFirstExpression(i.FieldChain))||void 0===d?void 0:d.concatTokens();let n=e.findFirstExpression(i.Type);void 0===n&&(n=e.findFirstExpression(i.FormParamType)),void 0===n&&(n=e.findFirstExpression(i.FieldChain));const s=this.resolveLikeName(n,!1);return void 0===s?new a.UnknownType('Type error, could not resolve "'+t+'", parseType'):s instanceof a.TableType?s.getRowType():s instanceof a.VoidType?s:new a.UnknownType("Type error, not a table type "+t)}if(T.startsWith("LIKE REF TO ")){const t=null===(u=e.findFirstExpression(i.FieldChain))||void 0===u?void 0:u.concatTokens(),n=this.resolveLikeName(e.findFirstExpression(i.Type),!1);return void 0===n?new a.UnknownType('Type error, could not resolve "'+t+'", parseType'):new a.DataReference(n,t)}if("TYPE STANDARD TABLE"===T||"TYPE SORTED TABLE"===T||"TYPE HASHED TABLE"===T||"TYPE INDEX TABLE"===T||"TYPE ANY TABLE"===T)return new a.TableType(a.AnyType.get(),{withHeader:e.concatTokens().toUpperCase().includes("WITH HEADER LINE"),keyType:a.TableKeyType.default});if(T.startsWith("LIKE ")){let n=e.findFirstExpression(i.Type);void 0===n&&(n=e.findFirstExpression(i.FormParamType)),void 0===n&&(n=e.findFirstExpression(i.TypeParam)),void 0===n&&(n=e.findFirstExpression(i.TypeName)),void 0===n&&(n=e.findFirstExpression(i.FieldChain)),h=this.resolveLikeName(n),h&&this.isOccurs(e)?h=new a.TableType(h,{withHeader:T.includes("WITH HEADER LINE"),keyType:a.TableKeyType.default},t):T.endsWith(" WITH HEADER LINE")&&h instanceof a.TableType&&(h=new a.TableType(h.getRowType(),{withHeader:!0,keyType:a.TableKeyType.default},t))}else{if(T.startsWith("TYPE LINE OF ")){const t=e.findFirstExpression(i.TypeName);return h=this.resolveTypeName(t),h instanceof s.TypedIdentifier&&(h=h.getType()),h instanceof a.TableType?h.getRowType():h instanceof a.VoidType?h:h instanceof a.UnknownType?new a.UnknownType("TYPE LINE OF, unknown type, "+h.getError()):new a.UnknownType("TYPE LINE OF, unexpected type, "+(null==h?void 0:h.constructor.name))}if(T.startsWith("TYPE REF TO "))h=this.resolveTypeRef(g);else if(T.startsWith("TYPE")){h=this.resolveTypeName(g,this.findLength(e),this.findDecimals(e),t);const n=e.concatTokens().toUpperCase();if(h&&this.isOccurs(e))h=new a.TableType(h,{withHeader:n.includes(" WITH HEADER LINE"),keyType:a.TableKeyType.default},t);else if(h&&n.includes(" WITH HEADER LINE"))if(h instanceof a.VoidType)h=new a.TableType(h,{withHeader:!0,keyType:a.TableKeyType.default});else{if(!(h instanceof a.TableType))throw new Error("WITH HEADER LINE can only be used with internal table");h=new a.TableType(h.getRowType(),{withHeader:!0,keyType:a.TableKeyType.default})}if(void 0===h&&void 0===g){let s=1;const o=e.findDirectExpression(i.ConstantFieldLength);if(o){const e=o.findDirectExpression(i.Integer);e&&(s=parseInt(e.concatTokens(),10))}h=new a.CharacterType(s,{qualifiedName:t}),this.isOccurs(e)&&(h=new a.TableType(h,{withHeader:n.includes(" WITH HEADER LINE"),keyType:a.TableKeyType.default},t))}}}if(T.includes(" WITH INDICATORS ")){const n=null===(f=null===(p=e.findFirstExpression(i.Type))||void 0===p?void 0:p.findDirectExpression(i.ComponentName))||void 0===f?void 0:f.concatTokens().toUpperCase();if(void 0===n)throw new Error("parseType, componentName expected");if(h instanceof a.StructureType){const e=[...h.getComponents()];e.push({name:n,type:a.VoidType.get("INDICATORStodo")}),h=new a.StructureType(e,t)}}return h}isOccurs(e){var t;return!!e.findDirectTokenByText("OCCURS")||!!(null===(t=e.findFirstExpression(i.TypeTable))||void 0===t?void 0:t.findDirectTokenByText("OCCURS"))}resolveTypeChain(e){var t,n,o,i;const r=e.concatTokens().toUpperCase();if(r.includes("-")){const t=this.input.scope.findType(r);if(t)return this.input.scope.addReference(e.getFirstToken(),t,p.ReferenceType.TypeReference,this.input.filename),t.getType()}else if(!1===r.includes("=>")&&!1===r.includes("-"))return;let d,u=r;if(r.includes("=>")){const e=r.split("=>");d=e[0],u=e[1]}else if(r.includes("->")){const e=r.split("->");d=e[0],u=e[1]}const g=u.split("-");let T;if(d&&r.includes("=>")){const s=r.split("=>")[0];if(this.input.scope.getType()!==c.ScopeType.Interface&&this.input.scope.getType()!==c.ScopeType.ClassDefinition||this.input.scope.getName().toUpperCase()!==s.toUpperCase()){const t=this.input.scope.findObjectDefinition(s);if(void 0===t&&!1===this.input.scope.getDDIC().inErrorNamespace(s))return this.input.scope.addReference(e.getFirstToken(),void 0,p.ReferenceType.ObjectOrientedVoidReference,this.input.filename,{ooName:s.toUpperCase()}),a.VoidType.get(s);if(void 0===t)return new a.UnknownType("Could not resolve top "+s+", resolveTypeChain");const o=t instanceof h.ClassDefinition?"CLAS":"INTF";this.input.scope.addReference(e.getFirstToken(),t,p.ReferenceType.ObjectOrientedReference,this.input.filename,{ooType:o,ooName:s});const i=new l.ObjectOriented(this.input.scope).searchTypeName(t,g[0]);if(T=null==i?void 0:i.getType(),void 0===i||void 0===T)return new a.UnknownType(g[0]+" not found in class or interface");const r=null===(n=e.getChildren()[2])||void 0===n?void 0:n.getFirstToken();r&&this.input.scope.addReference(r,i,p.ReferenceType.TypeReference,this.input.filename)}else{const n=this.input.scope.findType(g[0]);if(T=null==n?void 0:n.getType(),void 0===T)return new a.UnknownType("Could not resolve type "+r);const s=null===(t=e.getChildren()[2])||void 0===t?void 0:t.getFirstToken();s&&this.input.scope.addReference(s,n,p.ReferenceType.TypeReference,this.input.filename)}}else if(d&&r.includes("->")){const t=this.input.scope.findVariable(d),n=null==t?void 0:t.getType();if(!(n instanceof f.ObjectReferenceType))return void 0===n?new a.UnknownType(d+" not found in scope"):new a.UnknownType("Not an object reference, "+d+", "+n.constructor.name);{const t=g[0];let s=n.getIdentifier();if(!(s instanceof h.ClassDefinition||s instanceof h.InterfaceDefinition)){const e=this.input.scope.findObjectDefinition(n.getIdentifierName());if(!e)return new a.UnknownType(n.getIdentifierName()+" not found in scope");s=e}if(!(s instanceof h.ClassDefinition||s instanceof h.InterfaceDefinition))return new a.UnknownType("Not an object reference, "+d+", "+s.constructor.name);{const n=s instanceof h.ClassDefinition?"CLAS":"INTF";this.input.scope.addReference(e.getFirstToken(),s,p.ReferenceType.ObjectOrientedReference,this.input.filename,{ooType:n,ooName:s.getName()});const i=new l.ObjectOriented(this.input.scope).searchTypeName(s,t);if(T=null==i?void 0:i.getType(),void 0===i||void 0===T)return new a.UnknownType(t+" not found in class or interface");const r=null===(o=e.getChildren()[2])||void 0===o?void 0:o.getFirstToken();r&&this.input.scope.addReference(r,i,p.ReferenceType.TypeReference,this.input.filename)}}}else{const t=this.input.scope.findType(g[0]);if(T=null==t?void 0:t.getType(),void 0===T){const t=null===(i=this.input.scope.findTypePoolType(g[0]))||void 0===i?void 0:i.getType();if(t&&(T=t),void 0===T){const t=this.input.scope.getDDIC().lookupTableOrView(g[0]);this.input.scope.getDDICReferences().addUsing(this.input.scope.getParentObj(),{object:t.object,filename:this.input.filename,token:e.getFirstToken()}),T=t.type instanceof s.TypedIdentifier?t.type.getType():t.type}}else this.input.scope.addReference(e.getFirstToken(),t,p.ReferenceType.TypeReference,this.input.filename);if(void 0===T&&!1===this.input.scope.getDDIC().inErrorNamespace(g[0]))return this.input.scope.addReference(e.getFirstToken(),void 0,p.ReferenceType.VoidType,this.input.filename),a.VoidType.get(g[0]);if(T instanceof a.VoidType)return this.input.scope.addReference(e.getFirstToken(),void 0,p.ReferenceType.VoidType,this.input.filename),T;if(void 0===T)return new a.UnknownType("Unknown type "+g[0])}for(g.shift();g.length>0;){if(T instanceof a.UnknownType||T instanceof a.VoidType)return T;if(!(T instanceof a.StructureType))return new a.UnknownType("Not a structured type");if(T=T.getComponentByName(g[0]),void 0===T)return new a.UnknownType(`Field "${g[0]}" not found in structure`);g.shift()}return T}resolveConstantValue(e){var t,n;if(!(e.get()instanceof i.SimpleFieldChain))throw new Error("resolveConstantValue");const s=e.getFirstChild(),o=s.getFirstToken(),r=o.getStr();if(s.get()instanceof i.Field){const e=this.input.scope.findVariable(r),t=null==e?void 0:e.getValue();return"string"==typeof t?(this.input.scope.addReference(o,e,p.ReferenceType.DataReadReference,this.input.filename),t):void((null==e?void 0:e.getType())instanceof f.StructureType&&this.input.scope.addReference(o,e,p.ReferenceType.DataReadReference,this.input.filename))}if(s.get()instanceof i.ClassName&&r.toLowerCase()===this.input.scope.getName().toLowerCase()&&(this.input.scope.getType()===c.ScopeType.Interface||this.input.scope.getType()===c.ScopeType.ClassDefinition)){const n=null===(t=e.getChildren()[2])||void 0===t?void 0:t.getFirstToken(),s=this.input.scope.findVariable(n.getStr()),i=null==s?void 0:s.getValue();return"string"==typeof i?(this.input.scope.addReference(o,s,p.ReferenceType.DataReadReference,this.input.filename),i):void 0}if(s.get()instanceof i.ClassName){const t=this.input.scope.findObjectDefinition(r);if(void 0===t){if(void 0!==this.input.scope.existsObject(r))return;if(!0===this.input.scope.getDDIC().inErrorNamespace(r))throw new Error("resolveConstantValue, not found: "+r);return void this.input.scope.addReference(s.getFirstToken(),void 0,p.ReferenceType.ObjectOrientedVoidReference,this.input.filename,{ooName:r.toUpperCase()})}const i=e.getChildren(),a=null===(n=i[2])||void 0===n?void 0:n.getFirstToken(),c=a.getStr(),u=new l.ObjectOriented(this.input.scope).searchConstantName(t,c);if(u instanceof d.ClassConstant){this.input.scope.addReference(o,t,p.ReferenceType.ObjectOrientedReference,this.input.filename,{ooName:t.getName()}),this.input.scope.addReference(a,u,p.ReferenceType.DataReadReference,this.input.filename);const e=u.getValue();if("string"==typeof e)return e;if("object"==typeof e&&i[4]){const t=i[4].getFirstToken().getStr();if(void 0!==e[t])return e[t]}return}throw new Error("resolveConstantValue, constant not found "+c)}throw new Error("resolveConstantValue, unexpected structure")}resolveTypeRef(e){var t;if(void 0===e)return;const n=e.getFirstToken().getStr();if(1===e.getChildren().length){if("OBJECT"===n.toUpperCase())return new a.GenericObjectReferenceType;const t=this.input.scope.existsObject(n);if(null==t?void 0:t.id)return this.input.scope.addReference(e.getFirstToken(),t.id,p.ReferenceType.ObjectOrientedReference,this.input.filename,{ooType:t.ooType,ooName:n}),new a.ObjectReferenceType(t.id,{qualifiedName:n,RTTIName:t.RTTIName})}const s=this.resolveTypeName(e);return s&&s instanceof a.VoidType?s:!s||s instanceof a.UnknownType?"DATA"===e.concatTokens().toUpperCase()?new a.DataReference(new a.DataType):!0===this.input.scope.isBadiDef(n)||!1===(null===(t=this.input.scope.getDDIC())||void 0===t?void 0:t.inErrorNamespace(n))?a.VoidType.get(n):new a.UnknownType("REF, unable to resolve "+n):new a.DataReference(s)}findValue(e){const t=e.findFirstExpression(i.Value);if(void 0===t)throw new Error("VALUE missing in expression");if("VALUE IS INITIAL"===t.concatTokens().toUpperCase())return;const n=t.findFirstExpression(i.Constant);if(n){const e=t.findFirstExpression(i.ConcatenatedConstant);if(e){const t=e.getFirstToken().getStr().substring(0,1);let n="";for(const t of e.getAllTokens())"&"!==t.getStr()&&(n+=t.getStr().substring(1,t.getStr().length-1));return t+n+t}return n.concatTokens()}const s=t.findFirstExpression(i.SimpleFieldChain);if(s)return this.resolveConstantValue(s);throw new Error("findValue, unexpected")}findDecimals(e){var t,n;const s=null===(n=null===(t=e.findDirectExpression(i.Decimals))||void 0===t?void 0:t.findDirectExpression(i.Integer))||void 0===n?void 0:n.concatTokens();if(s)return parseInt(s,10)}findLength(e){const t=e.findFirstExpression(i.Length),n=e.findFirstExpression(i.ConstantFieldLength);if(t&&n)throw new Error("Only specify length once");if(n){const e=n.findFirstExpression(i.Integer);if(e)return this.parseInt(e.concatTokens());const t=n.findFirstExpression(i.SimpleFieldChain);if(t){const e=this.resolveConstantValue(t);return this.parseInt(e)}}if(void 0===t)return 1;const s=t.findFirstExpression(i.Integer);if(s)return this.parseInt(s.concatTokens());const o=t.findFirstExpression(i.ConstantString);if(o)return this.parseInt(o.concatTokens());const r=t.findFirstExpression(i.SimpleFieldChain);if(r){const e=this.resolveConstantValue(r);return this.parseInt(e)}throw new Error("Unexpected, findLength")}parseInt(e){if(void 0!==e)return e.startsWith("'")?e=e.split("'")[1]:e.startsWith("`")&&(e=e.split("`")[1]),parseInt(e,10)}}},46749(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallChain=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.InstanceArrow),i.AttributeName),t=(0,s.seq)((0,s.tok)(o.Dash),i.ComponentName),n=(0,s.star)((0,s.altPrio)(e,t)),r=(0,s.star)((0,s.seq)(n,(0,s.tok)(o.InstanceArrow),i.MethodCall)),a=(0,s.seq)(i.FieldChain,(0,s.tok)(o.InstanceArrow)),c=(0,s.seq)(i.ClassName,(0,s.tok)(o.StaticArrow));return(0,s.seq)((0,s.altPrio)((0,s.seq)((0,s.optPrio)((0,s.altPrio)(a,c)),i.MethodCall),i.NewObject,i.Cast),r)}}t.MethodCallChain=r},46869(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCDSParameters=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(5027);class a extends s.Expression{getRunnable(){const e=(0,s.seq)(o.Field,"=",(0,s.alt)((0,s.seq)((0,s.tok)(i.WAt),r.FieldChain),o.Constant));return(0,s.seq)("(",e,(0,s.starPrio)((0,s.seq)(",",e)),")")}}t.SQLCDSParameters=a},46887(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DbOperationInLoop=t.DbOperationInLoopConf=void 0;const s=n(50612),o=n(94967),i=n(99732),r=n(77465),a=n(71759),c=n(86696);class l extends r.BasicRuleConfig{}t.DbOperationInLoopConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"db_operation_in_loop",title:"Database operation in loop",shortDescription:"Database operation in LOOP/DO/WHILE",tags:[c.RuleTag.SingleFile,c.RuleTag.Performance]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return t;const i=n.findAllStructures(o.Loop);i.push(...n.findAllStructures(o.Do)),i.push(...n.findAllStructures(o.While));for(const n of i){let o;if(void 0===o&&(o=n.findFirstStatement(s.Select)),void 0===o&&(o=n.findFirstStatement(s.SelectLoop)),void 0===o&&(o=n.findFirstStatement(s.InsertDatabase)),void 0===o&&(o=n.findFirstStatement(s.DeleteDatabase)),void 0===o&&(o=n.findFirstStatement(s.UpdateDatabase)),void 0===o&&(o=n.findFirstStatement(s.ModifyDatabase)),o){const n="Database operation in loop";t.push(a.Issue.atStatement(e,o,n,this.getMetadata().key,this.conf.severity))}}return t}}t.DbOperationInLoop=d},46896(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TestSeam=void 0;const s=n(50612),o=n(58720),i=n(79175);t.TestSeam=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.TestSeam),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndTestSeam))}}},46901(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParenLeft=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"("}}t.ParenLeft=o},46926(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Sort=void 0;const s=n(3125),o=n(82245);t.Sort=class{getMatcher(){const e=(0,s.altPrio)("ASCENDING","DESCENDING"),t=(0,s.alt)(o.ComponentChain,o.Dynamic,o.SourceFieldSymbol),n="AS TEXT",i=(0,s.plus)((0,s.seq)(t,(0,s.optPrio)(n),(0,s.optPrio)(e),(0,s.optPrio)(n))),r=(0,s.seq)("BY",i),a=(0,s.seq)(o.Target,(0,s.opt)((0,s.per)(e,r,"STABLE",n)));return(0,s.seq)("SORT",a)}}},46951(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cleanup=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Cleanup=class{getMatcher(){return(0,o.seq)((0,o.sta)(s.Cleanup),(0,o.opt)((0,o.sub)(i.Body)))}}},46966(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormDefinition=void 0;const s=n(3125),o=n(82245);t.FormDefinition=class{getMatcher(){return(0,s.seq)("FORM",o.FormName,"DEFINITION",(0,s.opt)(o.FormTables),(0,s.opt)(o.FormUsing),(0,s.opt)(o.FormChanging),(0,s.opt)(o.FormRaising))}}},47015(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataReference=void 0;const s=n(97502),o=n(72365);class i extends s.AbstractType{constructor(e,t){super({qualifiedName:t}),this.type=e}toText(e){return"Data REF TO "+this.type.toText(e+1)}getType(){return this.type}toABAP(){return this.type.toABAP().includes(" TABLE OF ")?"":"REF TO "+this.type.toABAP()}isGeneric(){return this.type instanceof o.AnyType}containsVoid(){return this.type.containsVoid()}toCDS(){return"abap.TODO_REFERENCE"}}t.DataReference=i},47157(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NewObject=void 0;const s=n(3125),o=n(49028),i=n(82245),r=n(89301),a=n(60713);class c extends s.Expression{getRunnable(){const e=(0,s.plus)((0,s.seq)((0,s.tok)(r.WParenLeftW),i.Source,(0,s.tok)(r.WParenRightW))),t=(0,s.plus)((0,s.seq)((0,s.tok)(r.WParenLeftW),(0,s.plus)(a.FieldAssignment),(0,s.tok)(r.WParenRightW))),n=(0,s.seq)("NEW",i.TypeNameOrInfer,(0,s.tok)(r.ParenLeftW),(0,s.optPrio)((0,s.alt)(i.Source,i.ParameterListS,e,t)),")");return(0,s.ver)(o.Version.v740sp02,n,o.Version.OpenABAP)}}t.NewObject=c},47209(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneMediaPack=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN19"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneMediaPack=o},47435(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLocks=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetLocks=class{getMatcher(){const e=(0,s.seq)("SET LOCKS OF",o.SimpleName,"ENTITY",o.SimpleName,"FROM",o.Source,"FAILED",o.Target,"REPORTED",o.Target);return(0,s.ver)(i.Version.v754,e)}}},47443(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAggregate=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.star)((0,o.seq)(".",s.CDSName))),t=(0,o.alt)(e,"*",s.CDSCast,s.CDSCase,s.CDSFunction);return(0,o.seq)((0,o.altPrio)("MAX","MIN","SUM","AVG","COUNT"),"(",(0,o.opt)("DISTINCT"),t,")")}}t.CDSAggregate=i},47480(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopAtScreen=void 0;const s=n(50612),o=n(58720),i=n(94967);t.LoopAtScreen=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.LoopAtScreen),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndLoop))}}},47583(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^\w*(\/\w{3,}\/)?\w+$/)}}t.ClassName=o},47694(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Indent=void 0;const s=n(50612),o=n(82245),i=n(52024),r=n(297),a=n(94967);t.Indent=class{constructor(e){this.globalClasses=new Set,this.options=e||{}}execute(e,t){const n=e.getStatements(),s=this.getExpectedIndents(e),o=t.split("\n");for(const e of n){if(e.getFirstToken().getStart()instanceof r.VirtualPosition)continue;const t=s.shift();if(void 0===t||t<0)continue;const n=e.getFirstToken().getStart().getRow()-1;o[n]=o[n].trim();for(let e=1;e<t;e++)o[n]=" "+o[n]}return o.join("\n")}getExpectedIndents(e){var t;const n=[],o=new c;let l=1,d=!1;const u=(null===(t=e.getStructure())||void 0===t?void 0:t.get())instanceof a.DynproLogic;let p;for(const t of e.getStatements()){if(t.getFirstToken().getStart()instanceof r.VirtualPosition)continue;const e=t.get();if(e instanceof s.EndIf||e instanceof s.EndWhile||e instanceof s.EndModule||e instanceof s.EndSelect||e instanceof s.EndMethod||e instanceof s.EndChain||e instanceof s.EndAt||e instanceof s.Else||e instanceof s.EndExec||e instanceof s.EndOfDefinition||e instanceof s.EndLoop||e instanceof s.EndTestInjection||e instanceof s.EndTestSeam||e instanceof s.EndForm||e instanceof s.EndCatch||!0===this.options.selectionScreenBlockIndentation&&e instanceof s.SelectionScreen&&(t.concatTokens().toUpperCase().includes("END OF SCREEN")||t.concatTokens().toUpperCase().includes("END OF BLOCK")||t.concatTokens().toUpperCase().includes("END OF LINE"))||e instanceof s.ElseIf||e instanceof s.EndFunction||e instanceof s.EndInterface||e instanceof s.EndDo)l-=2;else if(e instanceof s.StartOfSelection||e instanceof s.AtSelectionScreen||e instanceof s.AtLineSelection||e instanceof s.AtPF||e instanceof s.Initialization||e instanceof s.AtUserCommand||e instanceof s.ProcessAfterInput||e instanceof s.ProcessBeforeOutput||e instanceof s.ProcessOnValueRequest||e instanceof s.TopOfPage||e instanceof s.Get||e instanceof s.EndOfSelection||e instanceof s.LoadOfProgram)l=1,d=!0;else if(e instanceof s.Form||e instanceof s.Include&&d||e instanceof s.Module&&!1===u||e instanceof s.ClassImplementation||e instanceof s.ClassDefinition)l=1,d=!1;else if(e instanceof s.Cleanup||e instanceof s.Catch)l=o.peek()-2;else if(e instanceof s.Public||e instanceof s.Protected||e instanceof s.Private||e instanceof s.WhenType||e instanceof s.WhenOthers||e instanceof s.When)l=o.peek();else if(e instanceof s.EndTry)l=o.pop()-(this.options.alignTryCatch?2:4);else if(e instanceof s.EndClass||e instanceof s.EndCase)l=o.pop()-2,l=Math.max(l,1);else if(e instanceof i.Comment||e instanceof s.IncludeType||e instanceof i.Empty||e instanceof i.MacroContent){n.push(-1),p=t;continue}!p||p.get()instanceof i.Comment||p.getLastToken().getEnd().getRow()!==t.getFirstToken().getStart().getRow()?(n.push(l),e instanceof s.If||e instanceof s.While||e instanceof s.Module&&!1===u||e instanceof s.SelectLoop||e instanceof s.FunctionModule||e instanceof s.Interface||e instanceof s.Do||e instanceof s.At||e instanceof s.AtFirst||e instanceof s.AtLast||e instanceof s.ExecSQL||e instanceof s.Catch||e instanceof s.ProcessAfterInput||e instanceof s.ProcessBeforeOutput||e instanceof s.ProcessOnValueRequest||e instanceof s.Define||e instanceof s.When||e instanceof s.WhenType||e instanceof s.WhenOthers||e instanceof s.Cleanup||e instanceof s.Loop||e instanceof s.LoopAtScreen||e instanceof s.CatchSystemExceptions||e instanceof s.Form||e instanceof s.Else||e instanceof s.ElseIf||e instanceof s.MethodImplementation||e instanceof s.Chain||e instanceof s.TestInjection||e instanceof s.TestSeam||!0===this.options.selectionScreenBlockIndentation&&e instanceof s.SelectionScreen&&(t.concatTokens().toUpperCase().includes("BEGIN OF SCREEN")||t.concatTokens().toUpperCase().includes("BEGIN OF TABBED BLOCK")||t.concatTokens().toUpperCase().includes("BEGIN OF BLOCK")||t.concatTokens().toUpperCase().includes("BEGIN OF LINE"))||e instanceof s.StartOfSelection||e instanceof s.Get||e instanceof s.AtSelectionScreen||e instanceof s.AtLineSelection||e instanceof s.LoadOfProgram||e instanceof s.Initialization||e instanceof s.AtUserCommand||e instanceof s.TopOfPage||e instanceof s.EndOfSelection||e instanceof s.Public||e instanceof s.Protected||e instanceof s.Private?l+=2:e instanceof s.Try?(l+=this.options.alignTryCatch?2:4,o.push(l)):(e instanceof s.ClassDefinition||e instanceof s.Case||e instanceof s.CaseType||e instanceof s.ClassImplementation)&&(l+=this.skipIndentForGlobalClass(t)?0:2,o.push(l)),p=t):(n.push(-1),p=t)}return n}skipIndentForGlobalClass(e){if(!this.options.globalClassSkipFirst)return!1;const t=e.get();if(t instanceof s.ClassDefinition&&e.findFirstExpression(o.ClassGlobal)){const t=e.findFirstExpression(o.ClassName);return t&&this.globalClasses.add(t.getFirstToken().getStr().toUpperCase()),!0}if(t instanceof s.ClassImplementation){const t=e.findFirstExpression(o.ClassName);if(t&&this.globalClasses.has(t.getFirstToken().getStr().toUpperCase()))return!0}return!1}};class c{constructor(){this.items=[]}push(e){this.items.push(e)}peek(){return this.items[this.items.length-1]}pop(){const e=this.peek();return this.items=this.items.slice(0,this.items.length-1),e}}},47734(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPRenameProvider=void 0;const s=n(55864),o=n(46203);t.ABAPRenameProvider=class{constructor(e){this.reg=e}provideRenameEdits(e,t,n,i){const r=new s.LanguageServer(this.reg).rename({textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1},newName:n}),a={edits:[]};for(const t of(null==r?void 0:r.documentChanges)||[])if(o.TextDocumentEdit.is(t))for(const s of t.edits){const t={range:new monaco.Range(s.range.start.line+1,s.range.start.character+1,s.range.end.line+1,s.range.end.character+1),text:n},o={resource:e.uri,versionId:void 0,textEdit:t};a.edits.push(o)}return a}resolveRenameLocation(e,t,n){const o=new s.LanguageServer(this.reg).prepareRename({textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}});if(o)return{range:new monaco.Range(o.range.start.line+1,o.range.start.character+1,o.range.end.line+1,o.range.end.character+1),text:o.placeholder};throw new Error("Cannot be renamed")}}},47779(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Public=void 0;const s=n(3125);t.Public=class{getMatcher(){return(0,s.str)("PUBLIC SECTION")}}},47780(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Free=void 0;const s=n(3125),o=n(82245);t.Free=class{getMatcher(){return(0,s.seq)("FREE",o.Target)}}},48133(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Concatenate=void 0;const s=n(3125),o=n(82245);t.Concatenate=class{getMatcher(){const e=(0,s.seq)("IN",(0,s.altPrio)("BYTE","CHARACTER"),"MODE"),t=(0,s.str)("RESPECTING BLANKS"),n=(0,s.seq)("SEPARATED BY",o.SimpleSource3),i=(0,s.per)(e,t,n),r=(0,s.seq)(o.SimpleSource3,(0,s.plus)(o.SimpleSource3)),a=(0,s.seq)("LINES OF",o.Source);return(0,s.seq)("CONCATENATE",(0,s.altPrio)(a,r),"INTO",o.Target,(0,s.optPrio)(i))}}},48160(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Aliases=void 0;const s=n(3125),o=n(82245);t.Aliases=class{getMatcher(){return(0,s.seq)("ALIASES",o.SimpleName,"FOR",o.Field)}}},48237(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Describe=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(9646),a=n(93170),c=n(45769),l=n(36453);t.Describe=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))a.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.FieldChain))c.FieldChain.runSyntax(n,t,l.ReferenceType.DataReadReference);const n=e.findExpressionAfterToken("LINES");if((null==n?void 0:n.get())instanceof s.Target){const e=null==n?void 0:n.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,i.IntegerType.get()):r.Target.runSyntax(n,t)}const d=e.findExpressionAfterToken("TYPE");if((null==d?void 0:d.get())instanceof s.Target){const e=null==d?void 0:d.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,new i.CharacterType(1)):r.Target.runSyntax(d,t)}const u=e.findExpressionAfterToken("LENGTH");if((null==u?void 0:u.get())instanceof s.Target){const e=null==u?void 0:u.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,i.IntegerType.get()):r.Target.runSyntax(u,t)}const p=e.findExpressionAfterToken("COMPONENTS");if((null==p?void 0:p.get())instanceof s.Target){const e=null==p?void 0:p.findDirectExpression(s.InlineData);e?o.InlineData.runSyntax(e,t,i.IntegerType.get()):r.Target.runSyntax(p,t)}}}},48278(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateSubroutine=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GenerateSubroutine=class{getMatcher(){const e=(0,s.seq)("NAME",o.Source),t=(0,s.seq)("MESSAGE",o.Target),n=(0,s.seq)("MESSAGE-ID",o.Target),r=(0,s.seq)("LINE",o.Target),a=(0,s.seq)("WORD",o.Target),c=(0,s.seq)("OFFSET",o.Target),l=(0,s.seq)("SHORTDUMP-ID",o.Target),d=(0,s.seq)("INCLUDE",o.Target),u=(0,s.seq)("GENERATE SUBROUTINE POOL",o.Source,(0,s.per)(e,t,r,a,d,c,n,l));return(0,s.verNot)(i.Version.Cloud,u)}}},48344(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Compare=void 0;const s=n(82245),o=n(93170),i=n(83091),r=n(53280),a=n(82054),c=n(3240);t.Compare=class{static runSyntax(e,t){const n=[],l=e.findDirectExpressions(s.Source);for(const e of l)n.push(o.Source.runSyntax(e,t));for(const n of e.findDirectExpressions(s.SourceFieldSymbolChain))r.SourceFieldSymbol.runSyntax(n,t);for(const n of e.findDirectExpressions(s.MethodCallChain))i.MethodCallChain.runSyntax(n,t);if(e.findDirectExpression(s.CompareOperator)&&!1===new c.TypeUtils(t.scope).isCompareable(n[0],n[1],l[0],l[1])&&2===n.length){const n="Incompatible types for comparison";t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n))}}}},48363(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldOffset=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.tok)(o.Plus),(0,s.optPrio)((0,s.altPrio)((0,s.regex)(/^\d+$/),i.SimpleFieldChain2)))}}t.FieldOffset=r},48420(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SequentialBlank=t.SequentialBlankConf=void 0;const s=n(71759),o=n(86789),i=n(99732),r=n(77465),a=n(86696),c=n(71249);class l extends r.BasicRuleConfig{constructor(){super(...arguments),this.lines=4}}t.SequentialBlankConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}static isBlankOrWhitespace(e){return/^\s*$/.test(e)}getMetadata(){return{key:"sequential_blank",title:"Sequential blank lines",shortDescription:"Checks that code does not contain more than the configured number of blank lines in a row.",tags:[a.RuleTag.Whitespace,a.RuleTag.Quickfix,a.RuleTag.SingleFile]}}getMessage(){return"Remove sequential blank lines"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getRawRows();let i=0;for(let r=0;r<n.length;r++)if(d.isBlankOrWhitespace(n[r])?i++:i=0,i===this.conf.lines){let i=1;for(;r+i<n.length&&d.isBlankOrWhitespace(n[r+i]);)++i;const a=new o.Position(r+1,1),l=new o.Position(r,n[r].length+1),u=new o.Position(r+i,n[r+i-1].length+1),p=c.EditHelper.deleteRange(e,l,u),f=s.Issue.atPosition(e,a,this.getMessage(),this.getMetadata().key,this.conf.severity,p);t.push(f)}return t}}t.SequentialBlank=d},48429(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLIntoList=void 0;const s=n(3125),o=n(82245),i=n(74851),r=n(10392);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.altPrio)((0,s.tok)(r.WParenLeft),(0,s.tok)(i.WParenLeftW)),(0,s.starPrio)((0,s.seq)(o.SQLTarget,",")),o.SQLTarget,")");return(0,s.seq)("INTO",e)}}t.SQLIntoList=a},48472(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneMetadata=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN00"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneMetadata=o},48674(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassFinal=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.str)("FINAL")}}t.ClassFinal=o},48873(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.OpenDataset=class{getMatcher(){const e=(0,s.seq)("IN",(0,s.opt)("LEGACY"),(0,s.altPrio)("BINARY MODE","TEXT MODE")),t=(0,s.seq)("CODE PAGE",o.Source),n=(0,s.seq)("FOR",(0,s.altPrio)("OUTPUT","INPUT","UPDATE","APPENDING")),r=(0,s.seq)("ENCODING",(0,s.altPrio)("DEFAULT","UTF-8","NON-UNICODE")),a=(0,s.seq)("AT POSITION",o.Source),c=(0,s.seq)("MESSAGE",o.Target),l=(0,s.str)("IGNORING CONVERSION ERRORS"),d=(0,s.seq)("REPLACEMENT CHARACTER",o.Source),u=(0,s.str)("SKIPPING BYTE-ORDER MARK"),p=(0,s.str)("WITH BYTE-ORDER MARK"),f=(0,s.seq)("TYPE",o.Source),g=(0,s.seq)("FILTER",o.Source),h=(0,s.altPrio)("SMART","NATIVE","UNIX"),T=(0,s.seq)("WITH",h,"LINEFEED"),m=(0,s.str)("WITH WINDOWS LINEFEED"),y=(0,s.seq)("OPEN DATASET",o.Source,(0,s.opt)((0,s.per)(n,f,e,p,d,g,r,a,c,l,u,t,T,m)));return(0,s.verNot)(i.Version.Cloud,y)}}},49028(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultVersion=t.Version=void 0,t.getPreviousVersion=function(e){if(e===n.OpenABAP)return n.v702;const t=Object.values(n),s=t.indexOf(e);if(s<0)throw"Unknown version: "+e;if(0===s)throw"Nothing lower: "+e;return t[s-1]},function(e){e.OpenABAP="open-abap",e.v700="v700",e.v702="v702",e.v740sp02="v740sp02",e.v740sp05="v740sp05",e.v740sp08="v740sp08",e.v750="v750",e.v751="v751",e.v752="v752",e.v753="v753",e.v754="v754",e.v755="v755",e.v756="v756",e.v757="v757",e.v758="v758",e.Cloud="Cloud"}(n||(t.Version=n={})),t.defaultVersion=n.v758},49126(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPCodeActionProvider=void 0;const s=n(55864);t.ABAPCodeActionProvider=class{constructor(e){this.reg=e}provideCodeActions(e,t,n,o){const i=new s.LanguageServer(this.reg),r={start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}},a={textDocument:{uri:e.uri.toString()},range:r,context:{diagnostics:[]}},c=i.codeActions(a),l=[];for(const e of c)void 0!==e.edit&&l.push({title:e.title,kind:e.kind,diagnostics:this.mapDiagnostics(e.diagnostics),edit:this.map(e.edit)});return{actions:l,dispose:()=>{}}}mapDiagnostics(e){if(void 0===e)return[];const t=[];for(const n of e)t.push({severity:monaco.MarkerSeverity.Error,message:n.message,startLineNumber:n.range.start.line+1,startColumn:n.range.start.character+1,endLineNumber:n.range.end.line+1,endColumn:n.range.end.character+1});return[]}map(e){const t=[];for(const n in e.changes)for(const s of e.changes[n])t.push({resource:monaco.Uri.parse(n),versionId:void 0,textEdit:this.mapText(s)});return{edits:t}}mapText(e){const t=e;return{range:new monaco.Range(t.range.start.line+1,t.range.start.character+1,t.range.end.line+1,t.range.end.character+1),text:t.newText}}}},49150(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Nesting=t.NestingConf=void 0;const s=n(71759),o=n(50612),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{constructor(){super(...arguments),this.depth=5}}t.NestingConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"nesting",title:"Check nesting depth",shortDescription:"Checks for methods exceeding a maximum nesting depth",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#keep-the-nesting-depth-low\nhttps://docs.abapopenchecks.org/checks/74/",tags:[a.RuleTag.Styleguide,a.RuleTag.SingleFile]}}getDescription(e){return"Reduce nesting depth to max "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=0;for(const i of e.getStatements()){const r=i.get();if(r instanceof o.If||r instanceof o.Case||r instanceof o.While||r instanceof o.Loop||r instanceof o.SelectLoop||r instanceof o.Do||r instanceof o.Try?n+=1:(r instanceof o.EndIf||r instanceof o.EndCase||r instanceof o.EndWhile||r instanceof o.EndLoop||r instanceof o.EndSelect||r instanceof o.EndDo||r instanceof o.EndTry)&&(n-=1),n>this.conf.depth){const n=i.getFirstToken().getStart(),o=s.Issue.atPosition(e,n,this.getDescription(this.conf.depth.toString()),this.getMetadata().key,this.conf.severity);t.push(o);break}}return t}}t.Nesting=l},49218(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MaxOneMethodParameterPerLine=t.MaxOneMethodParameterPerLineConf=void 0;const s=n(82245),o=n(50612),i=n(71759),r=n(99732),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.MaxOneMethodParameterPerLineConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"max_one_method_parameter_per_line",title:"Max one method parameter definition per line",shortDescription:"Keep max one method parameter description per line",tags:[c.RuleTag.SingleFile,c.RuleTag.Whitespace],badExample:"\nMETHODS apps_scope_token\n  IMPORTING\n    body TYPE bodyapps_scope_token client_id TYPE str.",goodExample:"\nMETHODS apps_scope_token\n  IMPORTING\n    body      TYPE bodyapps_scope_token\n    client_id TYPE str."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];for(const r of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllStatements(o.MethodDef))||[]){let t;for(const o of r.findAllExpressions(s.MethodParam))if(void 0!==t){if(t.getFirstToken().getStart().getRow()===o.getFirstToken().getStart().getRow()){const s=i.Issue.atToken(e,t.getFirstToken(),this.getMetadata().title,this.getMetadata().key,this.conf.severity);n.push(s)}t=o}else t=o}return n}}t.MaxOneMethodParameterPerLine=d},49222(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^\w*(\/\w{3,}\/)?\w+$/)}}t.InterfaceName=o},49246(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Collect=void 0;const s=n(3125),o=n(82245);t.Collect=class{getMatcher(){const e=(0,s.seq)("INTO",o.Target),t=(0,s.seq)("ASSIGNING",o.FSTarget);return(0,s.seq)("COLLECT",o.Source,(0,s.opt)(e),(0,s.opt)(t))}}},49552(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionExporting=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.plusPrio)(o.FunctionExportingParameter)}}t.FunctionExporting=i},49615(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceArrowW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"-> "}}t.InstanceArrowW=o},49701(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicExceptionsOverlap=t.ClassicExceptionsOverlapConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(82245),a=n(86696);class c extends i.BasicRuleConfig{}t.ClassicExceptionsOverlapConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"classic_exceptions_overlap",title:"Classic exceptions overlap when catching",shortDescription:"Find overlapping classic exceptions",extendedInformation:"When debugging its typically good to know exactly which exception is caught",tags:[a.RuleTag.SingleFile],badExample:"CALL FUNCTION 'SOMETHING'\n  EXCEPTIONS\n    system_failure        = 1 MESSAGE lv_message\n    communication_failure = 1 MESSAGE lv_message\n    resource_failure      = 1\n    OTHERS                = 1.",goodExample:"CALL FUNCTION 'SOMETHING'\n  EXCEPTIONS\n    system_failure        = 1 MESSAGE lv_message\n    communication_failure = 2 MESSAGE lv_message\n    resource_failure      = 3\n    OTHERS                = 4."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],o=e.getStructure();if(void 0===o)return[];for(const i of o.findAllExpressions(r.ParameterListExceptions)){const o=new Set;for(const a of i.findAllExpressions(r.ParameterException)){const i=null===(t=a.findDirectExpression(r.Integer))||void 0===t?void 0:t.concatTokens().toUpperCase();if(void 0!==i){if(o.has(i)){const t="Exception overlap, "+i,o=s.Issue.atToken(e,a.getFirstToken(),t,this.getMetadata().key,this.getConfig().severity);n.push(o);break}o.add(i)}}}return n}}t.ClassicExceptionsOverlap=l},49750(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPFileInformationParser=void 0;const s=n(94967),o=n(82245),i=n(50612),r=n(2088),a=n(89301),c=n(67240),l=n(22755);t.ABAPFileInformationParser=class{constructor(e){this.filename=e}parse(e){const t={interfaces:[],classes:[],forms:[],implementations:[]};return void 0===e||(t.classes=this.parseClasses(e),t.interfaces=this.parseInterfaces(e),t.implementations=this.parseClassImplementations(e),t.forms=this.parseForms(e)),t}parseClassImplementations(e){var t;const n=[];for(const a of e.findAllStructures(s.ClassImplementation)){const e=[];for(const n of a.findAllStructures(s.Method)){const s=null===(t=n.findFirstExpression(o.MethodName))||void 0===t?void 0:t.getFirstToken();s&&e.push(new r.Identifier(s,this.filename))}const c=a.findFirstStatement(i.ClassImplementation).findFirstExpression(o.ClassName).getFirstToken();n.push({name:c.getStr(),identifier:new r.Identifier(c,this.filename),methods:e})}return n}parseForms(e){const t=[];for(const n of e.findAllStructures(s.Form)){const e=n.findFirstExpression(o.FormName).getFirstToken().getStart(),s=n.findFirstExpression(o.FormName).concatTokens(),i=new a.Identifier(e,s);t.push({name:i.getStr(),identifier:new r.Identifier(i,this.filename)})}return t}parseInterfaces(e){const t=[];for(const n of e.findDirectStructures(s.Interface)){const e=n.findFirstStatement(i.Interface);if(void 0===e)throw new Error("Interface expected, parseInterfaces");const s=e.findDirectExpression(o.InterfaceName).getFirstToken(),a=this.parseMethodDefinition(n,c.Visibility.Public),l=this.parseAttributes(n,c.Visibility.Public),d=this.parseAliases(n,c.Visibility.Public),u=this.parseConstants(n,c.Visibility.Public),p=e.findDirectExpression(o.ClassGlobal);t.push({name:s.getStr(),identifier:new r.Identifier(s,this.filename),isLocal:void 0===p,isGlobal:void 0!==p,interfaces:this.getImplementing(n),aliases:d,methods:a,constants:u,attributes:l})}return t}parseClasses(e){var t;const n=[];for(const a of e.findAllStructures(s.ClassDefinition)){const e=a.findFirstStatement(i.ClassDefinition).findFirstExpression(o.ClassName).getFirstToken(),d=this.parseMethodDefinition(a.findFirstStructure(s.PublicSection),c.Visibility.Public);d.push(...this.parseMethodDefinition(a.findFirstStructure(s.ProtectedSection),c.Visibility.Protected)),d.push(...this.parseMethodDefinition(a.findFirstStructure(s.PrivateSection),c.Visibility.Private));const u=this.parseAttributes(a.findFirstStructure(s.PublicSection),c.Visibility.Public);u.push(...this.parseAttributes(a.findFirstStructure(s.ProtectedSection),c.Visibility.Protected)),u.push(...this.parseAttributes(a.findFirstStructure(s.PrivateSection),c.Visibility.Private));const p=this.parseAliases(a.findFirstStructure(s.PublicSection),c.Visibility.Public);p.push(...this.parseAliases(a.findFirstStructure(s.ProtectedSection),c.Visibility.Protected)),p.push(...this.parseAliases(a.findFirstStructure(s.PrivateSection),c.Visibility.Private));const f=this.parseConstants(a.findFirstStructure(s.PublicSection),c.Visibility.Public);f.push(...this.parseConstants(a.findFirstStructure(s.ProtectedSection),c.Visibility.Protected)),f.push(...this.parseConstants(a.findFirstStructure(s.PrivateSection),c.Visibility.Private));const g=null===(t=a.findFirstExpression(o.SuperClassName))||void 0===t?void 0:t.getFirstToken().getStr(),h=a.findFirstExpression(o.ClassGlobal),T=a.findFirstStatement(i.ClassDefinition),m=(null==T?void 0:T.concatTokens().toUpperCase())||"";let y,S;m.includes("RISK LEVEL CRITICAL")?y=l.RiskLevel.critical:m.includes("RISK LEVEL DANGEROUS")?y=l.RiskLevel.dangerous:m.includes("RISK LEVEL HARMLESS")&&(y=l.RiskLevel.harmless),m.includes("DURATION SHORT")?S=l.Duration.short:m.includes("DURATION LONG")?S=l.Duration.long:m.includes("DURATION MEDIUM")&&(S=l.Duration.medium),n.push({name:e.getStr(),identifier:new r.Identifier(e,this.filename),isLocal:void 0===h,isGlobal:void 0!==h,methods:d,superClassName:g,interfaces:this.getImplementing(a),isForTesting:m.includes(" FOR TESTING"),duration:S,riskLevel:y,isAbstract:void 0!==(null==T?void 0:T.findDirectTokenByText("ABSTRACT")),isSharedMemory:m.includes(" SHARED MEMORY ENABLED"),isFinal:void 0!==a.findFirstExpression(o.ClassFinal),aliases:p,attributes:u,constants:f})}return n}getImplementing(e){const t=[];for(const n of e.findAllStatements(i.InterfaceDef)){const e=n.findDirectExpression(o.AbstractMethods),s=[];if(e)for(const t of e.findDirectExpressions(o.MethodName))s.push(t.concatTokens().toUpperCase());const i=n.findDirectExpression(o.FinalMethods),r=[];if(i)for(const e of i.findDirectExpressions(o.MethodName))r.push(e.concatTokens().toUpperCase());const a=n.concatTokens().toUpperCase(),c=a.includes(" ALL METHODS ABSTRACT"),l=a.includes(" PARTIALLY IMPLEMENTED"),d=n.findFirstExpression(o.InterfaceName).getFirstToken().getStr().toUpperCase();t.push({name:d,partial:l,allAbstract:c,abstractMethods:s,finalMethods:r})}return t}parseAliases(e,t){if(void 0===e)return[];const n=[];for(const s of e.findAllStatements(i.Aliases)){const e=s.findFirstExpression(o.SimpleName).getFirstToken(),i=s.findFirstExpression(o.Field).getFirstToken();n.push({name:e.getStr(),identifier:new r.Identifier(e,this.filename),visibility:t,component:i.getStr()})}return n}parseConstants(e,t){var n,s;if(void 0===e)return[];const a=[];for(const c of e.findAllStatements(i.Constant)){const e=c.findFirstExpression(o.DefinitionName).getFirstToken(),i=c.findFirstExpression(o.TypeName),l=null!==(s=null===(n=c.findFirstExpression(o.Value))||void 0===n?void 0:n.getTokens()[1].getStr())&&void 0!==s?s:"``",d=l.slice(1,(null==l?void 0:l.length)-1);a.push({name:e.getStr(),typeName:i?i.getFirstToken().getStr():"",value:d,identifier:new r.Identifier(e,this.filename),visibility:t})}return a}parseAttributes(e,t){if(void 0===e)return[];const n=e.findFirstStructure(s.SectionContents);if(void 0===n)return[];const a=[];for(const e of n.findDirectStatements(i.Data)){const n=e.findFirstExpression(o.DefinitionName).getFirstToken();a.push({name:n.getStr(),identifier:new r.Identifier(n,this.filename),level:l.AttributeLevel.Instance,readOnly:e.concatTokens().toUpperCase().includes(" READ-ONLY"),visibility:t})}for(const e of n.findDirectStatements(i.ClassData)){const n=e.findFirstExpression(o.DefinitionName).getFirstToken();a.push({name:n.getStr(),identifier:new r.Identifier(n,this.filename),level:l.AttributeLevel.Static,readOnly:e.concatTokens().toUpperCase().includes(" READ-ONLY"),visibility:t})}for(const e of n.findDirectStatements(i.Constant)){const n=e.findFirstExpression(o.DefinitionName).getFirstToken();a.push({name:n.getStr(),identifier:new r.Identifier(n,this.filename),level:l.AttributeLevel.Constant,readOnly:!0,visibility:t})}return a}parseMethodDefinition(e,t){var n;if(void 0===e)return[];const s=[];for(const a of e.findAllStatements(i.MethodDef)){const e=null===(n=a.findDirectExpression(o.MethodName))||void 0===n?void 0:n.getFirstToken();if(void 0===e)continue;const i=this.parseMethodParameters(a);s.push({name:e.getStr(),identifier:new r.Identifier(e,this.filename),isRedefinition:void 0!==a.findDirectExpression(o.Redefinition),isForTesting:a.concatTokens().toUpperCase().includes(" FOR TESTING"),isFinal:a.concatTokens().toUpperCase().includes(" FINAL"),isAbstract:void 0!==a.findDirectExpression(o.Abstract),isEventHandler:void 0!==a.findDirectExpression(o.EventHandler),visibility:t,parameters:i,exceptions:[]})}return s}parseMethodParameters(e){var t,n,s,i;const a=[],c=e.findFirstExpression(o.MethodDefImporting);if(c)for(const e of c.findAllExpressions(o.MethodParam)){const n=null===(t=e.findDirectExpression(o.MethodParamName))||void 0===t?void 0:t.getFirstToken();n&&a.push({name:n.getStr().replace("!",""),identifier:new r.Identifier(n,this.filename),direction:l.MethodParameterDirection.Importing})}const d=e.findFirstExpression(o.MethodDefExporting);if(d)for(const e of d.findAllExpressions(o.MethodParam)){const t=null===(n=e.findDirectExpression(o.MethodParamName))||void 0===n?void 0:n.getFirstToken();t&&a.push({name:t.getStr().replace("!",""),identifier:new r.Identifier(t,this.filename),direction:l.MethodParameterDirection.Exporting})}const u=e.findFirstExpression(o.MethodDefChanging);if(u)for(const e of u.findAllExpressions(o.MethodParam)){const t=null===(s=e.findDirectExpression(o.MethodParamName))||void 0===s?void 0:s.getFirstToken();t&&a.push({name:t.getStr().replace("!",""),identifier:new r.Identifier(t,this.filename),direction:l.MethodParameterDirection.Changing})}const p=e.findFirstExpression(o.MethodDefReturning);if(p){const e=null===(i=p.findDirectExpression(o.MethodParamName))||void 0===i?void 0:i.getFirstToken();e&&a.push({name:e.getStr().replace("!",""),identifier:new r.Identifier(e,this.filename),direction:l.MethodParameterDirection.Returning})}return a}}},49769(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineFieldDefinition=void 0;const s=n(15838),o=n(93170),i=n(82245),r=n(46743),a=n(69953),c=n(36453),l=n(82054),d=n(20572);t.InlineFieldDefinition=class{static runSyntax(e,t,n){var u;let p;const f=null===(u=e.findDirectExpression(i.Field))||void 0===u?void 0:u.getFirstToken();if(void 0===f)return;const g=e.findDirectExpression(i.Source);g&&(p=o.Source.runSyntax(g,t));const h=e.findDirectExpression(i.TypeName);h&&(p=new r.BasicTypes(t).parseType(h)),void 0!==n&&(p=n),void 0===p&&(p=new a.UnknownType("InlineFieldDefinition, fallback"));const T=f.getStr();if(void 0!==t.scope.findVariable(T)){const n=`Variable ${T} already defined`;return t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n)),d.VoidType.get(l.CheckSyntaxKey)}const m=new s.TypedIdentifier(f,t.filename,p,["inline"]);return t.scope.addReference(f,m,c.ReferenceType.DataWriteReference,t.filename),t.scope.addIdentifier(m),p}}},49793(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Compute=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Compute=class{getMatcher(){const e=(0,s.seq)("COMPUTE",(0,s.opt)("EXACT"),o.Target,"=",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},49897(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadReport=void 0;const s=n(82245),o=n(9646),i=n(93170);t.ReadReport=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},49906(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WBracketRightW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ] "}}t.WBracketRightW=o},50086(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImportNametab=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ImportNametab=class{getMatcher(){const e=(0,s.seq)("IMPORT NAMETAB",o.Target,o.Target,"ID",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},50117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Refresh=void 0;const s=n(82245),o=n(9646);t.Refresh=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},50127(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NamingRuleConfig=void 0;const s=n(77465);class o extends s.BasicRuleConfig{constructor(){super(...arguments),this.patternKind="required",this.ignoreNames=[],this.ignorePatterns=[]}}t.NamingRuleConfig=o},50152(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=void 0;const s=n(86789),o=n(297),i=n(89301),r=n(44937),a=n(77083);t.Lexer=class{run(e,t){return this.virtual=t,this.tokens=[],this.m=1,this.process(e.getRaw()),{file:e,tokens:this.tokens}}add(){const e=this.buffer.get().trim();if(e.length>0){const t=this.stream.getCol(),n=this.stream.getRow();let r=!1;if(this.stream.getOffset()-e.length>=0){const t=this.stream.getRaw().substr(this.stream.getOffset()-e.length,1);" "!==t&&"\n"!==t&&"\t"!==t&&":"!==t||(r=!0)}let a=!1;const c=this.stream.nextChar();" "!==c&&"\n"!==c&&"\t"!==c&&":"!==c&&","!==c&&"."!==c&&""!==c&&'"'!==c||(a=!0);let l,d=new s.Position(n,t-e.length);if(this.virtual&&(d=new o.VirtualPosition(this.virtual,d.getRow(),d.getCol())),5===this.m)l=new i.Comment(d,e);else if(2===this.m||3===this.m)l=new i.StringToken(d,e);else if(4===this.m){const t=e.charAt(0),n=e.charAt(e.length-1);l="|"===t&&"|"===n?new i.StringTemplate(d,e):"|"===t&&"{"===n&&!0===a?new i.StringTemplateBegin(d,e):"}"===t&&"|"===n&&!0===r?new i.StringTemplateEnd(d,e):"}"===t&&"{"===n&&!0===a&&!0===r?new i.StringTemplateMiddle(d,e):new i.Identifier(d,e)}else e.length>2&&"##"===e.substr(0,2)?l=new i.Pragma(d,e):1===e.length?"."===e||","===e?l=new i.Punctuation(d,e):"["===e?l=!0===r&&!0===a?new i.WBracketLeftW(d,e):!0===r?new i.WBracketLeft(d,e):!0===a?new i.BracketLeftW(d,e):new i.BracketLeft(d,e):"("===e?l=!0===r&&!0===a?new i.WParenLeftW(d,e):!0===r?new i.WParenLeft(d,e):!0===a?new i.ParenLeftW(d,e):new i.ParenLeft(d,e):"]"===e?l=!0===r&&!0===a?new i.WBracketRightW(d,e):!0===r?new i.WBracketRight(d,e):!0===a?new i.BracketRightW(d,e):new i.BracketRight(d,e):")"===e?l=!0===r&&!0===a?new i.WParenRightW(d,e):!0===r?new i.WParenRight(d,e):!0===a?new i.ParenRightW(d,e):new i.ParenRight(d,e):"-"===e?l=!0===r&&!0===a?new i.WDashW(d,e):!0===r?new i.WDash(d,e):!0===a?new i.DashW(d,e):new i.Dash(d,e):"+"===e?l=!0===r&&!0===a?new i.WPlusW(d,e):!0===r?new i.WPlus(d,e):!0===a?new i.PlusW(d,e):new i.Plus(d,e):"@"===e&&(l=!0===r&&!0===a?new i.WAtW(d,e):!0===r?new i.WAt(d,e):!0===a?new i.AtW(d,e):new i.At(d,e)):2===e.length&&("->"===e?l=!0===r&&!0===a?new i.WInstanceArrowW(d,e):!0===r?new i.WInstanceArrow(d,e):!0===a?new i.InstanceArrowW(d,e):new i.InstanceArrow(d,e):"=>"===e&&(l=!0===r&&!0===a?new i.WStaticArrowW(d,e):!0===r?new i.WStaticArrow(d,e):!0===a?new i.StaticArrowW(d,e):new i.StaticArrow(d,e)));void 0===l&&(l=new i.Identifier(d,e)),this.tokens.push(l)}this.buffer.clear()}process(e){this.stream=new a.LexerStream(e.replace(/\r/g,"")),this.buffer=new r.LexerBuffer;const t={" ":!0,":":!0,".":!0,",":!0,"-":!0,"+":!0,"(":!0,")":!0,"[":!0,"]":!0,"\t":!0,"\n":!0},n={".":!0,",":!0,":":!0,"(":!0,")":!0,"[":!0,"]":!0,"+":!0,"@":!0};for(;;){const e=this.stream.currentChar(),s=this.buffer.add(e),o=this.stream.nextChar(),i=this.stream.nextNextChar();if(1===this.m?t[o]?this.add():"'"===o?(this.add(),this.m=3):"|"===o||"}"===o?(this.add(),this.m=4):"`"===o?(this.add(),this.m=2):"##"===i?(this.add(),this.m=6):'"'===o||"*"===o&&"\n"===e?(this.add(),this.m=5):"@"===o&&0===s.trim().length||"->"===i||"=>"===i?this.add():">"!==e||" "===o||"-"!==this.stream.prevChar()&&"="!==this.stream.prevChar()?1===s.length&&(n[s]||"-"===s&&">"!==o)&&this.add():this.add():6!==this.m||","!==o&&":"!==o&&"."!==o&&" "!==o&&"\n"!==o?2===this.m&&s.length>1&&"`"===e&&"``"!==i&&"`"!==o&&this.buffer.countIsEven("`")?(this.add(),this.m='"'===o?5:1):!(4===this.m&&s.length>1)||"|"!==e&&"{"!==e||"\\"===this.stream.prevChar()&&"\\\\"!==this.stream.prevPrevChar()?4===this.m&&"}"===o&&"\\"!==e?this.add():3===this.m&&"'"===e&&s.length>1&&"''"!==i&&"'"!==o&&this.buffer.countIsEven("'")?(this.add(),this.m='"'===o?5:1):"\n"===o&&4!==this.m?(this.add(),this.m=1):4===this.m&&"\n"===e&&this.add():(this.add(),this.m=1):(this.add(),this.m=1),!this.stream.advance())break}this.add()}}},50183(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassGlobal=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.str)("PUBLIC")}}t.ClassGlobal=o},50197(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExportDynpro=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ExportDynpro=class{getMatcher(){const e=(0,s.seq)("EXPORT DYNPRO",o.Source,o.Source,o.Source,o.Source,"ID",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},50217(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhenType=void 0;const s=n(3125),o=n(82245),i=n(49028);t.WhenType=class{getMatcher(){const e=(0,s.seq)("INTO",o.Target),t=(0,s.seq)(o.ClassName,(0,s.optPrio)(e));return(0,s.ver)(i.Version.v750,(0,s.seq)("WHEN TYPE",t),i.Version.OpenABAP)}}},50462(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KernelId=void 0;const s=n(3125),o=n(83568);class i extends s.Expression{getRunnable(){return(0,s.seq)("ID",o.Source,"FIELD",o.Source)}}t.KernelId=i},50612(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(1626),t),o(n(39620),t),o(n(78103),t),o(n(96024),t),o(n(85664),t),o(n(31895),t),o(n(42904),t),o(n(50086),t),o(n(27458),t),o(n(36607),t),o(n(42827),t),o(n(39005),t),o(n(68785),t),o(n(8071),t),o(n(67743),t),o(n(7251),t),o(n(17161),t),o(n(34349),t),o(n(31357),t),o(n(77668),t),o(n(76392),t),o(n(31568),t),o(n(3701),t),o(n(55965),t),o(n(9671),t),o(n(70498),t),o(n(23218),t),o(n(89320),t),o(n(71410),t),o(n(69106),t),o(n(33892),t),o(n(484),t),o(n(32141),t),o(n(56989),t),o(n(41771),t),o(n(70599),t),o(n(34550),t),o(n(504),t),o(n(2595),t),o(n(51817),t),o(n(7550),t),o(n(8761),t),o(n(48133),t),o(n(2656),t),o(n(93745),t),o(n(85325),t),o(n(88636),t),o(n(97092),t),o(n(85632),t),o(n(23072),t),o(n(91626),t),o(n(30599),t),o(n(63585),t),o(n(51839),t),o(n(20345),t),o(n(57387),t),o(n(58270),t),o(n(11450),t),o(n(59346),t),o(n(18038),t),o(n(6554),t),o(n(82612),t),o(n(90112),t),o(n(80718),t),o(n(23241),t),o(n(87322),t),o(n(31322),t),o(n(88853),t),o(n(93756),t),o(n(83460),t),o(n(4134),t),o(n(93478),t),o(n(45823),t),o(n(30823),t),o(n(70901),t),o(n(42952),t),o(n(97650),t),o(n(98466),t),o(n(90617),t),o(n(40429),t),o(n(69399),t),o(n(96979),t),o(n(31653),t),o(n(25352),t),o(n(26078),t),o(n(92838),t),o(n(46268),t),o(n(82292),t),o(n(58698),t),o(n(82623),t),o(n(55505),t),o(n(57233),t),o(n(89386),t),o(n(82822),t),o(n(32702),t),o(n(7656),t),o(n(58837),t),o(n(33278),t),o(n(10415),t),o(n(41758),t),o(n(96378),t),o(n(95843),t),o(n(11537),t),o(n(38931),t),o(n(82348),t),o(n(574),t),o(n(90674),t),o(n(37909),t),o(n(16641),t),o(n(19490),t),o(n(83360),t),o(n(37920),t),o(n(2066),t),o(n(35619),t),o(n(72085),t),o(n(22300),t),o(n(91803),t),o(n(96484),t),o(n(46926),t),o(n(15884),t),o(n(37971),t),o(n(2198),t),o(n(61941),t),o(n(10601),t),o(n(13843),t),o(n(75787),t),o(n(65012),t),o(n(53671),t),o(n(68822),t),o(n(31922),t),o(n(25740),t),o(n(39689),t),o(n(76826),t),o(n(8593),t),o(n(27023),t),o(n(22067),t),o(n(86926),t),o(n(32407),t),o(n(92698),t),o(n(39504),t),o(n(9963),t),o(n(96810),t),o(n(69139),t),o(n(15793),t),o(n(50217),t),o(n(57212),t),o(n(29235),t),o(n(12956),t),o(n(48278),t),o(n(34197),t),o(n(68619),t),o(n(44647),t),o(n(38322),t),o(n(67501),t),o(n(52777),t),o(n(77586),t),o(n(47779),t),o(n(12545),t),o(n(60842),t),o(n(8813),t),o(n(5431),t),o(n(42880),t),o(n(73537),t),o(n(66912),t),o(n(11714),t),o(n(93859),t),o(n(72750),t),o(n(87923),t),o(n(79256),t),o(n(49246),t),o(n(2252),t),o(n(45935),t),o(n(38745),t),o(n(75625),t),o(n(74339),t),o(n(99442),t),o(n(1854),t),o(n(38654),t),o(n(25011),t),o(n(86831),t),o(n(30411),t),o(n(90303),t),o(n(3611),t),o(n(75802),t),o(n(14683),t),o(n(41404),t),o(n(67807),t),o(n(3998),t),o(n(99846),t),o(n(55556),t),o(n(82955),t),o(n(80733),t),o(n(64464),t),o(n(52025),t),o(n(70831),t),o(n(68488),t),o(n(6240),t),o(n(66677),t),o(n(14126),t),o(n(8636),t),o(n(48873),t),o(n(83695),t),o(n(81246),t),o(n(26149),t),o(n(99747),t),o(n(4425),t),o(n(86822),t),o(n(80071),t),o(n(21305),t),o(n(50197),t),o(n(3356),t),o(n(23462),t),o(n(39093),t),o(n(9742),t),o(n(47780),t),o(n(74572),t),o(n(95567),t),o(n(31108),t),o(n(17867),t),o(n(12289),t),o(n(8870),t),o(n(75358),t),o(n(22845),t),o(n(53455),t),o(n(65078),t),o(n(83707),t),o(n(84725),t),o(n(37944),t),o(n(43298),t),o(n(76967),t),o(n(89003),t),o(n(76756),t),o(n(49793),t),o(n(14698),t),o(n(65139),t),o(n(99145),t),o(n(51174),t),o(n(48160),t),o(n(36207),t),o(n(24474),t),o(n(2698),t),o(n(83663),t),o(n(12665),t),o(n(80691),t),o(n(99440),t),o(n(8821),t),o(n(81210),t),o(n(42500),t),o(n(55503),t),o(n(87140),t),o(n(35975),t),o(n(12613),t),o(n(36860),t),o(n(12730),t),o(n(20148),t),o(n(68031),t),o(n(21888),t),o(n(9872),t),o(n(17192),t),o(n(30437),t),o(n(67637),t),o(n(97645),t),o(n(53705),t),o(n(36962),t),o(n(21591),t),o(n(27699),t),o(n(15916),t),o(n(16803),t),o(n(84613),t),o(n(1005),t),o(n(65226),t),o(n(58796),t),o(n(99172),t),o(n(5347),t),o(n(40578),t),o(n(26501),t),o(n(27485),t),o(n(60230),t),o(n(55170),t),o(n(66068),t),o(n(92040),t),o(n(88993),t),o(n(9652),t),o(n(13),t),o(n(12412),t),o(n(61817),t),o(n(43457),t),o(n(58284),t),o(n(93524),t),o(n(79348),t),o(n(30151),t),o(n(39119),t),o(n(94549),t),o(n(74988),t),o(n(45031),t),o(n(99212),t),o(n(43187),t),o(n(93271),t),o(n(68906),t),o(n(51232),t),o(n(4378),t),o(n(36363),t),o(n(25545),t),o(n(17595),t),o(n(7605),t),o(n(12568),t),o(n(94773),t),o(n(3903),t),o(n(29439),t),o(n(11761),t),o(n(511),t),o(n(47435),t),o(n(6078),t),o(n(17848),t),o(n(46966),t),o(n(97601),t)},50879(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopAtScreen=void 0;const s=n(82245),o=n(9646),i=n(14365),r=n(20572);t.LoopAtScreen=class{runSyntax(e,t){const n=e.findDirectExpression(s.Target);n&&o.Target.runSyntax(n,t);const a=null==n?void 0:n.findDirectExpression(s.InlineData);a&&i.InlineData.runSyntax(a,t,r.VoidType.get("SCREEN"))}}},51077(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCond=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.alt)("AND","OR"),t=(0,s.alt)(o.ComponentCompare,o.ComponentCondSub);return(0,s.seq)(t,(0,s.star)((0,s.seq)(e,t)))}}t.ComponentCond=i},51174(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxCheck=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SyntaxCheck=class{getMatcher(){const e=(0,s.seq)("PROGRAM",o.Source),t=(0,s.seq)("OFFSET",o.Target),n=(0,s.seq)("FRAME ENTRY",o.Target),r=(0,s.seq)("INCLUDE",o.Target),a=(0,s.seq)("TRACE-TABLE",o.Target),c=(0,s.seq)("LINE",o.Target),l=(0,s.seq)("WORD",o.Target),d=(0,s.seq)("MESSAGE-ID",o.Target),u=(0,s.seq)("MESSAGE",o.Target),p=(0,s.seq)("ID",o.Source,"TABLE",o.Target),f=(0,s.seq)("REPLACING",o.Target),g=(0,s.seq)("DIRECTORY ENTRY",o.Source),h=(0,s.seq)("SHORTDUMP-ID",o.Source),T=(0,s.seq)("FILTER",o.Source),m=(0,s.seq)((0,s.optPrio)("PROGRAM"),o.Source,(0,s.per)(u,c,l,t,e,f,g,n,r,d,a,h,T,(0,s.plus)(p))),y=(0,s.seq)("DYNPRO",o.Source,o.Source,o.Source,o.Source,(0,s.per)(u,c,l,t,d,a)),S=(0,s.seq)("SYNTAX-CHECK FOR",(0,s.alt)(m,y));return(0,s.verNot)(i.Version.Cloud,S)}}},51223(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSource4=void 0;const s=n(3125),o=n(82245),i=n(46749);class r extends s.Expression{getRunnable(){return(0,s.alt)(o.Constant,o.TextElement,o.FieldChain,i.MethodCallChain)}}t.SimpleSource4=r},51232(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TestInjection=void 0;const s=n(3125),o=n(82245);t.TestInjection=class{getMatcher(){return(0,s.seq)("TEST-INJECTION",o.TestSeamName)}}},51243(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnnecessaryReturn=t.UnnecessaryReturnConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(50612),c=n(71249),l=n(52024);class d extends i.BasicRuleConfig{constructor(){super(...arguments),this.allowEmpty=!1}}t.UnnecessaryReturnConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"unnecessary_return",title:"Unnecessary Return",shortDescription:"Finds unnecessary RETURN statements",extendedInformation:"Finds unnecessary RETURN statements",tags:[r.RuleTag.SingleFile,r.RuleTag.Quickfix],badExample:"FORM hello1.\n  WRITE 'world'.\n  RETURN.\nENDFORM.\n\nFORM foo.\n  IF 1 = 2.\n    RETURN.\n  ENDIF.\nENDFORM.",goodExample:"FORM hello2.\n  WRITE 'world'.\nENDFORM."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(void 0===e.getStructure())return[];const n="Unnecessary RETURN",o=e.getStatements();let i=0;for(let r=0;r<o.length;r++){const d=o[r].get();if(d instanceof a.MethodImplementation||d instanceof a.Form||d instanceof a.FunctionModule){i=0;continue}if(d instanceof l.Comment||i++,!(d instanceof a.EndMethod||d instanceof a.EndForm||d instanceof a.EndFunction))continue;const u=o[r-1];if(u&&u.get()instanceof a.Return&&2===u.getChildren().length){if(!0===this.conf.allowEmpty&&2===i)continue;const o=c.EditHelper.deleteStatement(e,u);t.push(s.Issue.atStatement(e,u,n,this.getMetadata().key,this.getConfig().severity,o))}const p=o[r-2];if(u&&p&&p.get()instanceof a.Return&&2===p.getChildren().length&&u.get()instanceof a.EndIf){const o=c.EditHelper.deleteStatement(e,p);t.push(s.Issue.atStatement(e,p,n,this.getMetadata().key,this.getConfig().severity,o))}}return t}}t.UnnecessaryReturn=u},51244(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CommunicationScenario=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SCO1"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CommunicationScenario=o},51520(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Comment=void 0;const s=n(61785);class o extends s.AbstractToken{}t.Comment=o},51536(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeNameOrInfer=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)("#",o.TypeName)}}t.TypeNameOrInfer=i},51553(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationObjectClass=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SUSC"}getAllowedNaming(){return{maxLength:4,allowNamespace:!1}}getDescription(){}}t.AuthorizationObjectClass=o},51596(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransactionAuthorityCheck=t.CallTransactionAuthorityCheckConf=void 0;const s=n(77465),o=n(99732),i=n(86696),r=n(50612),a=n(71759),c=n(49028);class l extends s.BasicRuleConfig{}t.CallTransactionAuthorityCheckConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l,this.MINIMUM_VERSION=c.Version.v740sp02}getMetadata(){return{key:"call_transaction_authority_check",title:"Call Transaction Authority-Check",shortDescription:"Checks that usages of CALL TRANSACTION contain an authority-check.",extendedInformation:"https://docs.abapopenchecks.org/checks/54/",tags:[i.RuleTag.Styleguide,i.RuleTag.SingleFile,i.RuleTag.Security],badExample:"CALL TRANSACTION 'FOO'.",goodExample:"TRY.\n    CALL TRANSACTION 'FOO' WITH AUTHORITY-CHECK.\n  CATCH cx_sy_authorization_error.\nENDTRY."}}getMessage(){return"Add an authority check to CALL TRANSACTION"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=this.reg.getConfig().getVersion();if(n<this.MINIMUM_VERSION||n===c.Version.Cloud)return[];const s=[];if("INTF"===t.getType())return[];for(const t of e.getStatements())t.get()instanceof r.CallTransaction&&!t.concatTokensWithoutStringsAndComments().toUpperCase().includes("WITH AUTHORITY-CHECK")&&s.push(a.Issue.atStatement(e,t,this.getMessage(),this.getMetadata().key,this.getConfig().severity));return s}}t.CallTransactionAuthorityCheck=d},51815(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Case=void 0;const s=n(50612),o=n(58720),i=n(16475),r=n(52024),a=n(17004);t.Case=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Case),(0,o.seq)((0,o.star)((0,o.sub)(a.Normal)),(0,o.star)((0,o.alt)((0,o.sub)(i.When),(0,o.sta)(r.MacroCall),(0,o.sta)(s.Include)))),(0,o.sta)(s.EndCase))}}},51817(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Perform=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028),a=n(82245);t.Perform=class{getMatcher(){const e=(0,s.seq)("LEVEL",i.Source),t=(0,s.alt)((0,s.seq)("ON COMMIT",(0,s.opt)(e)),"ON ROLLBACK"),n=(0,s.verNot)(r.Version.Cloud,(0,s.seq)(i.FormName,(0,s.tok)(o.ParenLeft),i.IncludeName,(0,s.tok)(o.ParenRightW))),c=(0,s.seq)("IN PROGRAM",(0,s.opt)((0,s.alt)(i.Dynamic,i.IncludeName))),l=(0,s.str)("IF FOUND"),d=(0,s.seq)((0,s.alt)(i.FormName,i.Dynamic),(0,s.opt)((0,s.verNot)(r.Version.Cloud,c))),u=(0,s.seq)((0,s.opt)(l),(0,s.opt)(a.PerformTables),(0,s.opt)(a.PerformUsing),(0,s.opt)(a.PerformChanging),(0,s.opt)(l),(0,s.opt)(t)),p=(0,s.seq)("OF",(0,s.plus)(i.FormName));return(0,s.seq)("PERFORM",(0,s.alt)(n,d),(0,s.altPrio)(p,u))}}},51839(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Message=class{getMatcher(){const e=(0,s.seq)("DISPLAY LIKE",o.Source),t=(0,s.seq)("INTO",o.Target),n=(0,s.seq)("RAISING",o.ExceptionName),r=(0,s.per)(e,t,n),a=(0,s.seq)("TYPE",o.Source),c=(0,s.altPrio)(r,o.MessageSourceSource),l=(0,s.alt)(c,(0,s.seq)(o.MessageSourceSource,c),(0,s.seq)(o.MessageSourceSource,o.MessageSourceSource,c),(0,s.seq)(o.MessageSourceSource,o.MessageSourceSource,o.MessageSourceSource,r)),d=(0,s.seq)("WITH",o.MessageSourceSource,(0,s.opt)(l)),u=(0,s.seq)(o.MessageSource,(0,s.opt)(r),(0,s.opt)(d)),p=(0,s.seq)(o.MessageSourceSource,a,(0,s.optPrio)(e),(0,s.optPrio)(n)),f=(0,s.seq)((0,s.opt)((0,s.seq)("WITH",o.Source,(0,s.opt)(o.Source),(0,s.opt)(o.Source),(0,s.opt)(o.Source))),(0,s.altPrio)(t,n)),g=(0,s.seq)((0,s.altPrio)(t,n),(0,s.opt)((0,s.seq)("WITH",o.Source,(0,s.opt)(o.Source),(0,s.opt)(o.Source),(0,s.opt)(o.Source)))),h=(0,s.seq)(o.MessageSource,(0,s.alt)(f,g));return(0,s.seq)("MESSAGE",(0,s.altPrio)((0,s.verNot)(i.Version.Cloud,u),(0,s.verNot)(i.Version.Cloud,p),(0,s.ver)(i.Version.Cloud,h)))}}},51849(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLAliasField=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.regex)(/^(\/\w+\/)?\w+~(\/\w+\/)?\w+$/),(0,o.starPrio)((0,o.seq)((0,o.tok)(s.Dash),(0,o.regex)(/^\w+$/))))}}t.SQLAliasField=i},52024(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NativeSQL=t.MacroContent=t.MacroCall=t.Empty=t.Comment=t.Unknown=void 0,t.Unknown=class{getMatcher(){throw new Error("Unknown Statement, get_matcher")}},t.Comment=class{getMatcher(){throw new Error("Comment Statement, get_matcher")}},t.Empty=class{getMatcher(){throw new Error("Empty Statement, get_matcher")}},t.MacroCall=class{getMatcher(){throw new Error("MacroCall Statement, get_matcher")}},t.MacroContent=class{getMatcher(){throw new Error("MacroContent Statement, get_matcher")}},t.NativeSQL=class{getMatcher(){throw new Error("NativeSQL Statement, get_matcher")}}},52025(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndSelect=void 0;const s=n(3125);t.EndSelect=class{getMatcher(){return(0,s.str)("ENDSELECT")}}},52028(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Implementation=void 0;const s=n(12620),o=n(75584),i=n(77959),r=n(20941),a=n(52424),c=n(36453);t.Implementation=class{constructor(e){this.reg=e}find(e,t){const n=o.LSPUtils.getABAPFile(this.reg,e.uri);if(void 0===n)return[];const a=this.reg.getObject(n.getObjectType(),n.getObjectName());if(!(a instanceof s.ABAPObject))return[];const c=o.LSPUtils.findCursor(this.reg,{textDocument:e,position:t});if(void 0===c)return[];const l=i.LSPLookup.lookup(c,this.reg,a);return(null==l?void 0:l.implementation)?[null==l?void 0:l.implementation]:(null==l?void 0:l.definitionId)instanceof r.MethodDefinition?this.findMethodImplementations(l.definitionId):[]}findMethodImplementations(e){const t=[];for(const n of this.reg.getObjects()){if(this.reg.isDependency(n)||!(n instanceof s.ABAPObject))continue;const o=this.searchReferences(new a.SyntaxLogic(this.reg,n).run().spaghetti.getTop(),e);t.push(...o)}return t}searchReferences(e,t){const n=[];for(const s of e.getData().references)s.referenceType===c.ReferenceType.MethodImplementationReference&&s.resolved&&s.resolved.getFilename()===t.getFilename()&&s.resolved.getStart().equals(t.getStart())&&n.push(o.LSPUtils.identiferToLocation(s.position));for(const s of e.getChildren())n.push(...this.searchReferences(s,t));return n}}},52191(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionGroup=void 0;const s=n(12620),o=n(20941),i=n(86219),r=n(94603),a=n(59115);class c extends s.ABAPObject{constructor(){super(...arguments),this.includes=void 0,this.modules=void 0,this.description=void 0,this.dynpros=void 0}getType(){return"FUGR"}getDescription(){return void 0===this.description&&this.parseXML(),this.description}setDirty(){super.setDirty(),this.includes=void 0,this.modules=void 0,this.description=void 0,this.dynpros=void 0}getAllowedNaming(){return{maxLength:26,allowNamespace:!0}}getDynpros(){return void 0===this.dynpros&&this.parseXML(),this.dynpros||[]}getSequencedFiles(){const e=this.getMainABAPFile();if(void 0===e)return[];const t=[e];for(const e of this.getModules()){const n="."+e.getName().toLocaleLowerCase().replace(/\//g,"#")+".abap";for(const e of this.getABAPFiles())if(e.getFilename().toLocaleLowerCase().endsWith(n)){t.indexOf(e)<0&&t.push(e);break}}return t}getModules(){if(void 0===this.modules&&this.parseXML(),void 0===this.modules)throw new Error("getIncludes, undefined");return this.modules}getIncludeFiles(){const e=[],t=this.getIncludes();for(const n of this.getABAPFiles())for(const s of t){const t=s.startsWith("/")&&s.includes("/L");let o=s;if(t&&(o=o.replace(/\//g,"#")),(s.startsWith("L")||t)&&n.getFilename().includes(o.toLowerCase()+".")){e.push({file:n,name:s});break}if(t&&(o=s.replace(/\//g,"%23"),n.getFilename().includes(o.toLowerCase()+"."))){e.push({file:n,name:s});break}}return e}getInclude(e){const t=e.toUpperCase(),n=this.getIncludeFiles();for(const e of n)if(e.name.toUpperCase()===t)return e.file}getMainABAPFile(){const e=new RegExp(/\.fugr\.(#\w+#)?sapl/,"i");for(const t of this.getABAPFiles())if(e.test(t.getFilename()))return t}getIncludes(){if(void 0===this.includes&&this.parseXML(),void 0===this.includes)throw new Error("getIncludes, undefined");return this.includes}getModule(e){for(const t of this.getModules())if(t.getName().toUpperCase()===e.toUpperCase())return t}getTexts(){if(void 0===this.texts){const e=this.findTextFile();if(void 0===e)return{};const t=new r.XMLParser({parseTagValue:!1,ignoreAttributes:!0,trimValues:!1}).parse(e.getRaw());this.findTexts(t)}return this.texts}parseXML(){var e,t,n;this.includes=[],this.modules=[];const s=this.parseRaw2();if(void 0===s)return;this.description=null===(e=s.abapGit["asx:abap"]["asx:values"])||void 0===e?void 0:e.AREAT,this.dynpros=(0,a.parseDynpros)(s);const r=null===(t=s.abapGit["asx:abap"]["asx:values"])||void 0===t?void 0:t.INCLUDES;if(void 0!==r)for(const e of(0,i.xmlToArray)(r.SOBJ_NAME))this.includes.push(e);const c=null===(n=s.abapGit["asx:abap"]["asx:values"])||void 0===n?void 0:n.FUNCTIONS;for(const e of(0,i.xmlToArray)(null==c?void 0:c.item))this.modules.push(new o.FunctionModuleDefinition(e))}findTextFile(){const e=this.getName()+".fugr.sapl"+this.getName()+".xml";for(const t of this.getFiles())if(t.getFilename().includes(e.toLowerCase()))return t}}t.FunctionGroup=c},52248(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SmartStyle=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SSST"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SmartStyle=o},52330(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EcattTestConfiguration=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ECTC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.EcattTestConfiguration=o},52346(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;const s=n(50612),o=n(58720);class i{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.ConstantBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.Constant),(0,o.sta)(s.Include),(0,o.sub)(i))),(0,o.sta)(s.ConstantEnd))}}t.Constants=i},52358(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetRunTime=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(9646);t.GetRunTime=class{runSyntax(e,t){const n=e.findDirectExpression(s.Target),a=null==n?void 0:n.findDirectExpression(s.InlineData);a?o.InlineData.runSyntax(a,t,i.IntegerType.get()):n&&r.Target.runSyntax(n,t)}}},52379(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneURLAlias=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN20"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneURLAlias=o},52424(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxLogic=void 0;const s=n(50612),o=n(94967),i=n(71759),r=n(75457),a=n(3646),c=n(2403),l=n(2416),d=n(46493),u=n(84383),p=n(86789),f=n(86220),g=n(64782),h=n(45363),T=n(99653),m=n(5807),y=n(70105),S=n(19364),v=n(80325),E=n(25343),C=n(29780),b=n(9224),I=n(93286),D=n(72340),x=n(24796),P=n(77584),A=n(86260),N=n(3201),O=n(58150),R=n(82729),M=n(95997),k=n(33507),F=n(72354),L=n(27516),_=n(37647),w=n(8410),j=n(84257),B=n(46141),U=n(41613),q=n(59374),V=n(61271),G=n(63615),W=n(1805),H=n(70998),Y=n(8513),X=n(22093),$=n(48237),Q=n(92170),K=n(41027),z=n(38849),Z=n(25936),J=n(61230),ee=n(80075),te=n(69787),ne=n(95351),se=n(63436),oe=n(85655),ie=n(83790),re=n(3765),ae=n(40368),ce=n(46075),le=n(31356),de=n(27853),ue=n(82847),pe=n(52711),fe=n(27143),ge=n(50117),he=n(88158),Te=n(91766),me=n(2546),ye=n(33694),Se=n(97234),ve=n(70171),Ee=n(15027),Ce=n(57216),be=n(33255),Ie=n(56018),De=n(79979),xe=n(55991),Pe=n(2068),Ae=n(49897),Ne=n(45496),Oe=n(16934),Re=n(6396),Me=n(76729),ke=n(5363),Fe=n(98006),Le=n(81273),_e=n(81421),we=n(9203),je=n(75512),Be=n(56641),Ue=n(52998),qe=n(93161),Ve=n(64316),Ge=n(92587),We=n(23337),He=n(52358),Ye=n(75177),Xe=n(46197),$e=n(60596),Qe=n(34376),Ke=n(55777),ze=n(71580),Ze=n(77444),Je=n(85409),et=n(22615),tt=n(11818),nt=n(36975),st=n(77777),ot=n(13834),it=n(42321),rt=n(96493),at=n(23017),ct=n(86910),lt=n(16842),dt=n(61298),ut=n(77380),pt=n(46291),ft=n(39668),gt=n(98761),ht=n(65392),Tt=n(22288),mt=n(35579),yt=n(59504),St=n(28561),vt=n(27233),Et=n(27878),Ct=n(28493),bt=n(80154),It=n(3783),Dt=n(768),xt=n(38038),Pt=n(19575),At=n(39113),Nt=n(25793),Ot=n(73612),Rt=n(12958),Mt=n(13514),kt=n(70269),Ft=n(25050),Lt=n(3242),_t=n(99981),wt=n(69023),jt=n(50879),Bt=n(8986),Ut=n(29404),qt=n(55282),Vt=n(73639),Gt=n(82054),Wt=n(38788),Ht=n(78870),Yt={};function Xt(e){if(void 0!==Yt[e.constructor.name])throw new Wt.AssertError("syntax.ts duplicate statement syntax handler");Yt[e.constructor.name]=e}0===Object.keys(Yt).length&&(Xt(new k.InterfaceDeferred),Xt(new E.Perform),Xt(new F.ClassDeferred),Xt(new L.Call),Xt(new At.SetHandler),Xt(new _.ClassImplementation),Xt(new w.MethodImplementation),Xt(new j.Move),Xt(new pt.GetBadi),Xt(new vt.CallBadi),Xt(new wt.GetCursor),Xt(new me.Replace),Xt(new St.TruncateDataset),Xt(new lt.Assert),Xt(new U.Catch),Xt(new q.Loop),Xt(new jt.LoopAtScreen),Xt(new Dt.SetPFStatus),Xt(new xt.SetTitlebar),Xt(new Ve.Submit),Xt(new _t.InsertTextpool),Xt(new V.ReadTable),Xt(new je.SyntaxCheck),Xt(new Ot.DeleteReport),Xt(new Be.Import),Xt(new Tt.Collect),Xt(new Ue.Export),Xt(new qe.Scan),Xt(new mt.Transfer),Xt(new H.Split),Xt(new pe.CallFunction),Xt(new ve.DeleteInternal),Xt(new Ft.DeleteCluster),Xt(new fe.Clear),Xt(new Te.Free),Xt(new ge.Refresh),Xt(new he.Return),Xt(new Ee.Receive),Xt(new ye.GetBit),Xt(new ut.ClassLocalFriends),Xt(new G.Select),Xt(new kt.ModifyScreen),Xt(new W.InsertInternal),Xt(new Ct.Pack),Xt(new bt.Unpack),Xt(new Y.Assign),Xt(new xe.SetLocale),Xt(new dt.SetParameter),Xt(new X.Convert),Xt(new tt.Controls),Xt(new Ce.When),Xt(new Me.InsertDatabase),Xt(new ke.DeleteDatabase),Xt(new Ye.UpdateDatabase),Xt(new Pe.Sort),Xt(new Nt.Wait),Xt(new et.Condense),Xt(new Mt.SetBit),Xt(new Ge.OpenDataset),Xt(new We.CloseDataset),Xt(new Ae.ReadReport),Xt(new de.Do),Xt(new $.Describe),Xt(new K.Find),Xt(new z.Message),Xt(new ht.SystemCall),Xt(new Bt.InsertFieldGroup),Xt(new Z.GetTime),Xt(new Lt.Unassign),Xt(new ce.CaseType),Xt(new J.GetParameter),Xt(new It.Format),Xt(new ee.WhenType),Xt(new te.If),Xt(new it.LogPoint),Xt(new nt.While),Xt(new ft.With),Xt(new gt.WithLoop),Xt(new Ie.CallTransformation),Xt(new Pt.CallTransaction),Xt(new De.GetLocale),Xt(new Re.GetReference),Xt(new ne.ElseIf),Xt(new He.GetRunTime),Xt(new le.CreateObject),Xt(new Fe.ImportDynpro),Xt(new be.CreateData),Xt(new ae.Case),Xt(new Rt.Shift),Xt(new Se.Raise),Xt(new ue.Concatenate),Xt(new se.Append),Xt(new st.SelectLoop),Xt(new re.Write),Xt(new B.MoveCorresponding),Xt(new Ne.AuthorityCheck),Xt(new Oe.InsertReport),Xt(new oe.SelectionScreen),Xt(new ie.Ranges),Xt(new Xe.Add),Xt(new at.RaiseEvent),Xt(new Qe.Subtract),Xt(new Ke.AddCorresponding),Xt(new ze.SubtractCorresponding),Xt(new Ze.Multiply),Xt(new Je.Divide),Xt(new ot.Check),Xt(new yt.ModifyDatabase),Xt(new ct.Form),Xt(new M.SelectOption),Xt(new R.Tables),Xt(new N.Parameter),Xt(new O.FieldSymbol),Xt(new Ut.ReadEntities),Xt(new qt.ModifyEntities),Xt(new Vt.CommitEntities),Xt(new Et.CallKernel),Xt(new Le.OpenCursor),Xt(new _e.FetchNextCursor),Xt(new we.CloseCursor),Xt(new D.Search),Xt(new x.Translate),Xt(new P.ModifyInternal),Xt(new Q.ReadTextpool),Xt(new Ht.FieldGroup),Xt(new $e.EditorCall),Xt(new v.DeleteMemory)),t.SyntaxLogic=class{constructor(e,t){this.reg=e,this.issues=[],this.object=t,this.scope=a.CurrentScope.buildDefault(this.reg,t),this.helpers={oooc:new l.ObjectOriented(this.scope),proc:new d.Procedural(this.reg,this.scope)}}run(){if(void 0!==this.object.syntaxResult)return this.object.syntaxResult;if(this.issues=[],this.reg.getDDICReferences().clear(this.object),this.reg.getMSAGReferences().clear(this.object),this.object instanceof u.Program&&this.object.isInclude())return{issues:[],spaghetti:this.scope.pop(new p.Position(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER))};for(this.traverseObject();;){const e=this.scope.pop(new p.Position(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER));if(e.getTop().getIdentifier().stype===c.ScopeType.BuiltIn){const t={issues:this.issues,spaghetti:e};return this.object.syntaxResult=t,t}}}traverseObject(){const e=this.object.getSequencedFiles();if(this.object instanceof u.Program||this.object instanceof u.FunctionGroup){for(const e of this.object.getSequencedFiles())this.helpers.proc.addAllFormDefinitions(e,this.object);const e=this.object.getMainABAPFile();if(void 0!==e){let t=c.ScopeType.Program;this.object instanceof u.FunctionGroup&&(t=c.ScopeType.FunctionGroup),this.scope.push(t,this.object.getName(),new p.Position(1,1),e.getFilename()),this.object instanceof u.FunctionGroup&&this.helpers.proc.findFunctionGroupScope(this.object)}}else if(this.object instanceof u.TypePool){const e=this.object.getMainABAPFile();void 0!==e&&this.scope.push(c.ScopeType.TypePool,this.object.getName(),new p.Position(1,1),e.getFilename())}for(const t of e){this.currentFile=t;const e=this.currentFile.getStructure();if(void 0===e)return this.scope;this.traverse(e)}return this.scope}newIssue(e,t){const n=i.Issue.atToken(this.currentFile,e,t,Gt.CheckSyntaxKey,rt.Severity.Error);this.issues.push(n)}traverse(e){for(const t of e.getChildren()){const e=t instanceof r.StructureNode,n=t instanceof r.StatementNode;try{if(e){if(!0===this.updateScopeStructure(t))continue}else n&&this.updateScopeStatement(t)}catch(e){this.newIssue(t.getFirstToken(),e.message);break}if(n&&t.get()instanceof s.Include){const e=this.helpers.proc.findInclude(t,this.object);if(void 0!==e&&void 0!==e.getStructure()){const t=this.currentFile;this.currentFile=e,this.traverse(e.getStructure()),this.currentFile=t}}(e||n)&&this.traverse(t)}}updateScopeStructure(e){const t=this.currentFile.getFilename(),n=e.get(),s={scope:this.scope,filename:t,issues:this.issues};if(n instanceof o.ClassDefinition)return new y.ClassDefinition(e,s),!0;if(n instanceof o.Interface)return new S.InterfaceDefinition(e,s),!0;if(n instanceof o.Types)return this.scope.addType((new h.Types).runSyntax(e,s)),!0;if(n instanceof o.Constants)return this.scope.addIdentifier((new m.Constants).runSyntax(e,s).type),!0;if(n instanceof o.Data)return this.scope.addIdentifier(f.Data.runSyntax(e,s)),!0;if(n instanceof o.Statics)return this.scope.addIdentifier((new T.Statics).runSyntax(e,s)),!0;if(n instanceof o.TypeEnum){const t=(new g.TypeEnum).runSyntax(e,s).values;return this.scope.addList(t),!0}return!1}updateScopeStatement(e){const t=this.currentFile.getFilename(),n=e.get(),o={scope:this.scope,filename:t,issues:this.issues};if(n instanceof s.Type)return void this.scope.addType((new C.Type).runSyntax(e,o));if(n instanceof s.Constant)return void this.scope.addIdentifier((new b.Constant).runSyntax(e,o));if(n instanceof s.Static)return void this.scope.addIdentifier((new I.Static).runSyntax(e,o));if(n instanceof s.Data)return void this.scope.addIdentifier((new A.Data).runSyntax(e,o));const i=n.constructor.name;Yt[i]?Yt[i].runSyntax(e,o):n instanceof s.FunctionModule?this.helpers.proc.findFunctionScope(this.object,e,t):n instanceof s.EndForm||n instanceof s.EndFunction||n instanceof s.EndClass||n instanceof s.EndInterface?this.scope.pop(e.getLastToken().getEnd()):n instanceof s.EndMethod&&(this.scope.getType()===c.ScopeType.Method&&this.scope.pop(e.getLastToken().getEnd()),this.scope.getType()===c.ScopeType.MethodInstance&&this.scope.pop(e.getLastToken().getEnd()))}}},52453(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckTransformationExists=t.CheckTransformationExistsConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(82245),c=n(86696);class l extends i.BasicRuleConfig{}t.CheckTransformationExistsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"check_transformation_exists",title:"Check transformation exists",shortDescription:"Checks that used XSLT transformations exist.",tags:[c.RuleTag.Syntax]}}getDescription(e){return'Transformation "'+e+'" not found'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];if(void 0===e.getStructure())return[];for(const n of e.getStatements())if(n.get()instanceof r.CallTransformation){const o=n.findFirstExpression(a.NamespaceSimpleName);if(void 0===o)continue;const i=o.getFirstToken(),r=i.getStr();if(!0===this.reg.inErrorNamespace(r)&&void 0===this.reg.getObject("XSLT",r)){const n=s.Issue.atToken(e,i,this.getDescription(r),this.getMetadata().key);t.push(n)}}return t}}t.CheckTransformationExists=d},52570(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFromSource=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301),a=n(44379);class c extends s.Expression{getRunnable(){const e=(0,s.ver)(i.Version.v752,(0,s.seq)((0,s.tok)(r.WAt),o.FieldChain)),t=(0,s.seq)("AS",o.SQLAsName);return(0,s.seq)((0,s.altPrio)(a.WithName,(0,s.seq)(o.DatabaseTable,(0,s.optPrio)(o.SQLCDSParameters)),e),(0,s.optPrio)((0,s.ver)(i.Version.v752,"WITH PRIVILEGED ACCESS")),(0,s.optPrio)(t))}}t.SQLFromSource=c},52681(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSParametersSelect=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.opt)((0,o.seq)(".",s.CDSName))),t=(0,o.alt)(e,s.CDSString),n=(0,o.seq)(e,":",t);return(0,o.seq)("(",n,(0,o.star)((0,o.seq)(",",n)),")")}}t.CDSParametersSelect=i},52711(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallFunction=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(45769),a=n(36453),c=n(49028),l=n(82054);t.CallFunction=class{runSyntax(e,t){const n=e.findFirstExpression(s.FunctionName),d=null==n?void 0:n.findFirstExpression(s.FieldChain);if(d)r.FieldChain.runSyntax(d,t,a.ReferenceType.DataReadReference);else if(t.scope.getVersion()===c.Version.Cloud&&void 0===e.findDirectExpression(s.Destination)){const s=null==n?void 0:n.concatTokens().replace(/'/g,"");if(void 0===t.scope.findFunctionModule(s)){const n=`Function module "${s}" not found/released`;return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Target))i.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleSource2))o.Source.runSyntax(n,t);const u=e.findFirstExpression(s.ParameterException);for(const e of(null==u?void 0:u.findAllExpressions(s.SimpleFieldChain))||[])r.FieldChain.runSyntax(e,t,a.ReferenceType.DataReadReference)}}},52777(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallDialog=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallDialog=class{getMatcher(){const e=(0,s.seq)(o.FieldSub,(0,s.optPrio)((0,s.seq)("FROM",o.Source))),t=(0,s.seq)("EXPORTING",(0,s.plus)(e)),n=(0,s.seq)(o.Field,(0,s.optPrio)((0,s.seq)("TO",o.Field))),r=(0,s.seq)("IMPORTING",(0,s.plus)(n)),a=(0,s.seq)("CALL DIALOG",(0,s.alt)(o.Constant,o.FieldSub),(0,s.opt)(t),(0,s.opt)(r));return(0,s.verNot)(i.Version.Cloud,a)}}},52806(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefinition=void 0;const s=n(50612),o=n(82245),i=n(44519),r=n(2088),a=n(36453);class c extends r.Identifier{constructor(e,t,n){var r,c,l,d;if(!(e.get()instanceof s.MethodDef))throw new Error("MethodDefinition, expected MethodDef as part of input node");const u=e.findDirectExpression(o.MethodName);if(void 0===u)throw new Error("MethodDefinition, expected MethodDef as part of input node");if(super(u.getFirstToken(),n.filename),this.className=n.scope.getName(),this.redefinition=!1,e.findDirectExpression(o.Redefinition)){this.redefinition=!0;const e=u.getFirstToken().getStr();if(e.includes("~")){const t=n.scope.findInterfaceDefinition(e.split("~")[0]);t&&n.scope.addReference(u.getFirstToken(),t,a.ReferenceType.ObjectOrientedReference,n.filename)}}this.eventHandler=!1;const p=e.findDirectExpression(o.EventHandler);p&&(this.eventHandler=!0,this.eventName=null===(r=p.findDirectExpression(o.EventName))||void 0===r?void 0:r.concatTokens().toUpperCase(),this.eventClass=null===(c=p.findDirectExpression(o.ClassName))||void 0===c?void 0:c.concatTokens().toUpperCase()),this.abstract=!1,e.findDirectExpression(o.Abstract)&&(this.abstract=!0),this.static=!1,e.getFirstToken().getStr().toUpperCase().startsWith("CLASS")&&(this.static=!0),this.raising=[];for(const t of(null===(l=e.findDirectExpression(o.MethodDefRaising))||void 0===l?void 0:l.findAllExpressions(o.ClassName))||[]){const e=t.getFirstToken(),s=e.getStr();this.raising.push(s);const o=n.scope.findClassDefinition(s);o?n.scope.addReference(e,o,a.ReferenceType.ObjectOrientedReference,n.filename,{ooName:s.toUpperCase(),ooType:"CLAS"}):!1===n.scope.getDDIC().inErrorNamespace(s)?n.scope.addReference(e,o,a.ReferenceType.ObjectOrientedVoidReference,n.filename,{ooName:s.toUpperCase(),ooType:"CLAS"}):n.scope.addReference(e,o,a.ReferenceType.ObjectOrientedUnknownReference,n.filename,{ooName:s.toUpperCase(),ooType:"CLAS"})}this.exceptions=[];for(const t of(null===(d=e.findDirectExpression(o.MethodDefExceptions))||void 0===d?void 0:d.findAllExpressions(o.NamespaceSimpleName))||[]){const e=t.getFirstToken().getStr();this.exceptions.push(e)}this.visibility=t,this.parameters=new i.MethodParameters(e,n,this.abstract)}getVisibility(){return this.visibility}getClassName(){return this.className}isRedefinition(){return this.redefinition}isAbstract(){return this.abstract}isStatic(){return this.static}isEventHandler(){return this.eventHandler}getEventName(){return this.eventName}getEventClass(){return this.eventClass}getParameters(){return this.parameters}getRaising(){return this.raising}getExceptions(){return this.exceptions}}t.MethodDefinition=c},52923(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormParamName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=(0,s.regex)(/^[\w$&\*%\/]+$/);return(0,s.seq)(e,(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),e)))}}t.FormParamName=i},52957(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSArithmetics=void 0;const s=n(18483),o=n(3125),i=n(14306);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.optPrio)((0,o.seq)(".",s.CDSName))),t=(0,o.altPrio)(i.CDSInteger,s.CDSFunction,s.CDSCase,s.CDSCast,s.CDSString,s.CDSAggregate,e),n=(0,o.altPrio)("+","-","*","/"),r=(0,o.seq)(n,t),a=(0,o.seq)("(",t,(0,o.plusPrio)(r),")"),c=(0,o.seq)(t,(0,o.plusPrio)(r));return(0,o.altPrio)((0,o.seq)(a,(0,o.starPrio)(r)),c)}}t.CDSArithmetics=r},52974(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayVocabularyAnnotation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWVB"}getAllowedNaming(){return{maxLength:36,allowNamespace:!0}}getDescription(){}}t.GatewayVocabularyAnnotation=o},52977(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessCatalog=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA1"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.BusinessCatalog=o},52992(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataElement=void 0;const s=n(80300),o=n(5518),i=n(20572);class r extends s.AbstractObject{constructor(){super(...arguments),this.parsedXML=void 0,this.parsedType=void 0}getType(){return"DTEL"}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,this.parsedType=void 0,super.setDirty()}getDomainName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.domname}getTexts(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.texts}parseType(e){var t;const n=[];let s;if(this.parse(),void 0===this.parsedXML)s={type:new i.UnknownType("Data Element "+this.getName()+", parser error")};else{if(this.parsedType)return this.parsedType;const n=new o.DDIC(e);s="D"===this.parsedXML.refkind?void 0===this.parsedXML.domname||""===this.parsedXML.domname?{type:new i.UnknownType("DOMNAME unexpectely empty in "+this.getName())}:n.lookupDomain(this.parsedXML.domname,this.getName(),this.getDescription()):"R"===this.parsedXML.refkind?void 0===this.parsedXML.domname||""===this.parsedXML.domname?{type:new i.UnknownType("DOMNAME unexpectely empty in "+this.getName())}:n.lookupObject(this.parsedXML.domname):void 0===this.parsedXML.datatype||""===this.parsedXML.datatype?{type:new i.UnknownType("DATATYPE unexpectely empty in "+this.getName())}:{type:n.textToType({text:this.parsedXML.datatype,length:this.parsedXML.leng,decimals:this.parsedXML.decimals,infoText:this.getName(),qualifiedName:this.getName(),conversionExit:void 0,ddicName:this.getName(),description:null===(t=this.parsedXML.texts)||void 0===t?void 0:t.heading})}}return s.object&&n.push({object:s.object}),e.getDDICReferences().setUsing(this,n),s.type instanceof i.UnknownType||(this.parsedType=s.type),s.type}parse(){var e,t,n;if(void 0!==this.parsedXML)return{updated:!1,runtime:0};const s=Date.now();this.parsedXML={};const o=super.parseRaw2();if(void 0===o)return{updated:!1,runtime:0};const i=null===(n=null===(t=null===(e=o.abapGit)||void 0===e?void 0:e["asx:abap"])||void 0===t?void 0:t["asx:values"])||void 0===n?void 0:n.DD04V;return this.parsedXML={description:null==i?void 0:i.DDTEXT,refkind:null==i?void 0:i.REFKIND,domname:null==i?void 0:i.DOMNAME,datatype:null==i?void 0:i.DATATYPE,leng:null==i?void 0:i.LENG,decimals:null==i?void 0:i.DECIMALS,texts:{short:null==i?void 0:i.SCRTEXT_S,medium:null==i?void 0:i.SCRTEXT_M,long:null==i?void 0:i.SCRTEXT_L,heading:null==i?void 0:i.REPTEXT}},{updated:!0,runtime:Date.now()-s}}}t.DataElement=r},52998(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Export=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Export=class{runSyntax(e,t){var n;for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t);const r=e.findExpressionAfterToken("DATABASE");if(r){const e=null===(n=t.scope.getDDIC())||void 0===n?void 0:n.lookupTableOrView(r.concatTokens());e&&t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:e.object})}}}},53029(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandMacros=void 0;const s=n(50612),o=n(82245),i=n(89301),r=n(52024),a=n(13911),c=n(80387),l=n(75252),d=n(67718),u=n(50152),p=n(297);class f{constructor(e){this.macros={};for(const t of e)this.macros[t.toUpperCase()]={statements:[],filename:void 0}}addMacro(e,t,n){this.isMacro(e)||(this.macros[e.toUpperCase()]={statements:t,filename:n})}getContents(e){return this.macros[e.toUpperCase()].statements}listMacroNames(){return Object.keys(this.macros)}isMacro(e){return!!this.macros[e.toUpperCase()]}getMacroFilename(e){return this.macros[e.toUpperCase()].filename}}t.ExpandMacros=class{constructor(e,t,n){this.macros=new f(e),this.version=t,this.globalMacros=e,this.reg=n}find(e,t,n=!0){var i,c,l;let d,u,p=[];const f=null===(i=this.reg)||void 0===i?void 0:i.getMacroReferences();n&&(null==f||f.clear(t.getFilename()));for(let n=0;n<e.length;n++){const i=e[n],g=i.get();if(g instanceof s.Define)d=i.getTokens()[1],u=i.getFirstToken().getStart(),p=[];else if(g instanceof s.Include){const e=null===(c=i.findDirectExpression(o.IncludeName))||void 0===c?void 0:c.concatTokens(),t=null===(l=this.reg)||void 0===l?void 0:l.getObject("PROG",e);if(t){t.parse(this.version,this.globalMacros,this.reg);const e=t.getMainABAPFile();e&&this.find([...e.getStatements()],e,!1)}}else d&&(g instanceof s.EndOfDefinition?(this.macros.addMacro(d.getStr(),p,t.getFilename()),null==f||f.addDefinition({filename:t.getFilename(),token:d},u,i.getLastToken().getEnd()),d=void 0):g instanceof r.Comment||(e[n]=new a.StatementNode(new r.MacroContent).setChildren(this.tokensToNodes(i.getTokens())),p.push(e[n])))}}handleMacros(e,t){var n;const s=[];let o=!1;const i=null===(n=this.reg)||void 0===n?void 0:n.getMacroReferences();for(const n of e){const e=n.get();if(e instanceof r.Unknown||e instanceof r.MacroCall){const e=this.findName(n.getTokens());if(e&&this.macros.isMacro(e)){const c=this.macros.getMacroFilename(e);c&&(null==i||i.addReference({filename:c,token:n.getFirstToken()})),s.push(new a.StatementNode(new r.MacroCall,n.getColon()).setChildren(this.tokensToNodes(n.getTokens())));const l=this.expandContents(e,n),d=this.handleMacros(l,t);for(const e of d.statements)s.push(e);!0===d.containsUnknown&&(o=!0);continue}o=!0}s.push(n)}return{statements:s,containsUnknown:o}}expandContents(e,t){const n=this.macros.getContents(e);if(void 0===n||0===n.length)return[];let s="";for(const e of n){let t=e.concatTokens();","===e.getTerminator()&&(t=t.replace(/,$/,".")),s+=t+"\n"}const o=this.buildInput(t);let i=1;for(const e of o){const t=new RegExp("&"+i,"g");s=s.replace(t,e),i++}const r=new d.MemoryFile("expand_macros.abap.prog",s),a=(new u.Lexer).run(r,t.getFirstToken().getStart());return new l.StatementParser(this.version,this.reg).run([a],this.macros.listMacroNames())[0].statements}buildInput(e){const t=[],n=e.getTokens();let s="";for(let e=1;e<n.length-1;e++){const o=n[e];let i=n[e+1];e+2===n.length&&(i=void 0);let r=o.getStart();r=r instanceof p.VirtualPosition?new p.VirtualPosition(r,r.vrow,r.vcol+o.getStr().length):o.getEnd(),i&&i.getStart().equals(r)?s+=o.getStr():(s+=o.getStr(),t.push(s),s="")}return t}findName(e){let t,n;for(const s of e){if(n&&(null==n?void 0:n.getEnd().getCol())!==s.getStart().getCol())break;if(!(s instanceof i.Identifier||"-"===s.getStr())){if(s instanceof i.Pragma)continue;break}void 0===t?t=s.getStr():t+=s.getStr(),n=s}return t}tokensToNodes(e){const t=[];for(const n of e)t.push(new c.TokenNode(n));return t}}},53149(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AvoidUse=t.AvoidUseConf=void 0;const s=n(50612),o=n(71759),i=n(99732),r=n(77465),a=n(82245),c=n(86696),l=n(49028),d=n(71249),u=n(52024);class p extends r.BasicRuleConfig{constructor(){super(...arguments),this.skipQuickFix=!1,this.define=!0,this.statics=!0,this.defaultKey=!0,this.break=!0,this.testSeams=!0,this.describeLines=!0,this.exportToMemory=!0,this.exportToDatabase=!0}}t.AvoidUseConf=p;class f extends i.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"avoid_use",title:"Avoid use of certain statements",shortDescription:"Detects usage of certain statements.",extendedInformation:"DEFAULT KEY: https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-default-key\n\nMacros: https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-US/abenmacros_guidl.htm\n\nSTATICS: use CLASS-DATA instead\n\nDESCRIBE TABLE LINES: use lines() instead (quickfix exists)\n\nTEST-SEAMS: https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-test-seams-as-temporary-workaround\n\nBREAK points",tags:[c.RuleTag.Styleguide,c.RuleTag.SingleFile]}}getDescription(e){return"Avoid use of "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];let i=!1;const r=e.getStatements();for(let c=0;c<r.length;c++){const p=r[c],f=p.get();let g,h;if(this.conf.define&&f instanceof s.Define)g="DEFINE";else if(this.conf.describeLines&&f instanceof s.Describe){const t=p.getChildren();6===t.length&&"LINES"===t[3].getFirstToken().getStr().toUpperCase()&&(g="DESCRIBE LINES, use lines() instead",h=!0===this.conf.skipQuickFix?void 0:this.getDescribeLinesFix(e,p))}else if(this.conf.statics&&f instanceof s.StaticBegin)i=!0,g="STATICS";else if(this.conf.statics&&f instanceof s.StaticEnd)i=!1;else if(this.conf.exportToMemory&&f instanceof s.Export&&p.concatTokens().includes("TO MEMORY "))g="EXPORT TO MEMORY";else if(this.conf.exportToDatabase&&f instanceof s.Export&&p.concatTokens().includes("TO DATABASE "))g="EXPORT TO DATABASE";else if(this.conf.testSeams&&f instanceof s.TestSeam){const e=r[c+1];if((null==e?void 0:e.get())instanceof u.Comment&&e.concatTokens().includes("EC TEST_SEAM_USAGE"))continue;g="TEST-SEAM"}else this.conf.statics&&f instanceof s.Static&&!1===i?g="STATICS":this.conf.break&&f instanceof s.Break&&(g="BREAK/BREAK-POINT",h=!0===this.conf.skipQuickFix?void 0:d.EditHelper.deleteStatement(e,p));if(g&&n.push(o.Issue.atStatement(e,p,this.getDescription(g),this.getMetadata().key,this.conf.severity,h)),this.conf.defaultKey&&(this.reg.getConfig().getVersion()>=l.Version.v740sp02||this.reg.getConfig().getVersion()===l.Version.Cloud)&&(f instanceof s.Data||f instanceof s.Type)){const s=null===(t=p.findFirstExpression(a.TypeTable))||void 0===t?void 0:t.findDirectExpression(a.TypeTableKey),i=null==s?void 0:s.findDirectTokenByText("DEFAULT");if(s&&i){const t=r[c+1];if((null==t?void 0:t.get())instanceof u.Comment&&t.concatTokens().includes("EC DEFAULT_KEY"))continue;g="DEFAULT KEY",n.push(o.Issue.atToken(e,i,this.getDescription(g),this.getMetadata().key,this.conf.severity))}}}return n}getDescribeLinesFix(e,t){const n=t.getChildren(),s=n[4].concatTokens(),o=n[2].concatTokens(),i=n[0].getFirstToken().getStart(),r=s+" = lines( "+o+" ).",a=d.EditHelper.deleteStatement(e,t),c=d.EditHelper.insertAt(e,i,r);return d.EditHelper.merge(a,c)}}t.AvoidUse=f},53280(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceFieldSymbol=void 0;const s=n(20572),o=n(36453),i=n(82054);t.SourceFieldSymbol=class{static runSyntax(e,t){const n=e.getFirstToken(),r=t.scope.findVariable(n.getStr());if(void 0===r){const n='"'+e.getFirstToken().getStr()+'" not found, SourceFieldSymbol';return t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n)),s.VoidType.get(i.CheckSyntaxKey)}return t.scope.addReference(n,r,o.ReferenceType.DataReadReference,t.filename),r.getType()}}},53324(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IACService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IASP"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.IACService=o},53361(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFields=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("FIELDS",(0,s.opt)("DISTINCT"),o.SQLFieldList)}}t.SQLFields=i},53369(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalDescriptions=t.IdenticalDescriptionsConf=void 0;const s=n(71759),o=n(77465),i=n(84383);class r extends o.BasicRuleConfig{}t.IdenticalDescriptionsConf=r,t.IdenticalDescriptions=class{constructor(){this.conf=new r}getMetadata(){return{key:"identical_descriptions",title:"Identical descriptions",shortDescription:"Searches for objects with the same type and same description",extendedInformation:"Case insensitive\n\nOnly checks the master language descriptions\n\nDependencies are skipped\n\nWorks for: INTF, CLAS, DOMA, DTEL, FUNC in same FUGR",tags:[]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){var t;this.descriptions={},this.types=["INTF","CLAS","DOMA","DTEL"];for(const n of e.getObjects()){if(e.isDependency(n))continue;const s=n.getType();if(this.types.includes(s)){const e=null===(t=n.getDescription())||void 0===t?void 0:t.toUpperCase();if(void 0===e||""===e)continue;void 0===this.descriptions[s]&&(this.descriptions[s]={}),void 0===this.descriptions[s][e]&&(this.descriptions[s][e]=[]),this.descriptions[s][e].push(n.getName())}}return this}run(e){var t;const n=[],o=e.getType();if(this.types.includes(o)){const i=null===(t=e.getDescription())||void 0===t?void 0:t.toUpperCase();if(void 0===i||""===i)return n;const r=this.descriptions[o][i].filter((t=>t!==e.getName()));if(r.length>0){const t="Identical description: "+r[0];n.push(s.Issue.atRow(e.getXMLFile(),1,t,this.getMetadata().key,this.getConfig().severity))}}return e instanceof i.FunctionGroup&&n.push(...this.checkFunctionModules(e)),n}checkFunctionModules(e){var t;const n={};for(const o of e.getModules()){const i=null===(t=o.getDescription())||void 0===t?void 0:t.toUpperCase();if(void 0!==i&&""!==i){if(void 0!==n[i]){const t="FUGR "+e.getName()+" contains function modules with identical descriptions";return[s.Issue.atRow(e.getXMLFile(),1,t,this.getMetadata().key,this.getConfig().severity)]}n[i]=!0}}return[]}}},53414(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dynamic=void 0;const s=n(82245),o=n(45769),i=n(36453);t.Dynamic=class{static runSyntax(e,t){const n=e.findDirectExpression(s.FieldChain);n&&o.FieldChain.runSyntax(n,t,i.ReferenceType.DataReadReference)}}},53425(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MIMEObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SMIM"}getURL(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.URL}getClass(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.CLASS}isFolder(){var e;return"X"===(null===(e=this.parsedXML)||void 0===e?void 0:e.FOLDER)}getAllowedNaming(){return{maxLength:32,allowNamespace:!1}}getDataFile(){const e=this.getXMLFile();for(const t of this.getFiles())if(t.getFilename()!==(null==e?void 0:e.getFilename()))return t}setDirty(){this.parsedXML=void 0,super.setDirty()}getDescription(){}parse(){if(this.parsedXML)return{updated:!1,runtime:0};const e=Date.now();this.parsedXML={};const t=super.parseRaw2();return void 0===t||void 0===t.abapGit||void 0===t.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.URL=t.abapGit["asx:abap"]["asx:values"].URL,this.parsedXML.CLASS=t.abapGit["asx:abap"]["asx:values"].CLASS,this.parsedXML.FOLDER=t.abapGit["asx:abap"]["asx:values"].FOLDER,{updated:!0,runtime:Date.now()-e})}}t.MIMEObject=o},53455(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Detail=void 0;const s=n(3125),o=n(49028);t.Detail=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"DETAIL")}}},53504(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLAggregation=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(17808),a=n(21799);class c extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)("DISTINCT"),(0,s.altPrio)(i.SQLCase,a.SQLArithmetics,r.Dynamic,i.SQLFunction)),t=(0,s.seq)("(",i.Field,")"),n=(0,s.seq)("COUNT",(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),(0,s.optPrio)("DISTINCT"),(0,s.altPrio)("*",i.Field,t),")"),c=(0,s.seq)("MAX",(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),e,")"),l=(0,s.seq)("MIN",(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),e,")"),d=(0,s.seq)("SUM",(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),e,")"),u=(0,s.seq)("AVG",(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),e,")");return(0,s.altPrio)(n,c,l,d,u)}}t.SQLAggregation=c},53507(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSSource=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)(s.CDSName,(0,o.optPrio)(s.CDSParametersSelect),(0,o.opt)((0,o.altPrio)(s.CDSAs,s.CDSName)))}}t.CDSSource=i},53671(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateDatabase=void 0;const s=n(3125),o=n(82245),i=n(49028);t.UpdateDatabase=class{getMatcher(){const e=(0,s.seq)(o.SQLFieldAndValue,(0,s.star)((0,s.seq)((0,s.opt)(","),o.SQLFieldAndValue))),t=(0,s.seq)("SET",(0,s.alt)(e,o.Dynamic),(0,s.opt)((0,s.seq)("WHERE",o.SQLCond))),n=(0,s.seq)("INDICATORS SET STRUCTURE",o.ComponentName),r=(0,s.seq)("FROM",(0,s.opt)("TABLE"),o.SQLSource,(0,s.opt)((0,s.ver)(i.Version.v755,n)));return(0,s.seq)("UPDATE",o.DatabaseTable,(0,s.opt)(o.SQLClient),(0,s.opt)(o.DatabaseConnection),(0,s.opt)((0,s.alt)(r,t)))}}},53705(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DynproLoop=void 0;const s=n(3125),o=n(85301);t.DynproLoop=class{getMatcher(){const e=(0,s.seq)("INTO",o.SimpleSource2),t=(0,s.seq)("CURSOR",o.SimpleSource2),n=(0,s.seq)("WITH CONTROL",o.SimpleSource2),i=(0,s.seq)("FROM",o.SimpleSource2),r=(0,s.seq)("TO",o.SimpleSource2),a=(0,s.seq)("AT",o.SimpleSource2,(0,s.per)(e,n,t,i,r));return(0,s.seq)("LOOP",(0,s.altPrio)(a,n))}}},54079(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParameters=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("EXPORTING",o.ParameterListS),t=(0,s.seq)("IMPORTING",o.ParameterListT),n=(0,s.seq)("CHANGING",o.ParameterListT),i=(0,s.seq)("RECEIVING",o.ParameterT),r=(0,s.seq)("EXCEPTIONS",o.ParameterListExceptions);return(0,s.seq)((0,s.optPrio)(e),(0,s.optPrio)(t),(0,s.optPrio)(n),(0,s.optPrio)(i),(0,s.optPrio)(r))}}t.MethodParameters=i},54146(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TableExpression=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.plus)((0,s.seq)((0,s.altPrio)(i.ComponentChainSimple,i.Dynamic),"=",i.Source)),t=(0,s.seq)("KEY",i.SimpleName),n=(0,s.seq)("INDEX",i.Source),a=(0,s.seq)((0,s.tok)(o.BracketLeftW),(0,s.alt)(i.Source,(0,s.seq)((0,s.optPrio)(t),(0,s.opt)("COMPONENTS"),(0,s.altPrio)(e,n))),(0,s.altPrio)((0,s.tok)(o.WBracketRight),(0,s.tok)(o.WBracketRightW)));return(0,s.ver)(r.Version.v740sp02,a,r.Version.OpenABAP)}}t.TableExpression=a},54178(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessOnHelpRequest=void 0;const s=n(50612),o=n(58720);t.ProcessOnHelpRequest=class{getMatcher(){const e=(0,o.star)((0,o.sta)(s.Field));return(0,o.seq)((0,o.sta)(s.ProcessOnHelpRequest),e)}}},54362(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicSection=void 0;const s=n(50612),o=n(58720),i=n(21585);t.PublicSection=class{getMatcher(){return(0,o.seq)((0,o.sta)(s.Public),(0,o.opt)((0,o.sub)(i.SectionContents)))}}},54635(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TargetField=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return new o.Field}}t.TargetField=i},54939(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Abstract=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.str)("ABSTRACT")}}t.Abstract=o},55156(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationObjectExtension=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA3"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}getDescription(){}}t.AuthorizationObjectExtension=o},55170(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorityCheck=void 0;const s=n(3125),o=n(82245);t.AuthorityCheck=class{getMatcher(){const e=(0,s.seq)("FIELD",o.Source),t=(0,s.seq)("ID",o.Source,(0,s.alt)(e,"DUMMY"));return(0,s.seq)("AUTHORITY-CHECK OBJECT",o.Source,(0,s.opt)((0,s.seq)("FOR USER",o.Source)),(0,s.plus)(t))}}},55196(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PassByValue=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)("VALUE",(0,s.tok)(o.ParenLeft),i.FormParamName,(0,s.tok)(o.ParenRightW))}}t.PassByValue=r},55215(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActions=void 0;const s=n(46203),o=n(83516),i=n(86789),r=n(58901);t.CodeActions=class{constructor(e){this.reg=e}find(e){const t=new o.Diagnostics(this.reg).findIssues(e.textDocument),n={},i=new Set,a=[];for(const c of t){const t=c.getDefaultFix();void 0!==t&&(void 0===n[c.getKey()]?n[c.getKey()]=1:n[c.getKey()]++,!0===this.inRange(c,e.range)&&(a.push({title:"Apply fix, "+c.getKey(),kind:s.CodeActionKind.QuickFix,diagnostics:[o.Diagnostics.mapDiagnostic(c)],isPreferred:!0,edit:r.LSPEdit.mapEdit(t)}),i.add(c.getKey())));for(const t of c.getAlternativeFixes()||[])!0===this.inRange(c,e.range)&&(a.push({title:t.description,kind:s.CodeActionKind.QuickFix,diagnostics:[o.Diagnostics.mapDiagnostic(c)],isPreferred:!0,edit:r.LSPEdit.mapEdit(t.edit)}),i.add(c.getKey()))}for(const e of i)if(n[e]>1){const n=this.fixAlls(e,t);a.push(n)}return a}fixAlls(e,t){const n=[],i=[];for(const s of t){if(s.getKey()!==e)continue;const t=s.getDefaultFix();void 0!==t&&(i.push(t),n.push(o.Diagnostics.mapDiagnostic(s)))}return{title:"Fix all, "+e,kind:s.CodeActionKind.QuickFix,diagnostics:n,isPreferred:!0,edit:r.LSPEdit.mapEdits(i)}}inRange(e,t){const n=new i.Position(t.start.line+1,t.start.character+1),s=new i.Position(t.end.line+1,t.end.character+1);return e.getStart().isBetween(n,s)||e.getEnd().isBetween(n,s)||n.isBetween(e.getStart(),e.getEnd())||s.isBetween(e.getStart(),e.getEnd())||s.equals(e.getEnd())}}},55276(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^(\/\w+\/)?\w+(~\w+)?$/)}}t.MethodName=o},55282(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyEntities=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(14365),a=n(20572);t.ModifyEntities=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target)){const e=null==n?void 0:n.findDirectExpression(s.InlineData);e?r.InlineData.runSyntax(e,t,a.VoidType.get("ModifyEntities")):i.Target.runSyntax(n,t)}}}},55428(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebMIME=void 0;const s=n(86219),o=n(80300);class i extends o.AbstractObject{getType(){return"W3MI"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0,customRegex:new RegExp(/^[A-Z_-\d/<> ]+$/i)}}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}getParameter(e){var t;return this.parse(),null===(t=this.parsedXML)||void 0===t?void 0:t.params[e.toLowerCase()]}getParameters(){var e,t;return this.parse(),null!==(t=null===(e=this.parsedXML)||void 0===e?void 0:e.params)&&void 0!==t?t:{}}setDirty(){this.parsedXML=void 0,super.setDirty()}getDataFile(){for(const e of this.getFiles())if(e.getFilename().includes(".data."))return e}parse(){var e;if(this.parsedXML)return{updated:!1,runtime:0};const t=Date.now();this.parsedXML={params:{}};const n=super.parseRaw2();if(void 0===n||void 0===n.abapGit||void 0===n.abapGit["asx:abap"]["asx:values"])return{updated:!1,runtime:0};this.parsedXML.description=n.abapGit["asx:abap"]["asx:values"].TEXT;for(const t of(0,s.xmlToArray)(null===(e=n.abapGit["asx:abap"]["asx:values"].PARAMS)||void 0===e?void 0:e.WWWPARAMS))this.parsedXML.params[t.NAME.toLowerCase()]=t.VALUE;return{updated:!0,runtime:Date.now()-t}}}t.WebMIME=i},55503(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadLine=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ReadLine=class{getMatcher(){const e=(0,s.seq)("LINE VALUE INTO",o.Target),t=(0,s.seq)(o.Target,(0,s.opt)((0,s.seq)("INTO",o.Target))),n=(0,s.seq)("FIELD VALUE",(0,s.plus)(t)),r=(0,s.seq)("INDEX",o.Source),a=(0,s.seq)("OF PAGE",o.Source),c=(0,s.str)("OF CURRENT PAGE"),l=(0,s.seq)("READ",(0,s.alt)("CURRENT LINE",(0,s.seq)("LINE",o.Source)),(0,s.opt)((0,s.per)(e,r,n,a,c)));return(0,s.verNot)(i.Version.Cloud,l)}}},55505(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Position=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Position=class{getMatcher(){const e=(0,s.seq)("POSITION",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},55556(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtPF=void 0;const s=n(3125),o=n(49028);t.AtPF=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,(0,s.seq)("AT",(0,s.regex)(/^PF\d\d?$/i)))}}},55627(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[&_!]?\*?\w*(\/\w+\/)?\d*[a-zA-Z_%\$][\w\*%\$\?#]*(~\w+)?$/)}}t.EventName=o},55729(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenVariant=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SCVI"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ScreenVariant=o},55767(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReleaseIdoc=t.ReleaseIdocConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(86789);class a extends o.BasicRuleConfig{}t.ReleaseIdocConf=a,t.ReleaseIdoc=class{constructor(){this.conf=new a}getMetadata(){return{key:"release_idoc",title:"Release iDoc",shortDescription:"Checks idoc types and segments are set to status released"}}getMessage(){return"Idoc type/segement status must be set to released"}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){const t=e.getXMLFile();if(void 0===t)return[];if(e instanceof i.Table){if(!1===t.getRaw().includes("<SEGMENTDEFINITION>"))return[]}else if(!(e instanceof i.Idoc))return[];if(!1===t.getRaw().includes("<CLOSED>X</CLOSED>")){const t=new r.Position(1,1);return[s.Issue.atPosition(e.getFiles()[0],t,this.getMessage(),this.getMetadata().key,this.conf.severity)]}return[]}}},55771(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeChain=void 0;const s=n(3125),o=n(82245),i=n(7756);class r extends s.Expression{getRunnable(){const e=(0,s.seq)(o.AttributeName,(0,s.starPrio)((0,s.altPrio)((0,s.seq)(o.ArrowOrDash,(0,s.altPrio)("*",o.ComponentName)),o.TableExpression)));return(0,s.seq)(e,(0,s.optPrio)(i.TableBody),(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength))}}t.AttributeChain=r},55777(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AddCorresponding=void 0;const s=n(82245),o=n(93170),i=n(9646);t.AddCorresponding=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},55864(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Rename=t.PrettyPrinter=t.Position=t.CurrentScope=t.RulesRunner=t.SpaghettiScope=t.SyntaxLogic=t.ABAPObject=t.Tokens=t.ExpressionsCDS=t.CDSParser=t.LanguageServerTypes=t.DDLParser=t.AbstractFile=t.ABAPFile=t.MemoryFile=t.Edits=t.ReferenceType=t.NativeSQL=t.MacroContent=t.MacroCall=t.SpaghettiScopeNode=t.Token=t.ScopeType=t.BasicTypes=t.TypedIdentifier=t.AbstractType=t.VirtualPosition=t.Comment=t.Unknown=t.Empty=t.Identifier=t.Nodes=t.Types=t.Expressions=t.Statements=t.Structures=t.SkipLogic=t.Objects=t.ArtifactsRules=t.ArtifactsObjects=t.ArtifactsABAP=t.BuiltIn=t.MethodLengthStats=t.LanguageServer=t.Registry=t.CyclomaticComplexityStats=t.Version=t.Config=t.Issue=void 0,t.LSPEdit=t.RuleTag=t.Severity=t.Visibility=t.Info=t.Diagnostics=void 0;const s=n(71759);Object.defineProperty(t,"Issue",{enumerable:!0,get:function(){return s.Issue}});const o=n(81164);Object.defineProperty(t,"Config",{enumerable:!0,get:function(){return o.Config}});const i=n(49028);Object.defineProperty(t,"Version",{enumerable:!0,get:function(){return i.Version}});const r=n(31481);Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return r.Registry}});const a=n(96928);Object.defineProperty(t,"MethodLengthStats",{enumerable:!0,get:function(){return a.MethodLengthStats}});const c=n(21340);Object.defineProperty(t,"LanguageServer",{enumerable:!0,get:function(){return c.LanguageServer}});const l=n(77573);t.LanguageServerTypes=l;const d=n(44684);Object.defineProperty(t,"ArtifactsABAP",{enumerable:!0,get:function(){return d.ArtifactsABAP}});const u=n(38496);Object.defineProperty(t,"ArtifactsObjects",{enumerable:!0,get:function(){return u.ArtifactsObjects}});const p=n(93791);Object.defineProperty(t,"ArtifactsRules",{enumerable:!0,get:function(){return p.ArtifactsRules}});const f=n(12620);Object.defineProperty(t,"ABAPObject",{enumerable:!0,get:function(){return f.ABAPObject}});const g=n(52424);Object.defineProperty(t,"SyntaxLogic",{enumerable:!0,get:function(){return g.SyntaxLogic}});const h=n(69507);Object.defineProperty(t,"SpaghettiScope",{enumerable:!0,get:function(){return h.SpaghettiScope}}),Object.defineProperty(t,"SpaghettiScopeNode",{enumerable:!0,get:function(){return h.SpaghettiScopeNode}});const T=n(15838);Object.defineProperty(t,"TypedIdentifier",{enumerable:!0,get:function(){return T.TypedIdentifier}});const m=n(97502);Object.defineProperty(t,"AbstractType",{enumerable:!0,get:function(){return m.AbstractType}});const y=n(2403);Object.defineProperty(t,"ScopeType",{enumerable:!0,get:function(){return y.ScopeType}});const S=n(3646);Object.defineProperty(t,"CurrentScope",{enumerable:!0,get:function(){return S.CurrentScope}});const v=n(84383);t.Objects=v;const E=n(61785);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return E.AbstractToken}});const C=n(50612);t.Statements=C;const b=n(82245);t.Expressions=b;const I=n(18483);t.ExpressionsCDS=I;const D=n(94967);t.Structures=D;const x=n(75457);t.Nodes=x;const P=n(20572);t.BasicTypes=P;const A=n(20941);t.Types=A;const N=n(89301);t.Tokens=N;const O=n(86789);Object.defineProperty(t,"Position",{enumerable:!0,get:function(){return O.Position}});const R=n(297);Object.defineProperty(t,"VirtualPosition",{enumerable:!0,get:function(){return R.VirtualPosition}});const M=n(88124);Object.defineProperty(t,"AbstractFile",{enumerable:!0,get:function(){return M.AbstractFile}});const k=n(21327);Object.defineProperty(t,"PrettyPrinter",{enumerable:!0,get:function(){return k.PrettyPrinter}});const F=n(52024);Object.defineProperty(t,"Empty",{enumerable:!0,get:function(){return F.Empty}}),Object.defineProperty(t,"Unknown",{enumerable:!0,get:function(){return F.Unknown}}),Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return F.Comment}}),Object.defineProperty(t,"MacroCall",{enumerable:!0,get:function(){return F.MacroCall}}),Object.defineProperty(t,"MacroContent",{enumerable:!0,get:function(){return F.MacroContent}}),Object.defineProperty(t,"NativeSQL",{enumerable:!0,get:function(){return F.NativeSQL}});const L=n(71249),_=n(56727);Object.defineProperty(t,"BuiltIn",{enumerable:!0,get:function(){return _.BuiltIn}});const w=n(78006);Object.defineProperty(t,"ABAPFile",{enumerable:!0,get:function(){return w.ABAPFile}});const j=n(67718);Object.defineProperty(t,"MemoryFile",{enumerable:!0,get:function(){return j.MemoryFile}});const B=n(38506);Object.defineProperty(t,"Rename",{enumerable:!0,get:function(){return B.Renamer}});const U=n(22755);t.Info=U;const q=n(67240);Object.defineProperty(t,"Visibility",{enumerable:!0,get:function(){return q.Visibility}});const V=n(2088);Object.defineProperty(t,"Identifier",{enumerable:!0,get:function(){return V.Identifier}});const G=n(96493);Object.defineProperty(t,"Severity",{enumerable:!0,get:function(){return G.Severity}});const W=n(87869);Object.defineProperty(t,"DDLParser",{enumerable:!0,get:function(){return W.DDLParser}});const H=n(80917);Object.defineProperty(t,"CDSParser",{enumerable:!0,get:function(){return H.CDSParser}});const Y=n(63488);Object.defineProperty(t,"RulesRunner",{enumerable:!0,get:function(){return Y.RulesRunner}});const X=n(86696);Object.defineProperty(t,"RuleTag",{enumerable:!0,get:function(){return X.RuleTag}});const $=n(43693);Object.defineProperty(t,"CyclomaticComplexityStats",{enumerable:!0,get:function(){return $.CyclomaticComplexityStats}});const Q=n(31528);Object.defineProperty(t,"SkipLogic",{enumerable:!0,get:function(){return Q.SkipLogic}});const K=n(83516);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return K.Diagnostics}});const z=n(58901);Object.defineProperty(t,"LSPEdit",{enumerable:!0,get:function(){return z.LSPEdit}});const Z=n(36453);Object.defineProperty(t,"ReferenceType",{enumerable:!0,get:function(){return Z.ReferenceType}});const J={applyEditSingle:L.applyEditSingle,applyEditList:L.applyEditList};t.Edits=J},55965(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertText=void 0;const s=n(3125),o=n(82245);t.ConvertText=class{getMatcher(){return(0,s.seq)("CONVERT TEXT",o.Source,"INTO SORTABLE CODE",o.Target)}}},55991(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLocale=void 0;const s=n(82245),o=n(9646),i=n(93170);t.SetLocale=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},56018(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallTransformation=void 0;const s=n(82245),o=n(9646),i=n(93170),r=n(20572),a=n(14365),c=n(53414);t.CallTransformation=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.SimpleSource3))i.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Dynamic))c.Dynamic.runSyntax(n,t);for(const n of e.findAllExpressions(s.Target)){const e=null==n?void 0:n.findDirectExpression(s.InlineData);e?a.InlineData.runSyntax(e,t,r.XStringType.get()):o.Target.runSyntax(n,t)}}}},56108(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoCommentsBetweenMethods=t.NoCommentsBetweenMethodsConf=void 0;const s=n(50612),o=n(71759),i=n(99732),r=n(77465),a=n(86696),c=n(84383),l=n(52024);class d extends r.BasicRuleConfig{}t.NoCommentsBetweenMethodsConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"no_comments_between_methods",title:"No comments between methods in global classes",shortDescription:"Its not possible to have comments between methods in global classes.",tags:[a.RuleTag.SingleFile,a.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if(!(t instanceof c.Class))return[];if(e!==t.getMainABAPFile())return[];let i=!1,r=!1;for(const t of e.getStatements()){const a=t.get();a instanceof s.ClassImplementation?r=!0:a instanceof s.EndClass?r=!1:a instanceof s.MethodImplementation?i=!0:a instanceof s.EndMethod?i=!1:!0===r&&!1===i&&a instanceof l.Comment&&n.push(o.Issue.atStatement(e,t,"Comment between methods in global class implementation",this.getMetadata().key,this.conf.severity))}return n}}t.NoCommentsBetweenMethods=u},56254(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```t```"}isGeneric(){return!1}toABAP(){return"t"}containsVoid(){return!1}toCDS(){return"abap.tims"}}t.TimeType=o},56283(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameICFService=void 0;const s=n(84383),o=n(33073);t.RenameICFService=class{constructor(e){this.reg=e}buildEdits(e,t,n){var i,r,a,c;if(!(e instanceof s.ICFService))throw new Error("RenameICFService, not a ICF Service");const l=(()=>{const e=t.match(/ \{[0-9A-Fa-f]{16,32}\}/);if(e){const s=e.index,o=t.substring(s);return n.includes(o)?n:n+o}const s=t.indexOf(" ");if(s>-1){const e=t.substring(s);return n.includes(e)?n:n+e}return n})(),d=null!==(r=null===(i=t.match(/^[^ ]+/))||void 0===i?void 0:i[0])&&void 0!==r?r:t,u=null!==(c=null===(a=n.match(/^[^ ]+/))||void 0===a?void 0:a[0])&&void 0!==c?c:n;let p=[];const f=new o.RenamerHelper(this.reg);return p=p.concat(f.buildURLFileEdits(e,d,u)),p=p.concat(f.buildXMLFileEdits(e,"ICF_NAME",d,u)),p=p.concat(f.buildXMLFileEdits(e,"ORIG_NAME",d,u,!0)),p=p.concat(f.renameFiles(e,t,l)),{documentChanges:p}}}},56348(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectLoop=void 0;const s=n(63171);t.SelectLoop=class{static runSyntax(e,t){s.Select.runSyntax(e,t)}}},56458(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.While=void 0;const s=n(50612),o=n(58720),i=n(79175);t.While=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.While),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndWhile))}}},56478(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentChain=void 0;const s=n(82245),o=n(13075),i=n(83668),r=n(20572),a=n(20941),c=n(36453),l=n(2416),d=n(82054);t.ComponentChain=class{static runSyntax(e,t,n){if(void 0===e)return;const u=t.getChildren();for(let t=0;t<u.length;t++){if(e instanceof o.VoidType||e instanceof r.UnknownType)return e;const p=u[t];if(0!==t||"TABLE_LINE"!==p.concatTokens().toUpperCase())if(p.get()instanceof s.ArrowOrDash){const t=p.concatTokens();if("-"===t){if(!(e instanceof i.StructureType)){const e="ComponentChain, not a structure";return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}}else if("=>"===t){if(!(e instanceof r.ObjectReferenceType)){const e="ComponentChain, not a reference";return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}}else if("->"===t&&!(e instanceof r.ObjectReferenceType||e instanceof r.DataReference)){const e="ComponentChain, not a reference";return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}}else if(p.get()instanceof s.ComponentName){const t=p.concatTokens();if(e instanceof r.DataReference&&(e=e.getType(),"*"===t))continue;if(e instanceof i.StructureType){if(void 0===(e=e.getComponentByName(t))){const e='Component "'+t+'" not found in structure';return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}}else{if(!(e instanceof r.ObjectReferenceType)){const t="ComponentChain, not a structure, "+(null==e?void 0:e.constructor.name);return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),t)),o.VoidType.get(d.CheckSyntaxKey)}{const s=e.getIdentifier(),i=n.scope.findObjectDefinition(s.getName());if(void 0===i){const e=s.getName()+" not found in scope";return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}const r=new l.ObjectOriented(n.scope).searchAttributeName(i,t);if(void 0===(e=null==r?void 0:r.getType())){const e='Attribute "'+t+'" not found';return n.issues.push((0,d.syntaxIssue)(n,p.getFirstToken(),e)),o.VoidType.get(d.CheckSyntaxKey)}{const e={ooName:s.getName(),ooType:s instanceof a.ClassDefinition?"CLAS":"INTF"};n.scope.addReference(p.getFirstToken(),r,c.ReferenceType.DataWriteReference,n.filename,e)}}}}}return e}}},56641(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Import=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Import=class{runSyntax(e,t){var n;for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t);const r=e.findExpressionAfterToken("DATABASE");if(r){const e=null===(n=t.scope.getDDIC())||void 0===n?void 0:n.lookupTableOrView(r.concatTokens());e&&t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:e.object})}}}},56669(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FullyTypeConstants=t.FullyTypeConsantsConf=void 0;const s=n(77465),o=n(99732),i=n(71759),r=n(50612),a=n(82245),c=n(86696);class l extends s.BasicRuleConfig{constructor(){super(...arguments),this.checkData=!0}}t.FullyTypeConsantsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"fully_type_constants",title:"Fully type constants",shortDescription:"Checks constants for full typing - no implicit typing allowed.",badExample:"CONSTANTS foo VALUE 'a'.",goodExample:"CONSTANTS foo TYPE c LENGTH 1 VALUE 'a'.",tags:[c.RuleTag.SingleFile]}}getDescription(e){return`Fully type ${e}, no implicit typing`}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n;const s=[];for(const o of e.getStatements())if((o.get()instanceof r.Constant||!0===this.conf.checkData&&o.get()instanceof r.Data)&&!this.isTyped(o)){const c=o.get()instanceof r.Constant?"constant definition":"data definition";let l=null===(t=o.findFirstExpression(a.NamespaceSimpleName))||void 0===t?void 0:t.getFirstToken();if(void 0===l&&(l=null===(n=o.findFirstExpression(a.DefinitionName))||void 0===n?void 0:n.getFirstToken()),void 0===l)throw new Error("fully type constants, unexpected node");s.push(i.Issue.atToken(e,l,this.getDescription(c),this.getMetadata().key,this.conf.severity))}return s}isTyped(e){return e.findFirstExpression(a.Type)||e.findFirstExpression(a.TypeTable)}}t.FullyTypeConstants=d},56727(e,t,n){var s=n(48287).hp;Object.defineProperty(t,"__esModule",{value:!0}),t.BuiltIn=t.BuiltInMethod=void 0;const o=n(15838),i=n(20572),r=n(89301),a=n(86789),c=n(67240),l=n(2088),d=n(49028);class u extends l.Identifier{constructor(e,t,n,s){super(e,t),this.method=n,this.row=s}getRequiredParameters(){const e=[];for(const t in this.method.mandatory){const n=new r.Identifier(new a.Position(this.row,1),t);e.push(new o.TypedIdentifier(n,p.filename,this.method.mandatory[t]))}return e}getOptional(){throw new Error("BuiltInMethod->Method not implemented")}getAll(){throw new Error("BuiltInMethod->getAll, Method not implemented")}getEventName(){}getEventClass(){}getImporting(){const e=[];for(const t in this.method.mandatory){const n=new r.Identifier(new a.Position(this.row,1),t);e.push(new o.TypedIdentifier(n,p.filename,this.method.mandatory[t]))}for(const t in this.method.optional){const n=new r.Identifier(new a.Position(this.row,1),t);e.push(new o.TypedIdentifier(n,p.filename,this.method.optional[t]))}return e}getDefaultImporting(){if(void 0===this.method.mandatory)return;const e=Object.keys(this.method.mandatory);return 1===e.length?e[0].toUpperCase():void 0}getExporting(){return[]}getRaising(){return[]}getChanging(){return[]}getReturning(){const e=new r.Identifier(new a.Position(this.row,1),"ret");return new o.TypedIdentifier(e,p.filename,this.method.return)}getExceptions(){return[]}getVisibility(){return c.Visibility.Public}isRedefinition(){return!1}isAbstract(){return!1}isStatic(){return!1}isEventHandler(){return!1}getParameters(){return this}getParameterDefault(e){}}t.BuiltInMethod=u;class p{constructor(){this.row=1}static buildDefinition(e,t){if(e.cache)return e.cache;const n=new r.Identifier(new a.Position(1,1),t),s=new u(n,p.filename,e,e.counter);return e.cache=s,s}static searchBuiltin(e){if(void 0===e)return;const t=p.methods[e.toUpperCase()];return void 0!==t?this.buildDefinition(t,e):void 0}static isPredicate(e){if(void 0===e)return;const t=p.methods[e.toUpperCase()];return void 0!==t?t.predicate:void 0}getTypes(){const e=this.buildSY();{const t=new r.Identifier(new a.Position(1,1),"abap_bool");e.push(new o.TypedIdentifier(t,p.filename,new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"})))}{const t=new r.Identifier(new a.Position(1,1),"cursor");e.push(new o.TypedIdentifier(t,p.filename,i.IntegerType.get({qualifiedName:"CURSOR",ddicName:"CURSOR"})))}return e}get(e){const t=[];0===p.getCache.length&&(p.getCache.push(...this.buildSY()),p.getCache.push(this.buildVariable("screen")),p.getCache.push(this.buildConstant("%_ENDIAN")),p.getCache.push(this.buildConstant("%_CHARSIZE")),p.getCache.push(this.buildConstant("%_BACKSPACE",new i.CharacterType(1),"\b")),p.getCache.push(this.buildConstant("%_CR_LF",new i.CharacterType(2),"\r\n")),p.getCache.push(this.buildConstant("%_FORMFEED",new i.CharacterType(1),"\f")),p.getCache.push(this.buildConstant("%_HORIZONTAL_TAB",new i.CharacterType(1),"\t")),p.getCache.push(this.buildConstant("%_MAXCHAR",new i.CharacterType(1),s.from("FDFF","hex").toString())),p.getCache.push(this.buildConstant("%_MINCHAR",new i.CharacterType(1),s.from("0000","hex").toString())),p.getCache.push(this.buildConstant("%_NEWLINE",new i.CharacterType(1),"\n")),p.getCache.push(this.buildConstant("%_VERTICAL_TAB",new i.CharacterType(1),"\v")),p.getCache.push(this.buildConstant("abap_false",new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"}),"' '")),p.getCache.push(this.buildConstant("abap_true",new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"}),"'X'")),p.getCache.push(this.buildConstant("abap_undefined",new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"}),"'-'")),p.getCache.push(this.buildConstant("abap_off",new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"}),"' '")),p.getCache.push(this.buildConstant("abap_on",new i.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"}),"'X'")),p.getCache.push(this.buildConstant("col_background",i.IntegerType.get(),"0")),p.getCache.push(this.buildConstant("col_heading",i.IntegerType.get(),"1")),p.getCache.push(this.buildConstant("col_key",i.IntegerType.get(),"4")),p.getCache.push(this.buildConstant("col_negative",i.IntegerType.get(),"6")),p.getCache.push(this.buildConstant("col_group",i.IntegerType.get(),"7")),p.getCache.push(this.buildConstant("col_normal",i.IntegerType.get(),"2")),p.getCache.push(this.buildConstant("col_positive",i.IntegerType.get(),"5")),p.getCache.push(this.buildConstant("col_total",i.IntegerType.get(),"3")),p.getCache.push(this.buildConstant("space",new i.CharacterType(1,{derivedFromConstant:!0}),"' '"))),t.push(...p.getCache);for(const n of e){const e=new r.Identifier(new a.Position(this.row++,1),n);t.push(new o.TypedIdentifier(e,p.filename,i.VoidType.get(n),["read_only","built-in"],"'?'"))}return t}buildVariable(e){const t=new r.Identifier(new a.Position(this.row++,1),e);return new o.TypedIdentifier(t,p.filename,i.VoidType.get(e),["built-in"])}buildSY(){const e=[];e.push({name:"index",type:i.IntegerType.get()}),e.push({name:"pagno",type:i.IntegerType.get()}),e.push({name:"tabix",type:i.IntegerType.get()}),e.push({name:"tfill",type:i.IntegerType.get()}),e.push({name:"tlopc",type:i.IntegerType.get()}),e.push({name:"tmaxl",type:i.IntegerType.get()}),e.push({name:"toccu",type:i.IntegerType.get()}),e.push({name:"ttabc",type:i.IntegerType.get()}),e.push({name:"tstis",type:i.IntegerType.get()}),e.push({name:"ttabi",type:i.IntegerType.get()}),e.push({name:"dbcnt",type:i.IntegerType.get()}),e.push({name:"fdpos",type:i.IntegerType.get()}),e.push({name:"colno",type:i.IntegerType.get()}),e.push({name:"linct",type:i.IntegerType.get()}),e.push({name:"linno",type:i.IntegerType.get()}),e.push({name:"linsz",type:i.IntegerType.get()}),e.push({name:"pagct",type:i.IntegerType.get()}),e.push({name:"macol",type:i.IntegerType.get()}),e.push({name:"marow",type:i.IntegerType.get()}),e.push({name:"tleng",type:i.IntegerType.get()}),e.push({name:"sfoff",type:i.IntegerType.get()}),e.push({name:"willi",type:i.IntegerType.get()}),e.push({name:"lilli",type:i.IntegerType.get()}),e.push({name:"subrc",type:i.IntegerType.get()}),e.push({name:"fleng",type:i.IntegerType.get()}),e.push({name:"cucol",type:i.IntegerType.get()}),e.push({name:"curow",type:i.IntegerType.get()}),e.push({name:"lsind",type:i.IntegerType.get()}),e.push({name:"listi",type:i.IntegerType.get()}),e.push({name:"stepl",type:i.IntegerType.get()}),e.push({name:"tpagi",type:i.IntegerType.get()}),e.push({name:"winx1",type:i.IntegerType.get()}),e.push({name:"winy1",type:i.IntegerType.get()}),e.push({name:"winx2",type:i.IntegerType.get()}),e.push({name:"winy2",type:i.IntegerType.get()}),e.push({name:"winco",type:i.IntegerType.get()}),e.push({name:"winro",type:i.IntegerType.get()}),e.push({name:"windi",type:i.IntegerType.get()}),e.push({name:"srows",type:i.IntegerType.get()}),e.push({name:"scols",type:i.IntegerType.get()}),e.push({name:"loopc",type:i.IntegerType.get()}),e.push({name:"folen",type:i.IntegerType.get()}),e.push({name:"fodec",type:i.IntegerType.get()}),e.push({name:"tzone",type:i.IntegerType.get()}),e.push({name:"dayst",type:new i.CharacterType(1)}),e.push({name:"ftype",type:new i.CharacterType(1)}),e.push({name:"appli",type:new i.HexType(2)}),e.push({name:"fdayw",type:i.AnyType.get()}),e.push({name:"ccurs",type:new i.PackedType(5,0)}),e.push({name:"ccurt",type:new i.PackedType(5,0)}),e.push({name:"debug",type:new i.CharacterType(1)}),e.push({name:"ctype",type:new i.CharacterType(1)}),e.push({name:"input",type:new i.CharacterType(1,{qualifiedName:"sy-input"})}),e.push({name:"langu",type:new i.CharacterType(1,{qualifiedName:"sy-langu",conversionExit:"ISOLA"})}),e.push({name:"modno",type:i.IntegerType.get()}),e.push({name:"batch",type:new i.CharacterType(1,{qualifiedName:"sy-batch"})}),e.push({name:"binpt",type:new i.CharacterType(1,{qualifiedName:"sy-binpt"})}),e.push({name:"calld",type:new i.CharacterType(1,{qualifiedName:"sy-calld"})}),e.push({name:"dynnr",type:new i.CharacterType(4,{qualifiedName:"sy-dynnr"})}),e.push({name:"dyngr",type:new i.CharacterType(4,{qualifiedName:"sy-dyngr"})}),e.push({name:"newpa",type:new i.CharacterType(1)}),e.push({name:"pri40",type:new i.CharacterType(1)}),e.push({name:"rstrt",type:new i.CharacterType(1)}),e.push({name:"wtitl",type:new i.CharacterType(1,{qualifiedName:"sy-wtitl"})}),e.push({name:"cpage",type:i.IntegerType.get()}),e.push({name:"dbnam",type:new i.CharacterType(20,{qualifiedName:"sy-dbnam"})}),e.push({name:"mandt",type:new i.CharacterType(3,{qualifiedName:"sy-mandt"})}),e.push({name:"prefx",type:new i.CharacterType(3)}),e.push({name:"fmkey",type:new i.CharacterType(3)}),e.push({name:"pexpi",type:new i.NumericType(1)}),e.push({name:"prini",type:new i.NumericType(1)}),e.push({name:"primm",type:new i.CharacterType(1)}),e.push({name:"prrel",type:new i.CharacterType(1)}),e.push({name:"playo",type:new i.CharacterType(5)}),e.push({name:"prbig",type:new i.CharacterType(1)}),e.push({name:"playp",type:new i.CharacterType(1)}),e.push({name:"prnew",type:new i.CharacterType(1)}),e.push({name:"prlog",type:new i.CharacterType(1)}),e.push({name:"pdest",type:new i.CharacterType(4,{qualifiedName:"sy-pdest"})}),e.push({name:"plist",type:new i.CharacterType(12)}),e.push({name:"pauth",type:new i.NumericType(2)}),e.push({name:"prdsn",type:new i.CharacterType(6)}),e.push({name:"pnwpa",type:new i.CharacterType(1)}),e.push({name:"callr",type:new i.CharacterType(8,{qualifiedName:"sy-callr"})}),e.push({name:"repi2",type:new i.CharacterType(40)}),e.push({name:"rtitl",type:new i.CharacterType(70)}),e.push({name:"prrec",type:new i.CharacterType(12)}),e.push({name:"prtxt",type:new i.CharacterType(68)}),e.push({name:"prabt",type:new i.CharacterType(12)}),e.push({name:"lpass",type:new i.CharacterType(4)}),e.push({name:"nrpag",type:new i.CharacterType(1)}),e.push({name:"paart",type:new i.CharacterType(16)}),e.push({name:"prcop",type:new i.NumericType(3)}),e.push({name:"batzs",type:new i.CharacterType(1)}),e.push({name:"bspld",type:new i.CharacterType(1)}),e.push({name:"brep4",type:new i.CharacterType(4)}),e.push({name:"batzo",type:new i.CharacterType(1)}),e.push({name:"batzd",type:new i.CharacterType(1)}),e.push({name:"batzw",type:new i.CharacterType(1)}),e.push({name:"batzm",type:new i.CharacterType(1)}),e.push({name:"ctabl",type:new i.CharacterType(4)}),e.push({name:"dbsys",type:new i.CharacterType(10,{qualifiedName:"sy-dbsys"})}),e.push({name:"dcsys",type:new i.CharacterType(4)}),e.push({name:"macdb",type:new i.CharacterType(4)}),e.push({name:"sysid",type:new i.CharacterType(8,{qualifiedName:"sy-sysid"})}),e.push({name:"opsys",type:new i.CharacterType(10,{qualifiedName:"sy-opsys"})}),e.push({name:"pfkey",type:new i.CharacterType(20,{qualifiedName:"sy-pfkey"})}),e.push({name:"saprl",type:new i.CharacterType(4,{qualifiedName:"sy-saprl"})}),e.push({name:"tcode",type:new i.CharacterType(20,{qualifiedName:"sy-tcode"})}),e.push({name:"ucomm",type:new i.CharacterType(70,{qualifiedName:"sy-ucomm"})}),e.push({name:"cfwae",type:new i.CharacterType(5)}),e.push({name:"chwae",type:new i.CharacterType(5)}),e.push({name:"spono",type:new i.CharacterType(10,{qualifiedName:"sy-spono"})}),e.push({name:"sponr",type:new i.NumericType(10)}),e.push({name:"waers",type:new i.CharacterType(5)}),e.push({name:"cdate",type:new i.DateType}),e.push({name:"datum",type:new i.DateType}),e.push({name:"slset",type:new i.CharacterType(14,{qualifiedName:"sy-slset"})}),e.push({name:"subty",type:new i.HexType(1)}),e.push({name:"subcs",type:new i.CharacterType(1)}),e.push({name:"group",type:new i.CharacterType(1)}),e.push({name:"ffile",type:new i.CharacterType(8)}),e.push({name:"uzeit",type:new i.TimeType}),e.push({name:"dsnam",type:new i.CharacterType(8)}),e.push({name:"tabid",type:new i.CharacterType(8)}),e.push({name:"tfdsn",type:new i.CharacterType(8)}),e.push({name:"uname",type:new i.CharacterType(12,{qualifiedName:"sy-uname"})}),e.push({name:"lstat",type:new i.CharacterType(16)}),e.push({name:"abcde",type:new i.CharacterType(26,{qualifiedName:"sy-abcde"})}),e.push({name:"marky",type:new i.CharacterType(1)}),e.push({name:"sfnam",type:new i.CharacterType(30)}),e.push({name:"tname",type:new i.CharacterType(30)}),e.push({name:"msgli",type:new i.CharacterType(60,{qualifiedName:"sy-msgli"})}),e.push({name:"title",type:new i.CharacterType(70,{qualifiedName:"sy-title"})}),e.push({name:"entry",type:new i.CharacterType(72)}),e.push({name:"lisel",type:new i.CharacterType(255,{qualifiedName:"sy-lisel"})}),e.push({name:"uline",type:new i.CharacterType(255,{qualifiedName:"sy-uline"})}),e.push({name:"xcode",type:new i.CharacterType(70)}),e.push({name:"cprog",type:new i.CharacterType(40,{qualifiedName:"sy-cprog"})}),e.push({name:"xprog",type:new i.CharacterType(40)}),e.push({name:"xform",type:new i.CharacterType(30)}),e.push({name:"ldbpg",type:new i.CharacterType(40,{qualifiedName:"sy-ldbpg"})}),e.push({name:"tvar0",type:new i.CharacterType(20,{qualifiedName:"sy-tvar0"})}),e.push({name:"tvar1",type:new i.CharacterType(20,{qualifiedName:"sy-tvar1"})}),e.push({name:"tvar2",type:new i.CharacterType(20,{qualifiedName:"sy-tvar2"})}),e.push({name:"tvar3",type:new i.CharacterType(20,{qualifiedName:"sy-tvar3"})}),e.push({name:"tvar4",type:new i.CharacterType(20,{qualifiedName:"sy-tvar4"})}),e.push({name:"tvar5",type:new i.CharacterType(20,{qualifiedName:"sy-tvar5"})}),e.push({name:"tvar6",type:new i.CharacterType(20,{qualifiedName:"sy-tvar6"})}),e.push({name:"tvar7",type:new i.CharacterType(20,{qualifiedName:"sy-tvar7"})}),e.push({name:"tvar8",type:new i.CharacterType(20,{qualifiedName:"sy-tvar8"})}),e.push({name:"tvar9",type:new i.CharacterType(20,{qualifiedName:"sy-tvar9"})}),e.push({name:"msgid",type:new i.CharacterType(20,{qualifiedName:"sy-msgid"})}),e.push({name:"msgty",type:new i.CharacterType(1,{qualifiedName:"sy-msgty"})}),e.push({name:"msgno",type:new i.NumericType(3,"sy-msgno")}),e.push({name:"msgv1",type:new i.CharacterType(50,{qualifiedName:"sy-msgv1"})}),e.push({name:"msgv2",type:new i.CharacterType(50,{qualifiedName:"sy-msgv2"})}),e.push({name:"msgv3",type:new i.CharacterType(50,{qualifiedName:"sy-msgv3"})}),e.push({name:"msgv4",type:new i.CharacterType(50,{qualifiedName:"sy-msgv4"})}),e.push({name:"oncom",type:new i.CharacterType(1)}),e.push({name:"vline",type:new i.CharacterType(1,{qualifiedName:"sy-vline"})}),e.push({name:"winsl",type:new i.CharacterType(79)}),e.push({name:"staco",type:i.IntegerType.get()}),e.push({name:"staro",type:i.IntegerType.get()}),e.push({name:"datar",type:new i.CharacterType(1,{qualifiedName:"sy-datar"})}),e.push({name:"host",type:new i.CharacterType(32,{qualifiedName:"sy-host"})}),e.push({name:"locdb",type:new i.CharacterType(1)}),e.push({name:"locop",type:new i.CharacterType(1)}),e.push({name:"datlo",type:new i.DateType}),e.push({name:"timlo",type:new i.TimeType}),e.push({name:"zonlo",type:new i.CharacterType(6,{qualifiedName:"sy-zonlo"})});const t=new i.StructureType(e),n=new r.Identifier(new a.Position(this.row++,1),"sy"),s=new o.TypedIdentifier(n,p.filename,t,["read_only","built-in"]),c=new r.Identifier(new a.Position(this.row++,1),"syst"),l=new o.TypedIdentifier(c,p.filename,t,["read_only","built-in"]),d=new r.Identifier(new a.Position(this.row++,1),"sy-repid"),u=new o.TypedIdentifier(d,p.filename,new i.CharacterType(40,{qualifiedName:"sy-repid"}),["read_only","built-in"]),f=new r.Identifier(new a.Position(this.row++,1),"syst-repid");return[s,l,u,new o.TypedIdentifier(f,p.filename,new i.CharacterType(40,{qualifiedName:"syst-repid"}),["read_only","built-in"])]}buildConstant(e,t,n){const s=new r.Identifier(new a.Position(this.row++,1),e);return void 0===t&&(t=i.VoidType.get(e)),void 0===n&&(n="'?'"),new o.TypedIdentifier(s,p.filename,t,["read_only","built-in"],n)}}t.BuiltIn=p,p.filename="_builtin.prog.abap",p.counter=1,p.getCache=[],p.methods={ABS:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},ACOS:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},ASIN:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},ATAN:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},"BIT-SET":{counter:p.counter++,mandatory:{val:i.IntegerType.get()},return:i.XStringType.get(),version:d.Version.v702},BOOLC:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},BOOLX:{counter:p.counter++,mandatory:{bool:i.CLikeType.get()},optional:{bit:i.IntegerType.get()},return:i.XStringType.get(),version:d.Version.v702},CEIL:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},CHAR_OFF:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),add:i.IntegerType.get()},optional:{off:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},CHARLEN:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.IntegerType.get()},CMAX:{counter:p.counter++,mandatory:{val1:i.CLikeType.get(),val2:i.CLikeType.get()},optional:{val3:i.CLikeType.get(),val4:i.CLikeType.get(),val5:i.CLikeType.get(),val6:i.CLikeType.get(),val7:i.CLikeType.get(),val9:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},CMIN:{counter:p.counter++,mandatory:{val1:i.CLikeType.get(),val2:i.CLikeType.get()},optional:{val3:i.CLikeType.get(),val4:i.CLikeType.get(),val5:i.CLikeType.get(),val6:i.CLikeType.get(),val7:i.CLikeType.get(),val9:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},CONCAT_LINES_OF:{counter:p.counter++,mandatory:{table:new i.TableType(i.AnyType.get(),{withHeader:!1,keyType:i.TableKeyType.default})},optional:{sep:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},CONDENSE:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{del:i.CLikeType.get(),from:i.CLikeType.get(),to:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},CONTAINS:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),start:i.CLikeType.get(),end:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:new i.CharacterType(1),predicate:!0,version:d.Version.v702},CONTAINS_ANY_NOT_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),start:i.CLikeType.get(),end:i.CLikeType.get(),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},predicate:!0,return:new i.CharacterType(1),version:d.Version.v702},CONTAINS_ANY_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),start:i.CLikeType.get(),end:i.CLikeType.get(),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:new i.CharacterType(1),predicate:!0,version:d.Version.v702},COS:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},COSH:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},COUNT:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},COUNT_ANY_NOT_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},COUNT_ANY_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},DBMAXLEN:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.IntegerType.get()},DISTANCE:{counter:p.counter++,mandatory:{val1:i.CLikeType.get(),val2:i.CLikeType.get()},return:i.IntegerType.get(),version:d.Version.v702},ESCAPE:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),format:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},EXP:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},FIND:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},FIND_ANY_NOT_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},FIND_ANY_OF:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},FIND_END:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},FLOOR:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},FRAC:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},FROM_MIXED:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{case:new i.CharacterType(1),sep:i.IntegerType.get(),min:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},INSERT:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),sub:i.CLikeType.get()},optional:{off:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},IPOW:{counter:p.counter++,mandatory:{base:new i.FloatType,exp:new i.FloatType},return:i.IntegerType.get(),version:d.Version.v740sp02},LINE_EXISTS:{counter:p.counter++,mandatory:{val:i.AnyType.get()},return:new i.CharacterType(1),predicate:!0,version:d.Version.v740sp02},LINE_INDEX:{counter:p.counter++,mandatory:{val:i.AnyType.get()},return:i.IntegerType.get(),version:d.Version.v740sp02},LINES:{counter:p.counter++,mandatory:{val:new i.TableType(i.AnyType.get(),{withHeader:!1,keyType:i.TableKeyType.default})},return:i.IntegerType.get()},LOG:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},LOG10:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},MATCH:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{case:new i.CharacterType(1),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},MATCHES:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{case:new i.CharacterType(1),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),off:i.IntegerType.get(),len:i.IntegerType.get()},return:new i.CharacterType(1),predicate:!0,version:d.Version.v702},NMAX:{counter:p.counter++,mandatory:{val1:i.CLikeType.get(),val2:i.CLikeType.get()},optional:{val3:i.CLikeType.get(),val4:i.CLikeType.get(),val5:i.CLikeType.get(),val6:i.CLikeType.get(),val7:i.CLikeType.get(),val8:i.CLikeType.get(),val9:i.CLikeType.get()},return:i.IntegerType.get(),version:d.Version.v702},NMIN:{counter:p.counter++,mandatory:{val1:i.CLikeType.get(),val2:i.CLikeType.get()},optional:{val3:i.CLikeType.get(),val4:i.CLikeType.get(),val5:i.CLikeType.get(),val6:i.CLikeType.get(),val7:i.CLikeType.get(),val8:i.CLikeType.get(),val9:i.CLikeType.get()},return:i.IntegerType.get(),version:d.Version.v702},NUMOFCHAR:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.IntegerType.get()},REPEAT:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),occ:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},REPLACE:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),with:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),off:i.IntegerType.get(),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},RESCALE:{counter:p.counter++,mandatory:{val:new i.FloatType},optional:{dec:i.IntegerType.get(),prec:i.IntegerType.get(),mode:i.IntegerType.get()},return:new i.FloatType,version:d.Version.v702},REVERSE:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},ROUND:{counter:p.counter++,mandatory:{val:new i.FloatType},optional:{dec:i.IntegerType.get(),prec:i.IntegerType.get(),mode:i.IntegerType.get()},return:i.IntegerType.get(),version:d.Version.v702},SEGMENT:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),index:i.IntegerType.get()},optional:{sep:i.CLikeType.get(),space:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},SHIFT_LEFT:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),places:i.IntegerType.get(),circular:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SHIFT_RIGHT:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),places:i.IntegerType.get(),circular:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SIGN:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},SIN:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},SINH:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},SQRT:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},STRLEN:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.IntegerType.get()},SUBSTRING:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{off:i.IntegerType.get(),len:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SUBSTRING_AFTER:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SUBSTRING_BEFORE:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SUBSTRING_FROM:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},SUBSTRING_TO:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{sub:i.CLikeType.get(),regex:i.CLikeType.get(),pcre:i.CLikeType.get(),case:new i.CharacterType(1),len:i.IntegerType.get(),occ:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},TAN:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},TANH:{counter:p.counter++,mandatory:{val:new i.FloatType},return:new i.FloatType},TO_LOWER:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},TO_MIXED:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},optional:{case:new i.CharacterType(1),sep:i.CLikeType.get(),min:i.IntegerType.get()},return:i.StringType.get(),version:d.Version.v702},TO_UPPER:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},TRANSLATE:{counter:p.counter++,mandatory:{val:i.CLikeType.get(),from:i.CLikeType.get(),to:i.CLikeType.get()},return:i.StringType.get(),version:d.Version.v702},TRUNC:{counter:p.counter++,mandatory:{val:new i.FloatType},return:i.IntegerType.get()},UTCLONG_ADD:{counter:p.counter++,mandatory:{val:new i.UTCLongType},optional:{days:i.IntegerType.get(),hour:i.IntegerType.get(),minutes:i.IntegerType.get(),seconds:new i.FloatType},return:new i.UTCLongType,version:d.Version.v754},UTCLONG_CURRENT:{counter:p.counter++,return:new i.UTCLongType,version:d.Version.v754},UTCLONG_DIFF:{counter:p.counter++,mandatory:{high:new i.UTCLongType,low:new i.UTCLongType},return:new i.FloatType,version:d.Version.v754},XSDBOOL:{counter:p.counter++,mandatory:{val:i.CLikeType.get()},return:new i.CharacterType(1),version:d.Version.v740sp08},XSTRLEN:{counter:p.counter++,mandatory:{val:new i.XSequenceType},return:i.IntegerType.get()}}},56808(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PragmaStyle=t.PragmaStyleConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(33366);class c extends i.BasicRuleConfig{constructor(){super(...arguments),this.style=a.KeywordCaseStyle.Upper}}t.PragmaStyleConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"pragma_style",title:"Pragma Style",shortDescription:"Check pragmas placement and case",tags:[r.RuleTag.SingleFile],extendedInformation:"https://help.sap.com/doc/abapdocu_cp_index_htm/CLOUD/en-US/abenpragma.htm",badExample:"DATA field ##NO_TEXT TYPE i.",goodExample:"DATA field TYPE i ##NO_TEXT."}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.style&&(this.conf.style=a.KeywordCaseStyle.Upper)}runParsed(e){const t=[];for(const n of e.getStatements())if(0!==n.getPragmas().length)for(const o of n.getPragmas()){const i=n.getChildren();if(1===i.length)break;if(i[i.length-2].getLastToken().getStart().isAfter(o.getStart())){const n="Place pragma at end of statement",i=s.Issue.atToken(e,o,n,this.getMetadata().key,this.conf.severity);t.push(i)}else if(this.conf.style===a.KeywordCaseStyle.Upper&&o.getStr()!==o.getStr().toUpperCase()){const n="Upper case pragmas",i=s.Issue.atToken(e,o,n,this.getMetadata().key,this.conf.severity);t.push(i)}else if(this.conf.style===a.KeywordCaseStyle.Lower&&o.getStr()!==o.getStr().toLowerCase()){const n="Lower case pragmas",i=s.Issue.atToken(e,o,n,this.getMetadata().key,this.conf.severity);t.push(i)}}return t}}t.PragmaStyle=l},56827(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OutboundService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SCO3"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.OutboundService=o},56989(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Extract=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Extract=class{getMatcher(){const e=(0,s.seq)("EXTRACT",(0,s.opt)(o.Field));return(0,s.verNot)(i.Version.Cloud,e)}}},57078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFieldChain=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(91675);class a extends s.Expression{getRunnable(){const e=(0,s.starPrio)((0,s.seq)((0,s.tok)(i.Dash),o.ComponentName)),t=(0,s.seq)(o.ClassName,(0,s.tok)(i.StaticArrow),r.AttributeName),n=(0,s.altPrio)(t,o.Field);return(0,s.seq)(n,e)}}t.SimpleFieldChain=a},57147(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DecFloatType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```decfloat```"}isGeneric(){return!0}toABAP(){return"decfloat"}containsVoid(){return!1}toCDS(){return"abap.fltp"}}t.DecFloatType=o},57162(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CondBody=void 0;const s=n(82245),o=n(93170),i=n(31666),r=n(60635);t.CondBody=class{static runSyntax(e,t,n){if(void 0===e)return;let a=!1;const c=e.findDirectExpression(s.Let);c&&(a=i.Let.runSyntax(c,t));for(const n of e.findDirectExpressions(s.Cond))r.Cond.runSyntax(n,t);let l;for(const i of e.findDirectExpressions(s.Source))void 0===l?l=o.Source.runSyntax(i,t,n):o.Source.runSyntax(i,t,n);return!0===a&&t.scope.pop(e.getLastToken().getEnd()),l}}},57212(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExecSQL=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ExecSQL=class{getMatcher(){const e=(0,s.seq)("PERFORMING",o.SimpleName),t=(0,s.seq)("EXEC SQL",(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},57216(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.When=void 0;const s=n(82245),o=n(93170);t.When=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t)}}},57233(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Resume=void 0;const s=n(3125);t.Resume=class{getMatcher(){return(0,s.str)("RESUME")}}},57342(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RFCService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SRFC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.RFCService=o},57387(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndLoop=void 0;const s=n(3125);t.EndLoop=class{getMatcher(){return(0,s.str)("ENDLOOP")}}},57395(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PushChannel=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SAPC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.PushChannel=o},57468(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(91675),a=n(97329);class c extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.InstanceArrow),r.AttributeName),t=(0,s.seq)((0,s.tok)(i.Dash),o.ComponentName),n=(0,s.starPrio)((0,s.altPrio)(a.Dereference,e,t,o.TableExpression)),c=(0,s.seq)(o.ClassName,(0,s.tok)(i.StaticArrow),r.AttributeName),l=(0,s.altPrio)(o.Cast,o.NewObject,c,o.TargetField,o.TargetFieldSymbol),d=(0,s.seq)((0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength)),u=(0,s.altPrio)(o.TableBody,d);return(0,s.altPrio)(o.InlineData,o.InlineFS,(0,s.seq)(l,n,u))}}t.Target=c},57507(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionName=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)(o.Constant,o.FieldChain)}}t.FunctionName=i},57528(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportingFields=void 0;const s=n(3125),o=n(17808),i=n(37232);class r extends s.Expression{getRunnable(){const e=(0,s.plus)((0,s.alt)((0,s.seq)("INTO",(0,s.failStar)()),i.FieldSub));return(0,s.altPrio)(o.Dynamic,e)}}t.TransportingFields=r},57727(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualEndPoint=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WEBI"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.VirtualEndPoint=o},57794(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AssociationName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^(\\_[\w]+)+$/)}}t.AssociationName=o},57862(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArithOperator=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.tok)(o.WPlusW),(0,s.tok)(o.WDashW),"*","**","/","BIT-XOR","BIT-AND","BIT-OR","DIV","MOD")}}t.ArithOperator=i},58e3(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Or=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("OR",o.Source)}}t.Or=i},58119(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDefineCustom=void 0;const s=n(18483),o=n(3125),i=n(19181),r=n(34090);class a extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.opt)((0,o.str)("KEY")),i.CDSName,":",r.CDSType,";"),t=(0,o.seq)(i.CDSName,":",(0,o.alt)(s.CDSComposition,s.CDSAssociation),";");return(0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.str)("DEFINE"),(0,o.opt)((0,o.str)("ROOT")),(0,o.str)("CUSTOM ENTITY"),i.CDSName,(0,o.opt)(s.CDSWithParameters),(0,o.str)("{"),(0,o.plus)((0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.alt)(e,t))),(0,o.str)("}"),(0,o.opt)(";"))}}t.CDSDefineCustom=a},58150(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSymbol=void 0;const s=n(82245),o=n(15838),i=n(46743),r=n(69953),a=n(20572);t.FieldSymbol=class{runSyntax(e,t){var n;const c=null===(n=e.findFirstExpression(s.FieldSymbol))||void 0===n?void 0:n.getFirstToken();if(void 0===c)return;if(5===e.getChildren().length)return void t.scope.addIdentifier(new o.TypedIdentifier(c,t.filename,a.VoidType.get("FS-SIMPLE")));const l=new i.BasicTypes(t).parseType(e);l?t.scope.addIdentifier(new o.TypedIdentifier(c,t.filename,l)):t.scope.addIdentifier(new o.TypedIdentifier(c,t.filename,new r.UnknownType("Fieldsymbol, fallback")))}}},58248(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XStringType=void 0;const s=n(97502);class o extends s.AbstractType{static get(e){const t=JSON.stringify(e);if(this.singletons.has(t))return this.singletons.get(t);const n=new o(e);return this.singletons.set(t,n),n}constructor(e){super(e)}toText(){return"```xstring```"}isGeneric(){return!1}toABAP(){return"xstring"}containsVoid(){return!1}toCDS(){return"abap.rawstring"}}t.XStringType=o,o.singletons=new Map},58270(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Case=void 0;const s=n(3125),o=n(82245);t.Case=class{getMatcher(){return(0,s.seq)("CASE",o.Source)}}},58284(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataBegin=void 0;const s=n(3125),o=n(82245);t.DataBegin=class{getMatcher(){const e=(0,s.seq)("OCCURS",(0,s.altPrio)(o.Integer,o.FieldChain)),t=(0,s.seq)("COMMON PART",(0,s.optPrio)(o.DefinitionName)),n=(0,s.seq)("BEGIN OF",(0,s.altPrio)(t,(0,s.seq)(o.DefinitionName,(0,s.optPrio)("READ-ONLY"),(0,s.optPrio)(e))));return(0,s.seq)("DATA",n)}}},58298(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DecFloat34Type=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```decfloat34```"}isGeneric(){return!1}toABAP(){return"decfloat34"}containsVoid(){return!1}toCDS(){return"abap.d34n"}}t.DecFloat34Type=o},58413(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IACBinaryData=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IAMU"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0}}getDescription(){}}t.IACBinaryData=o},58441(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormChanging=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("CHANGING",(0,s.plus)(o.FormParam))}}t.FormChanging=i},58490(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumericType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){if(super({qualifiedName:t}),e<=0)throw new Error("Bad LENGTH, Numeric");this.length=e}getLength(){return this.length}toText(){return"```n LENGTH "+this.getLength()+"```"}toABAP(){return"n LENGTH "+this.getLength()}isGeneric(){return!1}containsVoid(){return!1}toCDS(){return"abap.numc( "+this.getLength()+" )"}}t.NumericType=o},58698(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OnChange=void 0;const s=n(3125),o=n(82245),i=n(49028);t.OnChange=class{getMatcher(){const e=(0,s.seq)("OR",o.Target),t=(0,s.seq)("ON CHANGE OF",o.Target,(0,s.star)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},58710(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OLEExporting=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.regex)(/^[&_!#\*]?[\w\d\*%\$\?#]+$/),"=",o.Source);return(0,s.seq)("EXPORTING",(0,s.plus)(e))}}t.OLEExporting=i},58720(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.seq=function(e,...t){return new i([e].concat(t))},t.alt=function(e,...t){return new r([e].concat(t))},t.beginEnd=function(e,t,n){return new i([e,t,n])},t.opt=function(e){return new a(e)},t.star=function(e){return new c(e)},t.sta=function(e){return new d(e)},t.sub=function(e){return void 0===u[e.name]&&(u[e.name]=new l(new e)),u[e.name]};const s=n(75457),o=n(52024);class i{constructor(e){if(e.length<2)throw new Error("Sequence, length error");this.list=e}toRailroad(){return"Railroad.Sequence("+this.list.map((e=>e.toRailroad())).join()+")"}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}first(){return this.list[0].first()}run(e,t){let n=e,s=[];for(const o of this.list){const i=o.run(n,t);if(i.error)return{matched:[],unmatched:e,error:!0,errorDescription:i.errorDescription,errorMatched:s.length};i.matched.length<100?s.push(...i.matched):s=s.concat(i.matched),n=i.unmatched}return{matched:s,unmatched:n,error:!1,errorDescription:"",errorMatched:0}}}class r{constructor(e){if(e.length<2)throw new Error("Alternative, length error");this.list=e}setupMap(){if(void 0===this.map){this.map={};for(const e of this.list)for(const t of e.first())this.map[t]?this.map[t].push(e):this.map[t]=[e]}}first(){return[""]}toRailroad(){return"Railroad.Choice(0, "+this.list.map((e=>e.toRailroad())).join()+")"}getUsing(){return this.list.reduce(((e,t)=>e.concat(t.getUsing())),[])}run(e,t){this.setupMap();let n=0,s="";if(0===e.length)return{matched:[],unmatched:e,error:!0,errorDescription:s,errorMatched:n};const o=e[0].getFirstToken().getStr().toUpperCase();for(const i of this.map[o]||[]){const o=i.run(e,t);if(!1===o.error)return o;o.errorMatched>n&&(s=o.errorDescription,n=o.errorMatched)}for(const o of this.map[""]||[]){const i=o.run(e,t);if(!1===i.error)return i;i.errorMatched>n&&(s=i.errorDescription,n=i.errorMatched)}return 0===n?{matched:[],unmatched:e,error:!0,errorDescription:"Unexpected code structure",errorMatched:n}:{matched:[],unmatched:e,error:!0,errorDescription:s,errorMatched:n}}}class a{constructor(e){this.obj=e}toRailroad(){return"Railroad.Optional("+this.obj.toRailroad()+")"}getUsing(){return this.obj.getUsing()}run(e,t){const n=this.obj.run(e,t);return n.error=!1,n}first(){return[""]}}class c{constructor(e){this.obj=e}toRailroad(){return"Railroad.ZeroOrMore("+this.obj.toRailroad()+")"}getUsing(){return this.obj.getUsing()}run(e,t){let n=e,s=[];for(;;){if(0===n.length)return{matched:s,unmatched:n,error:!1,errorDescription:"",errorMatched:0};const e=this.obj.run(n,t);if(!0===e.error)return e.errorMatched>0?{matched:s,unmatched:n,error:!0,errorDescription:e.errorDescription,errorMatched:e.errorMatched}:{matched:s,unmatched:n,error:!1,errorDescription:"",errorMatched:0};e.matched.length<100?s.push(...e.matched):s=s.concat(e.matched),n=e.unmatched}}first(){return[""]}}class l{constructor(e){this.s=e}toRailroad(){return"Railroad.NonTerminal('"+this.s.constructor.name+"', {href: '#/structure/"+this.s.constructor.name+"'})"}getUsing(){return["structure/"+this.s.constructor.name]}first(){return this.setupMatcher(),this.matcher.first()}setupMatcher(){void 0===this.matcher&&(this.matcher=this.s.getMatcher())}run(e,t){const n=new s.StructureNode(this.s);this.setupMatcher();const o=this.matcher.run(e,n);return 0===o.matched.length?o.error=!0:t.addChild(n),o}}class d{constructor(e){this.obj=e}first(){const e=new this.obj;return e instanceof o.MacroCall||e instanceof o.NativeSQL?[""]:e.getMatcher().first()}toRailroad(){return"Railroad.Terminal('"+this.className()+"', {href: '#/statement/"+this.className()+"'})"}getUsing(){return["statement/"+this.className()]}className(){return this.obj.name}run(e,t){return 0===e.length?{matched:[],unmatched:[],error:!0,errorDescription:"Expected "+this.className().toUpperCase(),errorMatched:0}:e[0].get()instanceof this.obj?(t.addChild(e[0]),{matched:[e[0]],unmatched:e.splice(1),error:!1,errorDescription:"",errorMatched:0}):{matched:[],unmatched:e,error:!0,errorDescription:"Expected "+this.className().toUpperCase(),errorMatched:0}}}const u={}},58755(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopExtract=void 0;const s=n(50612),o=n(58720),i=n(94967);t.LoopExtract=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.LoopExtract),(0,o.star)((0,o.sub)(i.Body)),(0,o.sta)(s.EndLoop))}}},58796(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetTitlebar=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetTitlebar=class{getMatcher(){const e=(0,s.seq)("WITH",(0,s.plus)(o.Source)),t=(0,s.seq)("OF PROGRAM",o.Source),n=(0,s.seq)("SET TITLEBAR",o.Source,(0,s.opt)(t),(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,n)}}},58798(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodLength=t.MethodLengthConf=void 0;const s=n(71759),o=n(84383),i=n(96928),r=n(86696),a=n(77465),c=n(29785);class l extends a.BasicRuleConfig{constructor(){super(...arguments),this.statements=100,this.errorWhenEmpty=!0,this.ignoreTestClasses=!1,this.checkForms=!0}}var d;t.MethodLengthConf=l,function(e){e[e.EmptyMethod=0]="EmptyMethod",e[e.MaxStatements=1]="MaxStatements"}(d||(d={})),t.MethodLength=class{constructor(){this.conf=new l}getMetadata(){return{key:"method_length",title:"Method/Form Length",shortDescription:"Checks relating to method/form length.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#keep-methods-small\n\nAbstract methods without statements are considered okay.",tags:[r.RuleTag.Styleguide,r.RuleTag.SingleFile]}}getDescription(e,t,n){switch(e){case d.EmptyMethod:return"Empty "+n;case d.MaxStatements:return"Reduce "+n+" length to max "+this.conf.statements+" statements, currently "+t;default:return""}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){var t;if(!0===this.conf.ignoreTestClasses&&e instanceof o.Class&&!0===(null===(t=e.getClassDefinition())||void 0===t?void 0:t.isForTesting))return[];const n=i.MethodLengthStats.run(e),s=this.check(n,"METHOD");let r=[];if(this.conf.checkForms){const t=c.FormLengthStats.run(e);r=this.check(t,"FORM")}return s.concat(r)}check(e,t){const n=[];for(const o of e)if(!0!==this.conf.ignoreTestClasses||!o.file.getFilename().includes(".testclasses."))if(0!==o.count||!0!==this.conf.errorWhenEmpty){if(o.count>this.conf.statements){const e=this.getDescription(d.MaxStatements,o.count.toString(),t),i=s.Issue.atPosition(o.file,o.pos,e,this.getMetadata().key,this.conf.severity);n.push(i)}}else{if(this.isAbstract(o))continue;const e=s.Issue.atPosition(o.file,o.pos,this.getDescription(d.EmptyMethod,"0",t),this.getMetadata().key,this.conf.severity);n.push(e)}return n}isAbstract(e){const t=e.file.getInfo().getClassDefinitionByName(e.className);return!0===(null==t?void 0:t.isAbstract)}}},58837(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtLineSelection=void 0;const s=n(3125),o=n(49028);t.AtLineSelection=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"AT LINE-SELECTION")}}},58901(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LSPEdit=void 0;const s=n(46203);t.LSPEdit=class{static mapEdits(e){const t={changes:{}};for(const n of e)for(const e in n)void 0===t.changes[e]&&(t.changes[e]=[]),t.changes[e]=t.changes[e].concat(this.mapText(n[e]));return t}static mapEdit(e){const t={changes:{}};for(const n in e)t.changes[n]=this.mapText(e[n]);return t}static mapText(e){const t=[];for(const n of e){const e=s.Range.create(n.range.start.getRow()-1,n.range.start.getCol()-1,n.range.end.getRow()-1,n.range.end.getCol()-1);t.push({range:e,newText:n.newText})}return t}}},59115(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseDynpros=function(e){var t,n,o,i;const r=[],a=null===(o=null===(n=null===(t=e.abapGit)||void 0===t?void 0:t["asx:abap"])||void 0===n?void 0:n["asx:values"])||void 0===o?void 0:o.DYNPROS;if(void 0!==a)for(const e of(0,s.xmlToArray)(a.item)){const t=[];for(const n of(0,s.xmlToArray)(null===(i=e.FIELDS)||void 0===i?void 0:i.RPY_DYFATC))t.push({name:n.NAME,type:n.TYPE,length:n.LENGTH});r.push({number:e.HEADER.SCREEN,description:e.HEADER.DESCRIPT,nextScreen:e.HEADER.NEXTSCREEN,type:e.HEADER.TYPE,fields:t})}return r};const s=n(86219)},59195(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InfoArea=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AREA"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.InfoArea=o},59294(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnusedVariables=t.UnusedVariablesConf=void 0;const s=n(71759),o=n(77465),i=n(86696),r=n(52424),a=n(12620),c=n(2403),l=n(84383),d=n(71249),u=n(50612),p=n(52024),f=n(36453);class g extends o.BasicRuleConfig{constructor(){super(...arguments),this.skipNames=[],this.skipAbstract=!1}}t.UnusedVariablesConf=g;class h{constructor(){this.workarea=[]}push(e,t=1){for(const t of this.workarea)if(e.equals(t.id))return;this.workarea.push({id:e,count:t})}removeIfExists(e){if(void 0!==e)for(let t=0;t<this.workarea.length;t++)if(e.equals(this.workarea[t].id))return this.workarea[t].count--,void(0===this.workarea[t].count&&this.workarea.splice(t,1))}get(){return this.workarea}count(){return this.workarea.length}}t.UnusedVariables=class{constructor(){this.conf=new g}getMetadata(){return{key:"unused_variables",title:"Unused variables",shortDescription:"Checks for unused variables and constants",extendedInformation:"Skips event parameters.\n\nNote that this currently does not work if the source code uses macros.\n\nUnused variables are not reported if the object contains parser or syntax errors.\n\nErrors found in INCLUDES are reported for the main program.",tags:[i.RuleTag.Quickfix],pragma:"##NEEDED",pseudoComment:"EC NEEDED",badExample:"DATA: BEGIN OF blah1,\n      test  TYPE string,\n      test2 TYPE string,\n    END OF blah1.",goodExample:"DATA: BEGIN OF blah2 ##NEEDED,\n      test  TYPE string,\n      test2 TYPE string,\n    END OF blah2."}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.skipNames&&(this.conf.skipNames=[])}initialize(e){return this.reg=e,this}run(e){if(!(e instanceof a.ABAPObject))return[];if(e instanceof l.Interface)return[];for(const t of e.getABAPFiles())for(const e of t.getStatements())if(e.get()instanceof p.Unknown)return[];const t=new r.SyntaxLogic(this.reg,e).run();if(t.issues.length>0)return[];this.workarea=new h;const n=t.spaghetti.getTop();if(this.buildWorkarea(n,e),0===this.workarea.count())return this.buildIssues(e);this.findUses(n,e);for(const t of this.reg.getObjects())if(t!==e&&t instanceof a.ABAPObject){if(this.reg.isDependency(t))continue;const n=new r.SyntaxLogic(this.reg,t).run();if(this.findUses(n.spaghetti.getTop(),t),0===this.workarea.count())return this.buildIssues(e)}return this.buildIssues(e)}findUses(e,t){for(const t of e.getData().references)t.referenceType!==f.ReferenceType.DataReadReference&&t.referenceType!==f.ReferenceType.DataWriteReference&&t.referenceType!==f.ReferenceType.TypeReference||this.workarea.removeIfExists(t.resolved);for(const n of e.getChildren())this.findUses(n,t)}buildWorkarea(e,t){const n=e.getIdentifier().stype;if(n!==c.ScopeType.OpenSQL){for(const n of e.getChildren())this.buildWorkarea(n,t);if(n!==c.ScopeType.BuiltIn){const t=e.getData().vars;for(const e in t){const n=t[e].getMeta();if(this.conf.skipNames&&this.conf.skipNames.length>0&&this.conf.skipNames.some((t=>t.toUpperCase()===e)))continue;if(!0===this.conf.skipAbstract&&n.includes("abstract"))continue;if("ME"===e||"SUPER"===e||n.includes("selection_screen_tab")||n.includes("event_parameter"))continue;const s=n.includes("inline");this.workarea.push(t[e],s?2:1)}}}}buildIssues(e){const t=[];for(const n of this.workarea.get()){const o=n.id.getFilename();if(!0===this.reg.isFileDependency(o))continue;if(e instanceof l.Program==0&&!1===e.containsFile(o))continue;const i=this.findStatement(n.id);if(null==i?void 0:i.getPragmas().map((e=>e.getStr())).includes(this.getMetadata().pragma+""))continue;if(this.suppressedbyPseudo(i,n.id,e))continue;const r='Variable "'+n.id.getName().toLowerCase()+'" not used',a=this.buildFix(n.id,e);t.push(s.Issue.atIdentifier(n.id,r,this.getMetadata().key,this.conf.severity,a))}return t}suppressedbyPseudo(e,t,n){if(void 0===e)return!1;const s=n.getABAPFileByName(t.getFilename());if(void 0===s)return!1;let o=!1;for(const t of s.getStatements()){if(!0===o&&t.get()instanceof p.Comment)return t.concatTokens().includes(this.getMetadata().pseudoComment+"");t===e&&(o=!0)}return!1}findStatement(e){const t=this.reg.getFileByName(e.getFilename());if(void 0===t)return;const n=this.reg.findObjectForFile(t);if(!(n instanceof a.ABAPObject))return;const s=n.getABAPFileByName(e.getFilename());return void 0!==s?d.EditHelper.findStatement(e.getToken(),s):void 0}buildFix(e,t){const n=t.getABAPFileByName(e.getFilename());if(void 0===n)return;const s=d.EditHelper.findStatement(e.getToken(),n);return void 0!==s&&s.get()instanceof u.Data?d.EditHelper.deleteStatement(n,s):void 0}}},59299(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UseLineExists=t.UseLineExistsConf=void 0;const s=n(71759),o=n(50612),i=n(82245),r=n(99732),a=n(77465),c=n(49028),l=n(86696),d=n(52024);class u extends a.BasicRuleConfig{}t.UseLineExistsConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"use_line_exists",title:"Use line_exists",shortDescription:"Use line_exists, from 740sp02 and up",extendedInformation:"\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-line_exists-to-read-table-or-loop-at\n\nNot reported if the READ TABLE statement contains BINARY SEARCH.",tags:[l.RuleTag.Upport,l.RuleTag.Styleguide,l.RuleTag.SingleFile],badExample:"READ TABLE my_table TRANSPORTING NO FIELDS WITH KEY key = 'A'.\nIF sy-subrc = 0.\nENDIF.",goodExample:"IF line_exists( my_table[ key = 'A' ] ).\nENDIF."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if("INTF"===t.getType())return[];const i=this.reg.getConfig().getVersion();if(i===c.Version.OpenABAP)return[];if(i<c.Version.v740sp02&&i!==c.Version.Cloud)return[];const r=e.getStatements();for(let t=0;t<r.length;t++){const i=r[t];if(!(i.get()instanceof o.ReadTable))continue;const a=i.concatTokens().toUpperCase();!0===a.includes(" TRANSPORTING NO FIELDS")&&!1===a.includes(" BINARY SEARCH")&&!0===this.checksSubrc(t,r)&&!1===this.usesTabix(t,r)&&n.push(s.Issue.atStatement(e,i,"Use line_exists",this.getMetadata().key,this.conf.severity))}return n}checksSubrc(e,t){for(let n=e+1;n<t.length;n++){const e=t[n];if(!(e.get()instanceof d.Comment)){for(const t of e.findAllExpressions(i.Cond))for(const e of t.findAllExpressions(i.Source))if("SY-SUBRC"===e.concatTokens().toUpperCase())return!0;return!1}}return!1}usesTabix(e,t){for(let n=e+1;n<e+5;n++){const e=t[n];if(void 0===e)break;if(!(e.get()instanceof d.Comment)&&e.concatTokens().toUpperCase().includes(" SY-TABIX"))return!0}return!1}}t.UseLineExists=p},59346(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Select=class{getMatcher(){const e=(0,s.ver)(i.Version.v750,(0,s.seq)("UNION",(0,s.optPrio)((0,s.altPrio)("DISTINCT","ALL")),o.Select),i.Version.OpenABAP);return(0,s.seq)(o.Select,(0,s.starPrio)(e))}}},59374(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Loop=void 0;const s=n(82245),o=n(20572),i=n(9646),r=n(93170),a=n(14365),c=n(67886),l=n(25037),d=n(45931),u=n(53414),p=n(32953),f=n(82054),g=n(49028);t.Loop=class{runSyntax(e,t){var n,h;const T=e.findDirectExpression(s.LoopTarget);let m=null==T?void 0:T.findDirectExpression(s.Target);const y=m?i.Target.runSyntax(m,t):void 0;void 0===m&&(m=e.findDirectExpression(s.FSTarget));const S=void 0!==(null==T?void 0:T.findDirectTokenByText("ASSIGNING")),v=e.findDirectExpressions(s.Source);let E=null===(n=e.findDirectExpression(s.LoopSource))||void 0===n?void 0:n.getFirstChild();void 0===E&&(E=v[0]);let C,b=E?r.Source.runSyntax(E,t,y,S):void 0;const I=e.concatTokens().toUpperCase();if(void 0===b){if("LOOP."!==I){const n="No source type determined";t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}}else if(b instanceof o.UnknownType){const n="Loop, not a table type, "+b.getError();t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n)),b=o.VoidType.get("Loop, not a table type")}else if(b instanceof o.TableType&&void 0===m&&!1===b.isWithHeader()&&4===e.getChildren().length){const n="Loop, no header line";t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}else if(b instanceof o.TableType||b instanceof o.AnyType||b instanceof o.DataType||b instanceof o.VoidType||!1!==I.startsWith("LOOP AT GROUP ")){if(void 0===T&&b instanceof o.TableType&&!1===b.isWithHeader()){const n="Loop, no header";t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}}else{const n="Loop, not a table type";t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}const D=null==T?void 0:T.concatTokens().toUpperCase(),x=b;b instanceof o.TableType&&(C=b.getRowType(),b=C,(null==D?void 0:D.startsWith("REFERENCE INTO "))&&(b=new o.DataReference(b)));const P=e.findDirectExpression(s.ComponentCond);if(void 0!==P&&d.ComponentCond.runSyntax(P,t,C),D&&D.startsWith("TRANSPORTING ")&&void 0===e.findDirectTokenByText("WHERE")){const n="Loop, TRANSPORTING NO FIELDS only with WHERE";return void t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}if(void 0!==e.findDirectTokenByText("USING")&&void 0!==P&&x instanceof o.TableType){const n=e.findExpressionAfterToken("KEY");let o;if((null==n?void 0:n.get())instanceof s.SimpleName){if(o=null===(h=x.getOptions().secondary)||void 0===h?void 0:h.find((e=>e.name.toUpperCase()===n.getFirstToken().getStr().toUpperCase())),void 0===o){const s="Key "+(null==n?void 0:n.concatTokens())+" not found in table type";return void t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),s))}if(t.scope.getRegistry().getConfig().getVersion()<=g.Version.v740sp02){const n=P.findAllExpressionsRecursive(s.ComponentCompare).map((e=>e.concatTokens().toUpperCase()));for(const s of o.keyFields)if(void 0!==n.find((e=>e===s.toUpperCase()+" IS INITIAL"))){const n="Loop, key check with IS INITIAL cannot optimized before 7.40 SP02";return void t.issues.push((0,f.syntaxIssue)(t,e.getFirstToken(),n))}}}}const A=null==m?void 0:m.findDirectExpression(s.InlineData);A&&a.InlineData.runSyntax(A,t,b);for(const e of v)e!==E&&r.Source.runSyntax(e,t);const N=null==m?void 0:m.findDirectExpression(s.InlineFS);if(N)c.InlineFS.runSyntax(N,t,b);else{const e=null==T?void 0:T.findDirectExpression(s.FSTarget);e&&l.FSTarget.runSyntax(e,t,b)}for(const n of e.findDirectExpressions(s.Dynamic))u.Dynamic.runSyntax(n,t);const O=e.findDirectExpression(s.LoopGroupBy);O&&p.LoopGroupBy.runSyntax(O,t)}}},59396(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Value=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("VALUE",(0,s.alt)(o.Constant,o.SimpleFieldChain,"IS INITIAL"))}}t.Value=i},59426(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeFormParameters=t.TypeFormParametersConf=void 0;const s=n(71759),o=n(84383),i=n(77465),r=n(99732),a=n(82245),c=n(86696);class l extends i.BasicRuleConfig{}t.TypeFormParametersConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"type_form_parameters",title:"Type FORM parameters",shortDescription:"Checks for untyped FORM parameters",tags:[c.RuleTag.SingleFile],badExample:"FORM foo USING bar.\nENDFORM.",goodExample:"FORM foo USING bar TYPE string.\nENDFORM."}}getDescription(e){return'Add TYPE for FORM parameter "'+e+'"'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],i=e.getStructure();if(t instanceof o.Class||void 0===i)return n;for(const t of i.findAllExpressions(a.FormParam))if(void 0===t.findFirstExpression(a.FormParamType)){const o=t.getFirstToken(),i=s.Issue.atToken(e,o,this.getDescription(o.getStr()),this.getMetadata().key,this.conf.severity);n.push(i)}return n}}t.TypeFormParameters=d},59504(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyDatabase=void 0;const s=n(82245),o=n(53414),i=n(85913),r=n(93170),a=n(36453);t.ModifyDatabase=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Dynamic))o.Dynamic.runSyntax(n,t);const n=e.findFirstExpression(s.DatabaseTable);if(void 0!==n)if(5===e.getChildren().length){const e=t.scope.findVariable(n.concatTokens());e?t.scope.addReference(n.getFirstToken(),e,a.ReferenceType.DataWriteReference,t.filename):i.DatabaseTable.runSyntax(n,t)}else i.DatabaseTable.runSyntax(n,t);for(const n of e.findAllExpressions(s.Source))r.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))r.Source.runSyntax(n,t)}}},59559(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefImporting=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.regex)(/^!?(\/\w+\/)?\w+$/);return(0,s.seq)("IMPORTING",(0,s.plus)(o.MethodParamOptional),(0,s.optPrio)((0,s.seq)("PREFERRED PARAMETER",e)))}}t.MethodDefImporting=i},59853(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSource=void 0;const s=n(82245),o=n(93170);t.MessageSource=class{static runSyntax(e,t){var n,i,r,a,c;for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);if("ID"===e.getFirstToken().getStr().toUpperCase()){const o=null===(n=e.findExpressionAfterToken("ID"))||void 0===n?void 0:n.concatTokens();let a=null===(i=e.findDirectExpression(s.MessageNumber))||void 0===i?void 0:i.concatTokens();if(void 0===a){const t=null===(r=e.findExpressionAfterToken("NUMBER"))||void 0===r?void 0:r.concatTokens();(null==t?void 0:t.startsWith("'"))&&(a=t.substring(1,t.length-1).toUpperCase())}if((null==o?void 0:o.startsWith("'"))&&a){const n=o.substring(1,o.length-1).toUpperCase();t.scope.getMSAGReferences().addUsing(t.filename,e.getFirstToken(),n,a)}}else{const n=null===(a=e.findDirectExpression(s.MessageTypeAndNumber))||void 0===a?void 0:a.concatTokens(),o=null==n?void 0:n.substring(1),i=null===(c=e.findDirectExpression(s.MessageClass))||void 0===c?void 0:c.concatTokens().toUpperCase();o&&i&&t.scope.getMSAGReferences().addUsing(t.filename,e.getFirstToken(),i,o)}}}},59947(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UncaughtException=t.UncaughtExceptionConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(82245),c=n(94967),l=n(86696),d=n(75457),u=n(84383),p=n(5518),f=n(52424),g=n(36453),h=n(20941);class T extends i.BasicRuleConfig{constructor(){super(...arguments),this.reportDynamic=!1,this.reportNoCheck=!1}}t.UncaughtExceptionConf=T;class m extends o.ABAPRule{constructor(){super(...arguments),this.conf=new T,this.issues=[]}getMetadata(){return{key:"uncaught_exception",title:"Uncaught Exception",shortDescription:"Checks for uncaught static exception",extendedInformation:"Does not report any issues if the code contains syntax errors",tags:[l.RuleTag.Syntax]}}getConfig(){return this.conf}initialize(e){return super.initialize(e),this.findGlobalExceptions(),this}setConfig(e){this.conf=e}runParsed(e,t){if("INTF"===t.getType())return[];if(t instanceof u.Program&&!0===t.isInclude())return[];const n=e.getStructure();if(void 0===n)return[];if(this.findLocalExceptions(t),this.syntax=new f.SyntaxLogic(this.reg,t).run(),this.syntax.issues.length>0)return[];this.issues=[],this.sinked=void 0;for(const t of n.getChildren())this.traverse(t,e);return this.issues}traverse(e,t){var n,s,o,i,l;const u=e.get();if(!(u instanceof c.ClassDefinition||u instanceof c.Interface))if(e instanceof d.StructureNode)if(u instanceof c.Try){const o=this.sinked?this.sinked.slice():void 0;this.addFromTryStructure(e);for(const s of(null===(n=e.findDirectStructure(c.Body))||void 0===n?void 0:n.getChildren())||[])this.traverse(s,t);this.sinked=o;for(const n of e.findDirectStructures(c.Catch))for(const e of n.getChildren())this.traverse(e,t);for(const n of(null===(s=e.findDirectStructure(c.Cleanup))||void 0===s?void 0:s.getChildren())||[])this.traverse(n,t)}else for(const n of e.getChildren())this.traverse(n,t);else if(e instanceof d.StatementNode)if(u instanceof r.MethodImplementation)this.setSinkedFromMethod(e,t);else if(u instanceof r.EndMethod)this.sinked=void 0;else if(u instanceof r.Form){this.sinked=[];const t=e.findDirectExpression(a.FormRaising);for(const e of(null==t?void 0:t.findAllExpressions(a.ClassName))||[])this.sinked.push(e.concatTokens().toUpperCase())}else if(u instanceof r.EndForm)this.sinked=void 0;else if(u instanceof r.Raise){let n;const s=e.concatTokens().toUpperCase();s.startsWith("RAISE EXCEPTION TYPE ")?n=null===(o=e.findFirstExpression(a.ClassName))||void 0===o?void 0:o.getFirstToken().getStr().toUpperCase():s.startsWith("RAISE EXCEPTION NEW ")&&(n=null===(l=null===(i=e.findFirstExpression(a.NewObject))||void 0===i?void 0:i.findFirstExpression(a.TypeNameOrInfer))||void 0===l?void 0:l.getFirstToken().getStr().toUpperCase()),this.check(n,e,t)}else u instanceof r.Perform||this.checkForMethodCalls(e,t)}check(e,t,n){if(!1===this.isSinked(e)){const o=s.Issue.atStatement(n,t,"Uncaught exception "+e,this.getMetadata().key,this.getConfig().severity);this.issues.push(o)}}checkForMethodCalls(e,t){const n=e.getFirstToken().getStart(),s=e.getLastToken().getEnd(),o=this.syntax.spaghetti.lookupPosition(n,t.getFilename());for(const i of(null==o?void 0:o.getData().references)||[])if(i.referenceType===g.ReferenceType.MethodReference&&i.position.getStart().isAfter(n)&&i.position.getEnd().isBefore(s)&&i.resolved instanceof h.MethodDefinition)for(const n of i.resolved.getRaising())this.check(n,e,t)}addFromTryStructure(e){if(void 0!==this.sinked)for(const t of e.findDirectStructures(c.Catch)){const e=t.findDirectStatement(r.Catch);if(void 0!==e)for(const t of e.findDirectExpressions(a.ClassName))this.sinked.push(t.concatTokens())}}setSinkedFromMethod(e,t){this.sinked=[];const n=this.syntax.spaghetti.lookupPosition(e.getLastToken().getEnd(),t.getFilename());let s;for(const e of(null==n?void 0:n.getData().references)||[])if(e.referenceType===g.ReferenceType.MethodImplementationReference&&e.resolved instanceof h.MethodDefinition){s=e.resolved;break}void 0!==s&&s.getRaising().forEach((e=>{var t;return null===(t=this.sinked)||void 0===t?void 0:t.push(e)}))}isSinked(e){if(void 0===this.sinked||void 0===e)return!0;const t=this.globalExceptions[e.toUpperCase()];if("CX_DYNAMIC_CHECK"===t&&!0!==this.getConfig().reportDynamic)return!0;if("CX_NO_CHECK"===t&&!0!==this.getConfig().reportNoCheck)return!0;const n=this.localExceptions[e.toUpperCase()];return"CX_DYNAMIC_CHECK"===n&&!0!==this.getConfig().reportDynamic||"CX_NO_CHECK"===n&&!0!==this.getConfig().reportNoCheck||this.sinked.some((t=>t.toUpperCase()===e.toUpperCase()))||void 0!==t&&!0===this.isSinked(t)||void 0!==n&&!0===this.isSinked(n)}findGlobalExceptions(){var e,t;this.globalExceptions={};const n=new p.DDIC(this.reg);for(const s of this.reg.getObjects()){if(!(s instanceof u.Class))continue;const o=null===(e=s.getMainABAPFile())||void 0===e?void 0:e.getInfo().getClassDefinitionByName(s.getName());void 0!==o&&!1!==n.isException(o,s)&&(this.globalExceptions[s.getName().toUpperCase()]=null===(t=o.superClassName)||void 0===t?void 0:t.toUpperCase())}}findLocalExceptions(e){var t;this.localExceptions={};for(const n of e.getABAPFiles())for(const e of n.getInfo().listClassDefinitions())!0===e.isLocal&&void 0!==e.superClassName&&(this.localExceptions[e.name.toUpperCase()]=null===(t=e.superClassName)||void 0===t?void 0:t.toUpperCase())}}t.UncaughtException=m},60230(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Retry=void 0;const s=n(3125),o=n(49028);t.Retry=class{getMatcher(){return(0,s.ver)(o.Version.v702,"RETRY")}}},60241(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UseClassBasedExceptions=t.UseClassBasedExceptionsConf=void 0;const s=n(77465),o=n(99732),i=n(86696),r=n(50612),a=n(82245),c=n(71759);class l extends s.BasicRuleConfig{}t.UseClassBasedExceptionsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"use_class_based_exceptions",title:"Use class based exceptions",shortDescription:"Use class based exceptions, checks interface and class definitions",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-class-based-exceptions",tags:[i.RuleTag.Styleguide,i.RuleTag.SingleFile],badExample:"INTERFACE lif.\n  METHODS load_data\n    EXCEPTIONS\n      invalid_parameter.\nENDINTERFACE.",goodExample:"INTERFACE lif.\n  METHODS load_data\n    RAISING\n      cx_something.\nENDINTERFACE."}}getMessage(){return"Use class based exceptions"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];for(const s of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllStatements(r.MethodDef))||[]){const t=s.findDirectExpression(a.MethodDefExceptions);t&&n.push(c.Issue.atToken(e,t.getFirstToken(),this.getMessage(),this.getMetadata().key))}return n}}t.UseClassBasedExceptions=d},60313(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PackedType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t,n){if(super(n),e<=0)throw new Error("Bad LENGTH, Packed");if(t<0)throw new Error("Bad DECIMALS, Packed");this.length=e,this.decimals=t}getLength(){return this.length}getDecimals(){return this.decimals}toText(){return"```p LENGTH "+this.getLength()+" DECIMALS "+this.getDecimals()+"```"}toABAP(){return"p LENGTH "+this.getLength()+" DECIMALS "+this.getDecimals()}isGeneric(){return!1}containsVoid(){return!1}toCDS(){return"abap.TODO_PACKED"}}t.PackedType=o},60461(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoPublicAttributes=t.NoPublicAttributesConf=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(67240),a=n(22755),c=n(5518),l=n(86696);class d extends o.BasicRuleConfig{constructor(){super(...arguments),this.allowReadOnly=!1,this.ignoreTestClasses=!1}}t.NoPublicAttributesConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"no_public_attributes",title:"No public attributes",shortDescription:"Checks that classes and interfaces don't contain any public attributes.\nExceptions are excluded from this rule.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#members-private-by-default-protected-only-if-needed",tags:[l.RuleTag.Styleguide,l.RuleTag.SingleFile]}}getDescription(e){return'Public attributes are not allowed, attribute "'+e+'"'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){this.file=e;const n=this.getAllPublicAttributes(t);return this.findAllIssues(n)}getAllPublicAttributes(e){let t=[];return t=t.concat(this.getAllPublicClassAttributes(e)),t=t.concat(this.getAllPublicInterfaceAttributes()),t}getAllPublicClassAttributes(e){let t=[];const n=new c.DDIC(this.reg);for(const s of this.file.getInfo().listClassDefinitions())n.isException(s,e)||(t=t.concat(s.attributes.filter((e=>e.visibility===r.Visibility.Public))));return t}getAllPublicInterfaceAttributes(){let e=[];for(const t of this.file.getInfo().listInterfaceDefinitions())e=e.concat(t.attributes.filter((e=>e.visibility===r.Visibility.Public)));return e}findAllIssues(e){const t=[];for(const n of e){if(!0===this.conf.allowReadOnly&&n.readOnly)continue;if(n.level===a.AttributeLevel.Constant)continue;if(!0===this.conf.ignoreTestClasses&&this.file.getFilename().includes(".testclasses."))continue;const e=s.Issue.atIdentifier(n.identifier,this.getDescription(n.name),this.getMetadata().key,this.conf.severity);t.push(e)}return t}}t.NoPublicAttributes=u},60543(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InStatementIndentation=t.InStatementIndentationConf=void 0;const s=n(71759),o=n(99732),i=n(84383),r=n(77465),a=n(50612),c=n(86696),l=n(5518),d=n(52024),u=n(71249),p=n(86789);class f extends r.BasicRuleConfig{constructor(){super(...arguments),this.blockStatements=2,this.ignoreExceptions=!0}}t.InStatementIndentationConf=f;class g extends o.ABAPRule{constructor(){super(...arguments),this.conf=new f}getMetadata(){return{key:"in_statement_indentation",title:"In-statement indentation",shortDescription:"Checks alignment within statements which span multiple lines.",extendedInformation:"Lines following the first line should be indented once (2 spaces).\n\nFor block declaration statements, lines after the first should be indented an additional time (default: +2 spaces)\nto distinguish them better from code within the block.",badExample:"IF 1 = 1\n  AND 2 = 2.\n  WRITE 'hello' &&\n  'world'.\nENDIF.",goodExample:"IF 1 = 1\n    AND 2 = 2.\n  WRITE 'hello' &&\n    'world'.\nENDIF.",tags:[c.RuleTag.Whitespace,c.RuleTag.Quickfix,c.RuleTag.SingleFile]}}getMessage(){return"Fix in-statement indentation"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],o=new l.DDIC(this.reg);if(t instanceof i.Class){const e=t.getClassDefinition();if(void 0===e)return[];if(this.conf.ignoreExceptions&&o.isException(e,t))return[]}for(const t of e.getStatements()){if(t.get()instanceof d.Comment||t.get()instanceof d.Unknown||t.get()instanceof d.NativeSQL)continue;const o=t.getTokens();if(0===o.length)continue;const i=o[0].getRow();let r=o[0].getCol()+2;const c=t.get();(c instanceof a.If||c instanceof a.While||c instanceof a.Module||c instanceof a.SelectLoop||c instanceof a.FunctionModule||c instanceof a.Do||c instanceof a.At||c instanceof a.Catch||c instanceof a.Case||c instanceof a.When||c instanceof a.Cleanup||c instanceof a.Loop||c instanceof a.Form||c instanceof a.Else||c instanceof a.ElseIf||c instanceof a.MethodImplementation)&&(r+=this.conf.blockStatements);for(const t of o)if(t.getRow()!==i&&t.getCol()<r){const o=u.EditHelper.replaceRange(e,new p.Position(t.getRow(),1),t.getStart()," ".repeat(r-1)),i=s.Issue.atToken(e,t,this.getMessage(),this.getMetadata().key,this.conf.severity,o);n.push(i);break}}return n}}t.InStatementIndentation=g},60596(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCall=void 0;const s=n(82245),o=n(93170);t.EditorCall=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleSource3))o.Source.runSyntax(n,t)}}},60623(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ViewCluster=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"VCLS"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ViewCluster=o},60635(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cond=void 0;const s=n(82245),o=n(48344);class i{static runSyntax(e,t){for(const n of e.findDirectExpressions(s.CondSub)){const e=n.findDirectExpression(s.Cond);e&&i.runSyntax(e,t)}for(const n of e.findDirectExpressions(s.Compare))o.Compare.runSyntax(n,t)}}t.Cond=i},60653(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FindType=void 0;const s=n(49028),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.opt)((0,o.alt)("REGEX","SUBSTRING",(0,o.ver)(s.Version.v755,"PCRE",s.Version.OpenABAP)))}}t.FindType=i},60712(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterException=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.altPrio)("OTHERS",o.ParameterName);return(0,s.seq)(e,"=",(0,s.altPrio)(o.Integer,o.SimpleFieldChain),(0,s.optPrio)((0,s.seq)("MESSAGE",o.Target)))}}t.ParameterException=i},60713(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldAssignment=void 0;const s=n(3125),o=n(37232),i=n(83568);class r extends s.Expression{getRunnable(){return(0,s.seq)(o.FieldSub,"=",i.Source)}}t.FieldAssignment=r},60741(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSCondition=void 0;const s=n(18483),o=n(3125),i=n(14306);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.starPrio)((0,o.seq)(".",(0,o.altPrio)(s.CDSString,s.CDSName)))),t=(0,o.altPrio)(s.CDSString,s.CDSFunction,s.CDSAggregate,e),n=(0,o.altPrio)("=",(0,o.seq)("!","="),(0,o.seq)("<",">"),(0,o.seq)(">","="),(0,o.seq)("<","="),"<",">","LIKE","NOT LIKE"),a=(0,o.seq)(n,(0,o.altPrio)(t,i.CDSInteger)),c=(0,o.seq)("IS",(0,o.optPrio)("NOT"),(0,o.altPrio)("INITIAL","NULL")),l=(0,o.seq)("BETWEEN",t,"AND",t),d=(0,o.seq)((0,o.optPrio)("NOT"),t,(0,o.altPrio)(a,c,l)),u=(0,o.seq)("(",r,")");return(0,o.seq)((0,o.altPrio)(d,u),(0,o.starPrio)((0,o.seq)((0,o.altPrio)("AND","OR"),(0,o.altPrio)(d,u))))}}t.CDSCondition=r},60758(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UseNew=t.UseNewConf=void 0;const s=n(71759),o=n(50612),i=n(82245),r=n(99732),a=n(77465),c=n(82245),l=n(49028),d=n(86696),u=n(71249);class p extends a.BasicRuleConfig{}t.UseNewConf=p;class f extends r.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"use_new",title:"Use NEW",shortDescription:"Checks for deprecated CREATE OBJECT statements.",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-new-to-create-object\n\nIf the target variable is referenced in the CREATE OBJECT statement, no errors are issued\n\nApplicable from v740sp02 and up",badExample:"CREATE OBJECT ref.",goodExample:"ref = NEW #( ).",tags:[d.RuleTag.Upport,d.RuleTag.Styleguide,d.RuleTag.Quickfix,d.RuleTag.SingleFile]}}getMessage(){return"Use NEW #( ) to instantiate object."}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n;const i=[];if("INTF"===t.getType())return[];if(this.reg.getConfig().getVersion()<l.Version.v740sp02&&this.reg.getConfig().getVersion()!==l.Version.Cloud)return[];for(const t of e.getStatements())if(t.get()instanceof o.CreateObject){if(t.findFirstExpression(c.Dynamic))continue;if(t.findDirectExpression(c.ParameterListExceptions))continue;if(t.findDirectTokenByText("AREA"))continue;const o=(null===(n=t.findDirectExpression(c.Target))||void 0===n?void 0:n.concatTokens())+"->";if(t.concatTokens().includes(o))continue;const r=this.buildFix(e,t),a=s.Issue.atPosition(e,t.getStart(),this.getMessage(),this.getMetadata().key,this.conf.severity,r);i.push(a)}return i}buildFix(e,t){var n,s;const o=null===(n=t.findDirectExpression(i.Target))||void 0===n?void 0:n.concatTokens();if(void 0===o)return;const r=t.findDirectExpression(i.ParameterListS),a=r?r.concatTokens()+" ":"";let c=null===(s=t.findDirectExpression(i.ClassName))||void 0===s?void 0:s.getFirstToken().getStr();void 0===c&&(c="#");const l=`${o} = NEW ${c}( ${a}).`;return u.EditHelper.replaceRange(e,t.getStart(),t.getEnd(),l)}}t.UseNew=f},60842(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Demand=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Demand=class{getMatcher(){const e=(0,s.seq)(o.Field,"=",o.Target),t=(0,s.seq)("MESSAGES INTO",o.Target),n=(0,s.seq)("DEMAND",(0,s.plus)(e),"FROM CONTEXT",o.Field,(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},60889(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageClass=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.regex)(/^>?[\w\/]+#?@?\/?!?&?>?\$?\??<??~?$/),(0,o.starPrio)((0,o.tok)(s.Plus)),(0,o.starPrio)((0,o.tok)(s.PlusW)),(0,o.starPrio)((0,o.seq)((0,o.tok)(s.Dash),(0,o.optPrio)((0,o.regex)(/^\w+$/)))),(0,o.optPrio)((0,o.tok)(s.DashW)))}}t.MessageClass=i},61071(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StructureParser=void 0;const s=n(52024),o=n(94967),i=n(71759),r=n(75457),a=n(86789),c=n(96493);class l{static run(e){const t=this.findStructureForFile(e.file.getFilename()),n=[];for(const t of e.statements){const e=t.get();e instanceof s.Comment||e instanceof s.Empty||e instanceof s.Unknown||n.push(t)}return this.runFile(t,e.file,n)}static findStructureForFile(e){return e.endsWith(".clas.abap")?new o.ClassGlobal:e.endsWith(".intf.abap")?new o.InterfaceGlobal:e.match(/\.screen\_\d+\.abap$/i)?new o.DynproLogic:new o.Any}static runFile(e,t,n){const s=new r.StructureNode(e);void 0===this.singletons[e.constructor.name]&&(this.singletons[e.constructor.name]=e.getMatcher());const o=this.singletons[e.constructor.name].run(n,s);if(o.error)return{issues:[i.Issue.atPosition(t,new a.Position(1,1),o.errorDescription,"structure",c.Severity.Error)],node:void 0};if(o.unmatched.length>0){const e=o.unmatched[0],n="Unexpected "+e.get().constructor.name.toUpperCase();return{issues:[i.Issue.atPosition(t,e.getStart(),n,"structure",c.Severity.Error)],node:void 0}}return{issues:[],node:s}}}t.StructureParser=l,l.singletons={}},61180(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WPlus=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" +"}}t.WPlus=o},61192(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Namespace=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"NSPC"}getAllowedNaming(){return{maxLength:10,allowNamespace:!0,customRegex:new RegExp(/^\/[A-Z_\d]{3,8}\/$/i)}}getDescription(){}}t.Namespace=o},61219(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConceptsOfPackage=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SOTS"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0,customRegex:new RegExp(/^(\/[A-Z_\d]{3,8}\/)?[A-Z_-\d<> ]+$/i)}}getDescription(){}}t.ConceptsOfPackage=o},61230(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetParameter=void 0;const s=n(82245),o=n(14365),i=n(20572),r=n(9646),a=n(93170);t.GetParameter=class{runSyntax(e,t){const n=e.findDirectExpression(s.Target),c=null==n?void 0:n.findDirectExpression(s.InlineData);c?o.InlineData.runSyntax(c,t,new i.CharacterType(40)):n&&r.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Source))a.Source.runSyntax(n,t)}}},61271(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadTable=void 0;const s=n(82245),o=n(20572),i=n(93170),r=n(14365),a=n(9646),c=n(25037),l=n(18617),d=n(3240),u=n(82054);t.ReadTable=class{runSyntax(e,t){const n=e.concatTokens().toUpperCase(),p=e.findDirectExpressionsMulti([s.Source,s.SimpleSource2]),f=p[0],g=f?i.Source.runSyntax(f,t):void 0;if(void 0===g){const n="No source type determined, read table";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}if(g instanceof o.UnknownType);else if(!(g instanceof o.TableType||g instanceof o.VoidType)){const n="Read table, not a table type";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}let h=g;h instanceof o.TableType&&(h=h.getRowType());const T=e.findDirectExpression(s.ComponentCompareSimple);void 0!==T&&l.ComponentCompareSimple.runSyntax(T,t,h);const m=e.findExpressionAfterToken("INDEX");if(m){const n=i.Source.runSyntax(m,t);if(!1===new d.TypeUtils(t.scope).isAssignable(n,o.IntegerType.get())){const s="READ TABLE, INDEX must be simple, got "+(null==n?void 0:n.constructor.name);return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),s))}if(g instanceof o.TableType&&g.getAccessType()===o.TableAccessType.hashed){const n="INDEX on hashed table not possible";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}const y=e.findExpressionAfterToken("FROM");if(y){const e=i.Source.runSyntax(y,t);if(!1===new d.TypeUtils(t.scope).isAssignable(e,h)){const e="READ TABLE, FROM must be compatible";return void t.issues.push((0,u.syntaxIssue)(t,y.getFirstToken(),e))}}const S=e.findExpressionAfterToken("KEY");for(const e of p){if(e===f||e===m||e===y)continue;const n=i.Source.runSyntax(e,t);if(e===S&&(n instanceof o.StringType||n instanceof o.TableType&&!1===n.isWithHeader()||n instanceof o.ObjectReferenceType)){const n="Key cannot be string or table or reference";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}const v=e.findDirectExpression(s.ReadTableTarget);if(v){n.includes(" REFERENCE INTO ")&&(h=new o.DataReference(h));const i=v.findFirstExpression(s.InlineData),l=v.findDirectExpression(s.FSTarget),p=v.findFirstExpression(s.Target);if(i)r.InlineData.runSyntax(i,t,h);else if(l)c.FSTarget.runSyntax(l,t,h);else if(p){const n=a.Target.runSyntax(p,t);if(!1===new d.TypeUtils(t.scope).isAssignable(h,n)){const n="Incompatible types";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}}if(void 0===v&&!1===n.includes(" TRANSPORTING NO FIELDS ")&&g instanceof o.TableType&&!1===g.isWithHeader()){const n="READ TABLE, define INTO or TRANSPORTING NO FIELDS";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}const E=e.findDirectExpression(s.TransportingFields);if(E&&!(h instanceof o.VoidType)&&!(h instanceof o.UnknownType)&&!(h instanceof o.AnyType)){if(!(h instanceof o.StructureType)){const n="READ TABLE, source not structured";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}for(const n of(null==E?void 0:E.findDirectExpressions(s.FieldSub))||[]){const s=n.concatTokens();if(!s.includes("-")&&void 0===h.getComponentByName(s)){const n="READ TABLE, field "+s+" not found in source";return void t.issues.push((0,u.syntaxIssue)(t,e.getFirstToken(),n))}}}}}},61298(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetParameter=void 0;const s=n(82245),o=n(93170);t.SetParameter=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},61338(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectCharacteristic=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CHAR"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ObjectCharacteristic=o},61379(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSString=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){const e=(0,s.seq)("abap",".",(0,s.regex)(/^char'\w'$/)),t=(0,s.regex)(/^'([A-Za-z-\u0370-\u03FF\u0400-\u04FF:\| -_]|'')*'$/);return(0,s.altPrio)(t,e)}}t.CDSString=o},61515(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompareSimple=void 0;const s=n(3125),o=n(82245),i=n(91785),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.altPrio)((0,s.ver)(r.Version.v740sp02,o.Source,r.Version.OpenABAP),o.SimpleSource4),t=(0,s.seq)((0,s.altPrio)(i.ComponentChainSimple,o.Dynamic),"=",e);return(0,s.plus)(t)}}t.ComponentCompareSimple=a},61785(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractToken=void 0;const s=n(86789);class o{constructor(e,t){this.start=e,this.str=t}[Symbol.for("debug.description")](){return`${this.constructor.name} ${this.str}`}getStr(){return this.str}getRow(){return this.start.getRow()}getCol(){return this.start.getCol()}getStart(){return this.start}getEnd(){return new s.Position(this.start.getRow(),this.start.getCol()+this.str.length)}}t.AbstractToken=o},61817(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Skip=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Skip=class{getMatcher(){const e=(0,s.seq)("SKIP",(0,s.opt)("TO LINE"),(0,s.opt)(o.Source));return(0,s.verNot)(i.Version.Cloud,e)}}},61929(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtLast=void 0;const s=n(50612),o=n(58720),i=n(79175);t.AtLast=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.AtLast),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndAt))}}},61941(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndWith=void 0;const s=n(3125),o=n(49028);t.EndWith=class{getMatcher(){return(0,s.ver)(o.Version.v751,"ENDWITH")}}},62341(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalVariableNames=t.LocalVariableNamesConf=void 0;const s=n(71759),o=n(99732),i=n(94967),r=n(50612),a=n(82245),c=n(50127),l=n(74650),d=n(86696);class u extends c.NamingRuleConfig{constructor(){super(...arguments),this.expectedData="^L._.+$",this.expectedConstant="^LC_.+$",this.expectedFS="^<L._.+>$"}}t.LocalVariableNamesConf=u;class p extends o.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"local_variable_names",title:"Local variable naming conventions",shortDescription:"\nAllows you to enforce a pattern, such as a prefix, for local variables, constants and field symbols.\nRegexes are case-insensitive.",tags:[d.RuleTag.Naming,d.RuleTag.SingleFile],badExample:"FORM bar.\n  DATA foo.\nENDFORM.",goodExample:"FORM bar.\n  DATA lv_foo.\nENDFORM."}}getDescription(e,t){return"required"===this.conf.patternKind?"Local variable name does not match pattern "+e+": "+t:"Local variable name must not match pattern "+e+": "+t}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];void 0===this.conf.patternKind&&(this.conf.patternKind="required");const n=e.getStructure();if(void 0===n)return[];for(const s of n.findAllStructures(i.Form))t.push(...this.checkLocals(s,e));for(const s of n.findAllStructures(i.Method))t.push(...this.checkLocals(s,e));for(const s of n.findAllStructures(i.FunctionModule))t.push(...this.checkLocals(s,e));return t}checkLocals(e,t){let n=[];for(const s of e.findAllStatements(r.Data)){const o=e.findParent(s);if(o&&o.get()instanceof i.Data)continue;const r=s.findFirstExpression(a.DefinitionName);if(r){const e=r.getFirstToken();n=n.concat(this.checkName(e,t,this.conf.expectedData))}}for(const s of e.findAllExpressions(a.InlineData)){const e=s.findFirstExpression(a.TargetField);if(e){const s=e.getFirstToken();n=n.concat(this.checkName(s,t,this.conf.expectedData))}}const s=e.findAllStructures(i.Data);for(const e of s){const s=e.findFirstStatement(r.DataBegin),o=null==s?void 0:s.findFirstExpression(a.DefinitionName);if(o){const e=o.getFirstToken();n=n.concat(this.checkName(e,t,this.conf.expectedData))}}for(const s of e.findAllStatements(r.FieldSymbol)){const e=s.findFirstExpression(a.FieldSymbol);if(e){const s=e.getFirstToken();n=n.concat(this.checkName(s,t,this.conf.expectedFS))}}for(const s of e.findAllExpressions(a.InlineFS)){const e=s.findFirstExpression(a.TargetFieldSymbol);if(e){const s=e.getFirstToken();n=n.concat(this.checkName(s,t,this.conf.expectedFS))}}const o=e.findAllStatements(r.Constant);for(const s of o){const o=e.findParent(s);if(o&&o.get()instanceof i.Constants)continue;const r=s.findFirstExpression(a.DefinitionName);if(r){const e=r.getFirstToken();n=n.concat(this.checkName(e,t,this.conf.expectedConstant))}}return n}checkName(e,t,n){const o=[],i=new RegExp(n,"i"),r=e.getStr();if(l.NameValidator.violatesRule(r,i,this.conf)){const i=this.getDescription(n,r),a=s.Issue.atToken(t,e,i,this.getMetadata().key,this.conf.severity);o.push(a)}return o}}t.LocalVariableNames=p},62577(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(99793),a=n(30740),c=n(18181);class l extends s.Expression{getRunnable(){const e=(0,s.altPrio)(o.SQLIntoTable,a.SQLIntoStructure,o.SQLIntoList),t=(0,s.seq)("WHERE",o.SQLCond),n=(0,s.ver)(i.Version.v751,(0,s.seq)("OFFSET",o.SQLSource)),l=(0,s.str)("BYPASSING BUFFER"),d=(0,s.ver)(i.Version.v750,o.SQLFields,i.Version.OpenABAP),u=(0,s.per)(o.SQLFrom,e,o.SQLForAllEntries,t,o.SQLOrderBy,c.SQLUpTo,n,o.SQLClient,o.SQLHaving,l,r.SQLGroupBy,d,o.DatabaseConnection,o.SQLHints),p=(0,s.per)(o.SQLFrom,(0,s.altPrio)(a.SQLIntoStructure,o.SQLIntoList),t,o.SQLClient,l,r.SQLGroupBy,d,o.DatabaseConnection,o.SQLHints),f=(0,s.optPrio)(o.SQLFieldList),g=(0,s.seq)("SINGLE",(0,s.optPrio)("FOR UPDATE"),f,p),h=(0,s.seq)((0,s.optPrio)("DISTINCT"),f,u);return(0,s.seq)("SELECT",(0,s.altPrio)(g,h))}}t.Select=l},62582(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=void 0;const s=n(50612),o=n(58720);t.Chain=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Chain),(0,o.star)((0,o.alt)((0,o.sta)(s.Field),(0,o.sta)(s.Module))),(0,o.sta)(s.EndChain))}}},62699(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BRFPlusSystemApplication=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"FDT0"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BRFPlusSystemApplication=o},62889(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefExporting=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("EXPORTING",(0,s.plus)(o.MethodParam))}}t.MethodDefExporting=i},62899(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```simple```"}toABAP(){return"simple"}isGeneric(){return!0}containsVoid(){return!1}toCDS(){return"abap.TODO_SIMPLE"}}t.SimpleType=o},62998(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Try=void 0;const s=n(50612),o=n(58720),i=n(34168),r=n(79175),a=n(46951);t.Try=class{getMatcher(){const e=(0,o.seq)((0,o.opt)((0,o.sub)(r.Body)),(0,o.star)((0,o.sub)(i.Catch)),(0,o.opt)((0,o.sub)(a.Cleanup)));return(0,o.beginEnd)((0,o.sta)(s.Try),e,(0,o.sta)(s.EndTry))}}},63171(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const s=n(82245),o=n(20572),i=n(14365),r=n(9646),a=n(85190),c=n(28380),l=n(2403),d=n(25287),u=n(32451),p=n(30798),f=n(53414),g=n(36453),h=n(82054),T=n(49028),m=/^\w+$/;t.Select=class{static runSyntax(e,t,n=!1){var o;const i=e.getFirstToken();let f=e.findDirectExpression(s.SQLFrom);void 0===f&&(f=e.findFirstExpression(s.SQLFrom));const T=f?a.SQLFrom.runSyntax(f,t):[];if(void 0===f){const n="Missing FROM";return void t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n))}const m=this.findFields(e,t);if(0===m.length&&void 0===e.findDirectExpression(s.SQLFieldListLoop)&&void 0===e.findDirectExpression(s.SQLAggregation)){const n="SELECT: fields missing";return void t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n))}this.checkFields(m,T,t,e);const y=this.handleInto(e,t,m,T),S=e.findDirectExpression(s.SQLForAllEntries);S&&(t.scope.push(l.ScopeType.OpenSQL,"SELECT",i.getStart(),t.filename),c.SQLForAllEntries.runSyntax(S,t));for(const n of e.findAllExpressions(s.Target))r.Target.runSyntax(n,t);if(!1===n&&void 0===e.findDirectExpression(s.SQLIntoTable)&&void 0===e.findDirectExpression(s.SQLIntoList)&&void 0===e.findDirectExpression(s.SQLIntoStructure)){const n=null===(o=e.findFirstExpression(s.SQLAggregation))||void 0===o?void 0:o.concatTokens(),i=new RegExp(/^count\(\s*\*\s*\)$/,"i");if(void 0===n||!1===i.test(n)){const n=null==f?void 0:f.findDirectExpression(s.SQLFromSource);if(n){const s=t.scope.findVariable(n.concatTokens());if(!s){const s=`Target variable ${n.concatTokens()} not found in scope`;return void t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),s))}t.scope.addReference(n.getFirstToken(),s,g.ReferenceType.DataWriteReference,t.filename)}}}for(const n of e.findDirectExpressions(s.SQLSource))d.SQLSource.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SQLUpTo))for(const e of n.findDirectExpressions(s.SQLSource))d.SQLSource.runSyntax(e,t);for(const n of e.findDirectExpressions(s.SQLForAllEntries))for(const e of n.findDirectExpressions(s.SQLSource))d.SQLSource.runSyntax(e,t);for(const n of e.findAllExpressions(s.SQLCompare))u.SQLCompare.runSyntax(n,t,T);const v=e.findDirectExpression(s.SQLOrderBy);if(v){p.SQLOrderBy.runSyntax(v,t);const n=e.findDirectExpression(s.SQLCond);if(y&&n&&y.getFirstToken().getStart().isBefore(v.getFirstToken().getStart())&&n.getFirstToken().getStart().isBefore(v.getFirstToken().getStart())&&n.getFirstToken().getStart().isBefore(y.getFirstToken().getStart())){const e="ORDER BY must be before INTO, after WHERE";t.issues.push((0,h.syntaxIssue)(t,v.getFirstToken(),e))}}this.isStrictMode(e)&&this.strictModeChecks(e,t),t.scope.getType()===l.ScopeType.OpenSQL&&t.scope.pop(e.getLastToken().getEnd())}static isStrictMode(e){const t=e.findDirectExpressionsMulti([s.SQLIntoList,s.SQLIntoStructure,s.SQLIntoTable])[0],n=e.findDirectExpression(s.SQLCond);if(t&&n&&t.getFirstToken().getStart().isAfter(n.getFirstToken().getStart()))return!0;if(e.findFirstExpression(s.SQLFields))return!0;for(const t of e.findAllExpressions(s.SQLSource))if("@"===t.getFirstToken().getStr())return!0;const o=e.findFirstExpression(s.SQLFieldList);return!(!o||!o.findDirectTokenByText(","))}static strictModeChecks(e,t){const n=e.findAllExpressions(s.SQLSource);for(const o of n){const n=o.getFirstChild();if((null==n?void 0:n.get())instanceof s.SQLAliasField)continue;if("@"===(null==n?void 0:n.getFirstToken().getStr()))continue;if((null==n?void 0:n.getChildren()[0].get())instanceof s.Constant)continue;const i=`SELECT: "${o.concatTokens()}" must be escaped with @ in strict mode`;t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),i))}}static handleInto(e,t,n,r){const a=e.findDirectExpression(s.SQLIntoTable);if(a){const e=a.findFirstExpression(s.InlineData);return e&&i.InlineData.runSyntax(e,t,this.buildTableType(n,r,t.scope)),a}const c=e.findDirectExpression(s.SQLIntoStructure);if(c){const e=c.findAllExpressions(s.InlineData);if(1===e.length)i.InlineData.runSyntax(e[0],t,this.buildStructureType(n,r,t.scope));else for(const n of e)i.InlineData.runSyntax(n,t,o.VoidType.get("SELECT_todo1"));return c}const l=e.findDirectExpression(s.SQLIntoList);if(l){const a=1===n.length&&void 0!==n[0].expression.findDirectExpression(s.Dynamic),c=l.findDirectExpressions(s.SQLTarget);if(c.length!==n.length&&!0!==a){const n="number of fields selected vs list does not match";return void t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n))}for(let l=0;l<c.length;l++){const d=c[l],u=n[l],p=d.findFirstExpression(s.InlineData);if(p){if(a){const n="dynamic field list, inlining not possible";return void t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n))}let n=o.VoidType.get("SELECT_todo2");if(m.test(u.code))for(const e of r){if(void 0===e)continue;const s=e.parseType(t.scope.getRegistry());if(s instanceof o.StructureType){const e=s.getComponentByName(u.code);if(e){n=e;break}}}i.InlineData.runSyntax(p,t,n)}}return l}}static checkFields(e,t,n,s){if(t.length>1)return;const i=t[0];if(void 0===i)return;const r=i.parseType(n.scope.getRegistry());if(!(r instanceof o.VoidType||r instanceof o.UnknownType))if(r instanceof o.StructureType){for(const t of e)if("*"!==t.code&&m.test(t.code)&&void 0===r.getComponentByName(t.code)){const e=`checkFields, field ${t.code} not found`;return void n.issues.push((0,h.syntaxIssue)(n,s.getFirstToken(),e))}}else{const e="checkFields, expected structure, "+r.constructor.name;n.issues.push((0,h.syntaxIssue)(n,s.getFirstToken(),e))}}static buildStructureType(e,t,n){var s,i,r;if(1===e.length&&1===t.length){const a=null===(s=t[0])||void 0===s?void 0:s.parseType(n.getRegistry());if(void 0===a){const e=(null===(i=t[0])||void 0===i?void 0:i.getName())||"buildStructureTypeError";return!0===n.getRegistry().inErrorNamespace(e)?new o.UnknownType("Select, "+e+" not found"):o.VoidType.get(null===(r=t[0])||void 0===r?void 0:r.getName())}if("*"===e[0].code)return a;if(a instanceof o.StructureType){return a.getComponentByName(e[0].code)||("COUNT(*)"===e[0].code?n.getVersion()>=T.Version.v750||n.getVersion()===T.Version.OpenABAP||n.getVersion()===T.Version.Cloud?new o.Integer8Type:o.IntegerType.get():o.VoidType.get("SELECT_todo11"))}return o.VoidType.get("SELECT_todo10")}return o.VoidType.get("SELECT_todo9")}static buildTableType(e,t,n){if(1!==t.length)return o.VoidType.get("SELECT_todo3");if(void 0===t[0])return o.VoidType.get("SELECT_todo4");const s=t[0].parseType(n.getRegistry());if(!(s instanceof o.StructureType))return o.VoidType.get("SELECT_todo5");if(1===e.length&&"*"===e[0].code)return new o.TableType(s,{withHeader:!1,keyType:o.TableKeyType.default},void 0);if(!0===e.every((e=>m.test(e.code)))){const t=[];for(const n of e){const e=s.getComponentByName(n.code);if(void 0===e)return o.VoidType.get("SELECT_todo6");t.push({name:n.code,type:e})}return new o.TableType(new o.StructureType(t),{withHeader:!1,keyType:o.TableKeyType.default},void 0)}return o.VoidType.get("SELECT_todo7")}static findFields(e,t){var n,o;let i;const r=[];i=e.get()instanceof s.SelectLoop?e.findFirstExpression(s.SQLFieldListLoop):e.findFirstExpression(s.SQLFieldList),(null===(n=null==i?void 0:i.getFirstChild())||void 0===n?void 0:n.get())instanceof s.Dynamic&&f.Dynamic.runSyntax(i.getFirstChild(),t);for(const e of(null==i?void 0:i.findDirectExpressionsMulti([s.SQLField,s.SQLFieldName]))||[]){let t=e.concatTokens().toUpperCase();const n=(null===(o=e.findDirectExpression(s.SQLAsName))||void 0===o?void 0:o.concatTokens())||"";""!==n&&(t=t.replace(" AS "+n,"")),r.push({code:t,as:n,expression:e})}return 0===r.length&&i&&r.push({code:i.concatTokens(),as:"",expression:i}),r}}},63284(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSymbol=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.regex)(/^<[\w\/%$\*]+$/),(0,s.tok)(o.Dash),(0,s.regex)(/^[\w\/%$\*]+>$/));return(0,s.altPrio)((0,s.regex)(/^<[\w\/%$\*\?]+>$/),e)}}t.FieldSymbol=i},63436(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Append=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(20572),a=n(25037),c=n(14365),l=n(3240),d=n(82054);t.Append=class{runSyntax(e,t){let n;const u=e.findDirectExpression(s.Target);u&&(n=i.Target.runSyntax(u,t));const p=e.findExpressionAfterToken("ASSIGNING");if(p&&p.get()instanceof s.FSTarget){if(!(n instanceof r.TableType||n instanceof r.VoidType||n instanceof r.UnknownType)){const s="APPEND to non table type, "+(null==n?void 0:n.constructor.name);return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}const s=n instanceof r.TableType?n.getRowType():n;a.FSTarget.runSyntax(p,t,s)}const f=e.findExpressionAfterToken("INTO");if(f&&e.concatTokens().toUpperCase().includes(" REFERENCE INTO DATA(")){if(!(n instanceof r.TableType||n instanceof r.VoidType||n instanceof r.UnknownType)){const s="APPEND to non table type, "+(null==n?void 0:n.constructor.name);return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}const s=n instanceof r.TableType?n.getRowType():n;c.InlineData.runSyntax(f,t,new r.DataReference(s))}let g=e.findDirectExpression(s.SimpleSource4);if(void 0===g&&(g=e.findDirectExpression(s.Source)),g){if(!(void 0===n||n instanceof r.TableType||n instanceof r.UnknownType||f===u||n instanceof r.VoidType)){const s=`Append, target not a table type (${n.constructor.name})`;return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),s))}let s;n instanceof r.TableType?s=n.getRowType():n instanceof r.VoidType&&(s=n);let i=o.Source.runSyntax(g,t,s);if(e.findDirectTokenByText("LINES")){if(i instanceof r.TableType)i=i.getRowType();else if(!(i instanceof r.VoidType||i instanceof r.UnknownType)){const n="LINES OF must be a table type";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}if(n instanceof r.TableType&&(n=n.getRowType()),!1===new l.TypeUtils(t.scope).isAssignable(i,n)){const n="Incompatible types";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}else if(!1===new l.TypeUtils(t.scope).isAssignable(i,s)){const n="Incompatible types";return void t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n))}}const h=e.findExpressionAfterToken("FROM");h&&h.get()instanceof s.Source&&o.Source.runSyntax(h,t);const T=e.findExpressionAfterToken("TO");T&&T.get()instanceof s.Source&&o.Source.runSyntax(T,t)}}},63483(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassFriends=void 0;const s=n(3125),o=n(47583);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.optPrio)("GLOBAL"),"FRIENDS",(0,s.plus)(o.ClassName))}}t.ClassFriends=i},63488(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RulesRunner=void 0;const s=n(52424),o=n(93791),i=n(12620),r=n(31528),a=n(18376);class c{constructor(){this.results=[]}push(e,t){t<100||this.results.push({runtime:t,name:e.getType()+" "+e.getName()})}output(){this.results.sort(((e,t)=>t.runtime-e.runtime));for(let e=0;e<10;e++){const t=this.results[e];if(void 0===t)break;process.stderr.write(`\t${t.runtime}ms\t${t.name}\n`)}}}t.RulesRunner=class{constructor(e){this.reg=e,this.syntaxPerformance=new c}objectsToCheck(e){const t=[],n=new r.SkipLogic(this.reg);for(const s of e)n.skip(s)||this.reg.isDependency(s)||t.push(s);return t}runRules(e,t){var n,o,r,a,c,l;const d={},u=[],p=this.reg.getConfig().getEnabledRules(),f=this.objectsToCheck(e);null===(n=null==t?void 0:t.progress)||void 0===n||n.set(f.length,"Run Syntax");for(const e of f)if(null===(o=null==t?void 0:t.progress)||void 0===o||o.tick("Run Syntax - "+e.getName()),e instanceof i.ABAPObject){const n=Date.now();new s.SyntaxLogic(this.reg,e).run(),!0===(null==t?void 0:t.outputPerformance)&&this.syntaxPerformance.push(e,Date.now()-n)}!0===(null==t?void 0:t.outputPerformance)&&(process.stderr.write("Syntax Performance:\n"),this.syntaxPerformance.output()),null===(r=null==t?void 0:t.progress)||void 0===r||r.set(p.length,"Initialize Rules");for(const e of p){const n=Date.now();if(!0===(null==t?void 0:t.outputPerformance)?process.stderr.write("Initializing rule "+e.getMetadata().key):null===(a=null==t?void 0:t.progress)||void 0===a||a.tick("Initialize Rules - "+e.getMetadata().key),void 0===e.initialize)throw new Error(e.getMetadata().key+" missing initialize method");e.initialize(this.reg),!0===(null==t?void 0:t.outputPerformance)&&process.stderr.write(", "+(Date.now()-n)+"ms\n"),d[e.getMetadata().key]=0}null===(c=null==t?void 0:t.progress)||void 0===c||c.set(f.length,"Finding Issues");for(const e of f){null===(l=null==t?void 0:t.progress)||void 0===l||l.tick("Finding Issues - "+e.getType()+" "+e.getName());for(const t of p){const n=Date.now();u.push(...t.run(e));const s=Date.now()-n;d[t.getMetadata().key]=d[t.getMetadata().key]+s}}if(!0===(null==t?void 0:t.outputPerformance)){const e=[];for(const t in d)d[t]>100&&e.push({name:t,time:d[t]});e.sort(((e,t)=>t.time-e.time));for(const t of e)process.stderr.write("\t"+t.time+"ms\t"+t.name+"\n")}return this.excludeIssues(u)}excludeIssues(e){var t;const n=e,s=(this.reg.getConfig().getGlobal().noIssues||[]).map((e=>new RegExp(e,"i")));if(s.length>0)for(let e=n.length-1;e>=0;e--){const t=n[e].getFilename();a.ExcludeHelper.isExcluded(t,s)&&n.splice(e,1)}for(const e of o.ArtifactsRules.getRules()){const s=e.getMetadata().key,o=null!==(t=this.reg.getConfig().readByKey(s,"exclude"))&&void 0!==t?t:[];if(0===o.length)continue;const i=o.map((e=>new RegExp(e,"i")));for(let e=n.length-1;e>=0;e--){if(n[e].getKey()!==s)continue;const t=n[e].getFilename();a.ExcludeHelper.isExcluded(t,i)&&n.splice(e,1)}}return n}}},63547(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MacroName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){const e=/^(\/\w+\/)?[\w\*%\?$&]+>?$/;return(0,s.seq)((0,s.regex)(e),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.regex)(e))))}}t.MacroName=i},63585(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Infotypes=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Infotypes=class{getMatcher(){const e=(0,s.seq)("OCCURS",o.Constant),t=(0,s.seq)("NAME",o.FieldSub),n=(0,s.seq)("VALID FROM",o.Source,"TO",o.Source),r=(0,s.seq)("INFOTYPES",(0,s.regex)(/^\d\d\d\d$/),(0,s.optPrio)(n),(0,s.optPrio)(t),(0,s.optPrio)(e),(0,s.optPrio)("MODE N"));return(0,s.verNot)(i.Version.Cloud,r)}}},63615(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;const s=n(82245),o=n(63171);t.Select=class{runSyntax(e,t){const n=e.findDirectExpressions(s.Select);for(let e=0;e<n.length;e++){const s=e===n.length-1,i=n[e];o.Select.runSyntax(i,t,!1===s)}}}},63674(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassData=void 0;const s=n(50612),o=n(58720);class i{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.ClassDataBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.ClassData),(0,o.sub)(i))),(0,o.sta)(s.ClassDataEnd))}}t.ClassData=i},63827(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTableIndex=t.InvalidTableIndexConf=void 0;const s=n(71759),o=n(82245),i=n(99732),r=n(77465),a=n(86696),c=n(71249),l=n(50612);class d extends r.BasicRuleConfig{}t.InvalidTableIndexConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"invalid_table_index",title:"Invalid Table Index",shortDescription:"Issues error for constant table index zero, as ABAP starts from 1",tags:[a.RuleTag.SingleFile,a.RuleTag.Quickfix],badExample:"DATA(first) = table[ 0 ].\nREAD TABLE gt_stack ASSIGNING <ls_stack> INDEX 0.",goodExample:"DATA(first) = table[ 1 ].\nREAD TABLE gt_stack ASSIGNING <ls_stack> INDEX 1."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n,i,r,a,d;const u=[],p=e.getStructure();if(void 0===p)return u;const f=p.findAllExpressionsRecursive(o.TableExpression);for(const r of f){const a=null===(i=null===(n=null===(t=r.findDirectExpression(o.Source))||void 0===t?void 0:t.findDirectExpression(o.Constant))||void 0===n?void 0:n.findFirstExpression(o.Integer))||void 0===i?void 0:i.getFirstToken();if(void 0!==a&&"0"===a.getStr()){const t="Table index starts from 1",n=c.EditHelper.replaceToken(e,a,"1"),o=s.Issue.atToken(e,a,t,this.getMetadata().key,this.conf.severity,n);u.push(o)}}for(const t of p.findAllStatements(l.ReadTable)){const n=null===(d=null===(a=null===(r=t.findExpressionAfterToken("INDEX"))||void 0===r?void 0:r.findDirectExpression(o.Constant))||void 0===a?void 0:a.findFirstExpression(o.Integer))||void 0===d?void 0:d.getFirstToken();if(void 0!==n&&"0"===n.getStr()){const t="Table index starts from 1",o=c.EditHelper.replaceToken(e,n,"1"),i=s.Issue.atToken(e,n,t,this.getMetadata().key,this.conf.severity,o);u.push(i)}}return u}}t.InvalidTableIndex=u},63923(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotation=void 0;const s=n(18483),o=n(3125),i=n(89757);class r extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.regex)(/^\w+$/),(0,o.star)((0,o.seq)("/",(0,o.regex)(/^\w+$/))));return(0,o.seq)((0,o.regex)(/^@\w+$/),(0,o.star)((0,o.seq)(".",e)),(0,o.opt)(":"),(0,o.opt)((0,o.alt)(i.CDSAnnotationArray,s.CDSAnnotationObject,s.CDSAnnotationSimple)))}}t.CDSAnnotation=r},64074(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceBody=void 0;const s=n(3125),o=n(82245),i=n(26763);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("INIT",(0,s.plus)(o.InlineFieldDefinition));return(0,s.seq)((0,s.opt)(o.Let),e,(0,s.plus)(o.For),i.ReduceNext)}}t.ReduceBody=r},64097(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPFormattingProvider=void 0;const s=n(55864);t.ABAPFormattingProvider=class{constructor(e){this.reg=e}provideDocumentFormattingEdits(e,t,n){const o=new s.LanguageServer(this.reg).documentFormatting({textDocument:{uri:e.uri.toString()}});return o&&1===o.length?[{range:{startLineNumber:o[0].range.start.line,startColumn:o[0].range.start.character,endLineNumber:o[0].range.end.line,endColumn:o[0].range.end.character},text:o[0].newText}]:void 0}}},64188(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallBody=void 0;const s=n(82245),o=n(19945),i=n(93170),r=n(25675);t.MethodCallBody=class{static runSyntax(e,t,n){const a=e.findDirectExpression(s.MethodParameters);a&&(new o.MethodParameters).runSyntax(a,t,n);const c=e.findDirectExpression(s.MethodCallParam);c&&r.MethodCallParam.runSyntax(c,t,n);for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t)}}},64316(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Submit=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(53414);t.Submit=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Dynamic))r.Dynamic.runSyntax(n,t)}}},64398(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cast=void 0;const s=n(3125),o=n(49028),i=n(82245),r=n(89301),a=n(15767);class c extends s.Expression{getRunnable(){const e=(0,s.altPrio)((0,s.tok)(r.WParenRightW),(0,s.tok)(r.WParenRight)),t=(0,s.seq)("CAST",i.TypeNameOrInfer,(0,s.tok)(r.ParenLeftW),(0,s.optPrio)(a.Let),i.Source,e);return(0,s.ver)(o.Version.v740sp02,t,o.Version.OpenABAP)}}t.Cast=c},64464(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndAt=void 0;const s=n(3125);t.EndAt=class{getMatcher(){return(0,s.str)("ENDAT")}}},64502(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LineBreakMultipleParameters=t.LineBreakMultipleParametersConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(82245),a=n(86696),c=n(71249),l=n(297);class d extends i.BasicRuleConfig{constructor(){super(...arguments),this.count=1}}t.LineBreakMultipleParametersConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"line_break_multiple_parameters",title:"Line break multiple parameters",shortDescription:"Line break multiple parameters",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#line-break-multiple-parameters",badExample:"method( parameter1 = value parameter2 = value ).",goodExample:"method( parameter1 = value\n        parameter2 = value ).",tags:[a.RuleTag.Whitespace,a.RuleTag.Styleguide,a.RuleTag.Quickfix,a.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if("INTF"===t.getType())return[];for(const t of e.getStatements())for(const o of t.findAllExpressions(r.ParameterListS)){if(t.getFirstToken().getStart()instanceof l.VirtualPosition)continue;const i=o.findDirectExpressions(r.ParameterS);if(i.length<=1)continue;let a=i[0];for(let t=1;t<i.length;t++){const o=i[t];if(this.conf.count&&t<this.conf.count){a=o;continue}const r=o.getFirstToken();if(a.getFirstToken().getRow()===r.getRow()){const t=c.EditHelper.insertAt(e,r.getStart(),"\n"+" ".repeat(i[0].getFirstToken().getStart().getCol()-1));n.push(s.Issue.atToken(e,o.getFirstToken(),this.getMetadata().title,this.getMetadata().key,this.conf.severity,t))}a=o}}return n}}t.LineBreakMultipleParameters=u},64548(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectNaming=t.ObjectNamingConf=void 0;const s=n(71759),o=n(50127),i=n(86696),r=n(74650);class a extends o.NamingRuleConfig{constructor(){super(...arguments),this.clas="^ZC(L|X)",this.intf="^ZIF",this.prog="^Z",this.fugr="^Z",this.tabl="^Z",this.ttyp="^Z",this.dtel="^Z",this.doma="^Z",this.msag="^Z",this.tran="^Z",this.enqu="^EZ",this.auth="^Z",this.pinf="^Z",this.idoc="^Z",this.xslt="^Z",this.ssfo="^Z",this.ssst="^Z",this.shlp="^Z",this.sxci="^Z",this.enhs="^Z",this.enho="^Z",this.cmod="^Z",this.form="^Z",this.sfpf="^Z",this.sfpi="^Z",this.aqqu="^Z",this.aqsg="^Z",this.aqbg="^Z",this.suso="^Z",this.sucu="^Z",this.wdya="^Z",this.wdyn="^Z"}}t.ObjectNamingConf=a,t.ObjectNaming=class{constructor(){this.conf=new a}getMetadata(){return{key:"object_naming",title:"Object naming conventions",shortDescription:"Allows you to enforce a pattern, such as a prefix, for object names",tags:[i.RuleTag.Naming]}}getDescription(e,t){return"required"===this.conf.patternKind?"Object name does not match pattern "+e+": "+t:"Object name must not match pattern "+e+": "+t}getConfig(){return"boolean"==typeof this.conf&&!0===this.conf?new a:this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){let t;void 0===this.conf.patternKind&&(this.conf.patternKind="required");const n=e.getType().toLowerCase(),o=this.getConfig()[n];if(void 0===o)return[];const i=new RegExp(o,"i");return r.NameValidator.violatesRule(e.getName(),i,this.conf)&&(t=this.getDescription(o,e.getName())),t?[s.Issue.atRow(e.getFiles()[0],1,t,this.getMetadata().key,this.conf.severity)]:[]}}},64586(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSSelect=void 0;const s=n(18483),o=n(3125),i=n(7167),r=n(33326);class a extends o.Expression{getRunnable(){const e=(0,o.seq)((0,o.star)((0,o.seq)(s.CDSElement,",")),s.CDSElement),t=(0,o.str)("DISTINCT"),n=(0,o.seq)(s.CDSElement,(0,o.starPrio)((0,o.seq)(",",s.CDSElement))),c=(0,o.seq)((0,o.str)("{"),(0,o.altPrio)("*",n),(0,o.str)("}"));return(0,o.seq)("SELECT",(0,o.optPrio)(t),(0,o.opt)((0,o.alt)("*",e)),"FROM",s.CDSSource,(0,o.star)(r.CDSJoin),(0,o.star)((0,o.alt)(s.CDSComposition,i.CDSAssociation)),(0,o.opt)(c),(0,o.optPrio)(s.CDSWhere),(0,o.optPrio)(s.CDSGroupBy),(0,o.optPrio)(s.CDSHaving),(0,o.optPrio)((0,o.seq)("UNION",(0,o.optPrio)("ALL"),a)))}}t.CDSSelect=a},64757(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProtectedSection=void 0;const s=n(50612),o=n(58720),i=n(21585);t.ProtectedSection=class{getMatcher(){return(0,o.seq)((0,o.sta)(s.Protected),(0,o.opt)((0,o.sub)(i.SectionContents)))}}},64782(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnum=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(20572),a=n(15838),c=n(36453),l=n(72757),d=n(2403),u=n(38788);t.TypeEnum=class{runSyntax(e,t){var n;let p=[];const f=[];if(!(e.get()instanceof i.TypeEnum))throw new u.AssertError("TypeEnum, unexpected type");const g=e.findDirectStatement(o.TypeEnumBegin);if(void 0===g)throw new u.AssertError("TypeEnum, unexpected type, begin");for(const n of e.findDirectStatements(o.Type)){const e=n.findFirstExpression(s.NamespaceSimpleName);if(void 0===e)continue;const o=e.getFirstToken();p.push(new a.TypedIdentifier(o,t.filename,r.IntegerType.get()))}for(const n of e.findDirectStatements(o.TypeEnum)){const e=n.findFirstExpression(s.NamespaceSimpleName);if(void 0===e)continue;const o=e.getFirstToken();p.push(new a.TypedIdentifier(o,t.filename,r.IntegerType.get()))}const h=null===(n=g.findExpressionAfterToken("TYPE"))||void 0===n?void 0:n.getFirstToken(),T=null==h?void 0:h.getStr();if(h&&T){const e=t.scope.findType(T);e&&t.scope.addReference(h,e,c.ReferenceType.TypeReference,t.filename)}const m=g.findFirstExpression(s.NamespaceSimpleName);if(m){let e=m.concatTokens();t.scope.getType()!==d.ScopeType.ClassDefinition&&t.scope.getType()!==d.ScopeType.Interface||(e=t.scope.getName()+"=>"+e);const n=new l.EnumType({qualifiedName:e}),s=new a.TypedIdentifier(m.getFirstToken(),t.filename,n,["enum"]);t.scope.addType(s),f.push(s)}const y=g.findExpressionAfterToken("STRUCTURE");if(y){const e=[];for(const t of p)e.push({name:t.getName(),type:t.getType()});p=[];const n=new a.TypedIdentifier(y.getFirstToken(),t.filename,new r.StructureType(e),["enum"]);p.push(n)}return{values:p,types:f}}}},64863(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BeginSingleInclude=t.BeginSingleIncludeConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(94967),c=n(86696);class l extends i.BasicRuleConfig{}t.BeginSingleIncludeConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"begin_single_include",title:"BEGIN contains single INCLUDE",shortDescription:"Finds TYPE BEGIN with just one INCLUDE TYPE, and DATA with single INCLUDE STRUCTURE",tags:[c.RuleTag.SingleFile],badExample:"TYPES: BEGIN OF dummy1.\n  INCLUDE TYPE dselc.\nTYPES: END OF dummy1.\n\nDATA BEGIN OF foo.\nINCLUDE STRUCTURE syst.\nDATA END OF foo.\n\nSTATICS BEGIN OF bar.\nINCLUDE STRUCTURE syst.\nSTATICS END OF bar.",goodExample:"DATA BEGIN OF foo.\n  DATA field TYPE i.\n  INCLUDE STRUCTURE dselc.\nDATA END OF foo."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllStructures(a.Types))if(3===o.getChildren().length&&o.findFirstStatement(r.IncludeType)){const n=o.getFirstToken(),i="TYPE BEGIN with single INCLUDE",r=s.Issue.atToken(e,n,i,this.getMetadata().key,this.conf.severity);t.push(r)}for(const o of n.findAllStructures(a.Data)){if(3!==o.getChildren().length)continue;const n=o.findFirstStatement(r.DataBegin);if(!(null==n?void 0:n.findDirectTokenByText("OCCURS"))&&o.findFirstStatement(r.IncludeType)){const n=o.getFirstToken(),i="DATA BEGIN with single INCLUDE",r=s.Issue.atToken(e,n,i,this.getMetadata().key,this.conf.severity);t.push(r)}}for(const o of n.findAllStructures(a.Statics))if(3===o.getChildren().length&&o.findFirstStatement(r.IncludeType)){const n=o.getFirstToken(),i="STATICS BEGIN with single INCLUDE",r=s.Issue.atToken(e,n,i,this.getMetadata().key,this.conf.severity);t.push(r)}return t}}t.BeginSingleInclude=d},65012(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertFieldGroup=void 0;const s=n(3125),o=n(49028),i=n(82245);t.InsertFieldGroup=class{getMatcher(){const e=(0,s.seq)("INTO",i.Target),t=(0,s.alt)((0,s.ver)(o.Version.v740sp02,(0,s.plus)(i.Source)),(0,s.plus)(i.SimpleSource1));return(0,s.seq)("INSERT",t,e)}}},65078(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCall=void 0;const s=n(3125),o=n(82245),i=n(49028);t.EditorCall=class{getMatcher(){const e=(0,s.seq)("TITLE",o.SimpleSource3),t=(0,s.per)("DISPLAY-MODE",e),n=(0,s.seq)("EDITOR-CALL FOR",(0,s.optPrio)("REPORT"),o.Source,(0,s.optPrio)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},65079(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineField=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){return(0,s.seq)(o.Field,(0,s.starPrio)((0,s.seq)((0,s.tok)(i.Dash),o.FieldAll)))}}t.InlineField=r},65139(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Divide=void 0;const s=n(3125),o=n(82245);t.Divide=class{getMatcher(){return(0,s.seq)("DIVIDE",o.Target,"BY",o.Source)}}},65213(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConvBody=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.optPrio)(o.Let),o.Source)}}t.ConvBody=i},65226(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetPFStatus=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetPFStatus=class{getMatcher(){const e=(0,s.seq)("OF PROGRAM",o.Source),t=(0,s.per)(e,"IMMEDIATELY",(0,s.seq)("EXCLUDING",o.Source)),n=(0,s.seq)("SET PF-STATUS",o.Source,(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},65339(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataDefinition=void 0;const s=n(75457),o=n(4391),i=n(80917),r=n(18483),a=n(80300);class c extends a.AbstractObject{constructor(){super(...arguments),this.parserError=void 0,this.parsedData=void 0}getType(){return"DDLS"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getSQLViewName(){var e;return this.parse(),null===(e=this.parsedData)||void 0===e?void 0:e.sqlViewName}getDefinitionName(){var e;return this.parse(),null===(e=this.parsedData)||void 0===e?void 0:e.definitionName}getDescription(){var e;return this.parse(),null===(e=this.parsedData)||void 0===e?void 0:e.description}parseType(e){return this.parse(),(new o.CDSDetermineTypes).parseType(e,this.parsedData,this.getName())}getParsedData(){return this.parsedData}listSources(){var e;return this.parse(),null===(e=this.parsedData)||void 0===e?void 0:e.sources}setDirty(){this.parsedData=void 0,this.parserError=void 0,super.setDirty()}findSourceFile(){return this.getFiles().find((e=>e.getFilename().endsWith(".asddls")||e.getFilename().endsWith(".acds")))}hasParserError(){return this.parserError}listKeys(){var e;this.parse();const t=[];for(const n of(null===(e=this.parsedData)||void 0===e?void 0:e.fields)||[])!0===n.key&&t.push(n.name);return t}parse(){var e,t;if(!1===this.isDirty())return{updated:!1,runtime:0};const n=Date.now();if(this.parsedData={sqlViewName:void 0,definitionName:void 0,description:this.findDescription(),fields:[],sources:[],relations:[],associations:[],tree:void 0},this.findSQLViewName(),this.parsedData.tree=(new i.CDSParser).parse(this.findSourceFile()),this.parsedData.tree){for(const n of(null===(e=this.parsedData.tree)||void 0===e?void 0:e.getChildren())||[])if(!(n.get()instanceof r.CDSAnnotation)&&n instanceof s.ExpressionNode){this.parsedData.definitionName=null===(t=n.findFirstExpression(r.CDSName))||void 0===t?void 0:t.concatTokens().replace(/ /g,"");break}this.findSourcesAndRelations(this.parsedData.tree),this.findFieldNames(this.parsedData.tree)}else this.parserError=!0;return this.dirty=!1,{updated:!0,runtime:Date.now()-n}}getTree(){var e;return null===(e=this.parsedData)||void 0===e?void 0:e.tree}findSQLViewName(){var e;const t=null===(e=this.findSourceFile())||void 0===e?void 0:e.getRaw().match(/@AbapCatalog\.sqlViewName: '([\w/]+)'/);t&&(this.parsedData.sqlViewName=t[1].toUpperCase())}findDescription(){var e;const t=null===(e=this.findSourceFile())||void 0===e?void 0:e.getRaw().match(/@EndUserText\.label: '([\w,.:-=#%&() ]+)'/);if(t)return t[1]}findFieldNames(e){var t,n,s;let o=e.findFirstExpression(r.CDSSelect);void 0===o&&(o=e.findFirstExpression(r.CDSAnnotate)),void 0===o&&(o=e.findFirstExpression(r.CDSDefineProjection));for(const e of(null==o?void 0:o.findDirectExpressions(r.CDSElement))||[]){let o="",i=null===(t=e.findDirectExpression(r.CDSAs))||void 0===t?void 0:t.findDirectExpression(r.CDSName);if(void 0===i){const t=null===(n=e.findDirectExpression(r.CDSPrefixedName))||void 0===n?void 0:n.findAllExpressions(r.CDSName);t&&(e.concatTokens().toUpperCase().includes(" REDIRECTED TO ")?i=t[0]:(i=t[t.length-1],t.length>1&&(o=t[0].concatTokens())))}if(void 0===i)continue;const a=null==i?void 0:i.concatTokens();if(null===(s=this.parsedData)||void 0===s?void 0:s.associations.some((e=>{var t;return e.name.toUpperCase()===a.toUpperCase()||(null===(t=e.as)||void 0===t?void 0:t.toUpperCase())===a.toUpperCase()})))continue;const c=[];for(const t of e.findDirectExpressions(r.CDSAnnotation))c.push(t.concatTokens());this.parsedData.fields.push({name:a,annotations:c,prefix:o,key:void 0!==e.findDirectTokenByText("KEY")})}}findSourcesAndRelations(e){var t,n,s,o,i,a,c;for(const o of e.findAllExpressions(r.CDSSource)){const e=(null===(t=o.getFirstChild())||void 0===t?void 0:t.concatTokens().toUpperCase().replace(/ /g,""))||"ERROR",i=null===(s=null===(n=o.findDirectExpression(r.CDSAs))||void 0===n?void 0:n.findDirectExpression(r.CDSName))||void 0===s?void 0:s.concatTokens().toUpperCase();this.parsedData.sources.push({name:e,as:i})}for(const t of e.findAllExpressions(r.CDSRelation)){const e=t.getFirstToken().getStr(),n=null===(i=null===(o=t.findDirectExpression(r.CDSAs))||void 0===o?void 0:o.findDirectExpression(r.CDSName))||void 0===i?void 0:i.getFirstToken().getStr();this.parsedData.relations.push({name:e,as:n})}for(const t of e.findAllExpressions(r.CDSAssociation)){const e=t.findDirectExpression(r.CDSRelation);if(void 0===e)continue;const n=e.getFirstToken().getStr(),s=null===(c=null===(a=e.findDirectExpression(r.CDSAs))||void 0===a?void 0:a.findDirectExpression(r.CDSName))||void 0===c?void 0:c.getFirstToken().getStr();this.parsedData.associations.push({name:n||"ERROR",as:s})}}}t.DataDefinition=c},65392(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemCall=void 0;const s=n(82245),o=n(93170);t.SystemCall=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},65439(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DDICReferences=void 0,t.DDICReferences=class{constructor(){this.nameTypeIndex={},this.filenameIndex={}}setUsing(e,t){this.clear(e);for(const n of t)this.addUsing(e,n)}addUsing(e,t){if(void 0===t)return;const n=e.getName().toUpperCase(),s=e.getType();void 0===this.nameTypeIndex[n]&&(this.nameTypeIndex[n]={}),void 0===this.nameTypeIndex[n][s]&&(this.nameTypeIndex[n][s]=[]),this.nameTypeIndex[n][s].push(t),t.filename&&t.token&&(void 0===this.filenameIndex[t.filename]&&(this.filenameIndex[t.filename]={}),void 0===this.filenameIndex[t.filename][t.token.getRow()]&&(this.filenameIndex[t.filename][t.token.getRow()]=[]),this.filenameIndex[t.filename][t.token.getRow()].push(t))}clear(e){var t,n;for(const n of this.listUsing(e))if(n.filename&&n.token){const e=null===(t=this.filenameIndex[n.filename])||void 0===t?void 0:t[n.token.getRow()];e&&e.pop()}const s=e.getName().toUpperCase(),o=e.getType();(null===(n=this.nameTypeIndex[s])||void 0===n?void 0:n[o])&&(this.nameTypeIndex[s][o]=[])}listByFilename(e,t){var n;return(null===(n=this.filenameIndex[e])||void 0===n?void 0:n[t])||[]}listUsing(e){var t;const n=e.getName().toUpperCase(),s=e.getType(),o=null===(t=this.nameTypeIndex[n])||void 0===t?void 0:t[s];return void 0!==o?o:[]}listWhereUsed(e){const t=[],n=e.getName().toUpperCase(),s=e.getType();for(const e in this.nameTypeIndex)for(const o in this.nameTypeIndex[e])for(const i of this.nameTypeIndex[e][o])i.object&&i.object.getType()===s&&i.object.getName()===n&&t.push({type:o,name:e,token:i.token,filename:i.filename});return t}}},65451(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ForbiddenPseudoAndPragma=t.ForbiddenPseudoAndPragmaConf=void 0;const s=n(50612),o=n(82245),i=n(71759),r=n(99732),a=n(77465),c=n(71249),l=n(86696),d=n(52024);class u extends a.BasicRuleConfig{constructor(){super(...arguments),this.pseudo=['"#EC *'],this.pragmas=[],this.ignoreGlobalClassDefinition=!1,this.ignoreGlobalInterface=!1}}t.ForbiddenPseudoAndPragmaConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"forbidden_pseudo_and_pragma",title:"Forbidden pseudo comments and pragma",shortDescription:"Checks for unwanted pseudo comments and pragma",tags:[l.RuleTag.Quickfix,l.RuleTag.SingleFile],badExample:'DATA i TYPE i. "#EC *',goodExample:"DATA i TYPE i."}}getConfig(){return!0===this.conf&&(this.conf=new u),void 0===this.conf.pseudo&&(this.conf.pseudo=[]),void 0===this.conf.pragmas&&(this.conf.pragmas=[]),this.conf}setConfig(e){this.conf=e}runParsed(e){let t=!1;const n=[];for(const r of this.conf.pragmas)for(const a of e.getStatements()){if(!0===this.conf.ignoreGlobalClassDefinition){if(a.get()instanceof s.ClassDefinition&&a.findFirstExpression(o.ClassGlobal)){t=!0;continue}if(!0===t&&a.get()instanceof s.EndClass){t=!1;continue}}if(!0===this.conf.ignoreGlobalInterface){if(a.get()instanceof s.Interface&&a.findFirstExpression(o.ClassGlobal)){t=!0;continue}if(!0===t&&a.get()instanceof s.EndInterface){t=!1;continue}}if(!0===t)continue;const l=a.getPragmas().find((e=>e.getStr().toUpperCase()===r.toUpperCase()));if(l){const t=c.EditHelper.deleteToken(e,l),s="Forbidden pragma";n.push(i.Issue.atToken(e,l,s,this.getMetadata().key,this.conf.severity,t))}}t=!1;for(const r of this.conf.pseudo)for(const a of e.getStatements()){if(!0===this.conf.ignoreGlobalClassDefinition){if(a.get()instanceof s.ClassDefinition&&a.findFirstExpression(o.ClassGlobal)){t=!0;continue}if(!0===t&&a.get()instanceof s.EndClass){t=!1;continue}}if(!0===this.conf.ignoreGlobalInterface){if(a.get()instanceof s.Interface&&a.findFirstExpression(o.ClassGlobal)){t=!0;continue}if(!0===t&&a.get()instanceof s.EndInterface){t=!1;continue}}if(!0!==t&&a.get()instanceof d.Comment&&a.concatTokens().toUpperCase().includes(r.toUpperCase())){const t=c.EditHelper.deleteStatement(e,a),s="Forbidden pseudo comment";n.push(i.Issue.atStatement(e,a,s,this.getMetadata().key,this.conf.severity,t))}}return n}}t.ForbiddenPseudoAndPragma=p},66068(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetParameter=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetParameter=class{getMatcher(){const e=(0,s.seq)("SET PARAMETER ID",o.Source,"FIELD",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},66157(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneCustomJSHelper=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN15"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneCustomJSHelper=o},66228(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentName=void 0;const s=n(20572),o=n(82054);t.ComponentName=class{static runSyntax(e,t,n){if(e instanceof s.VoidType)return e;const i=t.getFirstToken(),r=i.getStr();if(e instanceof s.StructureType){const t=e.getComponentByName(r);return void 0===t?(n.issues.push((0,o.syntaxIssue)(n,i,'Component "'+r+'" not found in structure')),s.VoidType.get(o.CheckSyntaxKey)):t}if(e instanceof s.TableType&&!0===e.isWithHeader()){const t=e.getRowType();if(t instanceof s.VoidType)return e;if("TABLE_LINE"===r.toUpperCase())return t;if(t instanceof s.StructureType){const e=t.getComponentByName(r);return void 0===e?(n.issues.push((0,o.syntaxIssue)(n,i,'Component "'+r+'" not found in structure')),s.VoidType.get(o.CheckSyntaxKey)):e}}return e instanceof s.UnknownType||n.issues.push((0,o.syntaxIssue)(n,i,'Not a structure, ComponentName, "'+r+'", ('+(null==e?void 0:e.constructor.name)+")")),s.VoidType.get(o.CheckSyntaxKey)}}},66478(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSParameters=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.opt)((0,o.seq)(".",s.CDSName))),t=(0,o.alt)(e,s.CDSString);return(0,o.seq)("[",(0,o.regex)(/\d+/),":",e,"=",t,(0,o.star)((0,o.seq)("AND",e,"=",t)),"]")}}t.CDSParameters=i},66651(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WParenRight=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" )"}}t.WParenRight=o},66677(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Transfer=class{getMatcher(){const e=(0,s.seq)("LENGTH",o.Source),t=(0,s.seq)("TRANSFER",o.Source,"TO",o.Source,(0,s.opt)(e),(0,s.opt)("NO END OF LINE"));return(0,s.verNot)(i.Version.Cloud,t)}}},66757(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Alias=void 0;const s=n(2088);class o extends s.Identifier{constructor(e,t,n,s){super(e,s),this.component=n,this.visibility=t}getComponent(){return this.component}getVisibility(){return this.visibility}}t.Alias=o},66825(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayODataGroupAndAssignment=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"G4BA"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.GatewayODataGroupAndAssignment=o},66912(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallDatabase=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallDatabase=class{getMatcher(){const e=(0,s.seq)("EXPORTING",o.ParameterListS),t=(0,s.seq)("IMPORTING",o.ParameterListT),n=(0,s.seq)((0,s.opt)(e),(0,s.opt)(t)),r=(0,s.seq)("PARAMETER-TABLE",o.Source),a=(0,s.seq)("CALL DATABASE PROCEDURE",o.Dynamic,(0,s.opt)(o.DatabaseConnection),(0,s.alt)(n,r));return(0,s.verNot)(i.Version.Cloud,a)}}},67011(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoopSource=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){return(0,s.alt)(o.SimpleSource2,(0,s.ver)(i.Version.v740sp02,o.Source,i.Version.OpenABAP))}}t.LoopSource=r},67240(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Visibility=void 0,function(e){e[e.Private=1]="Private",e[e.Protected=2]="Protected",e[e.Public=3]="Public"}(n||(t.Visibility=n={}))},67400(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.At=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"@"}}t.At=o},67401(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompareSingle=void 0;const s=n(3125),o=n(82245),i=n(91785);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.altPrio)(i.ComponentChainSimple,o.Dynamic),"=",o.Source)}}t.ComponentCompareSingle=r},67501(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLanguage=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetLanguage=class{getMatcher(){const e=(0,s.seq)("SET LANGUAGE",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},67595(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TablesDeclaredLocally=t.TablesDeclaredLocallyConf=void 0;const s=n(71759),o=n(50612),i=n(94967),r=n(99732),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.TablesDeclaredLocallyConf=l;class d extends r.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"tables_declared_locally",title:"Check for locally declared TABLES",shortDescription:"TABLES are always global, so declare them globally",extendedInformation:"https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-us/abaptables.htm",tags:[c.RuleTag.SingleFile],badExample:"FORM foo.\n  TABLES t100.\nENDFORM.",goodExample:"TABLES t000."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return t;const r=n.findAllStructuresMulti([i.Form,i.FunctionModule]);for(const n of r){const i=n.findFirstStatement(o.Tables);if(i){const n="Declare TABLES globaly",o=s.Issue.atStatement(e,i,n,this.getMetadata().key,this.conf.severity);t.push(o)}}return t}}t.TablesDeclaredLocally=d},67637(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetCountry=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetCountry=class{getMatcher(){const e=(0,s.seq)("SET COUNTRY",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},67658(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancementImplementation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ENHO"}setDirty(){this.parsedXML=void 0,super.setDirty()}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getClassName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.className}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}parse(){if(this.parsedXML)return{updated:!1,runtime:0};const e=Date.now();this.parsedXML={};const t=super.parseRaw2();return void 0===t||void 0===t.abapGit||void 0===t.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.className=t.abapGit["asx:abap"]["asx:values"].CLASS,this.parsedXML.description=t.abapGit["asx:abap"]["asx:values"].SHORTTEXT,{updated:!0,runtime:Date.now()-e})}}t.EnhancementImplementation=o},67718(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryFile=void 0;const s=n(88124);class o extends s.AbstractFile{constructor(e,t){super(e),this.raw=t}getRaw(){return this.raw}getRawRows(){return this.raw.split("\n")}}t.MemoryFile=o},67734(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DynproChecks=t.DynproChecksConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=n(84383),a=n(86789);class c extends i.BasicRuleConfig{}t.DynproChecksConf=c,t.DynproChecks=class{constructor(){this.conf=new c}getMetadata(){return{key:"dynpro_checks",title:"Dynpro Checks",shortDescription:"Various Dynpro checks",extendedInformation:"* Check length of PUSH elements less than 132",tags:[o.RuleTag.Syntax]}}initialize(e){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=[];if(!(e instanceof r.Program))return[];const n=e.getXMLFile();if(void 0===n)return[];for(const o of e.getDynpros())for(const e of o.fields)if("PUSH"===e.type&&e.length>132){const i=`Screen ${o.number}, field ${e.name} LENGTH longer than 132`;t.push(s.Issue.atPosition(n,new a.Position(1,1),i,this.getMetadata().key,this.getConfig().severity))}return t}}},67743(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Do=void 0;const s=n(3125),o=n(82245);t.Do=class{getMatcher(){const e=(0,s.seq)("RANGE",o.Source),t=(0,s.seq)("VARYING",o.Target,"FROM",o.Source,"NEXT",o.Source,(0,s.optPrio)(e)),n=(0,s.seq)(o.Source,"TIMES");return(0,s.seq)("DO",(0,s.optPrio)((0,s.per)((0,s.plus)(t),n)))}}},67807(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Import=void 0;const s=n(3125),o=n(89301),i=n(82245);t.Import=class{getMatcher(){const e=(0,s.seq)("TO",i.Target),t=(0,s.seq)("CLIENT",i.Source),n=(0,s.seq)("ID",i.Source),r=(0,s.seq)("USING",i.Source),a=(0,s.seq)(i.NamespaceSimpleName,(0,s.tok)(o.ParenLeft),(0,s.regex)(/^[\w$%\^]{2}$/),(0,s.tok)(o.ParenRightW)),c=(0,s.seq)("DATA BUFFER",i.Source),l=(0,s.seq)("MEMORY",(0,s.opt)((0,s.seq)("ID",i.Source))),d=(0,s.seq)("INTERNAL TABLE",i.Source),u=(0,s.seq)((0,s.alt)("SHARED MEMORY","SHARED BUFFER"),a,(0,s.per)(e,t,n)),p=(0,s.seq)("DATABASE",a,(0,s.per)(e,t,n,r)),f=(0,s.seq)("LOGFILE ID",i.Source),g=(0,s.alt)(c,l,p,d,u,f),h=(0,s.plus)((0,s.seq)(i.ComponentChainSimple,(0,s.alt)("TO","INTO"),i.Target)),T=(0,s.plus)((0,s.seq)((0,s.alt)(i.ComponentChainSimple,i.FieldSymbol),"=",i.Target)),m=(0,s.alt)(T,h,i.Dynamic,(0,s.plus)(i.Target)),y=(0,s.per)("ACCEPTING PADDING","IGNORING CONVERSION ERRORS","IN CHAR-TO-HEX MODE","IGNORING STRUCTURE BOUNDARIES","ACCEPTING TRUNCATION",(0,s.seq)("REPLACEMENT CHARACTER",i.Source),(0,s.seq)("CODE PAGE INTO",i.Source),(0,s.seq)("ENDIAN INTO",i.Source));return(0,s.seq)("IMPORT",m,"FROM",g,(0,s.opt)(y))}}},67814(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationJobCatalogEntry=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SAJC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ApplicationJobCatalogEntry=o},67886(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineFS=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(36453);t.InlineFS=class{static runSyntax(e,t,n){var a;const c=null===(a=e.findFirstExpression(s.TargetFieldSymbol))||void 0===a?void 0:a.getFirstToken();if(c&&n){const e=new o.TypedIdentifier(c,t.filename,n,["inline"]);t.scope.addIdentifier(e),t.scope.addReference(c,e,r.ReferenceType.DataWriteReference,t.filename)}else if(c){const e='InlineFS, could not determine type for "'+c.getStr()+'"',n=new o.TypedIdentifier(c,t.filename,new i.UnknownType(e),["inline"]);t.scope.addIdentifier(n),t.scope.addReference(c,n,r.ReferenceType.DataWriteReference,t.filename)}}}},68031(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertTextpool=void 0;const s=n(3125),o=n(82245),i=n(49028);t.InsertTextpool=class{getMatcher(){const e=(0,s.seq)("STATE",o.Source),t=(0,s.seq)("LANGUAGE",o.Source),n=(0,s.seq)("INSERT TEXTPOOL",o.Source,"FROM",o.Source,(0,s.opt)(t),(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,n)}}},68278(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldLength=void 0;const s=n(82245),o=n(36453),i=n(45769);t.FieldLength=class{static runSyntax(e,t){const n=e.findDirectExpression(s.SimpleFieldChain2);if(!n){const t=e.getChildren(),n=t[t.length-2];if("*"===n.getLastToken().getStr())return;return parseInt(n.getLastToken().getStr(),10)}i.FieldChain.runSyntax(n,t,o.ReferenceType.DataReadReference)}}},68361(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFieldList=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.ver)(i.Version.v740sp05,(0,s.starPrio)((0,s.seq)(",",o.SQLField)),i.Version.OpenABAP),t=(0,s.starPrio)(o.SQLField);return(0,s.altPrio)("*",o.Dynamic,(0,s.seq)(o.SQLField,(0,s.alt)(e,t)))}}t.SQLFieldList=r},68488(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Shift=void 0;const s=n(3125),o=n(82245);t.Shift=class{getMatcher(){const e=(0,s.seq)("DELETING",(0,s.altPrio)("LEADING","TRAILING"),o.Source),t=(0,s.seq)("UP TO",o.Source),n=(0,s.seq)("IN",(0,s.altPrio)("CHARACTER","BYTE"),"MODE"),i=(0,s.altPrio)("LEFT","RIGHT"),r=(0,s.seq)("BY",o.Source,(0,s.optPrio)("PLACES")),a=(0,s.per)(e,t,n,i,r,"CIRCULAR");return(0,s.seq)("SHIFT",o.Target,(0,s.opt)(a))}}},68619(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadReport=void 0;const s=n(3125),o=n(82245),i=n(49028);t.LoadReport=class{getMatcher(){const e=(0,s.seq)("LOAD REPORT",o.Source,"PART",o.Source,"INTO",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},68648(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChainMainlyDeclarations=t.ChainMainlyDeclarationsConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(86696),c=n(71249);class l extends i.BasicRuleConfig{constructor(){super(...arguments),this.definitions=!0,this.write=!0,this.move=!0,this.refresh=!0,this.unassign=!0,this.clear=!0,this.hide=!0,this.free=!0,this.include=!0,this.check=!0,this.sort=!0}}t.ChainMainlyDeclarationsConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"chain_mainly_declarations",title:"Chain mainly declarations",shortDescription:"Chain mainly declarations, allows chaining for the configured statements, reports errors for other statements.",extendedInformation:"\nhttps://docs.abapopenchecks.org/checks/23/\n\nhttps://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abenchained_statements_guidl.htm\n",tags:[a.RuleTag.SingleFile,a.RuleTag.Quickfix],badExample:"CALL METHOD: bar.",goodExample:"CALL METHOD bar."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],o=e.getStructure();if(void 0===o)return[];let i;for(const a of o.findAllStatementNodes()){const o=a.getColon();if(void 0===o)continue;const c=a.get();if(!0===this.conf.definitions&&(c instanceof r.ClassData||c instanceof r.ClassDataBegin||c instanceof r.ClassDataEnd||c instanceof r.Static||c instanceof r.StaticBegin||c instanceof r.StaticEnd||c instanceof r.Local||c instanceof r.Constant||c instanceof r.ConstantBegin||c instanceof r.ConstantEnd||c instanceof r.Controls||c instanceof r.Parameter||c instanceof r.SelectOption||c instanceof r.SelectionScreen||c instanceof r.Aliases||c instanceof r.Tables||c instanceof r.MethodDef||c instanceof r.InterfaceDef||c instanceof r.Type||c instanceof r.TypeBegin||c instanceof r.TypeEnd||c instanceof r.TypeEnumBegin||c instanceof r.TypeEnumEnd||c instanceof r.TypeEnum||c instanceof r.Events||c instanceof r.Ranges||c instanceof r.TypePools||c instanceof r.FieldSymbol||c instanceof r.Data||c instanceof r.DataBegin||c instanceof r.DataEnd))continue;if(!0===this.conf.write&&c instanceof r.Write)continue;if(!0===this.conf.move&&c instanceof r.Move)continue;if(!0===this.conf.refresh&&c instanceof r.Refresh)continue;if(!0===this.conf.unassign&&c instanceof r.Unassign)continue;if(!0===this.conf.clear&&c instanceof r.Clear)continue;if(!0===this.conf.hide&&c instanceof r.Hide)continue;if(!0===this.conf.free&&c instanceof r.Free)continue;if(!0===this.conf.include&&c instanceof r.Include)continue;if(!0===this.conf.check&&c instanceof r.Check)continue;if(!0===this.conf.sort&&c instanceof r.Sort)continue;let l;i===o.getStart().getRow()&&(l=null===(t=n.pop())||void 0===t?void 0:t.getDefaultFix());const d=this.getFix(e,c,a,l),u="Chain mainly declarations";n.push(s.Issue.atToken(e,a.getFirstToken(),u,this.getMetadata().key,this.conf.severity,d)),i=a.getColon().getStart().getRow()}return n}getFix(e,t,n,s){if(t instanceof r.ClassDataBegin||t instanceof r.ClassDataEnd||t instanceof r.StaticBegin||t instanceof r.StaticEnd||t instanceof r.ConstantBegin||t instanceof r.ConstantEnd||t instanceof r.TypeBegin||t instanceof r.TypeEnd||t instanceof r.TypeEnumBegin||t instanceof r.TypeEnumEnd||t instanceof r.DataBegin||t instanceof r.DataEnd)return;let o,i=n.concatTokens();i=i.replace(",","."),o=void 0===s?n.getStart():n.getTokens()[1].getStart();let a=c.EditHelper.replaceRange(e,o,n.getEnd(),i);return void 0!==s&&(a=c.EditHelper.merge(a,s)),a}}t.ChainMainlyDeclarations=d},68654(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SUSO"}getAllowedNaming(){return{maxLength:10,allowNamespace:!0}}getDescription(){}}t.AuthorizationObject=o},68785(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDataEnd=void 0;const s=n(3125),o=n(82245);t.ClassDataEnd=class{getMatcher(){const e=(0,s.seq)("COMMON PART",(0,s.optPrio)(o.NamespaceSimpleName)),t=(0,s.seq)("END OF",(0,s.altPrio)(e,o.NamespaceSimpleName));return(0,s.seq)("CLASS-DATA",t)}}},68822(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyDatabase=void 0;const s=n(3125),o=n(82245);t.ModifyDatabase=class{getMatcher(){const e=(0,s.seq)("FROM",(0,s.opt)("TABLE"),o.SQLSource),t=(0,s.per)(o.DatabaseConnection,e,o.SQLClient);return(0,s.seq)("MODIFY",o.DatabaseTable,t)}}},68837(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBody=void 0;const s=n(82245),o=n(2328),i=n(93170),r=n(31666),a=n(37671),c=n(20572),l=n(82054);t.ValueBody=class{static runSyntax(e,t,n){var d,u;if(void 0===e)return n;let p=!1;const f=e.findDirectExpression(s.Let);f&&(p=r.Let.runSyntax(f,t));let g=0;for(const n of e.findDirectExpressions(s.For)||[])!0===o.For.runSyntax(n,t)&&g++;const h=new Set;for(const o of e.findDirectExpressions(s.FieldAssignment))if(a.FieldAssignment.runSyntax(o,t,n),void 0===e.findDirectExpression(s.ValueBodyLine)){const e=null===(d=o.findDirectExpression(s.FieldSub))||void 0===d?void 0:d.concatTokens().toUpperCase();if(e){if(h.has(e)){const e="Duplicate field assignment";return t.issues.push((0,l.syntaxIssue)(t,o.getFirstToken(),e)),c.VoidType.get(l.CheckSyntaxKey)}h.add(e)}}let T;for(const n of e.findDirectExpressions(s.Source))T=i.Source.runSyntax(n,t,T);for(const n of(null===(u=e.findDirectExpression(s.ValueBase))||void 0===u?void 0:u.findDirectExpressions(s.Source))||[])T=i.Source.runSyntax(n,t,T);for(const o of e.findDirectExpressions(s.ValueBodyLine)){if(!(n instanceof c.TableType||n instanceof c.UnknownType||n instanceof c.AnyType||void 0===n||n instanceof c.VoidType)){const e="Value, not a table type";return t.issues.push((0,l.syntaxIssue)(t,o.getFirstToken(),e)),c.VoidType.get(l.CheckSyntaxKey)}let e=n;n instanceof c.TableType&&(e=n.getRowType());for(const e of o.findDirectExpressions(s.ValueBodyLines))for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of o.findDirectExpressions(s.FieldAssignment))a.FieldAssignment.runSyntax(n,t,e);for(const n of o.findDirectExpressions(s.Source))i.Source.runSyntax(n,t,e)}!0===p&&t.scope.pop(e.getLastToken().getEnd());for(let n=0;n<g;n++)t.scope.pop(e.getLastToken().getEnd());return(null==n?void 0:n.isGeneric())&&T?T:n||T}}},68906(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetProperty=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetProperty=class{getMatcher(){const e=(0,s.seq)("SET PROPERTY OF",o.Source,(0,s.alt)(o.Constant,o.Field),"=",o.Source,(0,s.optPrio)("NO FLUSH"),(0,s.opt)(o.OLEExporting),(0,s.opt)("QUEUEONLY"));return(0,s.verNot)(i.Version.Cloud,e)}}},68999(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SuperClassName=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return new o.ClassName}}t.SuperClassName=i},69023(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetCursor=void 0;const s=n(82245),o=n(9646);t.GetCursor=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Target))o.Target.runSyntax(n,t)}}},69106(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnumEnd=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeEnumEnd=class{getMatcher(){const e=(0,s.seq)("STRUCTURE",o.NamespaceSimpleName);return(0,s.ver)(i.Version.v751,(0,s.seq)("TYPES","END OF","ENUM",o.NamespaceSimpleName,(0,s.opt)(e)))}}},69139(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Pack=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Pack=class{getMatcher(){const e=(0,s.seq)("PACK",o.Source,"TO",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},69325(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LOBHandle=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("WRITER FOR COLUMNS",o.Field)}}t.LOBHandle=i},69328(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodSource=void 0;const s=n(82245),o=n(75457),i=n(53414),r=n(20572),a=n(36453),c=n(2416),l=n(97502),d=n(53280),u=n(44489),p=n(89301),f=n(98885),g=n(66228),h=n(49028),T=n(82054),m=n(38788);t.MethodSource=class{static runSyntax(e,t){var n,d,u;const y=new c.ObjectOriented(t.scope),S=e.getChildren().slice(),v=S.shift();if(void 0===v)throw new m.AssertError("MethodSource, first child expected");let E=this.findTop(v,t,S);if(void 0===E&&(E=null===(n=t.scope.findVariable("me"))||void 0===n?void 0:n.getType(),S.unshift(v)),t.scope.getVersion()===h.Version.Cloud&&v.get()instanceof s.Dynamic&&v instanceof o.ExpressionNode&&"=>"===(null===(d=S[0])||void 0===d?void 0:d.concatTokens())){const n=null===(u=v.findDirectExpression(s.Constant))||void 0===u?void 0:u.concatTokens().replace(/'/g,"").replace(/`/g,"");if(void 0!==n&&void 0===t.scope.findClassDefinition(n)){const s=`Class "${n}" not found/released`;return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),s)),r.VoidType.get(T.CheckSyntaxKey)}}if(E instanceof r.VoidType){for(;S.length>0;){const e=S.shift();e instanceof o.ExpressionNode&&e.get()instanceof s.Dynamic&&i.Dynamic.runSyntax(e,t)}return E}for(;S.length>0;){const n=S.shift();if(void 0===n)break;if(n.get()instanceof p.Dash){if(E instanceof r.UnknownType){const n="Not a structure, type unknown, MethodSource";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}if(!(E instanceof r.StructureType)){const n="Not a structure, MethodSource";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}}else if(n.get()instanceof p.InstanceArrow||n.get()instanceof p.StaticArrow);else if(n.get()instanceof s.AttributeName||n.get()instanceof s.SourceField){if(E instanceof l.AbstractType){const e=f.AttributeName.runSyntax(E,n,t,a.ReferenceType.DataReadReference,!1);if(!1==(e instanceof r.VoidType&&e.getVoided()===T.CheckSyntaxKey)){E=e;continue}}const s=E instanceof r.ObjectReferenceType?E.getIdentifierName():void 0,o=n.getFirstToken(),i=null==o?void 0:o.getStr(),c=t.scope.findObjectDefinition(s);let{method:d,def:u}=y.searchMethodName(c,i);if(void 0===d&&"CONSTRUCTOR"===(null==i?void 0:i.toUpperCase()))E=r.VoidType.get("CONSTRUCTOR");else{if(!(void 0!==d||E instanceof r.VoidType)){const n='Method or attribute "'+i+'" not found, MethodSource';return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}if(d){const e=y.methodReferenceExtras(u,s);t.scope.addReference(o,d,a.ReferenceType.MethodReference,t.filename,e),E=d}}}else n.get()instanceof s.ComponentName&&E instanceof l.AbstractType?(E instanceof r.TableType&&E.isWithHeader()&&(E=E.getRowType()),E=g.ComponentName.runSyntax(E,n,t)):n instanceof o.ExpressionNode&&n.get()instanceof s.Dynamic&&(i.Dynamic.runSyntax(n,t),E=r.VoidType.get("Dynamic"))}if(E instanceof l.AbstractType&&!(E instanceof r.VoidType)){const n="Not a method, MethodSource";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}if(void 0===E){const n="Not found, MethodSource";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}return E}static findTop(e,t,n){if(e.get()instanceof s.ClassName){const n=e.getFirstToken(),s=n.getStr(),o=t.scope.findObjectDefinition(s);if(void 0===o&&!1===t.scope.getDDIC().inErrorNamespace(s)){const e={ooName:s,ooType:"Void"};return t.scope.addReference(n,void 0,a.ReferenceType.ObjectOrientedVoidReference,t.filename,e),r.VoidType.get(s)}if(void 0===o){const n="Class "+s+" not found";return t.issues.push((0,T.syntaxIssue)(t,e.getFirstToken(),n)),r.VoidType.get(T.CheckSyntaxKey)}return t.scope.addReference(e.getFirstToken(),o,a.ReferenceType.ObjectOrientedReference,t.filename),new r.ObjectReferenceType(o)}return e instanceof o.ExpressionNode&&e.get()instanceof s.SourceField&&n.length>0?u.SourceField.runSyntax(e,t,a.ReferenceType.DataReadReference):e instanceof o.ExpressionNode&&e.get()instanceof s.SourceFieldSymbol?d.SourceFieldSymbol.runSyntax(e,t):e instanceof o.ExpressionNode&&e.get()instanceof s.Dynamic?(i.Dynamic.runSyntax(e,t),r.VoidType.get("Dynamic")):void 0}}},69399(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Commit=void 0;const s=n(3125),o=n(82245);t.Commit=class{getMatcher(){const e=(0,s.seq)("WORK",(0,s.opt)("AND WAIT"));return(0,s.seq)("COMMIT",(0,s.alt)(e,o.DatabaseConnection))}}},69507(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpaghettiScope=t.SpaghettiScopeNode=void 0;const s=n(15838),o=n(2088),i=n(36453),r=n(38788);class a{constructor(){this.data={vars:{},cdefs:{},idefs:{},forms:[],types:{},extraLikeTypes:{},deferred:{},references:[],sqlConversion:[]}}getData(){return this.data}}class c extends a{[Symbol.for("debug.description")](){return`SpaghettiSN ${this.identifier.sname} ${this.identifier.stype}`}constructor(e,t){super(),this.identifier=e,this.parent=t,this.children=[]}getParent(){return this.parent}addChild(e){this.children.push(e)}getChildren(){return this.children}getFirstChild(){return this.children[0]}getIdentifier(){return this.identifier}calcCoverage(){if(void 0===this.identifier.end)throw new r.AssertError("internal error, caclCoverage");return{start:this.identifier.start,end:this.identifier.end}}setEnd(e){this.identifier.end=e}findDeferred(e){let t=this;for(;void 0!==t;){const n=t.getData().deferred[e.toUpperCase()];if(n)return{id:new o.Identifier(n.token,t.identifier.filename),ooType:n.ooType};t=t.getParent()}}findClassDefinition(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){const e=t.getData().cdefs[n];if(void 0!==e)return e;t=t.getParent()}}listClassDefinitions(){let e=this;const t=[];for(;void 0!==e;)t.push(...Object.values(e.getData().cdefs)),e=e.getParent();return t}listInterfaceDefinitions(){let e=this;const t=[];for(;void 0!==e;)t.push(...Object.values(e.getData().idefs)),e=e.getParent();return t}findFormDefinition(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){for(const e of t.getData().forms)if(e.getName().toUpperCase()===n)return e;t=t.getParent()}}findInterfaceDefinition(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){const e=t.getData().idefs[n];if(e)return e;t=t.getParent()}}findType(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){const e=t.getData().types[n];if(e)return e;t=t.getParent()}}findExtraLikeType(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){const e=t.getData();if(e.extraLikeTypes[n])return e.extraLikeTypes[n];t=t.getParent()}}findVariable(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){const e=t.getData();if(e.vars[n])return e.vars[n];t=t.getParent()}}findWriteReference(e){for(const t of this.getData().references)if(t.referenceType===i.ReferenceType.DataWriteReference&&t.position.getStart().equals(e)&&t.resolved instanceof s.TypedIdentifier)return t.resolved}findTableReference(e){for(const t of this.getData().references)if(t.referenceType===i.ReferenceType.TableReference&&t.position.getStart().equals(e)&&t.resolved)return t.resolved.getName()}findTableVoidReference(e){for(const t of this.getData().references)if(t.referenceType===i.ReferenceType.TableVoidReference&&t.position.getStart().equals(e))return!0;return!1}findScopeForVariable(e){let t=this;const n=e.toUpperCase();for(;void 0!==t;){if(void 0!==t.getData().vars[n])return t.getIdentifier();t=t.getParent()}}}t.SpaghettiScopeNode=c,t.SpaghettiScope=class{constructor(e){this.node=e}listDefinitions(e){const t=[];for(const n of this.allNodes())if(n.getIdentifier().filename===e){const s=n.getData().vars;for(const n in s)s[n].getFilename()===e&&t.push({name:n,identifier:s[n]})}return t}listReadPositions(e){const t=[];for(const n of this.allNodes())if(n.getIdentifier().filename===e)for(const s of n.getData().references)s.referenceType===i.ReferenceType.DataReadReference&&s.position.getFilename()===e&&t.push(s.position);return t}listWritePositions(e){const t=[];for(const n of this.allNodes())if(n.getIdentifier().filename===e)for(const s of n.getData().references)s.referenceType===i.ReferenceType.DataWriteReference&&s.position.getFilename()===e&&t.push(s.position);return t}lookupPosition(e,t){if(void 0!==e&&void 0!==t)return this.lookupPositionTraverse(e,t,this.node)}getFirstChild(){return this.node.getFirstChild()}getTop(){return this.node}allNodes(){const e=[],t=[this.node];for(;t.length>0;){const n=t.pop();e.push(n),t.push(...n.getChildren())}return e}lookupPositionTraverse(e,t,n){const s=n.calcCoverage();if(n.getIdentifier().filename!==t||!1!==e.isBetween(s.start,s.end)){for(const s of n.getChildren()){const n=this.lookupPositionTraverse(e,t,s);if(void 0!==n)return n}return n.getIdentifier().filename===t&&e.isBetween(s.start,s.end)?n:void 0}}}},69542(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSCase=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.starPrio)((0,o.seq)(".",s.CDSName))),t=(0,o.altPrio)(s.CDSString,i,s.CDSCast,s.CDSArithmetics,s.CDSFunction,e),n=(0,o.altPrio)((0,o.seq)("(",t,")"),t),r=(0,o.seq)((0,o.altPrio)(s.CDSFunction,e),(0,o.plusPrio)((0,o.seq)("WHEN",t,"THEN",n))),a=(0,o.plusPrio)((0,o.seq)("WHEN",s.CDSCondition,"THEN",n));return(0,o.seq)("CASE",(0,o.altPrio)(a,r),(0,o.optPrio)((0,o.seq)("ELSE",t)),"END")}}t.CDSCase=i},69556(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DescriptionEmpty=t.DescriptionEmptyConf=void 0;const s=n(71759),o=n(84383),i=n(77465),r=n(86789);class a extends i.BasicRuleConfig{}t.DescriptionEmptyConf=a,t.DescriptionEmpty=class{constructor(){this.conf=new a}getMetadata(){return{key:"description_empty",title:"Description in class must exist",shortDescription:"Ensures descriptions in class metadata exist."}}getDescription(e){return"Description empty in "+e}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){const t=[];if(e instanceof o.Class||e instanceof o.Interface){const n=e.getDescription();let o;if(""===n?o=this.getDescription(e.getName()):void 0===n&&(o=this.getDescription(e.getName()+", class XML file not found")),o){const n=new r.Position(1,1),i=s.Issue.atPosition(e.getFiles()[0],n,o,this.getMetadata().key,this.conf.severity);t.push(i)}}return t}}},69656(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLCond=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.altPrio)("AND","OR"),t=(0,s.seq)((0,s.tok)(o.WParenLeftW),r,(0,s.altPrio)((0,s.tok)(o.WParenRightW),(0,s.tok)(o.ParenRightW))),n=(0,s.seq)((0,s.optPrio)("NOT"),(0,s.altPrio)(i.SQLCompare,t));return(0,s.seq)(n,(0,s.starPrio)((0,s.seq)(e,n)))}}t.SQLCond=r},69704(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Idoc=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IDOC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.Idoc=o},69712(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5330),t),o(n(71532),t),o(n(6876),t),o(n(98576),t),o(n(44863),t),o(n(18412),t),o(n(74279),t),o(n(40950),t),o(n(19734),t),o(n(53149),t),o(n(43332),t),o(n(64863),t),o(n(51596),t),o(n(22308),t),o(n(19622),t),o(n(40837),t),o(n(68648),t),o(n(83339),t),o(n(18345),t),o(n(34781),t),o(n(82439),t),o(n(34803),t),o(n(39898),t),o(n(90072),t),o(n(36154),t),o(n(52453),t),o(n(35652),t),o(n(49701),t),o(n(21239),t),o(n(36749),t),o(n(40134),t),o(n(35521),t),o(n(8955),t),o(n(6835),t),o(n(2974),t),o(n(28131),t),o(n(8306),t),o(n(46887),t),o(n(98750),t),o(n(69556),t),o(n(8510),t),o(n(45137),t),o(n(67734),t),o(n(12937),t),o(n(10282),t),o(n(9452),t),o(n(15863),t),o(n(10727),t),o(n(83067),t),o(n(42388),t),o(n(91574),t),o(n(26332),t),o(n(87259),t),o(n(65451),t),o(n(10117),t),o(n(12318),t),o(n(56669),t),o(n(7831),t),o(n(89966),t),o(n(5680),t),o(n(262),t),o(n(40924),t),o(n(85360),t),o(n(53369),t),o(n(33303),t),o(n(13059),t),o(n(91193),t),o(n(15312),t),o(n(75525),t),o(n(60543),t),o(n(33911),t),o(n(86369),t),o(n(34982),t),o(n(95626),t),o(n(63827),t),o(n(46104),t),o(n(33366),t),o(n(64502),t),o(n(42246),t),o(n(1643),t),o(n(10456),t),o(n(14171),t),o(n(28976),t),o(n(62341),t),o(n(5679),t),o(n(34393),t),o(n(35550),t),o(n(49218),t),o(n(97003),t),o(n(31930),t),o(n(96283),t),o(n(58798),t),o(n(92232),t),o(n(84348),t),o(n(82883),t),o(n(16063),t),o(n(37613),t),o(n(26971),t),o(n(49150),t),o(n(78742),t),o(n(78446),t),o(n(98544),t),o(n(56108),t),o(n(86582),t),o(n(90061),t),o(n(94496),t),o(n(60461),t),o(n(84612),t),o(n(17196),t),o(n(64548),t),o(n(3151),t),o(n(3133),t),o(n(46237),t),o(n(11994),t),o(n(12575),t),o(n(22268),t),o(n(39159),t),o(n(56808),t),o(n(25248),t),o(n(88558),t),o(n(17565),t),o(n(9549),t),o(n(5320),t),o(n(16464),t),o(n(90440),t),o(n(20196),t),o(n(77e3),t),o(n(13486),t),o(n(91518),t),o(n(55767),t),o(n(89674),t),o(n(41110),t),o(n(96249),t),o(n(12567),t),o(n(39901),t),o(n(89556),t),o(n(48420),t),o(n(90325),t),o(n(8788),t),o(n(11039),t),o(n(22423),t),o(n(84530),t),o(n(76978),t),o(n(7747),t),o(n(3861),t),o(n(5294),t),o(n(34280),t),o(n(39632),t),o(n(76184),t),o(n(6339),t),o(n(3114),t),o(n(39877),t),o(n(67595),t),o(n(95074),t),o(n(59426),t),o(n(43380),t),o(n(59947),t),o(n(7928),t),o(n(72946),t),o(n(2509),t),o(n(51243),t),o(n(76140),t),o(n(27523),t),o(n(96523),t),o(n(10242),t),o(n(12861),t),o(n(35958),t),o(n(59294),t),o(n(9111),t),o(n(60241),t),o(n(59299),t),o(n(60758),t),o(n(37953),t),o(n(92469),t),o(n(76382),t)},69787(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.If=void 0;const s=n(82245),o=n(60635);t.If=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Cond))o.Cond.runSyntax(n,t)}}},69813(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSPrefixedName=void 0;const s=n(3125),o=n(19181),i=n(66478),r=n(52681);class a extends s.Expression{getRunnable(){return(0,s.seq)(o.CDSName,(0,s.opt)((0,s.alt)(i.CDSParameters,r.CDSParametersSelect)),(0,s.star)((0,s.seq)(".",o.CDSName,(0,s.opt)(i.CDSParameters))))}}t.CDSPrefixedName=a},69953(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){super({qualifiedName:t}),this.error=e}getError(){return this.error}toText(){return"Unknown type: "+this.error}toABAP(){throw new Error("unknown, generic: "+this.error)}isGeneric(){return!1}containsVoid(){return!1}toCDS(){return"abap.TODO_UNKNOWN"}}t.UnknownType=o},70015(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLPath=void 0;const s=n(3125),o=n(89301),i=n(57794),r=n(69656);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.BracketLeftW),"ONE TO ONE WHERE",r.SQLCond,(0,s.tok)(o.WBracketRight));return(0,s.seq)(i.AssociationName,(0,s.optPrio)(e),(0,s.tok)(o.Dash),(0,s.regex)(/\w+/))}}t.SQLPath=a},70105(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDefinition=void 0;const s=n(29805),o=n(82245),i=n(50612),r=n(94967),a=n(82245),c=n(14089),l=n(2088),d=n(2403),u=n(4005),p=n(67240),f=n(2416),g=n(36453);class h extends l.Identifier{constructor(e,t){var n;if(!(e.get()instanceof r.ClassDefinition))throw new Error("ClassDefinition, unexpected node type");const o=e.findFirstStatement(i.ClassDefinition),l=o.findDirectExpression(a.ClassName).getFirstToken();super(l,t.filename),t.scope.addClassDefinition(this),this.events=[],this.implementing=[],this.globalValue=void 0!==o.findFirstExpression(a.ClassGlobal),this.finalValue=void 0!==o.findFirstExpression(a.ClassFinal),t.scope.push(d.ScopeType.ClassDefinition,l.getStr(),l.getStart(),t.filename),this.superClass=this.findSuper(o,t),this.friends=this.findFriends(o,t),this.parse(t,e),new f.ObjectOriented(t.scope).fromSuperClassesAndInterfaces(this),this.attributes=new c.Attributes(e,t),this.types=this.attributes.getTypes(),this.aliases=this.attributes.getAliases();const g=e.findAllStatements(i.Events);for(const e of g){const s=null===(n=e.findDirectExpression(a.EventName))||void 0===n?void 0:n.concatTokens().toUpperCase();if(void 0!==this.events.find((e=>e.getName().toUpperCase()===s)))throw new Error("Event "+s+" already defined");this.events.push(new u.EventDefinition(e,p.Visibility.Public,t))}this.methodDefs=new s.MethodDefinitions(e,t),t.scope.pop(e.getLastToken().getEnd());const h=o.concatTokens().toUpperCase();this.testing=h.includes(" FOR TESTING"),this.sharedMemory=h.includes(" SHARED MEMORY ENABLED"),this.abstract=void 0!==(null==o?void 0:o.findDirectTokenByText("ABSTRACT")),this.checkMethodsFromSuperClasses(t.scope),this.checkMethodNameLength()}getFriends(){return this.friends}getEvents(){return this.events}getMethodDefinitions(){return this.methodDefs}getTypeDefinitions(){return this.types}getSuperClass(){return this.superClass}getAttributes(){return this.attributes}isGlobal(){return this.globalValue}isFinal(){return this.finalValue}getImplementing(){return this.implementing}getAliases(){return this.aliases}isForTesting(){return this.testing}isAbstract(){return this.abstract}isSharedMemory(){return this.sharedMemory}findSuper(e,t){var n;const s=null===(n=null==e?void 0:e.findDirectExpression(o.SuperClassName))||void 0===n?void 0:n.getFirstToken();return this.addReference(s,t),null==s?void 0:s.getStr()}checkMethodNameLength(){for(const e of this.methodDefs.getAll())if(e.getName().length>30&&!1===e.getName().includes("~")){const t=`Method name "${e.getName()}" is too long, maximum length is 30 characters`;throw new Error(t)}}checkMethodsFromSuperClasses(e){var t;let n=this.getSuperClass();const s=new Set;for(;void 0!==n;){const o=e.findClassDefinition(n);for(const e of(null===(t=null==o?void 0:o.getMethodDefinitions())||void 0===t?void 0:t.getAll())||[]){const t=e.getName().toUpperCase();e.getVisibility()!==p.Visibility.Private&&"CONSTRUCTOR"!==t&&"DESTRUCTOR"!==t&&"CLASS_CONSTRUCTOR"!==t&&s.add(t)}for(const e of(null==o?void 0:o.getAliases())||[])s.add(e.getName().toUpperCase());n=null==o?void 0:o.getSuperClass()}for(const e of this.getMethodDefinitions().getAll())if(s.has(e.getName().toUpperCase())&&!1===e.isRedefinition())throw new Error(`${e.getName().toUpperCase()} already declared in superclass`)}findFriends(e,t){var n;const s=[];for(const o of(null===(n=null==e?void 0:e.findDirectExpression(a.ClassFriends))||void 0===n?void 0:n.findDirectExpressions(a.ClassName))||[]){const e=o.getFirstToken();this.addReference(e,t);const n=e.getStr();s.push(n)}return s}addReference(e,t){const n=null==e?void 0:e.getStr();if(n){const s=t.scope.findClassDefinition(n);s?t.scope.addReference(e,s,g.ReferenceType.ObjectOrientedReference,t.filename,{ooName:n.toUpperCase(),ooType:"CLAS"}):!1===t.scope.getDDIC().inErrorNamespace(n)&&t.scope.addReference(e,void 0,g.ReferenceType.ObjectOrientedVoidReference,t.filename)}}parse(e,t){var n;for(const s of t.findAllStatements(i.InterfaceDef)){const t=void 0!==s.findDirectTokenByText("PARTIALLY"),o=null===(n=s.findFirstExpression(a.InterfaceName))||void 0===n?void 0:n.getFirstToken();if(void 0===o)throw new Error("ClassDefinition, unable to find interface token");const i=o.getStr().toUpperCase();this.implementing.push({name:i,partial:t});const r=e.scope.findInterfaceDefinition(i);r?e.scope.addReference(o,r,g.ReferenceType.ObjectOrientedReference,e.filename,{ooName:i.toUpperCase(),ooType:"INTF"}):!1===e.scope.getDDIC().inErrorNamespace(i)?e.scope.addReference(o,void 0,g.ReferenceType.ObjectOrientedVoidReference,e.filename,{ooName:i.toUpperCase(),ooType:"INTF"}):e.scope.addReference(o,void 0,g.ReferenceType.ObjectOrientedUnknownReference,e.filename,{ooName:i.toUpperCase(),ooType:"INTF"})}}}t.ClassDefinition=h},70171(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteInternal=void 0;const s=n(82245),o=n(9646),i=n(93170),r=n(96808),a=n(45931),c=n(20572);t.DeleteInternal=class{runSyntax(e,t){var n;for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);let l;const d=e.findDirectExpression(s.Target);if(d){let s;5===e.getChildren().length&&"FROM"===e.getChildren()[2].concatTokens().toUpperCase()&&(s=null===(n=t.scope.getDDIC())||void 0===n?void 0:n.lookupTableOrView(d.concatTokens()),s&&t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:s.object})),void 0===s&&(l=o.Target.runSyntax(d,t),l instanceof c.TableType&&(l=l.getRowType()))}for(const n of e.findDirectExpressions(s.ComponentCompare))r.ComponentCompare.runSyntax(n,t,l);for(const n of e.findDirectExpressions(s.ComponentCond))a.ComponentCond.runSyntax(n,t,l)}}},70242(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Provide=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Provide=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Provide),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndProvide))}}},70269(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyScreen=void 0;const s=n(82245),o=n(93170);t.ModifyScreen=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t)}}},70302(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[\/\w\d_%$\*\~]+$/)}}t.ComponentName=o},70352(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDefinition=void 0;const s=n(50612),o=n(58720),i=n(2948),r=n(64757),a=n(54362);t.ClassDefinition=class{getMatcher(){const e=(0,o.seq)((0,o.opt)((0,o.sta)(s.SetExtendedCheck)),(0,o.star)((0,o.sta)(s.TypePools)),(0,o.opt)((0,o.sub)(a.PublicSection)),(0,o.opt)((0,o.sub)(r.ProtectedSection)),(0,o.opt)((0,o.sub)(i.PrivateSection)),(0,o.opt)((0,o.sta)(s.SetExtendedCheck)));return(0,o.beginEnd)((0,o.sta)(s.ClassDefinition),e,(0,o.sta)(s.EndClass))}}},70433(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AndReturn=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.str)("AND RETURN")}}t.AndReturn=o},70468(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessAddInImplementation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SXCI"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.BusinessAddInImplementation=o},70498(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Window=class{getMatcher(){const e=(0,s.seq)("ENDING AT",o.Source,o.Source),t=(0,s.seq)("WINDOW STARTING AT",o.Source,o.Source,(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},70515(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormParam=void 0;const s=n(15838),o=n(20572),i=n(82245),r=n(46743),a=n(38788),c=n(89301);t.FormParam=class{static runSyntax(e,t){var n,l;const d=e.findFirstExpression(i.FormParamName);if(void 0===d)throw new a.AssertError("FormParam, could not find FormParamName");let u=d.getFirstToken();if(d.getChildren().length>1&&(u=new c.Identifier(u.getStart(),d.concatTokens())),e.findDirectTokenByText("STRUCTURE")&&u){const r=null===(n=e.findDirectExpression(i.SimpleFieldChain))||void 0===n?void 0:n.getFirstToken().getStr();let a;return r?(a=null===(l=t.scope.findType(r))||void 0===l?void 0:l.getType(),void 0===a&&(a=t.scope.getDDIC().lookupTableOrView(r).type)):a=new o.UnknownType("todo, FORM STRUCTURES typing"),new s.TypedIdentifier(u,t.filename,a,["form_parameter"])}if(1===e.getChildren().length&&u)return new s.TypedIdentifier(u,t.filename,o.AnyType.get(),["form_parameter"]);const p=new r.BasicTypes(t).parseType(e);if(u&&p)return new s.TypedIdentifier(u,t.filename,p,["form_parameter"]);if(u)return new s.TypedIdentifier(u,t.filename,new o.UnknownType("FormParam, todo"),["form_parameter"]);throw new a.AssertError("FormParam, unexpected node")}}},70599(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndOfPage=void 0;const s=n(3125),o=n(49028);t.EndOfPage=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"END-OF-PAGE")}}},70613(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataControl=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DCLS"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.DataControl=o},70831(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Refresh=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Refresh=class{getMatcher(){const e=(0,s.seq)("FROM TABLE",o.DatabaseTable),t=(0,s.seq)("REFRESH",o.Target,(0,s.optPrio)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},70901(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetBadi=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetBadi=class{getMatcher(){const e=(0,s.seq)("FILTERS",o.ParameterListS),t=(0,s.seq)("CONTEXT",o.Source),n=(0,s.seq)("TYPE",o.Dynamic),r=(0,s.seq)("GET BADI",o.Target,(0,s.opt)(n),(0,s.opt)(e),(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,r)}}},70998(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Split=void 0;const s=n(82245),o=n(20572),i=n(14365),r=n(93170),a=n(9646),c=n(3240),l=n(82054);t.Split=class{runSyntax(e,t){const n=void 0!==e.findTokenSequencePosition("INTO","TABLE"),d=n?new o.TableType(o.StringType.get(),{withHeader:!1,keyType:o.TableKeyType.default}):o.StringType.get();for(const r of e.findAllExpressions(s.Target)){const u=r.findDirectExpression(s.InlineData);if(u)i.InlineData.runSyntax(u,t,d);else{let s=a.Target.runSyntax(r,t);if(n){if(!(s instanceof o.TableType||s instanceof o.UnknownType||s instanceof o.VoidType)){const e="Into must be table typed";return void t.issues.push((0,l.syntaxIssue)(t,r.getFirstToken(),e))}s instanceof o.TableType&&(s=s.getRowType())}if(!1===new c.TypeUtils(t.scope).isCharLikeStrict(s)){const n="Incompatible, target not character like";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}}for(const n of e.findDirectExpressions(s.Source))r.Source.runSyntax(n,t)}}},71033(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPQueryQuery=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AQQU"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.ABAPQueryQuery=o},71176(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotationSimple=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.alt)(s.CDSString,"true","false",(0,o.regex)(/^\d+$/),(0,o.seq)((0,o.regex)(/^\d+$/),".",(0,o.regex)(/^\d+$/)),(0,o.seq)("#","(",(0,o.regex)(/^[\w_]+$/),")"),(0,o.regex)(/^#[\w_]+$/))}}t.CDSAnnotationSimple=i},71249(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EditHelper=t.EditDraft=void 0,t.applyEditSingle=r,t.applyEditList=function(e,t){const n=[];let s=0;const o={};for(const e of t)for(const t in e)void 0===o[t]&&(o[t]=[],s+=1),o[t]=o[t].concat(e[t]);for(const t in o){const s={};s[t]=o[t].sort(((e,t)=>{let n=t.range.start.getRow()-e.range.start.getRow();return 0===n&&(n=t.range.start.getCol()-e.range.start.getCol()),n})),r(e,s),n.push(t)}return n};const s=n(86789),o=n(67718);t.EditDraft=class{constructor(e){this.start=void 0,this.end=void 0,this.rows=e.getRawRows(),this.file=e}replace(e,t){(void 0===this.start||e.isBefore(this.start))&&(this.start=e);const n=new s.Position(e.getRow(),e.getCol()+t.length);(void 0===this.end||n.isAfter(this.end))&&(this.end=n);const o=this.rows[e.getRow()-1];this.rows[e.getRow()-1]=o.substr(0,e.getCol()-1)+t+o.substr(e.getCol()+t.length-1)}toEdit(){if(void 0===this.start)throw"EditDraft, start undefined";if(void 0===this.end)throw"EditDraft, end undefined";let e="";for(let t=this.start.getRow();t<=this.end.getRow();t++)t===this.start.getRow()&&t===this.end.getRow()?e=this.rows[t-1].substring(this.start.getCol()-1,this.end.getCol()-1):t===this.start.getRow()?e=this.rows[t-1].substring(this.start.getCol()-1):t===this.end.getRow()?e+="\n"+this.rows[t-1].substring(0,this.end.getCol()-1):e+="\n"+this.rows[t-1];return i.replaceRange(this.file,this.start,this.end,e)}};class i{static mergeList(e){const t={};for(const n of e)for(const e in n)void 0===t[e]&&(t[e]=[]),t[e]=t[e].concat(n[e]);return t}static merge(e,t){const n={};for(const t of Object.keys(e))void 0===n[t]&&(n[t]=[]),n[t]=n[t].concat(e[t]);for(const e of Object.keys(t))void 0===n[e]&&(n[e]=[]),n[e]=n[e].concat(t[e]);return n}static findStatement(e,t){if(void 0!==t)for(const n of t.getStatements())if(n.includesToken(e))return n}static deleteStatement(e,t){const n=t.getColon();if(void 0===n)return i.deleteRange(e,t.getFirstToken().getStart(),t.getLastToken().getEnd());let s,o,r=!0,a=!0;for(const i of e.getStatements()){const e=i.getColon();if(void 0!==e)if(i!==t){if(!0===r)n.getStart().equals(e.getStart())&&(s=i);else if(!0===a){n.getStart().equals(e.getStart())&&(o=i);break}}else r=!1,a=!0}if(void 0===s&&void 0===o)return i.deleteRange(e,t.getFirstToken().getStart(),t.getLastToken().getEnd());let c=t.getFirstToken().getStart();for(const e of t.getTokens())if(e.getStart().isAfter(n.getEnd())){c=e.getStart();break}const l=t.getColon();if("."===t.getLastToken().getStr()&&s){const n=i.replaceToken(e,s.getLastToken(),"."),o=i.deleteRange(e,s.getLastToken().getEnd(),t.getLastToken().getEnd());return i.merge(n,o)}return void 0===s&&l&&o?i.deleteRange(e,this.firstAfterColon(t),this.firstAfterColon(o)):i.deleteRange(e,c,this.firstAfterColon(o))}static firstAfterColon(e){const t=e.getColon().getStart();for(const n of e.getTokens())if(n.getStart().isAfter(t))return n.getStart();throw new Error("firstAfterColon, emtpy statement?")}static deleteToken(e,t){const n=e.getFilename(),s={start:t.getStart(),end:t.getEnd()};return{[n]:[{range:s,newText:""}]}}static deleteRange(e,t,n){const s=e.getFilename(),o={start:t,end:n};return{[s]:[{range:o,newText:""}]}}static insertAt(e,t,n){const s=e.getFilename(),o={start:t,end:t};return{[s]:[{range:o,newText:n}]}}static replaceToken(e,t,n){return this.replaceRange(e,t.getStart(),t.getEnd(),n)}static replaceRange(e,t,n,s){const o=e.getFilename(),i={start:t,end:n};return{[o]:[{range:i,newText:s}]}}}function r(e,t){var n;for(const s in t){let i=null===(n=e.getFileByName(s))||void 0===n?void 0:n.getRawRows();if(void 0===i)throw new Error("applyEdit, file not found");for(const e of t[s])if(e.range.start.getRow()===e.range.end.getRow()){const t=i[e.range.start.getRow()-1];i[e.range.start.getRow()-1]=t.substr(0,e.range.start.getCol()-1)+e.newText+t.substr(e.range.end.getCol()-1)}else{let t=i[e.range.start.getRow()-1].substr(0,e.range.start.getCol()-1)+e.newText;t+=i[e.range.end.getRow()-1].substr(e.range.end.getCol()-1),i.splice(e.range.start.getRow(),e.range.end.getRow()-e.range.start.getRow()),i[e.range.start.getRow()-1]=t,i=i.join("\n").split("\n")}const r=new o.MemoryFile(s,i.join("\n"));e.updateFile(r)}}t.EditHelper=i},71410(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnumBegin=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeEnumBegin=class{getMatcher(){const e=(0,s.seq)("STRUCTURE",o.NamespaceSimpleName),t=(0,s.seq)("BASE TYPE",o.NamespaceSimpleName),n=(0,s.seq)("ENUM",o.NamespaceSimpleName,(0,s.opt)(e),(0,s.opt)(t));return(0,s.ver)(i.Version.v751,(0,s.seq)("TYPES","BEGIN OF",n))}}},71532(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Abapdoc=t.AbapdocConf=void 0;const s=n(99732),o=n(77465),i=n(71759),r=n(67240),a=n(86696);class c extends o.BasicRuleConfig{constructor(){super(...arguments),this.checkLocal=!1,this.classDefinition=!1,this.interfaceDefinition=!1,this.ignoreTestClasses=!0}}t.AbapdocConf=c;class l extends s.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"abapdoc",title:"Check abapdoc",shortDescription:"Various checks regarding abapdoc.",extendedInformation:"Base rule checks for existence of abapdoc for public class methods and all interface methods.\n\nPlus class and interface definitions.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#abap-doc-only-for-public-apis",tags:[a.RuleTag.SingleFile,a.RuleTag.Styleguide]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n;const s=[],o=e.getRawRows();let a=[];for(const n of e.getInfo().listClassDefinitions())if(!(!1===this.conf.checkLocal&&!0===n.isLocal||!0===this.conf.ignoreTestClasses&&!0===n.isForTesting||(a=a.concat(n.methods.filter((e=>e.visibility===r.Visibility.Public))),!0!==this.conf.classDefinition))&&'"!'!==(null===(t=o[n.identifier.getStart().getRow()-2])||void 0===t?void 0:t.trim().substring(0,2))){const e="Missing ABAP Doc for class "+n.identifier.getToken().getStr(),t=i.Issue.atIdentifier(n.identifier,e,this.getMetadata().key,this.conf.severity);s.push(t)}for(const t of e.getInfo().listInterfaceDefinitions())if((!1!==this.conf.checkLocal||!0!==t.isLocal)&&(a=a.concat(t.methods),!0===this.conf.interfaceDefinition)&&'"!'!==(null===(n=o[t.identifier.getStart().getRow()-2])||void 0===n?void 0:n.trim().substring(0,2))){const e="Missing ABAP Doc for interface "+t.identifier.getToken().getStr(),n=i.Issue.atIdentifier(t.identifier,e,this.getMetadata().key,this.conf.severity);s.push(n)}for(const e of a){if(!0===e.isRedefinition)continue;const t=this.getAbapdoc(o,e.identifier.getStart());if(void 0!==t)for(const n of t){if(null!==n.trim().match('^\\"! .*<[^/>]*><\\/')){const t="Empty tag(s) in ABAP Doc for method "+e.identifier.getToken().getStr()+" ("+n+")",o=i.Issue.atIdentifier(e.identifier,t,this.getMetadata().key,this.conf.severity);s.push(o)}if(null===n.trim().match('^\\"!.+$')&&t.indexOf(n)===t.length-1){const t="Missing ABAP Doc for method "+e.identifier.getToken().getStr()+" ("+n+")",o=i.Issue.atIdentifier(e.identifier,t,this.getMetadata().key,this.conf.severity);s.push(o)}if(null!==n.trim().match('^\\"! @parameter .+\\|')){const t="Missing ABAP Doc parameter name for method "+e.identifier.getToken().getStr()+" ("+n+")",o=i.Issue.atIdentifier(e.identifier,t,this.getMetadata().key,this.conf.severity);s.push(o)}}}return s}getAbapdoc(e,t){let n=t.getRow()-2,s=e[n].trim().toUpperCase();const o=[];if("METHODS"!==s&&"CLASS-METHODS"!==s||(n--,s=e[n].trim().toUpperCase()),o.push(s),'"!'===s.trim().substring(0,2))for(;n>=0&&(n--,s=e[n].trim().toUpperCase(),'"!'===s.trim().substring(0,2));)o.push(s);return o}}t.Abapdoc=l},71580(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SubtractCorresponding=void 0;const s=n(82245),o=n(93170),i=n(9646);t.SubtractCorresponding=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},71687(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtFirst=void 0;const s=n(50612),o=n(58720),i=n(79175);t.AtFirst=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.AtFirst),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndAt))}}},71710(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleFieldChain2=void 0;const s=n(3125),o=n(82245),i=n(89301),r=n(91675);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.InstanceArrow),r.AttributeName),t=(0,s.seq)((0,s.tok)(i.Dash),o.ComponentName),n=(0,s.star)((0,s.altPrio)(e,t)),a=(0,s.seq)(o.ClassName,(0,s.tok)(i.StaticArrow),r.AttributeName),c=(0,s.altPrio)(a,o.SourceField,o.SourceFieldSymbol);return(0,s.seq)(c,n)}}t.SimpleFieldChain2=a},71759(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Issue=void 0;const s=n(86789),o=n(297),i=n(96493);class r{static atRow(e,t,n,o,a){const c=new s.Position(t,1),l=new s.Position(t,e.getRawRows()[t-1].length+1);return a=null!=a?a:i.Severity.Error,new r({filename:e.getFilename(),message:n,key:o,start:c,end:l,severity:a})}static atStatement(e,t,n,s,o,i,r){return this.atRange(e,t.getStart(),t.getEnd(),n,s,o,i,r)}static atPosition(e,t,n,o,a,c){const l=t.getRow(),d=new s.Position(l,e.getRawRows()[l-1].length+1);return a=null!=a?a:i.Severity.Error,new r({filename:e.getFilename(),message:n,key:o,start:t,end:d,defaultFix:c,severity:a})}static atRowRange(e,t,n,o,a,c,l,d){const u=new s.Position(t,n),p=new s.Position(t,o);return l=null!=l?l:i.Severity.Error,new r({filename:e.getFilename(),message:a,key:c,start:u,end:p,defaultFix:d,severity:l})}static atRange(e,t,n,s,o,a,c,l){return a=null!=a?a:i.Severity.Error,new r({filename:e.getFilename(),message:s,key:o,start:t,end:n,defaultFix:c,severity:a,alternativeFixes:l})}static atToken(e,t,n,s,o,a){return o=null!=o?o:i.Severity.Error,new r({filename:e.getFilename(),message:n,key:s,start:t.getStart(),end:t.getEnd(),severity:o,defaultFix:a})}static atTokenFilename(e,t,n,s,o,a){return o=null!=o?o:i.Severity.Error,new r({filename:e,message:n,key:s,start:t.getStart(),end:t.getEnd(),severity:o,defaultFix:a})}static atIdentifier(e,t,n,s,o){return s=null!=s?s:i.Severity.Error,new r({filename:e.getFilename(),message:t,key:n,start:e.getStart(),end:e.getEnd(),severity:s,defaultFix:o})}constructor(e){if(this.data=e,this.data.start instanceof o.VirtualPosition&&(this.data.defaultFix=void 0),this.data.start.getCol()<1)throw new Error("issue, start col < 1");if(this.data.end.getCol()<1)throw new Error("issue, end col < 1")}getData(){return this.data}getMessage(){return this.data.message}getKey(){return this.data.key}getStart(){return this.data.start}getEnd(){return this.data.end}getFilename(){return this.data.filename}getDefaultFix(){return this.data.defaultFix}getAlternativeFixes(){return this.data.alternativeFixes}getSeverity(){return this.data.severity}}t.Issue=r},72012(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseWith=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)(o.SimpleSource1,(0,s.opt)(o.SimpleSource1),(0,s.opt)(o.SimpleSource1),(0,s.opt)(o.SimpleSource1)),t=(0,s.seq)(o.Source,(0,s.opt)(o.Source),(0,s.opt)(o.Source),(0,s.opt)(o.Source));return(0,s.seq)("WITH",(0,s.altPrio)(t,e))}}t.RaiseWith=i},72085(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetExtendedCheck=void 0;const s=n(3125),o=n(49028);t.SetExtendedCheck=class{getMatcher(){const e=(0,s.seq)("SET EXTENDED CHECK",(0,s.alt)("OFF","ON"));return(0,s.verNot)(o.Version.Cloud,e)}}},72334(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DatastoreObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ODSO"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.DatastoreObject=o},72340(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;const s=n(82245),o=n(93170);t.Search=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},72354(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDeferred=void 0;const s=n(82245);t.ClassDeferred=class{runSyntax(e,t){var n;const o=null===(n=e.findFirstExpression(s.ClassName))||void 0===n?void 0:n.getFirstToken();t.scope.addDeferred(o,"CLAS")}}},72365(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AnyType=void 0;const s=n(97502);class o extends s.AbstractType{static get(e){const t=JSON.stringify(e);if(this.singletons.has(t))return this.singletons.get(t);const n=new o(e);return this.singletons.set(t,n),n}constructor(e){super(e)}toText(){return"```any```"}toABAP(){return"any"}isGeneric(){return!0}containsVoid(){return!1}toCDS(){return"abap.TODO_ANY"}}t.AnyType=o,o.singletons=new Map},72444(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLJoin=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)((0,s.altPrio)("INNER","LEFT OUTER","LEFT","RIGHT OUTER","RIGHT")),"JOIN");return(0,s.seq)(e,o.SQLFromSource,"ON",o.SQLCond)}}t.SQLJoin=i},72750(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndInterface=void 0;const s=n(3125);t.EndInterface=class{getMatcher(){return(0,s.str)("ENDINTERFACE")}}},72757(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnumType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"enum"}isGeneric(){return!1}toABAP(){return this.getQualifiedName()||"enum"}containsVoid(){return!1}toCDS(){return"abap.TODO_ENUM"}}t.EnumType=o},72780(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPSemanticTokensDeltaProvider=void 0;const s=n(55864);t.ABAPSemanticTokensDeltaProvider=class{constructor(e){this.reg=e}getLegend(){return s.LanguageServer.semanticTokensLegend()}provideDocumentRangeSemanticTokens(e,t,n){const o=new s.LanguageServer(this.reg).semanticTokensRange({textDocument:{uri:e.uri.toString()},start:{line:t.startLineNumber,character:t.startColumn},end:{line:t.endLineNumber,character:t.endColumn}});return{data:Uint32Array.from(o.data)}}}},72854(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AssignSource=void 0;const s=n(3125),o=n(89301),i=n(83568),r=n(17808),a=n(12741),c=n(76342),l=n(49028);class d extends s.Expression{getRunnable(){const e=(0,s.seq)("COMPONENT",(0,s.alt)(c.SimpleSource3,(0,s.ver)(l.Version.v740sp02,i.Source,l.Version.OpenABAP)),"OF STRUCTURE",i.Source),t=(0,s.seq)("TABLE FIELD",(0,s.alt)(i.Source,r.Dynamic)),n=(0,s.alt)((0,s.tok)(o.InstanceArrow),(0,s.tok)(o.StaticArrow));return(0,s.alt)((0,s.seq)(i.Source,(0,s.opt)((0,s.seq)(n,r.Dynamic))),e,t,(0,s.seq)(r.Dynamic,(0,s.opt)((0,s.seq)(n,(0,s.alt)(a.Field,r.Dynamic)))))}}t.AssignSource=d},72946(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnnecessaryChaining=t.UnnecessaryChainingConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(86696),a=n(71249),c=n(52024);class l extends i.BasicRuleConfig{constructor(){super(...arguments),this.maxIssuesPerFile=10}}t.UnnecessaryChainingConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"unnecessary_chaining",title:"Unnecessary Chaining",shortDescription:"Find unnecessary chaining, all statements are checked",extendedInformation:"",tags:[r.RuleTag.SingleFile,r.RuleTag.Quickfix],badExample:"WRITE: bar.",goodExample:"WRITE bar."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=this.getConfig().maxIssuesPerFile;(void 0===n||n<1)&&(n=10);const o=e.getStatements();for(let i=0;i<o.length;i++){const r=o[i].getColon();if(void 0===r)continue;let l=1,d=o[i+l];for(;(null==d?void 0:d.get())instanceof c.Comment;)l++,d=o[i+l];l=1;let u=o[i-l];for(;(null==u?void 0:u.get())instanceof c.Comment;)l++,u=o[i-l];const p=null==d?void 0:d.getColon(),f=null==u?void 0:u.getColon();if(void 0!==p&&r.getStart().equals(p.getStart()))continue;if(void 0!==f&&r.getStart().equals(f.getStart()))continue;const g=a.EditHelper.deleteRange(e,r.getStart(),r.getEnd()),h="Unnecessary chaining",T=s.Issue.atToken(e,r,h,this.getMetadata().key,this.conf.severity,g);if(t.push(T),t.length>=n)break}return t}}t.UnnecessaryChaining=d},72983(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WStaticArrowW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" => "}}t.WStaticArrowW=o},73537(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetMargin=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetMargin=class{getMatcher(){const e=(0,s.seq)("SET MARGIN",o.Source,(0,s.opt)(o.Source));return(0,s.verNot)(i.Version.Cloud,e)}}},73612(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteReport=void 0;const s=n(82245),o=n(93170);t.DeleteReport=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},73639(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CommitEntities=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(14365),a=n(20572);t.CommitEntities=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target)){const e=null==n?void 0:n.findDirectExpression(s.InlineData);e?r.InlineData.runSyntax(e,t,a.VoidType.get("CommitEntities")):i.Target.runSyntax(n,t)}}}},73734(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TestSeamName=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.regex)(/^[\w%\$\*]+$/),(0,s.starPrio)((0,s.seq)((0,s.tok)(o.Dash),(0,s.regex)(/^[\w%\$\*]+$/))))}}t.TestSeamName=i},73873(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProvideFieldName=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.regex)(/^(?!(?:FROM|BETWEEN|WHERE)$)(\/\w+\/)?(\w+~(\w+|\*)|\w+)$/i),(0,o.optPrio)((0,o.seq)((0,o.tok)(s.Dash),(0,o.regex)(/^\w+$/i))))}}t.ProvideFieldName=i},74008(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LockObject=void 0;const s=n(20572),o=n(5518),i=n(80300);class r extends i.AbstractObject{getType(){return"ENQU"}getAllowedNaming(){return{maxLength:16,customRegex:/^(\/[A-Z_\d]{3,8}\/)?E[A-Z0-9_]+$/i,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}getPrimaryTable(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.primaryTable}parseType(e){var t;this.parse();const n=[],i=new o.DDIC(e);if(null===(t=this.parsedXML)||void 0===t?void 0:t.primaryTable){const t=i.lookupTableOrView2(this.parsedXML.primaryTable);return t?(n.push({object:t}),e.getDDICReferences().setUsing(this,n),t.parseType(e)):i.inErrorNamespace(this.parsedXML.primaryTable)?new s.UnknownType(this.parsedXML.primaryTable+" not found"):s.VoidType.get(this.parsedXML.primaryTable)}return new s.UnknownType("Parsing error")}parse(){var e,t;if(this.parsedXML)return{updated:!1,runtime:0};const n=Date.now();this.parsedXML={};const s=super.parseRaw2();return void 0===s||void 0===s.abapGit||void 0===s.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.primaryTable=null===(e=s.abapGit["asx:abap"]["asx:values"].DD25V)||void 0===e?void 0:e.ROOTTAB,this.parsedXML.description=null===(t=s.abapGit["asx:abap"]["asx:values"].DD25V)||void 0===t?void 0:t.DDTEXT,{updated:!0,runtime:Date.now()-n})}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}}t.LockObject=r},74172(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionParameters=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("EXPORTING",o.FunctionExporting),t=(0,s.seq)("IMPORTING",o.ParameterListT),n=(0,s.seq)("CHANGING",o.ParameterListT),i=(0,s.seq)("TABLES",o.ParameterListT),r=(0,s.seq)("EXCEPTIONS",(0,s.optPrio)((0,s.altPrio)(o.ParameterListExceptions,o.Field)));return(0,s.seq)((0,s.optPrio)(e),(0,s.optPrio)(t),(0,s.optPrio)(i),(0,s.optPrio)(n),(0,s.optPrio)(r))}}t.FunctionParameters=i},74279(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedObjectNaming=t.AllowedObjectNamingConf=void 0;const s=n(71759),o=n(86696),i=n(77465),r=/^(\/[A-Z_\d]{3,8}\/)?[A-Z_\d<> ]+$/i;class a extends i.BasicRuleConfig{}t.AllowedObjectNamingConf=a,t.AllowedObjectNaming=class{constructor(){this.conf=new a}getMetadata(){return{key:"allowed_object_naming",title:"Allowed object naming",shortDescription:"Enforces basic name length and namespace restrictions, see note SAP 104010",tags:[o.RuleTag.Naming,o.RuleTag.SingleFile]}}initialize(e){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){const t=e.getAllowedNaming(),n=e.getName();let o="";return n.length>t.maxLength?o="Name exceeds max length, allowed is "+t.maxLength:!1===t.allowNamespace&&n.indexOf("/")>=0?o="Namespace not allowed for object type":void 0!==t.customRegex?null===n.match(t.customRegex)&&(o="Name not allowed, expected to match "+t.customRegex.toString()):null===n.match(r)&&(o="Name not allowed"),o.length>0?[s.Issue.atRow(e.getFiles()[0],1,o,this.getMetadata().key,this.conf.severity)]:[]}}},74339(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AddCorresponding=void 0;const s=n(3125),o=n(49028),i=n(82245);t.AddCorresponding=class{getMatcher(){const e=(0,s.seq)("ADD-CORRESPONDING",i.Source,"TO",i.Target);return(0,s.verNot)(o.Version.Cloud,e)}}},74353(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Documentation=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DOCV"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.Documentation=o},74367(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SmartForm=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SSFO"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SmartForm=o},74572(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndOn=void 0;const s=n(3125),o=n(49028);t.EndOn=class{getMatcher(){const e=(0,s.str)("ENDON");return(0,s.verNot)(o.Version.Cloud,e)}}},74650(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NameValidator=void 0,t.NameValidator=class{static violatesRule(e,t,n){if(n.ignoreNames&&n.ignoreNames.indexOf(e.toUpperCase())>=0)return!1;for(const t of n.ignorePatterns||[])if(new RegExp(t,"i").test(e))return!1;return n.patternKind&&"required"!==n.patternKind?!0===t.test(e):!1===t.test(e)}}},74851(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WParenLeftW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" ( "}}t.WParenLeftW=o},74887(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldCatalog=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ASFC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.FieldCatalog=o},74910(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EcattTestDataContainer=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ECTD"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.EcattTestDataContainer=o},74952(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessConfigurationMaintenanceObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SMBC"}getAllowedNaming(){return{maxLength:60,allowNamespace:!0}}getDescription(){}}t.BusinessConfigurationMaintenanceObject=o},74970(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFieldsLoop=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("FIELDS",(0,s.opt)("DISTINCT"),o.SQLFieldListLoop)}}t.SQLFieldsLoop=i},74988(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnd=void 0;const s=n(3125),o=n(82245);t.TypeEnd=class{getMatcher(){return(0,s.seq)("TYPES","END OF",o.NamespaceSimpleName)}}},75e3(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentChain=void 0;const s=n(3125),o=n(82245),i=n(7756);class r extends s.Expression{getRunnable(){const e=(0,s.seq)(o.ComponentName,(0,s.star)((0,s.altPrio)((0,s.seq)(o.ArrowOrDash,(0,s.altPrio)("*",o.ComponentName)),o.TableExpression)));return(0,s.seq)(e,(0,s.optPrio)(i.TableBody),(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength))}}t.ComponentChain=r},75133(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneSplashScreen=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN12"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneSplashScreen=o},75177(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateDatabase=void 0;const s=n(82245),o=n(93170),i=n(2403),r=n(20572),a=n(15838),c=n(93422),l=n(85913),d=n(53414);t.UpdateDatabase=class{runSyntax(e,t){const n=e.findFirstExpression(s.DatabaseTable);void 0!==n&&l.DatabaseTable.runSyntax(n,t);const u=e.findDirectExpression(s.DatabaseTable),p=null==u?void 0:u.getFirstToken();if(u&&p){const n=t.scope.getDDIC().lookupTable(p.getStr());if(n instanceof r.StructureType){t.scope.push(i.ScopeType.OpenSQL,"UPDATE",p.getStart(),t.filename);for(const s of n.getComponents()){const n=new c.Identifier(e.getFirstToken().getStart(),s.name),o=new a.TypedIdentifier(n,t.filename,s.type);t.scope.addIdentifier(o)}}}for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Dynamic))d.Dynamic.runSyntax(n,t);t.scope.getType()===i.ScopeType.OpenSQL&&t.scope.pop(e.getLastToken().getEnd())}}},75252(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StatementParser=t.STATEMENT_MAX_TOKENS=void 0;const s=n(50612),o=n(82245),i=n(89301),r=n(75457),a=n(44684),c=n(3125),l=n(52024),d=n(53029),u=n(89301);t.STATEMENT_MAX_TOKENS=1e3;class p{constructor(){this.map={};for(const e of a.ArtifactsABAP.getStatements()){const t=e.getMatcher().first();if(0===t.length)throw new Error("StatementMap, first must have contents");for(const n of t)this.map[n]?this.map[n].push({statement:e}):this.map[n]=[{statement:e}]}}lookup(e){const t=this.map[e.toUpperCase()];if(void 0===t)return[];if(void 0===t[0].matcher)for(const e of t)e.matcher=e.statement.getMatcher();return t}}class f{constructor(e,t){this.file=e,this.tokens=t,this.statements=[]}addUnknown(e,t,n){const s=new r.StatementNode(new l.Unknown,n);s.setChildren(this.tokensToNodes(e,t)),this.statements.push(s)}toResult(){return{file:this.file,tokens:this.tokens,statements:this.statements}}tokensToNodes(e,t){const n=[];for(const t of e)n.push(new r.TokenNode(t));for(const e of t)n.push(new r.TokenNode(e));return n}}class g{constructor(e,t){g.map||(g.map=new p),this.version=e,this.reg=t}run(e,t){const n=new d.ExpandMacros(t,this.version,this.reg),s=e.map((e=>new f(e.file,e.tokens)));for(const e of s)this.process(e),this.categorize(e),n.find(e.statements,e.file);for(const e of s){const t=n.handleMacros(e.statements,e.file);e.statements=t.statements,!0===t.containsUnknown&&this.lazyUnknown(e),this.nativeSQL(e)}return s.map((e=>e.toResult()))}tokensToNodes(e){const t=[];for(const n of e)t.push(new r.TokenNode(n));return t}lazyUnknown(e){const t=[];for(let n of e.statements){if(n.get()instanceof l.Unknown){const e=n.concatTokens().toUpperCase();if(!1===e.startsWith("CALL METHOD ")&&!1===e.startsWith("RAISE EXCEPTION TYPE ")&&!1===e.startsWith("READ TABLE ")&&!1===e.startsWith("LOOP AT ")&&!1===e.startsWith("SELECT SINGLE ")&&!1===e.startsWith("CALL FUNCTION "))for(const{first:e,second:s}of this.buildSplits(n.getTokens())){if(1===s.length)continue;const o=this.categorizeStatement(new r.StatementNode(new l.Unknown).setChildren(this.tokensToNodes(s)));if(!(o.get()instanceof l.Unknown||o.get()instanceof l.Empty)){t.push(new r.StatementNode(new l.Unknown).setChildren(this.tokensToNodes(e))),n=o;break}}}t.push(n)}e.statements=t}buildSplits(e){const t=[],n=[];let s=e[0].getRow();for(let o=0;o<e.length;o++)e[o].getRow()!==s&&t.push({first:[...n],second:[...e].splice(o)}),s=e[o].getRow(),n.push(e[o]);return t}nativeSQL(e){let t=!1;for(let n=0;n<e.statements.length;n++){const i=e.statements[n],a=i.get();if(a instanceof s.ExecSQL||a instanceof s.MethodImplementation&&i.findDirectExpression(o.Language))t=!0;else if(!0===t)if(a instanceof s.EndExec||a instanceof s.EndMethod)t=!1;else if(e.statements[n]=new r.StatementNode(new l.NativeSQL).setChildren(this.tokensToNodes(i.getTokens())),i.concatTokens().toUpperCase().endsWith("ENDMETHOD.")){const o=i.getTokens(),a=this.tokensToNodes(o.slice(o.length-2,o.length)),c=this.tokensToNodes(o.slice(0,o.length-2));e.statements[n]=new r.StatementNode(new l.NativeSQL).setChildren(c);const d=new r.StatementNode(new s.EndMethod).setChildren(a);e.statements.splice(n+1,0,d),t=!1}}}categorize(e){const t=[];for(const n of e.statements)t.push(this.categorizeStatement(n));e.statements=t}categorizeStatement(e){let n=e;const s=e.getChildren().length,o=e.getLastToken(),a=o instanceof i.Punctuation;if(1===s&&a){const e=n.getTokens();n=new r.StatementNode(new l.Empty).setChildren(this.tokensToNodes(e))}else n.get()instanceof l.Unknown&&(a?n=this.match(n):s>t.STATEMENT_MAX_TOKENS?n=e:1===s&&o instanceof u.Pragma&&(n=new r.StatementNode(new l.Empty,void 0,[o])));return n}removePragma(e){const t=[],n=[];for(let s=0;s<e.length-1;s++){const o=e[s];o instanceof i.Pragma?n.push(o):t.push(o)}return{tokens:t,pragmas:n}}match(e){const t=e.getTokens(),{tokens:n,pragmas:s}=this.removePragma(t);if(0===n.length)return new r.StatementNode(new l.Empty).setChildren(this.tokensToNodes(t));for(const o of g.map.lookup(n[0].getStr())){const i=c.Combi.run(o.matcher,n,this.version);if(i){const n=t[t.length-1];return i.push(new r.TokenNode(n)),new r.StatementNode(o.statement,e.getColon(),s).setChildren(i)}}for(const o of g.map.lookup("")){const i=c.Combi.run(o.matcher,n,this.version);if(i){const n=t[t.length-1];return i.push(new r.TokenNode(n)),new r.StatementNode(o.statement,e.getColon(),s).setChildren(i)}}return e}process(e){let t,n=[],s=[];for(const o of e.tokens){if(o instanceof i.Comment){e.statements.push(new r.StatementNode(new l.Comment).setChildren(this.tokensToNodes([o])));continue}n.push(o);const a=o.getStr();1===a.length&&("."===a?(e.addUnknown(s,n,t),n=[],s=[],t=void 0):","===a&&s.length>0?(e.addUnknown(s,n,t),n=[]):":"===a&&void 0===t?(t=o,n.pop(),s.push(...n),n=[]):":"===a&&n.pop())}n.length>0&&e.addUnknown(s,n,t)}}t.StatementParser=g},75358(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenerateDynpro=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GenerateDynpro=class{getMatcher(){const e=(0,s.seq)("LINE",o.Target),t=(0,s.seq)("WORD",o.Target),n=(0,s.seq)("GENERATE DYNPRO",o.Source,o.Source,o.Source,o.Source,"ID",o.Source,"MESSAGE",o.Target,(0,s.per)(e,t));return(0,s.verNot)(i.Version.Cloud,n)}}},75405(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplateSource=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)(o.Source,(0,s.optPrio)(o.StringTemplateFormatting))}}t.StringTemplateSource=i},75457(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(89430),t),o(n(13911),t),o(n(24727),t),o(n(80387),t),o(n(131),t)},75512(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxCheck=void 0;const s=n(82245),o=n(93170),i=n(9646);t.SyntaxCheck=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},75525(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImplicitStartOfSelection=t.ImplicitStartOfSelectionConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(94967),a=n(86696),c=n(84383),l=n(75457),d=n(94894);class u extends i.BasicRuleConfig{}t.ImplicitStartOfSelectionConf=u;class p extends o.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"implicit_start_of_selection",title:"Implicit START-OF-SELECTION",shortDescription:"Add explicit selection screen event handling",extendedInformation:"Only runs for executable programs\n\nhttps://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapstart-of-selection.htm",tags:[a.RuleTag.SingleFile],badExample:"REPORT zfoo.\nWRITE 'hello'.",goodExample:"START-OF-SELECTION.\n  WRITE 'hello'."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];if(!(t instanceof c.Program)||t.isInclude())return n;const o=e.getStructure();if(void 0===o)return[];let i=!1,a=[];for(const t of o.getChildren()||[])if(d.SELECTION_EVENTS.some((e=>t.get()instanceof e))){if(!1===i&&a.length>0){let t=a[0];t instanceof l.StructureNode&&(t=t.getFirstStatement()),n.push(s.Issue.atStatement(e,t,"Implicit START-OF-SELECTION",this.getMetadata().key,this.getConfig().severity))}a=[],i=!0}else if(t.get()instanceof r.Normal){const e=t;if(d.DECLARATION_STUFF.some((t=>{var n;return(null===(n=e.getFirstStatement())||void 0===n?void 0:n.get())instanceof t})))continue;a.push(t)}else!0===i&&(i=!1),a=[];if(!1===i&&a.length>0){let t=a[0];t instanceof l.StructureNode&&(t=t.getFirstStatement()),n.push(s.Issue.atStatement(e,t,"Implicit START-OF-SELECTION",this.getMetadata().key,this.getConfig().severity))}return n}}t.ImplicitStartOfSelection=p},75584(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LSPUtils=void 0;const s=n(75457),o=n(2088),i=n(12620),r=n(86789),a=n(46203);class c{static getABAPFile(e,t){const n=e.getFileByName(t);if(void 0===n)return;const s=e.findObjectForFile(n);if(null==s||s.parse(),s instanceof i.ABAPObject)for(const e of s.getABAPFiles())if(e.getFilename().toUpperCase()===t.toUpperCase())return e}static tokenToRange(e){return a.Range.create(e.getStart().getRow()-1,e.getStart().getCol()-1,e.getEnd().getRow()-1,e.getEnd().getCol()-1)}static positionToLS(e){return a.Position.create(e.getRow()-1,e.getCol()-1)}static identiferToLocation(e){return{uri:e.getFilename(),range:c.tokenToRange(e.getToken())}}static findCursor(e,t){const n=c.getABAPFile(e,t.textDocument.uri);if(void 0===n)return;const s=new r.Position(t.position.line+1,t.position.character+1);for(const e of n.getStatements()){const t=this.buildStack(e,s,[e]);if(void 0!==t)return{token:t.token,identifier:new o.Identifier(t.token,n.getFilename()),stack:t.stack,snode:e}}}static buildStack(e,t,n){const o=n;for(const n of e.getChildren())if(n instanceof s.TokenNode){const e=n.getFirstToken();if(e.getRow()===t.getRow()&&e.getCol()<=t.getCol()&&e.getCol()+e.getStr().length>t.getCol())return{token:e,stack:o}}else{const e=this.buildStack(n,t,o.concat([n]));if(void 0!==e)return e}}}t.LSPUtils=c},75625(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Back=void 0;const s=n(3125),o=n(49028);t.Back=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"BACK")}}},75787(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertDatabase=void 0;const s=n(3125),o=n(82245),i=n(89301);t.InsertDatabase=class{getMatcher(){const e=(0,s.seq)((0,s.tok)(i.WParenLeftW),o.Select,(0,s.tok)(i.WParenRightW)),t=(0,s.seq)((0,s.opt)(o.SQLClient),(0,s.opt)(o.DatabaseConnection),"FROM",(0,s.opt)("TABLE"),(0,s.alt)(o.SQLSource,e),(0,s.opt)("ACCEPTING DUPLICATE KEYS")),n=(0,s.seq)(o.DatabaseTable,(0,s.opt)((0,s.alt)(t,o.SQLClient,o.DatabaseConnection))),r=(0,s.seq)("INTO",o.DatabaseTable,(0,s.opt)(o.SQLClient),(0,s.opt)(o.DatabaseConnection),"VALUES",o.SQLSource);return(0,s.seq)("INSERT",(0,s.alt)(n,r))}}},75802(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Submit=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Submit=class{getMatcher(){const e=(0,s.seq)("SIGN",o.Source),t=(0,s.alt)("=","EQ","IN","NE","CP","GE","LE","INCL","GT","LT"),n=(0,s.seq)(t,o.Source),r=(0,s.seq)("BETWEEN",o.Source,"AND",o.Source),a=(0,s.seq)("WITH SELECTION-TABLE",o.Source),c=(0,s.seq)("WITH",o.FieldSub,(0,s.alt)(n,r),(0,s.optPrio)(e)),l=(0,s.altPrio)(o.IncludeName,o.Dynamic),d=(0,s.seq)("VIA JOB",o.Source,"NUMBER",o.Source),u=(0,s.str)("EXPORTING LIST TO MEMORY"),p=(0,s.seq)("SPOOL PARAMETERS",o.Source),f=(0,s.seq)("ARCHIVE PARAMETERS",o.Source),g=(0,s.seq)("LINE-SIZE",o.Source),h=(0,s.seq)("LINE-COUNT",o.Source),T=(0,s.seq)("USER",o.Source),m=(0,s.seq)("USING SELECTION-SET",o.Source),y=(0,s.seq)("USING SELECTION-SETS OF PROGRAM",o.Source),S=(0,s.seq)("USING SELECTION-SCREEN",o.Source),v=(0,s.seq)("WITH FREE SELECTIONS",o.Source),E=(0,s.seq)("NEW LIST IDENTIFICATION",o.Source),C=(0,s.seq)("LAYOUT",o.Source),b=(0,s.seq)("SAP COVER PAGE",o.Source),I=(0,s.seq)("COPIES",o.Source),D=(0,s.seq)("DATASET EXPIRATION",o.Source),x=(0,s.seq)("COVER TEXT",o.Source),P=(0,s.seq)("LIST NAME",o.Source),A=(0,s.seq)("KEEP IN SPOOL",o.Source),N=(0,s.seq)("IMMEDIATELY",o.Source),O=(0,s.seq)("DESTINATION",o.Source),R=(0,s.seq)("LANGUAGE",o.Source),M=(0,s.per)((0,s.plus)(c),a,(0,s.plus)(c),p,g,h,f,T,m,y,A,b,N,C,O,x,P,R,v,E,S,I,D,"TO SAP-SPOOL","WITHOUT SPOOL DYNPRO","VIA SELECTION-SCREEN",u,o.AndReturn,d),k=(0,s.seq)("SUBMIT",l,(0,s.opt)(M));return(0,s.verNot)(i.Version.Cloud,k)}}},76037(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Plus=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"+"}}t.Plus=o},76093(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InfoObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IOBJ"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.InfoObject=o},76140(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnreachableCode=t.UnreachableCodeConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(52024),a=n(50612),c=n(82245),l=n(86696);class d extends i.BasicRuleConfig{}t.UnreachableCodeConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"unreachable_code",title:"Unreachable code",shortDescription:"Checks for unreachable code.",tags:[l.RuleTag.SingleFile],badExample:"RETURN.\nWRITE 'hello'.",goodExample:"WRITE 'hello'.\nRETURN."}}getMessage(){return"Unreachable code"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=!1;for(const o of e.getStatements())if(!(o.get()instanceof r.Comment||o.get()instanceof r.MacroContent||o.get()instanceof r.Empty))if(this.isExit(o))n=!0;else if(this.isStructure(o.get()))n=!1;else if(!0===n){const i=s.Issue.atStatement(e,o,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(i),n=!1}return t}isExit(e){const t=e.get();return t instanceof a.Submit&&void 0===e.findFirstExpression(c.AndReturn)||(t instanceof a.Leave&&void 0===e.findFirstExpression(c.AndReturn)?!e.concatTokens().includes(" TO LIST-PROCESSING"):t instanceof a.Return||t instanceof a.Continue||t instanceof a.Exit||t instanceof a.Raise)}isStructure(e){return e instanceof a.EndIf||e instanceof a.Else||e instanceof a.EndLoop||e instanceof a.EndTry||e instanceof a.EndMethod||e instanceof a.EndModule||e instanceof a.EndForm||e instanceof a.EndTestSeam||e instanceof a.EndAt||e instanceof a.EndSelect||e instanceof a.AtSelectionScreen||e instanceof a.EndFunction||e instanceof a.EndCase||e instanceof a.EndWhile||e instanceof a.EndDo||e instanceof a.Cleanup||e instanceof a.When||e instanceof a.WhenOthers||e instanceof a.WhenType||e instanceof a.Catch||e instanceof a.ElseIf}}t.UnreachableCode=u},76184(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SuperclassFinal=t.SuperclassFinalConf=void 0;const s=n(71759),o=n(99732),i=n(84383),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.SuperclassFinalConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"superclass_final",title:"Super class final",shortDescription:"Checks that classes which are inherited from are not declared as FINAL.",tags:[a.RuleTag.Syntax]}}getMessage(){return"Superclasses cannot be FINAL"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];for(const o of e.getInfo().listClassDefinitions()){const r=o.superClassName;if(void 0===r)continue;let a,c=!0;if(t instanceof i.Class&&e.getFilename().match(/\.clas\.abap$/)&&(c=!1),c)for(const e of t.getABAPFiles())if(a=e.getInfo().getClassDefinitionByName(r),void 0!==a)break;if(void 0===a){const e=this.reg.getObject("CLAS",r);e&&(a=e.getClassDefinition())}if(void 0!==a){if(!0===a.isFinal){const e=s.Issue.atIdentifier(o.identifier,this.getMessage(),this.getMetadata().key,this.conf.severity);n.push(e)}}else{const e='Super class "'+r+'" not found',t=s.Issue.atIdentifier(o.identifier,e,this.getMetadata().key,this.conf.severity);n.push(t)}}return n}}t.SuperclassFinal=l},76230(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameGlobalInterface=void 0;const s=n(50612),o=n(82245),i=n(46203),r=n(75584),a=n(33073),c=n(18260);t.RenameGlobalInterface=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof c.Interface))throw new Error("not an interface");const l=e.getMainABAPFile();if(void 0===l)throw new Error("Main file not found");let d=[];{const e=[];for(const t of l.getStatements())if(t.get()instanceof s.Interface){const s=t.findFirstExpression(o.InterfaceName);if(void 0===s)continue;e.push(i.TextEdit.replace(r.LSPUtils.tokenToRange(s.getFirstToken()),n.toLowerCase()))}d.push(i.TextDocumentEdit.create({uri:l.getFilename(),version:1},e))}const u=new a.RenamerHelper(this.reg);return d=d.concat(u.buildXMLFileEdits(e,"CLSNAME",t,n)),d=d.concat(u.renameFiles(e,t,n)),d=d.concat(u.renameReferences(e.getIdentifier(),t,n)),{documentChanges:d}}}},76240(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCondSub=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.opt)("NOT"),(0,s.tok)(o.WParenLeftW),i.ComponentCond,(0,s.altPrio)((0,s.tok)(o.WParenRightW),(0,s.tok)(o.ParenRightW)))}}t.ComponentCondSub=r},76342(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSource3=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)(o.Constant,o.TextElement,o.FieldChain)}}t.SimpleSource3=i},76382(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XMLConsistency=t.XMLConsistencyConf=void 0;const s=n(71759),o=n(86696),i=n(84383),r=n(77465),a=n(94603);class c extends r.BasicRuleConfig{}t.XMLConsistencyConf=c,t.XMLConsistency=class{constructor(){this.conf=new c}getMetadata(){return{key:"xml_consistency",title:"XML consistency",shortDescription:"Checks the consistency of main XML files, eg. naming for CLAS and INTF objects",tags:[o.RuleTag.Naming,o.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){var t,n;const o=[],r=e.getXMLFile();if(void 0===r)return o;const c=e.getXML();if(c){const e=a.XMLValidator.validate(c);!0!==e&&o.push(s.Issue.atRow(r,1,"XML parser error: "+e.err.msg,this.getMetadata().key,this.conf.severity))}if(e instanceof i.Class){const n=e.getNameFromXML();void 0===n?o.push(s.Issue.atRow(r,1,"Name undefined in XML",this.getMetadata().key,this.conf.severity)):e.getDescription()&&e.getDescription().length>60?o.push(s.Issue.atRow(r,1,"Description too long",this.getMetadata().key,this.conf.severity)):n!==e.getName().toUpperCase()?o.push(s.Issue.atRow(r,1,"Name in XML does not match object",this.getMetadata().key,this.conf.severity)):void 0!==(null===(t=e.getMainABAPFile())||void 0===t?void 0:t.getStructure())&&void 0===e.getClassDefinition()&&o.push(s.Issue.atRow(r,1,"Class matching XML name not found in ABAP file",this.getMetadata().key,this.conf.severity))}else if(e instanceof i.Interface){const t=e.getNameFromXML();void 0===t?o.push(s.Issue.atRow(r,1,"Name undefined in XML",this.getMetadata().key,this.conf.severity)):e.getDescription()&&e.getDescription().length>60?o.push(s.Issue.atRow(r,1,"Description too long",this.getMetadata().key,this.conf.severity)):t!==e.getName().toUpperCase()?o.push(s.Issue.atRow(r,1,"Name in XML does not match object",this.getMetadata().key,this.conf.severity)):void 0!==e.getDefinition()&&(null===(n=e.getDefinition())||void 0===n?void 0:n.getName().toUpperCase())!==t.toUpperCase()&&o.push(s.Issue.atRow(r,1,"Interface matching XML name not found in ABAP file",this.getMetadata().key,this.conf.severity))}return o}}},76392(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Check=void 0;const s=n(3125),o=n(82245);t.Check=class{getMatcher(){return(0,s.seq)("CHECK",(0,s.altPrio)(o.Cond,o.FieldSub))}}},76418(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticHighlighting=void 0;const s=n(46203),o=n(86789),i=n(297),r=n(89301),a=n(75457),c=n(50612),l=n(75584),d="source.abap",u="storage.type.block.abap";class p{constructor(e){this.reg=e,p.initLegend()}static semanticTokensLegend(){return this.initLegend(),{tokenTypes:p.tokenTypes,tokenModifiers:[]}}static initLegend(){if(0===p.tokenTypes.length){p.tokenTypeMap={},p.tokenTypeMap[d]=p.tokenTypes.length,p.tokenTypes.push(d),p.tokenTypeMap[u]=p.tokenTypes.length,p.tokenTypes.push(u);for(const e in s.SemanticTokenTypes)p.tokenTypeMap[e]=p.tokenTypes.length,p.tokenTypes.push(e)}}semanticTokensRange(e){const t=l.LSPUtils.getABAPFile(this.reg,e.textDocument.uri);if(void 0===t)return{data:[]};const n=new o.Position(e.start.line+1,e.start.character+1),p=new o.Position(e.end.line+1,e.end.character+1),f=[];for(const e of t.getStatements()){if(e.getFirstToken().getStart()instanceof i.VirtualPosition)continue;if(e.getFirstToken().getStart().isAfter(p))break;if(e.getLastToken().getEnd().isBefore(n))continue;const t=e.get();for(const n of e.getTokenNodes()){const e=n.get();let o=s.SemanticTokenTypes.keyword;e instanceof r.Punctuation?o=d:t instanceof c.Public||t instanceof c.Private||t instanceof c.Protected||t instanceof c.ClassDefinition||t instanceof c.ClassImplementation||t instanceof c.MethodImplementation||t instanceof c.EndMethod||t instanceof c.EndClass||t instanceof c.Interface||t instanceof c.EndInterface||t instanceof c.Form||t instanceof c.EndForm?o=u:e instanceof r.StringToken||e instanceof r.StringTemplate||e instanceof r.StringTemplateBegin||e instanceof r.StringTemplateEnd||e instanceof r.StringTemplateMiddle?o=s.SemanticTokenTypes.string:e instanceof r.Comment?o=s.SemanticTokenTypes.comment:n instanceof a.TokenNodeRegex&&(o=d);const i=n.getFirstToken();f.push({line:i.getStart().getRow()-1,startChar:i.getStart().getCol()-1,length:i.getStr().length,tokenType:o,tokenModifiers:[]})}}return{data:this.encodeTokens(f)}}encodeTokens(e){const t=[];let n,s;for(const o of e)void 0===n?t.push(o.line):t.push(o.line-n),n===o.line&&s?t.push(o.startChar-s):t.push(o.startChar),t.push(o.length),t.push(p.tokenTypeMap[o.tokenType]),t.push(0),n=o.line,s=o.startChar;return t}}t.SemanticHighlighting=p,p.tokenTypes=[]},76480(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MaintenanceAndTransportObject=void 0;const s=n(20572),o=n(5518),i=n(80300);class r extends i.AbstractObject{setDirty(){super.setDirty(),this.parsedXML=void 0}getType(){return"TOBJ"}getDescription(){}getAllowedNaming(){return{maxLength:31,allowNamespace:!0}}getArea(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.area}getObjectName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.objectName}getObjectType(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.objectType}parseType(e){var t,n,i;this.parse();const r=[],a=new o.DDIC(e);if((null===(t=this.parsedXML)||void 0===t?void 0:t.objectName)&&"S"===this.parsedXML.objectType){const t=a.lookupTableOrView2(this.parsedXML.objectName);return t?(r.push({object:t}),e.getDDICReferences().setUsing(this,r),t.parseType(e)):a.inErrorNamespace(this.parsedXML.objectName)?new s.UnknownType(this.parsedXML.objectName+" not found"):s.VoidType.get(this.parsedXML.objectName)}return"S"!==(null===(n=this.parsedXML)||void 0===n?void 0:n.objectType)&&(null===(i=this.parsedXML)||void 0===i?void 0:i.objectName)?s.VoidType.get(this.parsedXML.objectName):new s.UnknownType("Parsing error")}parse(){var e,t,n,s;if(this.parsedXML)return{updated:!1,runtime:0};const o=Date.now();this.parsedXML={};const i=super.parseRaw2();return void 0===i||void 0===i.abapGit||void 0===i.abapGit["asx:abap"]["asx:values"]?{updated:!1,runtime:0}:(this.parsedXML.area=null===(t=null===(e=i.abapGit["asx:abap"]["asx:values"].TOBJ)||void 0===e?void 0:e.TVDIR)||void 0===t?void 0:t.AREA,this.parsedXML.objectName=null===(n=i.abapGit["asx:abap"]["asx:values"].OBJH)||void 0===n?void 0:n.OBJECTNAME,this.parsedXML.objectType=null===(s=i.abapGit["asx:abap"]["asx:values"].OBJH)||void 0===s?void 0:s.OBJECTTYPE,{updated:!0,runtime:Date.now()-o})}}t.MaintenanceAndTransportObject=r},76609(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Any=void 0;const s=n(58720),o=n(94967),i=n(50612);t.Any=class{getMatcher(){return(0,s.star)((0,s.alt)((0,s.sta)(i.ClassLocalFriends),(0,s.sta)(i.ClassDeferred),(0,s.sta)(i.Report),(0,s.sta)(i.Program),(0,s.sta)(i.Parameter),(0,s.sta)(i.CheckSelectOptions),(0,s.sta)(i.Get),(0,s.sta)(i.Initialization),(0,s.sta)(i.InterfaceDeferred),(0,s.sta)(i.SelectionScreen),(0,s.sta)(i.SelectOption),(0,s.sta)(i.AtSelectionScreen),(0,s.sta)(i.AtLineSelection),(0,s.sta)(i.AtPF),(0,s.sta)(i.AtUserCommand),(0,s.sta)(i.StartOfSelection),(0,s.sta)(i.EndOfSelection),(0,s.sta)(i.LoadOfProgram),(0,s.sta)(i.TopOfPage),(0,s.sta)(i.EndOfPage),(0,s.sta)(i.Controls),(0,s.sta)(i.TypePools),(0,s.sta)(i.TypePool),(0,s.sta)(i.FunctionPool),(0,s.sub)(o.Normal),(0,s.sub)(o.Form),(0,s.sub)(o.Module),(0,s.sub)(o.FunctionModule),(0,s.sub)(o.Interface),(0,s.sub)(o.ClassDefinition),(0,s.sub)(o.ClassImplementation)))}}},76729(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertDatabase=void 0;const s=n(82245),o=n(93170),i=n(53414),r=n(85913);t.InsertDatabase=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.SimpleSource3))o.Source.runSyntax(n,t);for(const n of e.findAllExpressions(s.Dynamic))i.Dynamic.runSyntax(n,t);const n=e.findFirstExpression(s.DatabaseTable);void 0!==n&&r.DatabaseTable.runSyntax(n,t)}}},76756(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Static=void 0;const s=n(3125),o=n(82245);t.Static=class{getMatcher(){const e=(0,s.opt)((0,s.per)(o.Type,o.Value,o.Length,o.Decimals)),t=(0,s.seq)((0,s.opt)(o.ConstantFieldLength),e);return(0,s.seq)((0,s.alt)("STATIC","STATICS"),o.DefinitionName,(0,s.optPrio)(o.ConstantFieldLength),(0,s.alt)(t,o.TypeTable))}}},76826(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndOfDefinition=void 0;const s=n(3125),o=n(49028);t.EndOfDefinition=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"END-OF-DEFINITION")}}},76967(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectOption=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SelectOption=class{getMatcher(){const e=(0,s.alt)(o.Constant,o.FieldChain),t=(0,s.seq)("TO",e),n=(0,s.seq)("DEFAULT",e,(0,s.opt)(t)),r=(0,s.seq)("OPTION",(0,s.alt)("CP",o.Field)),a=(0,s.seq)("SIGN",o.Field),c=(0,s.seq)("MEMORY ID",o.SimpleSource1),l=(0,s.seq)("MATCHCODE OBJECT",o.SimpleFieldChain),d=(0,s.seq)("MODIF ID",o.Modif),u=(0,s.seq)("VISIBLE LENGTH",o.Source),p=(0,s.per)(n,r,a,c,l,u,d,"NO DATABASE SELECTION","LOWER CASE","NO-EXTENSION","NO INTERVALS","NO-DISPLAY","OBLIGATORY"),f=(0,s.seq)("SELECT-OPTIONS",o.FieldSub,"FOR",(0,s.alt)(o.FieldChain,o.Dynamic),(0,s.opt)(p));return(0,s.verNot)(i.Version.Cloud,f)}}},76971(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Integer8Type=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```int8```"}isGeneric(){return!1}toABAP(){return"int8"}containsVoid(){return!1}toCDS(){return"abap.int8"}}t.Integer8Type=o},76978(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceBeforeDot=t.SpaceBeforeDotConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(50612),a=n(84383),c=n(89301),l=n(86789),d=n(71249),u=n(86696),p=n(5518);class f extends i.BasicRuleConfig{constructor(){super(...arguments),this.ignoreGlobalDefinition=!0,this.ignoreExceptions=!0}}t.SpaceBeforeDotConf=f;class g extends o.ABAPRule{constructor(){super(...arguments),this.conf=new f}getMetadata(){return{key:"space_before_dot",title:"Space before dot",shortDescription:"Checks for extra spaces before dots at the ends of statements",extendedInformation:"\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#be-consistent\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#condense-your-code",tags:[u.RuleTag.Whitespace,u.RuleTag.Quickfix,u.RuleTag.Styleguide,u.RuleTag.SingleFile],badExample:"WRITE bar .",goodExample:"WRITE bar."}}getMessage(){return'Remove space before "," or "."'}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[];let o,i=0;if(void 0===e.getStructure())return[];const u=new p.DDIC(this.reg);if(this.conf.ignoreGlobalDefinition){const n=e.getStructure();if(t instanceof a.Class&&void 0!==n){const e=n.findFirstStatement(r.EndClass);void 0!==e&&(i=e.getFirstToken().getRow());const s=t.getClassDefinition();if(void 0!==s&&this.conf.ignoreExceptions&&u.isException(s,t))return[]}else if(t instanceof a.Interface&&void 0!==n){const e=n.findFirstStatement(r.EndInterface);void 0!==e&&(i=e.getFirstToken().getRow())}}for(const t of e.getTokens())if(!(t.getRow()<i)){if(void 0!==o&&t instanceof c.Punctuation&&o.getCol()+o.getStr().length<t.getCol()){const i=new l.Position(t.getStart().getRow(),o.getEnd().getCol()),r=new l.Position(t.getStart().getRow(),t.getStart().getCol()),a=d.EditHelper.deleteRange(e,i,r),c=s.Issue.atRange(e,i,r,this.getMessage(),this.getMetadata().key,this.conf.severity,a);n.push(c)}o=t}return n}}t.SpaceBeforeDot=g},77e3(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrefixIsCurrentClass=t.PrefixIsCurrentClassConf=void 0;const s=n(71759),o=n(99732),i=n(94967),r=n(77465),a=n(82245),c=n(86789),l=n(71249),d=n(86696);class u extends r.BasicRuleConfig{constructor(){super(...arguments),this.omitMeInstanceCalls=!0}}t.PrefixIsCurrentClassConf=u;class p extends o.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"prefix_is_current_class",title:"Prefix is current class",shortDescription:'Reports errors if the current class or interface references itself with "current_class=>"',extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#omit-the-self-reference-me-when-calling-an-instance-attribute-or-method",tags:[d.RuleTag.Styleguide,d.RuleTag.Quickfix,d.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){return this.checkClasses(e).concat(this.checkInterfaces(e))}checkInterfaces(e){var t;const n=e.getStructure();if(void 0===n)return[];const o=[];for(const r of n.findDirectStructures(i.Interface)){const n=null===(t=r.findFirstExpression(a.InterfaceName))||void 0===t?void 0:t.getFirstToken().getStr().toUpperCase();if(void 0===n)continue;const i=n+"=>";for(const t of r.findAllExpressions(a.TypeName))if(t.concatTokens().toUpperCase().startsWith(i)){const i=t.findDirectTokenByText("=>");if(void 0===i)continue;const r=new c.Position(i.getRow(),i.getCol()-n.length),a=new c.Position(i.getRow(),i.getCol()+2),d=l.EditHelper.deleteRange(e,r,a);o.push(s.Issue.atToken(e,t.getFirstToken(),"Reference to current interface can be omitted",this.getMetadata().key,this.conf.severity,d))}}return o}checkClasses(e){const t=e.getStructure();if(void 0===t)return[];const n=[],o=t.findDirectStructures(i.ClassImplementation);o.push(...t.findDirectStructures(i.ClassDefinition));for(const t of o){const o=t.findFirstExpression(a.ClassName).getFirstToken().getStr().toUpperCase(),i=o+"=>";for(const r of t.findAllStatementNodes()){const t=r.concatTokensWithoutStringsAndComments().toUpperCase();if(t.includes(i)){const t=r.findTokenSequencePosition(o,"=>");if(t){const r=new c.Position(t.getRow(),t.getCol()+o.length+2),a=l.EditHelper.deleteRange(e,t,r);n.push(s.Issue.atRange(e,t,r,'Reference to current class can be omitted: "'+i+'"',this.getMetadata().key,this.conf.severity,a))}}else if(!0===this.conf.omitMeInstanceCalls&&t.includes("ME->")&&r.findFirstExpression(a.MethodCall)){const t=r.findTokenSequencePosition("me","->");if(t){const o=new c.Position(t.getRow(),t.getCol()+4),i=l.EditHelper.deleteRange(e,t,o);n.push(s.Issue.atRange(e,t,o,"Omit 'me->' in instance calls",this.getMetadata().key,this.conf.severity,i))}}}}return n}}t.PrefixIsCurrentClass=p},77054(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSFunction=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)("COALESCE","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),t=(0,o.seq)("CONCAT","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),n=(0,o.seq)("CONCAT_WITH_SPACE","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),i=(0,o.seq)("DATS_ADD_DAYS","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),r=(0,o.seq)("DATS_ADD_MONTHS","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),a=(0,o.seq)("DATS_DAYS_BETWEEN","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),c=(0,o.seq)("DATS_IS_VALID","(",s.CDSFunctionInput,")"),l=(0,o.seq)("SUBSTRING","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),d=(0,o.seq)("BINTOHEX","(",s.CDSFunctionInput,")"),u=(0,o.seq)("HEXTOBIN","(",s.CDSFunctionInput,")"),p=(0,o.seq)("UPPER","(",s.CDSFunctionInput,")"),f=(0,o.seq)("LOWER","(",s.CDSFunctionInput,")"),g=(0,o.seq)("ABS","(",s.CDSFunctionInput,")"),h=(0,o.seq)("CEIL","(",s.CDSFunctionInput,")"),T=(0,o.seq)("FLOOR","(",s.CDSFunctionInput,")"),m=(0,o.seq)("ROUND","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),y=(0,o.seq)("DIV","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),S=(0,o.seq)("DIVISION","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),v=(0,o.seq)("TSTMP_TO_DATS","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),E=(0,o.seq)("TSTMP_TO_TIMS","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),C=(0,o.seq)("TSTMP_TO_DST","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),b=(0,o.seq)("DATS_TIMS_TO_TSTMP","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),I=(0,o.seq)("TSTMP_IS_VALID","(",s.CDSFunctionInput,")"),D=(0,o.seq)("TSTMP_CURRENT_UTCTIMESTAMP","(",")"),x=(0,o.seq)("TSTMP_SECONDS_BETWEEN","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),P=(0,o.seq)("TSTMP_ADD_SECONDS","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),A=(0,o.seq)("ABAP_SYSTEM_TIMEZONE","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),N=(0,o.seq)("ABAP_USER_TIMEZONE","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),O=(0,o.seq)("MOD","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),R=(0,o.seq)("REPLACE","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),M=(0,o.seq)("LPAD","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),k=(0,o.seq)("RPAD","(",s.CDSFunctionInput,",",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),F=(0,o.seq)("INSTR","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),L=(0,o.seq)("LENGTH","(",s.CDSFunctionInput,")"),_=(0,o.seq)("LTRIM","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),w=(0,o.seq)("RTRIM","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),j=(0,o.seq)("LEFT","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),B=(0,o.seq)("RIGHT","(",s.CDSFunctionInput,",",s.CDSFunctionInput,")"),U=(0,o.seq)(s.CDSName,"=",">",s.CDSFunctionInput),q=(0,o.seq)(U,(0,o.starPrio)((0,o.seq)(",",U))),V=(0,o.seq)("UNIT_CONVERSION","(",q,")"),G=(0,o.seq)("CURRENCY_CONVERSION","(",q,")"),W=(0,o.seq)("DECIMAL_SHIFT","(",q,")");return(0,o.altPrio)(l,e,v,t,E,p,f,g,h,T,m,y,S,n,c,a,P,x,D,I,A,N,d,u,i,r,C,b,O,j,B,M,k,F,L,_,w,R,V,G,W)}}t.CDSFunction=i},77083(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LexerStream=void 0,t.LexerStream=class{constructor(e){this.offset=-1,this.raw=e,this.row=0,this.col=0}advance(){return"\n"===this.currentChar()&&(this.col=1,this.row=this.row+1),this.offset===this.raw.length?(this.col=this.col-1,!1):(this.col=this.col+1,this.offset=this.offset+1,!0)}getCol(){return this.col}getRow(){return this.row}prevChar(){return this.offset-1<0?"":this.raw.substr(this.offset-1,1)}prevPrevChar(){return this.offset-2<0?"":this.raw.substr(this.offset-2,2)}currentChar(){return this.offset<0?"\n":this.offset>=this.raw.length?"":this.raw.substr(this.offset,1)}nextChar(){return this.offset+2>this.raw.length?"":this.raw.substr(this.offset+1,1)}nextNextChar(){return this.offset+3>this.raw.length?this.nextChar():this.raw.substr(this.offset+1,2)}getRaw(){return this.raw}getOffset(){return this.offset}}},77380(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassLocalFriends=void 0;const s=n(82245),o=n(36453),i=n(82054);t.ClassLocalFriends=class{runSyntax(e,t){const n=e.findAllExpressions(s.ClassName),r=n[0];if(r){const n=r.getFirstToken(),s=n.getStr();if("CLAS"===t.scope.getParentObj().getType()&&s.toUpperCase()!==t.scope.getParentObj().getName().toUpperCase()){const n="Befriending must be "+t.scope.getParentObj().getName().toUpperCase();return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}const a=t.scope.findClassDefinition(s);if(!a){const n=`Class ${s.toUpperCase()} not found`;return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}t.scope.addReference(n,a,o.ReferenceType.ObjectOrientedReference,t.filename)}for(let s=1;s<n.length;s++){const o=n[s].concatTokens();if(void 0===t.scope.existsObject(o)){const n=`Class ${o.toUpperCase()} not found`;return void t.issues.push((0,i.syntaxIssue)(t,e.getFirstToken(),n))}}}}},77444(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Multiply=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Multiply=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},77465(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BasicRuleConfig=void 0;const s=n(96493);t.BasicRuleConfig=class{constructor(){this.exclude=[],this.severity=s.Severity.Error}}},77573(e,t){Object.defineProperty(t,"__esModule",{value:!0})},77584(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyInternal=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(25037),a=n(45931),c=n(20572),l=n(82054);t.ModifyInternal=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);const n=e.findFirstExpression(s.Target),d=n;if(d){const s=i.Target.runSyntax(d,t);if(s instanceof c.VoidType||s instanceof c.AnyType||s instanceof c.UnknownType);else if(s instanceof c.TableType){if(e.findDirectTokenByText("TABLE")&&e.findDirectTokenByText("INDEX")&&!1===s.isWithHeader()){const n="Table does not have header line";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}else{if(!(s instanceof c.StructureType)){const n="Not an internal table";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}if(n.concatTokens().toUpperCase()!==s.getDDICName()){const n="Not an internal table";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}}const u=e.findDirectExpression(s.FSTarget);u&&r.FSTarget.runSyntax(u,t,void 0);for(const n of e.findDirectExpressions(s.ComponentCond))a.ComponentCond.runSyntax(n,t)}}},77586(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Protected=void 0;const s=n(3125);t.Protected=class{getMatcher(){return(0,s.str)("PROTECTED SECTION")}}},77587(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Classification=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"AVAS"}getAllowedNaming(){return{maxLength:32,allowNamespace:!0}}getDescription(){}}t.Classification=o},77668(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Loop=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(12579);t.Loop=class{getMatcher(){const e=(0,s.seq)("WHERE",(0,s.alt)(o.ComponentCond,o.Dynamic)),t=(0,s.ver)(i.Version.v740sp08,(0,s.seq)("GROUP BY",r.LoopGroupBy),i.Version.OpenABAP),n=(0,s.ver)(i.Version.v757,(0,s.seq)("STEP",o.Source)),a=(0,s.seq)("FROM",o.Source),c=(0,s.seq)("TO",o.Source),l=(0,s.seq)("USING KEY",(0,s.altPrio)(o.SimpleName,o.Dynamic)),d=(0,s.per)(o.LoopTarget,a,c,e,l,t,n),u=(0,s.seq)((0,s.opt)((0,s.seq)("SCREEN",(0,s.failCombinator)())),(0,s.opt)((0,s.ver)(i.Version.v740sp08,"GROUP",i.Version.OpenABAP)),o.LoopSource,(0,s.opt)(d));return(0,s.seq)("LOOP AT",u)}}},77777(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectLoop=void 0;const s=n(82245),o=n(56348);t.SelectLoop=class{runSyntax(e,t){const n=e.findDirectExpression(s.SelectLoop);n&&o.SelectLoop.runSyntax(n,t)}}},77959(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LSPLookup=void 0;const s=n(46203),o=n(50612),i=n(82245),r=n(52424),a=n(75584),c=n(15838),l=n(36453),d=n(56727),u=n(2403),p=n(84383),f=n(20941),g=n(52024),h=n(79543);t.LSPLookup=class{static lookup(e,t,n){var s,o;const i=this.findInclude(e,t);if(i){const e=this.ABAPFileResult(i);return{hover:"Include",definition:e,implementation:e}}const c=this.findFunctionModule(e);if(c)return{hover:"Function Module "+c};let l=n;if(n instanceof p.Program&&n.isInclude()){const s=new h.IncludeGraph(t).listMainForInclude(e.identifier.getFilename());1===s.length&&(l=t.findObjectForFile(t.getFileByName(s[0]))||n)}const u=new r.SyntaxLogic(t,l).run().spaghetti.lookupPosition(e.identifier.getStart(),e.identifier.getFilename());if(void 0===u)return;const T=u.findClassDefinition(e.token.getStr());if(T&&T.getStart().equals(e.token.getStart())){const t=a.LSPUtils.identiferToLocation(T);return{hover:"Class Definition, "+e.token.getStr(),definition:t,definitionId:T,implementation:void 0,scope:u}}const m=u.findInterfaceDefinition(e.token.getStr());if(m&&m.getStart().equals(e.token.getStart())){const t=a.LSPUtils.identiferToLocation(m);return{hover:"Interface Definition, "+e.token.getStr(),definition:t,definitionId:m,implementation:void 0,scope:u}}const y=u.findType(e.token.getStr());if(void 0!==y&&y.getStart().equals(e.token.getStart())){const t=a.LSPUtils.identiferToLocation(y);return{hover:"Type Definition, "+e.token.getStr()+"\n\n"+this.dumpType(y),definition:t,definitionId:y,scope:u}}const S=this.findMethodDefinition(e,u.getParent());if(void 0!==S&&S.getStart().equals(e.token.getStart())){const e=a.LSPUtils.identiferToLocation(S);return{hover:'Method Definition "'+S.getName()+'"',definition:e,definitionId:S,scope:u}}let v="";const E=t.getDDICReferences().listByFilename(e.identifier.getFilename(),e.identifier.getStart().getRow());for(const t of E)t.object&&t.token&&t.token.getStart().equals(e.identifier.getStart())&&(v+=`DDIC: ${t.object.getType()} ${t.object.getName()}`);const C=u.findVariable(e.token.getStr());if(void 0!==C&&C.getStart().equals(e.token.getStart())){const e="Variable Definition\n\n"+this.dumpType(C);let t;return v=""!==v?e+"\n_________________\n"+v:e,!1===C.getMeta().includes("built-in")&&(t=a.LSPUtils.identiferToLocation(C)),{hover:v,definition:t,implementation:t,definitionId:C,scope:u}}for(const t of[...u.listClassDefinitions(),...u.listInterfaceDefinitions()])for(const n of(null===(s=t.getMethodDefinitions())||void 0===s?void 0:s.getAll())||[])for(const t of(null===(o=n.getParameters())||void 0===o?void 0:o.getAll())||[])if(t.getStart().equals(e.token.getStart())){const n=a.LSPUtils.identiferToLocation(t);return{hover:"Method Parameter: "+e.token.getStr().replace("!",""),definition:n,definitionId:t,implementation:void 0,scope:u}}const b=this.searchReferences(u,e.token);if(b.length>0){for(const e of b)""!==v&&(v+="\n_________________\n"),v+=this.referenceHover(e,u,t);let e,n;return b[0].resolved&&(e=a.LSPUtils.identiferToLocation(b[0].resolved),e.uri===d.BuiltIn.filename&&(e=void 0),b[0].resolved instanceof f.FormDefinition&&(n=e)),{hover:v,definition:e,implementation:n,definitionId:b[0].resolved,scope:u}}if(e.snode.get()instanceof g.MacroCall){const n=t.getMacroReferences().findDefinitionByUsage(e.identifier.getFilename(),e.snode.getFirstToken());if(n)return{hover:"Macro Call",definition:{uri:null==n?void 0:n.filename,range:a.LSPUtils.tokenToRange(n.token)}}}return""!==v?{hover:v,scope:u}:void 0}static dumpType(e){let t=e.toText()+"\n\nType: "+e.getType().toText(0);return e.getValue()&&(t+="\n\nValue: ```"+e.getValue()+"```"),e.getMeta().length>0&&(t+="\n\nMeta: "+e.getMeta().join(", ")),!0===e.getType().containsVoid()&&(t+="\n\nContains Void types"),e.getType().getQualifiedName()&&(t+="\n\nQualified Type Name: ```"+e.getType().getQualifiedName()+"```"),e.getType().getRTTIName()&&(t+="\n\nRTTI Name: ```"+e.getType().getRTTIName()+"```"),!0===e.getType().isGeneric()&&(t+="\n\nIs Generic Type"),void 0!==e.getType().getConversionExit()&&(t+="\n\nConversion Exit: ```"+e.getType().getConversionExit()+"```"),void 0!==e.getType().getDDICName()&&(t+="\n\nDDIC Name: ```"+e.getType().getDDICName()+"```"),void 0!==e.getType().getDescription()&&(t+="\n\nDescription: "+e.getType().getDescription()),t}static referenceHover(e,t,n){var s,o,i,r,a;let u="";e.resolved&&(u="```"+e.resolved.getName()+"```");let p=`${e.referenceType} ${u}`;if(e.referenceType===l.ReferenceType.MethodReference&&(null===(s=e.extra)||void 0===s?void 0:s.ooName)){let s=t.findClassDefinition(e.extra.ooName);void 0===s&&(s=t.findInterfaceDefinition(e.extra.ooName)),void 0===s&&(s=null===(o=n.getObject("CLAS",e.extra.ooName))||void 0===o?void 0:o.getDefinition()),void 0===s&&(s=null===(i=n.getObject("INTF",e.extra.ooName))||void 0===i?void 0:i.getDefinition()),p+="\n\n"+this.hoverMethod(e.position.getName(),s)}else if(e.resolved instanceof c.TypedIdentifier)p+="\n\n"+this.dumpType(e.resolved);else if(e.referenceType===l.ReferenceType.BuiltinMethodReference){const t=d.BuiltIn.searchBuiltin(null===(a=null===(r=e.resolved)||void 0===r?void 0:r.getName())||void 0===a?void 0:a.toUpperCase());if(void 0===t)return"Error: builtin method signature not found";p+="\n\n"+this.methodParameters(t)}return e.resolved&&(p+="\n\n(Resolved)"),void 0!==e.extra&&Object.keys(e.extra).length>0&&(p+="\n\nExtra: "+JSON.stringify(e.extra)),p}static hoverMethod(e,t){if(void 0===t)return"class not found";const n=t.getMethodDefinitions().getByName(e);return void 0===n?"method not found in definition":this.methodParameters(n)}static methodParameters(e){let t="";const n=e.getParameters(),s=n.getImporting();if(s.length>0){t+="IMPORTING\n";for(const e of s)t+=this.singleParameter(e)}const o=n.getExporting();if(o.length>0){t+="EXPORTING\n";for(const e of o)t+=this.singleParameter(e)}const i=n.getChanging();if(i.length>0){t+="CHANGING\n";for(const e of i)t+=this.singleParameter(e)}const r=n.getReturning();if(r&&(t+="RETURNING\n"+this.singleParameter(r)),e.getRaising().length>0){t+="RAISING\n";for(const n of e.getRaising())t+="* "+n+"\n"}return t}static singleParameter(e){let t=e.getMeta().join(", ");return""!==t&&(t="(Meta: "+t+")"),"* "+e.getName()+t+" TYPE "+e.getType().toText(1)+"\n\n"}static searchReferences(e,t){const n=[];for(const s of e.getData().references)s.position.getStart().equals(t.getStart())&&n.push(s);const s=e.getParent();return s&&n.push(...this.searchReferences(s,t)),n}static ABAPFileResult(e){return{uri:e.getFilename(),range:s.Range.create(0,0,0,0)}}static findMethodDefinition(e,t){var n,s,r,a,c,l,d;if(void 0===t)return;if(t.getIdentifier().stype!==u.ScopeType.ClassDefinition&&t.getIdentifier().stype!==u.ScopeType.Interface||!(e.snode.get()instanceof o.MethodDef))return;const p=null===(n=e.snode.findFirstExpression(i.MethodName))||void 0===n?void 0:n.getFirstToken();return void 0===p||e.snode.findFirstExpression(i.Redefinition)||p.getStart().getCol()!==e.token.getStart().getCol()||p.getStart().getRow()!==e.token.getStart().getRow()?void 0:t.getIdentifier().stype===u.ScopeType.ClassDefinition?null===(a=null===(r=null===(s=t.getParent())||void 0===s?void 0:s.findClassDefinition(t.getIdentifier().sname))||void 0===r?void 0:r.getMethodDefinitions())||void 0===a?void 0:a.getByName(p.getStr()):null===(d=null===(l=null===(c=t.getParent())||void 0===c?void 0:c.findInterfaceDefinition(t.getIdentifier().sname))||void 0===l?void 0:l.getMethodDefinitions())||void 0===d?void 0:d.getByName(p.getStr())}static findFunctionModule(e){if(!(e.snode.get()instanceof o.CallFunction))return;const t=e.snode.findFirstExpression(i.FunctionName);if(void 0===t)return;const n=t.getFirstToken();return n.getStart().getCol()===e.token.getStart().getCol()&&n.getStart().getRow()===e.token.getStart().getRow()?n.getStr():void 0}static findInclude(e,t){if(!(e.snode.get()instanceof o.Include))return;const n=e.snode.findFirstExpression(i.IncludeName);if(void 0===n)return;const s=n.getFirstToken();if(s.getStart().getCol()!==e.token.getStart().getCol()||s.getStart().getRow()!==e.token.getStart().getRow())return;const r=t.getObject("PROG",s.getStr());return r?r.getABAPFiles()[0]:void 0}}},78006(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPFile=void 0;const s=n(89301),o=n(88124);class i extends o.AbstractFile{constructor(e,t,n,s,o){super(e.getFilename()),this.file=e,this.tokens=t,this.statements=n,this.structure=s,this.info=o}getRaw(){return this.file.getRaw()}getRawRows(){return this.file.getRawRows()}getInfo(){return this.info}getStructure(){return this.structure}getTokens(e=!0){if(!0===e)return this.tokens;{const e=[];return this.tokens.forEach((t=>{t instanceof s.Pragma||e.push(t)})),e}}getStatements(){return this.statements}}t.ABAPFile=i},78103(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Write=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Write=class{getMatcher(){const e=(0,s.seq)("USING",(0,s.altPrio)("NO EDIT MASK",(0,s.seq)("EDIT MASK",o.Source))),t=(0,s.alt)((0,s.altPrio)("ON","OFF"),(0,s.seq)("=",o.FieldSub)),n=(0,s.altPrio)("DD/MM/YY","MM/DD/YY","DD/MM/YYYY","MM/DD/YYYY","DDMMYY","MMDDYY","YYMMDD"),r=(0,s.seq)("AS",(0,s.altPrio)("LINE","ICON","CHECKBOX","SYMBOL")),a=(0,s.seq)("TO",o.Target),c=(0,s.per)(e,a,(0,s.seq)("EXPONENT",o.Source),"NO-GROUPING","NO-ZERO","CENTERED",(0,s.seq)("INPUT",(0,s.opt)(t)),"NO-GAP","LEFT-JUSTIFIED",r,(0,s.seq)("FRAMES",t),(0,s.seq)("HOTSPOT",(0,s.opt)(t)),"RIGHT-JUSTIFIED",(0,s.seq)("TIME ZONE",o.Source),(0,s.seq)("UNDER",o.Source),(0,s.seq)("STYLE",o.Source),(0,s.seq)("ROUND",o.Source),(0,s.seq)("QUICKINFO",o.Source),"ENVIRONMENT TIME FORMAT",n,(0,s.seq)("UNIT",o.Source),(0,s.seq)("INTENSIFIED",(0,s.opt)(t)),(0,s.seq)("INDEX",o.Source),(0,s.seq)("DECIMALS",o.Source),(0,s.seq)("INVERSE",(0,s.opt)(t)),o.Color,(0,s.seq)("CURRENCY",o.Source),"RESET","NO-SIGN"),l=(0,s.seq)("WRITE",(0,s.alt)((0,s.seq)("AT /",(0,s.opt)(o.Source),(0,s.opt)("NO-GAP")),(0,s.seq)((0,s.opt)(o.WriteOffsetLength),(0,s.alt)(o.Source,o.Dynamic,"/"),(0,s.opt)(c))));return(0,s.verNot)(i.Version.Cloud,l)}}},78166(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSRelation=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)("/",(0,o.regex)(/^[\w_]+$/),"/");return(0,o.seq)((0,o.opt)(e),(0,o.regex)(/^[\w_]+$/),(0,o.opt)(s.CDSAs))}}t.CDSRelation=i},78186(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.XGenericType=void 0;const s=n(97502);class o extends s.AbstractType{static get(){return this.singleton}constructor(){super()}toText(){return"```x```"}isGeneric(){return!0}toABAP(){throw new Error("x, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_CGENERIC"}}t.XGenericType=o,o.singleton=new o},78255(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpService=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"HTTP"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.HttpService=o},78446(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoAliases=t.NoAliasesConf=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(50612),a=n(86696);class c extends o.BasicRuleConfig{}t.NoAliasesConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"no_aliases",title:"No ALIASES",shortDescription:"Detects use of the ALIAS statement",extendedInformation:"Only one issue is reported for chained statements",tags:[a.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n;for(const o of e.getStatements())if(o.get()instanceof r.Aliases){if(n&&n.getColon()===o.getColon())continue;t.push(s.Issue.atStatement(e,o,"Do not use ALIASES",this.getMetadata().key,this.conf.severity)),n=o}return t}}t.NoAliases=l},78467(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessFunctionSetAssignment=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SFBS"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BusinessFunctionSetAssignment=o},78623(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptunePolicy=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN06"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptunePolicy=o},78691(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CorrespondingBody=void 0;const s=n(82245),o=n(93170);t.CorrespondingBody=class{static runSyntax(e,t,n){var i;if(void 0===e)return n;const r=null===(i=e.findDirectExpression(s.CorrespondingBodyBase))||void 0===i?void 0:i.findDirectExpression(s.Source);let a;r&&o.Source.runSyntax(r,t,n);for(const n of e.findDirectExpressions(s.Source))void 0===a?a=o.Source.runSyntax(n,t):o.Source.runSyntax(n,t);return n||a}}},78742(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NewlineBetweenMethods=t.NewlineBetweenMethodsConf=t.NewlineLogic=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(48420),a=n(50612),c=n(86696);var l;!function(e){e.Exact="exact",e.Less="less"}(l||(t.NewlineLogic=l={}));class d extends o.BasicRuleConfig{constructor(){super(...arguments),this.count=3,this.logic=l.Less}}t.NewlineBetweenMethodsConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"newline_between_methods",title:"New line between methods",shortDescription:"Checks for newlines between method implementations.",tags:[c.RuleTag.Whitespace,c.RuleTag.SingleFile]}}getMessage(){switch(this.conf.logic){case l.Exact:return`Exactly ${this.conf.count} newlines are required in between methods`;case l.Less:return`Less than ${this.conf.count} newlines and at least a single newline are required in between methods`;default:return""}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],o=e.getRawRows();if(!this.isConfigurationValid())return[];for(const i of e.getStatements()){let c=i.getStart().getRow();if(!(i.get()instanceof a.EndMethod)||(null===(t=o[c])||void 0===t?void 0:t.toUpperCase().includes("ENDCLASS.")))continue;let d=0;for(;r.SequentialBlank.isBlankOrWhitespace(o[c])&&d<=this.conf.count+1;)d++,c++;(d!==this.conf.count&&this.conf.logic===l.Exact||d>=this.conf.count&&this.conf.logic===l.Less||0===d)&&n.push(s.Issue.atStatement(e,i,this.getMessage(),this.getMetadata().key,this.conf.severity))}return n}isConfigurationValid(){return!(this.conf.count<1||1===this.conf.count&&this.conf.logic===l.Less)}}t.NewlineBetweenMethods=u},78870(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldGroup=void 0;const s=n(82245),o=n(15838),i=n(20572);t.FieldGroup=class{runSyntax(e,t){const n=e.findFirstExpression(s.Field);if(void 0===n)return;if(void 0===(null==n?void 0:n.concatTokens()))return;const r=new o.TypedIdentifier(null==n?void 0:n.getFirstToken(),t.filename,i.VoidType.get("FIELD-GROUP"));t.scope.addIdentifier(r)}}},78939(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineFS=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.tok)(o.ParenRightW),t=(0,s.tok)(o.ParenLeft),n=(0,s.seq)("FIELD-SYMBOL",t,i.TargetFieldSymbol,e);return(0,s.ver)(r.Version.v740sp02,n,r.Version.OpenABAP)}}t.InlineFS=a},79069(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassGlobal=void 0;const s=n(94967),o=n(50612),i=n(58720);t.ClassGlobal=class{getMatcher(){return(0,i.seq)((0,i.star)((0,i.sta)(o.TypePools)),(0,i.sub)(s.ClassDefinition),(0,i.sub)(s.ClassImplementation))}}},79117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSMetadataExtension=void 0;const s=n(80917),o=n(80300);class i extends o.AbstractObject{constructor(){super(...arguments),this.parserError=void 0,this.parsedData=void 0}getType(){return"DDLX"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}hasParserError(){return this.parserError}parse(){if(!1===this.isDirty())return{updated:!1,runtime:0};const e=Date.now();return this.parsedData={tree:void 0},this.parsedData.tree=(new s.CDSParser).parse(this.findSourceFile()),void 0===this.parsedData.tree&&(this.parserError=!0),this.dirty=!1,{updated:!0,runtime:Date.now()-e}}getDescription(){}findSourceFile(){return this.getFiles().find((e=>e.getFilename().endsWith(".asddlxs")||e.getFilename().endsWith(".acds")))}}t.CDSMetadataExtension=i},79175(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Body=void 0;const s=n(58720),o=n(17004);t.Body=class{getMatcher(){return(0,s.star)((0,s.sub)(o.Normal))}}},79256(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Include=void 0;const s=n(3125),o=n(82245);t.Include=class{getMatcher(){return(0,s.seq)("INCLUDE",o.IncludeName,(0,s.opt)("IF FOUND"))}}},79348(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeBegin=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeBegin=class{getMatcher(){return(0,s.seq)("TYPES","BEGIN OF",o.NamespaceSimpleName,(0,s.optPrio)((0,s.verNot)(i.Version.Cloud,"%_FINAL")))}}},79543(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IncludeGraph=void 0;const s=n(50612),o=n(82245),i=n(84383),r=n(34803),a=n(86789),c=n(71759),l=n(12620),d=n(96493),u=/^(\/\w+\/)?L.+XX$/;function p(e){const t=[];for(const n of e.getObjects())n instanceof l.ABAPObject&&t.push(n);return t}class f{constructor(){this.verticesIncludenameIndex={},this.verticesFilenameIndex={},this.edges={}}addVertex(e){void 0!==e.includeName&&(this.verticesIncludenameIndex[e.includeName.toUpperCase()]=e),this.verticesFilenameIndex[e.filename.toUpperCase()]=e}findVertexViaIncludename(e){return this.verticesIncludenameIndex[e.toUpperCase()]}findVertexByFilename(e){return this.verticesFilenameIndex[e.toUpperCase()]}addEdge(e,t){void 0===this.edges[e.filename]&&(this.edges[e.filename]=[]),this.edges[e.filename].push(t)}findTop(e){const t=[];for(const n of this.edges[e]||[])t.push(...this.findTop(n));if(0===t.length){const n=this.findVertexByFilename(e);void 0!==n&&t.push(n)}return t}}t.IncludeGraph=class{constructor(e,t=d.Severity.Error,n=!1){this.reg=e,this.issues=[],this.graph=new f,this.severity=t,this.allowUnused=n,this.build()}listMainForInclude(e){const t=[];if(void 0===e)return[];for(const n of this.graph.findTop(e))!1===n.include&&t.push(n.filename);return t}getIssuesFile(e){const t=[];for(const n of this.issues)n.getFilename()===e.getFilename()&&t.push(n);const n=this.graph.findVertexByFilename(e.getFilename());if(void 0!==n&&!1===this.allowUnused&&!0===n.include&&0===this.listMainForInclude(n.filename).length){const e=this.reg.getFileByName(n.filename);if(void 0===e)throw new Error("findUnusedIncludes internal error");const s=c.Issue.atPosition(e,new a.Position(1,1),"INCLUDE not used anywhere",(new r.CheckInclude).getMetadata().key,this.severity);t.push(s)}return t}build(){this.addVertices();for(const e of p(this.reg))for(const t of e.getABAPFiles())if(!t.getFilename().includes(".prog.screen_")&&!t.getFilename().includes(".fugr.screen_"))for(const e of t.getStatements())if(e.get()instanceof s.Include){const n=e.findFirstExpression(o.IncludeName);if(void 0===n)throw new Error("unexpected Include node");const s=n.getFirstToken().getStr().toUpperCase();if(s.match(u))continue;const i=this.graph.findVertexViaIncludename(s);if(void 0===i){if(!1===e.concatTokens().toUpperCase().includes("IF FOUND")){const n=c.Issue.atStatement(t,e,"Include "+s+" not found",(new r.CheckInclude).getMetadata().key,this.severity);this.issues.push(n)}}else if(!1===i.include){const n=c.Issue.atStatement(t,e,"Not possible to INCLUDE a main program, "+s,(new r.CheckInclude).getMetadata().key,this.severity);this.issues.push(n)}else this.graph.addEdge(i,t.getFilename())}}addVertices(){for(const e of p(this.reg))if(e instanceof i.Program){const t=e.getMainABAPFile();t&&this.graph.addVertex({filename:t.getFilename(),includeName:e.getName(),include:e.isInclude()})}else if(e instanceof i.TypePool){const t=e.getMainABAPFile();t&&this.graph.addVertex({filename:t.getFilename(),includeName:void 0,include:!1})}else if(e instanceof i.Class)for(const t of e.getSequencedFiles())this.graph.addVertex({filename:t.getFilename(),includeName:void 0,include:!1});else if(e instanceof i.FunctionGroup){for(const t of e.getIncludeFiles())this.graph.addVertex({filename:t.file.getFilename(),includeName:t.name,include:!0});const t=e.getMainABAPFile();t&&this.graph.addVertex({filename:t.getFilename(),includeName:void 0,include:!1})}}}},79851(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneStickyBanner=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN11"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneStickyBanner=o},79922(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLLexer=void 0;const s=n(89301),o=n(86789);t.DDLLexer=class{static run(e){const t=[],n=e.getRaw().replace(/\r/g,"").split("\n");for(const e of n)e.startsWith("@")||t.push(...e.split(" "));const i=[];for(const e of t)""!==e&&(e.endsWith(";")?(i.push(e.substr(0,e.length-1)),i.push(";")):i.push(e));return i.map((e=>new s.Identifier(new o.Position(1,1),e)))}}},79979(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetLocale=void 0;const s=n(82245),o=n(9646),i=n(93170);t.GetLocale=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},80017(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IncludeType=void 0;const s=n(82245),o=n(20572),i=n(46743),r=n(15838),a=n(82054),c=n(38788),l=n(36453);t.IncludeType=class{runSyntax(e,t){var n,d;const u=[],p=e.findFirstExpression(s.TypeName);if(void 0===p)throw new c.AssertError("IncludeType, unexpected node structure");const f=p.getFirstToken(),g=f.getStr(),h=void 0!==e.findDirectTokenByText("STRUCTURE");let T=new i.BasicTypes(t).parseType(p);if(T instanceof o.VoidType&&h||T instanceof o.UnknownType){const e=t.scope.findVariable(g);e&&(t.scope.addReference(f,e,l.ReferenceType.DataReadReference,t.filename),T=e.getType())}const m=null===(n=e.findExpressionAfterToken("AS"))||void 0===n?void 0:n.concatTokens();if(m&&T instanceof o.StructureType?T=new o.StructureType(T.getComponents().concat([{name:m,type:T,asInclude:!0}])):T instanceof o.TableType&&h&&(T=T.getRowType()),T instanceof o.VoidType)return T;if(T instanceof o.UnknownType)return T;if(!(T instanceof o.StructureType)){const e="not structured, "+g;return t.issues.push((0,a.syntaxIssue)(t,p.getFirstToken(),e)),o.VoidType.get(a.CheckSyntaxKey)}const y=null===(d=e.findExpressionAfterToken("SUFFIX"))||void 0===d?void 0:d.concatTokens();if(y&&T instanceof o.StructureType){const e=[];for(const t of T.getComponents())t.name!==m?e.push({name:t.name+y,type:t.type}):e.push(Object.assign(Object.assign({},t),{suffix:y,asInclude:t.asInclude}));T=new o.StructureType(e)}if(T&&T instanceof r.TypedIdentifier&&T.getType()instanceof o.StructureType){const e=T.getType();u.push(...e.getComponents())}else{if(!(T&&T instanceof o.StructureType)){if(T&&T instanceof o.VoidType)return T;if(!1===t.scope.getDDIC().inErrorNamespace(g))return o.VoidType.get(g);{const n='IncludeType, type not found "'+p.concatTokens()+'"';return t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n)),o.VoidType.get(a.CheckSyntaxKey)}}u.push(...T.getComponents())}return u}}},80071(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StartOfSelection=void 0;const s=n(3125),o=n(49028);t.StartOfSelection=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"START-OF-SELECTION")}}},80075(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhenType=void 0;const s=n(82245),o=n(20572),i=n(14365),r=n(9646),a=n(82054);t.WhenType=class{runSyntax(e,t){var n;const c=null===(n=e.findFirstExpression(s.ClassName))||void 0===n?void 0:n.getFirstToken();if(void 0===c)return;let l;const d=c.getStr(),u=t.scope.findObjectDefinition(d);if(void 0===u&&!1===t.scope.getDDIC().inErrorNamespace(d))l=o.VoidType.get(d);else{if(void 0===u){const e="Class "+d+" not found";return void t.issues.push((0,a.syntaxIssue)(t,c,e))}l=new o.ObjectReferenceType(u)}const p=null==e?void 0:e.findDirectExpression(s.Target),f=null==p?void 0:p.findDirectExpression(s.InlineData);f?i.InlineData.runSyntax(f,t,l):p&&r.Target.runSyntax(p,t)}}},80154(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Unpack=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Unpack=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},80221(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSDefineTableFunction=void 0;const s=n(18483),o=n(3125),i=n(19181);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(i.CDSName,"=",">",i.CDSName);return(0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.str)("DEFINE TABLE FUNCTION"),i.CDSName,(0,o.optPrio)(s.CDSWithParameters),(0,o.str)("RETURNS {"),(0,o.plus)((0,o.seq)((0,o.optPrio)("KEY"),i.CDSName,":",s.CDSType,";")),(0,o.str)("} IMPLEMENTED BY METHOD"),e,(0,o.opt)(";"))}}t.CDSDefineTableFunction=r},80261(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneAPI=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN02"}getAllowedNaming(){return{maxLength:100,allowNamespace:!0,customRegex:/.*/i}}getDescription(){}}t.NeptuneAPI=o},80300(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractObject=void 0;const s=n(94603),o=n(2088),i=n(93422),r=n(86789);t.AbstractObject=class{constructor(e){this.name=e,this.files=[],this.old=[],this.dirty=!1}getParsingIssues(){return this.old}parse(e,t,n){return{updated:!1,runtime:0}}getName(){return this.name}setDirty(){this.old=[],this.dirty=!0}addFile(e){this.setDirty();for(let t=0;t<this.files.length;t++)if(this.files[t].getFilename()===e.getFilename())return void(this.files[t]=e);this.files.push(e)}getFiles(){return this.files}containsFile(e){for(const t of this.files)if(t.getFilename()===e)return!0;return!1}removeFile(e){this.setDirty();for(let t=0;t<this.files.length;t++)if(this.files[t].getFilename()===e.getFilename())return void this.files.splice(t,1);throw new Error("removeFile: file not found")}isDirty(){return this.dirty}getIdentifier(){const e=this.getXMLFile();if(void 0!==e)return new o.Identifier(new i.Identifier(new r.Position(1,1),this.getName()),e.getFilename())}getXMLFile(){const e=this.getName().toLowerCase().replace(/\//g,"#")+"."+this.getType().toLowerCase()+".xml",t=this.getName().toLowerCase().replace(/\//g,"%23")+"."+this.getType().toLowerCase()+".xml";for(const n of this.getFiles())if(n.getFilename().endsWith(e)||n.getFilename().endsWith(t))return n;for(const e of this.getFiles())if(e.getFilename().endsWith(".xml"))return e}getXML(){const e=this.getXMLFile();if(e)return e.getRaw()}updateFile(e){this.setDirty();for(let t=0;t<this.files.length;t++)if(this.files[t].getFilename()===e.getFilename())return void(this.files[t]=e);throw new Error("updateFile: file not found")}parseRaw2(){const e=this.getXML();if(void 0!==e)try{return new s.XMLParser({parseTagValue:!1,ignoreAttributes:!0,trimValues:!1}).parse(e)}catch(e){return}}}},80325(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteMemory=void 0;const s=n(82245),o=n(93170);t.DeleteMemory=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}},80387(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenNode=void 0,t.TokenNode=class{constructor(e){this.token=e}addChild(e){throw new Error("TokenNode, Method not implemented.")}setChildren(e){throw new Error("TokenNode, Method not implemented.")}getChildren(){return[]}concatTokens(){return this.token.getStr()}get(){return this.token}countTokens(){return 1}getFirstToken(){return this.token}getLastToken(){return this.token}}},80595(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PerformUsing=void 0;const s=n(3125),o=n(83568);class i extends s.Expression{getRunnable(){return(0,s.seq)("USING",(0,s.plus)(o.Source))}}t.PerformUsing=i},80691(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IncludeType=void 0;const s=n(3125),o=n(82245);t.IncludeType=class{getMatcher(){const e=(0,s.seq)("AS",o.Field),t=(0,s.seq)("RENAMING WITH SUFFIX",o.ComponentName);return(0,s.seq)("INCLUDE",(0,s.alt)("TYPE","STRUCTURE"),o.TypeName,(0,s.opt)(e),(0,s.opt)(t))}}},80718(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDefinition=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ClassDefinition=class{getMatcher(){const e=(0,s.seq)("CREATE",(0,s.altPrio)("PUBLIC","PROTECTED","PRIVATE")),t=(0,s.altPrio)("CRITICAL","HARMLESS","DANGEROUS"),n=(0,s.seq)("RISK LEVEL",t),r=(0,s.altPrio)("LONG","MEDIUM","SHORT"),a=(0,s.seq)("DURATION",r),c=(0,s.per)(o.ClassGlobal,o.ClassFinal,"ABSTRACT",(0,s.seq)("INHERITING FROM",o.SuperClassName),e,"FOR TESTING",n,"SHARED MEMORY ENABLED",a,(0,s.ver)(i.Version.v754,(0,s.seq)("FOR BEHAVIOR OF",o.BehaviorDefinitionName)),o.ClassFriends),l=(0,s.seq)("DEFINITION",(0,s.optPrio)(c));return(0,s.seq)("CLASS",o.ClassName,l)}}},80733(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Put=void 0;const s=n(3125),o=n(49028),i=n(82245);t.Put=class{getMatcher(){const e=(0,s.seq)("PUT",i.Field);return(0,s.verNot)(o.Version.Cloud,e)}}},80917(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSParser=void 0;const s=n(89301),o=n(3125),i=n(75457),r=n(49028),a=n(89978),c=n(18483);t.CDSParser=class{parse(e){if(void 0===e)return;let t=a.CDSLexer.run(e);t=t.filter((e=>!(e instanceof s.Comment)));let n=o.Combi.run(new c.CDSDefineView,t,r.defaultVersion);return void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSDefineAbstract,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSDefineProjection,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSAnnotate,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSDefineCustom,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSDefineTableFunction,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode||(n=o.Combi.run(new c.CDSExtendView,t,r.defaultVersion)),void 0!==n&&n[0]instanceof i.ExpressionNode?n[0]:void 0}}},80997(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^\w+$/)}}t.DDLName=o},81053(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[\w$%]+$/)}}t.SimpleName=o},81060(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefChanging=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("CHANGING",(0,s.plus)(o.MethodParamOptional))}}t.MethodDefChanging=i},81164(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;const s=n(49028),o=n(93791),i=n(81219);class r{static getDefault(e){const t={},n=o.ArtifactsRules.getRules().sort(((e,t)=>e.getMetadata().key.localeCompare(t.getMetadata().key)));for(const e of n)t[e.getMetadata().key]=e.getConfig();let i=s.defaultVersion;e&&(i=e);const a={global:{files:"/src/**/*.*",exclude:[],noIssues:[],skipGeneratedBOPFInterfaces:!1,skipGeneratedFunctionGroups:!1,skipGeneratedGatewayClasses:!1,skipGeneratedPersistentClasses:!1,skipGeneratedProxyClasses:!1,skipGeneratedProxyInterfaces:!1,useApackDependencies:!1,skipIncludesWithoutMain:!1},dependencies:[{url:"https://github.com/abaplint/deps",folder:"/deps",files:"/src/**/*.*"}],syntax:{version:i,errorNamespace:"^(Z|Y|LCL_|TY_|LIF_)",globalConstants:[],globalMacros:[]},rules:t};return new r(JSON.stringify(a))}getEnabledRules(){var e;const t=[];for(const n of o.ArtifactsRules.getRules()){const s=null===(e=this.config.rules)||void 0===e?void 0:e[n.getMetadata().key];if(void 0!==s){if(!1===s)continue;!0===s?t.push(n):"object"==typeof s&&(n.setConfig(s),t.push(n))}}return t}constructor(e){void 0===i.parse&&(i.parse=i.default.parse),this.config=i.parse(e),void 0===this.config.global&&(this.config.global=r.getDefault().getGlobal()),void 0===this.config.syntax&&(this.config.syntax=r.getDefault().getSyntaxSetttings()),void 0===this.config.syntax.globalMacros&&(this.config.syntax.globalMacros=[]),void 0===this.config.syntax.globalConstants?this.config.syntax.globalConstants=[]:this.config.syntax.globalConstants=[...new Set(this.config.syntax.globalConstants)],void 0===this.config.global.skipIncludesWithoutMain&&(this.config.global.skipIncludesWithoutMain=!1),this.checkVersion()}get(){return this.config}readByKey(e,t){return this.config.rules&&this.config.rules[e]?this.config.rules[e][t]:void 0}readByRule(e){return this.config.rules[e]}getGlobal(){return this.config.global}getSyntaxSetttings(){return this.config.syntax}getVersion(){return void 0===this.config.global||void 0===this.config.syntax.version?s.defaultVersion:this.config.syntax.version}checkVersion(){if(void 0===this.config.syntax.version)return;let e=!1;const t=s.Version;for(const n in s.Version)if(t[n]===this.config.syntax.version){e=!0;break}!1===e&&(this.config.syntax.version=s.defaultVersion)}}t.Config=r},81210(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallSelectionScreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallSelectionScreen=class{getMatcher(){const e=(0,s.seq)("ENDING AT",o.Source,o.Source),t=(0,s.seq)("STARTING AT",o.Source,o.Source),n=(0,s.seq)("USING SELECTION-SET",o.Source),r=(0,s.seq)(t,(0,s.opt)(e)),a=(0,s.seq)("CALL SELECTION-SCREEN",o.Source,(0,s.opt)(r),(0,s.opt)(n));return(0,s.verNot)(i.Version.Cloud,a)}}},81246(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceLoad=void 0;const s=n(3125),o=n(82245);t.InterfaceLoad=class{getMatcher(){return(0,s.seq)("INTERFACE",o.InterfaceName,"LOAD")}}},81273(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenCursor=void 0;const s=n(82245),o=n(9646);t.OpenCursor=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Target))o.Target.runSyntax(n,t)}}},81285(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EcattTestScript=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ECAT"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.EcattTestScript=o},81421(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FetchNextCursor=void 0;const s=n(82245),o=n(9646);t.FetchNextCursor=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Target))o.Target.runSyntax(n,t)}}},81435(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLArithmeticOperator=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.tok)(o.WPlusW),(0,s.tok)(o.WDashW),"*","/")}}t.SQLArithmeticOperator=i},81460(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CondBody=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("WHEN",(0,s.altPrio)(o.Cond,o.Source),"THEN",(0,s.altPrio)(o.Throw,o.Source)),t=(0,s.seq)("ELSE",(0,s.altPrio)(o.Throw,o.Source));return(0,s.seq)((0,s.optPrio)(o.Let),(0,s.plusPrio)(e),(0,s.optPrio)(t))}}t.CondBody=i},81849(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalizationObject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"PERS"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.PersonalizationObject=o},82054(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSyntaxKey=void 0,t.syntaxIssue=function(e,n,i){return s.Issue.atTokenFilename(e.filename,n,i,t.CheckSyntaxKey,o.Severity.Error)};const s=n(71759),o=n(96493);t.CheckSyntaxKey="check_syntax"},82084(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenericObjectReferenceType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```REF TO object```"}isGeneric(){return!1}toABAP(){return"REF TO object"}containsVoid(){return!1}toCDS(){return"abap.TODO_GENERICOBJECTREF"}}t.GenericObjectReferenceType=o},82110(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParam=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("REFERENCE",(0,s.tok)(i.ParenLeft),o.MethodParamName,(0,s.tok)(i.ParenRightW)),t=(0,s.seq)("VALUE",(0,s.tok)(i.ParenLeft),o.MethodParamName,(0,s.tok)(i.ParenRightW));return(0,s.seq)((0,s.altPrio)(t,e,o.MethodParamName),o.TypeParam)}}t.MethodParam=r},82162(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLSourceNoSpace=void 0;const s=n(3125),o=n(49028),i=n(89301),r=n(82245);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.ParenLeftW),r.Source,(0,s.tok)(i.WParenRightW)),t=(0,s.ver)(o.Version.v740sp05,(0,s.seq)((0,s.tok)(i.At),(0,s.altPrio)(r.SimpleSource3,e)),o.Version.OpenABAP);return(0,s.alt)(r.SQLAliasField,r.SimpleSource3,t)}}t.SQLSourceNoSpace=a},82234(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.At=void 0;const s=n(50612),o=n(58720),i=n(79175);t.At=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.At),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndAt))}}},82245(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5094),t),o(n(54939),t),o(n(70433),t),o(n(57862),t),o(n(37693),t),o(n(90352),t),o(n(72854),t),o(n(57794),t),o(n(55771),t),o(n(91675),t),o(n(24129),t),o(n(35268),t),o(n(5568),t),o(n(1948),t),o(n(64398),t),o(n(48674),t),o(n(63483),t),o(n(50183),t),o(n(47583),t),o(n(43130),t),o(n(29913),t),o(n(38278),t),o(n(91785),t),o(n(75e3),t),o(n(61515),t),o(n(67401),t),o(n(5230),t),o(n(76240),t),o(n(51077),t),o(n(70302),t),o(n(26221),t),o(n(81460),t),o(n(2376),t),o(n(90733),t),o(n(22117),t),o(n(31817),t),o(n(28377),t),o(n(65213),t),o(n(83089),t),o(n(85604),t),o(n(22601),t),o(n(26929),t),o(n(29723),t),o(n(30655),t),o(n(40157),t),o(n(28112),t),o(n(5152),t),o(n(97329),t),o(n(99349),t),o(n(17808),t),o(n(89186),t),o(n(89186),t),o(n(39754),t),o(n(55627),t),o(n(84296),t),o(n(20493),t),o(n(60713),t),o(n(5027),t),o(n(83852),t),o(n(48363),t),o(n(37232),t),o(n(63284),t),o(n(12741),t),o(n(25606),t),o(n(86620),t),o(n(60653),t),o(n(12046),t),o(n(58441),t),o(n(39665),t),o(n(52923),t),o(n(25636),t),o(n(36669),t),o(n(33531),t),o(n(38955),t),o(n(8892),t),o(n(90179),t),o(n(18176),t),o(n(49552),t),o(n(57507),t),o(n(74172),t),o(n(15439),t),o(n(96343),t),o(n(65079),t),o(n(96573),t),o(n(97112),t),o(n(78939),t),o(n(26967),t),o(n(49222),t),o(n(50462),t),o(n(6883),t),o(n(27893),t),o(n(15767),t),o(n(69325),t),o(n(26251),t),o(n(21395),t),o(n(12579),t),o(n(67011),t),o(n(31219),t),o(n(63547),t),o(n(60889),t),o(n(17968),t),o(n(91306),t),o(n(89072),t),o(n(37803),t),o(n(10546),t),o(n(46749),t),o(n(19697),t),o(n(7523),t),o(n(81060),t),o(n(14637),t),o(n(62889),t),o(n(59559),t),o(n(93100),t),o(n(137),t),o(n(55276),t),o(n(97950),t),o(n(29449),t),o(n(82110),t),o(n(54079),t),o(n(30186),t),o(n(98958),t),o(n(20138),t),o(n(47157),t),o(n(58710),t),o(n(58e3),t),o(n(60712),t),o(n(31950),t),o(n(7119),t),o(n(29614),t),o(n(93858),t),o(n(7720),t),o(n(38461),t),o(n(55196),t),o(n(95760),t),o(n(40054),t),o(n(80595),t),o(n(73873),t),o(n(88314),t),o(n(72012),t),o(n(42420),t),o(n(4279),t),o(n(18377),t),o(n(64074),t),o(n(26763),t),o(n(45061),t),o(n(34202),t),o(n(62577),t),o(n(57078),t),o(n(71710),t),o(n(81053),t),o(n(3724),t),o(n(85301),t),o(n(76342),t),o(n(51223),t),o(n(41187),t),o(n(37260),t),o(n(86242),t),o(n(41239),t),o(n(83568),t),o(n(53504),t),o(n(51849),t),o(n(81435),t),o(n(21799),t),o(n(85996),t),o(n(2912),t),o(n(46869),t),o(n(97007),t),o(n(19768),t),o(n(24697),t),o(n(69656),t),o(n(5134),t),o(n(93442),t),o(n(68361),t),o(n(37210),t),o(n(24178),t),o(n(74970),t),o(n(53361),t),o(n(84478),t),o(n(52570),t),o(n(89792),t),o(n(45627),t),o(n(16732),t),o(n(99793),t),o(n(84685),t),o(n(39628),t),o(n(13379),t),o(n(48429),t),o(n(30740),t),o(n(86181),t),o(n(72444),t),o(n(95640),t),o(n(70015),t),o(n(82162),t),o(n(83161),t),o(n(14933),t),o(n(213),t),o(n(18181),t),o(n(84347),t),o(n(75405),t),o(n(12357),t),o(n(68999),t),o(n(12776),t),o(n(7756),t),o(n(54146),t),o(n(90446),t),o(n(54635),t),o(n(57468),t),o(n(73734),t),o(n(86933),t),o(n(35937),t),o(n(99057),t),o(n(84681),t),o(n(57528),t),o(n(51536),t),o(n(27951),t),o(n(18303),t),o(n(34599),t),o(n(7334),t),o(n(23414),t),o(n(89641),t),o(n(41606),t),o(n(93464),t),o(n(25799),t),o(n(83979),t),o(n(59396),t),o(n(44379),t),o(n(38557),t)},82292(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const s=n(3125),o=n(49028);t.Input=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"INPUT")}}},82293(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplate=void 0;const s=n(61785);class o extends s.AbstractToken{}t.StringTemplate=o},82348(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetUpdateTask=void 0;const s=n(3125),o=n(49028);t.SetUpdateTask=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"SET UPDATE TASK LOCAL")}}},82439(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckDDIC=t.CheckDDICConf=void 0;const s=n(86696),o=n(71759),i=n(84383),r=n(77465),a=n(86789),c=n(20572),l=n(15838);class d extends r.BasicRuleConfig{}t.CheckDDICConf=d,t.CheckDDIC=class{constructor(){this.conf=new d}getMetadata(){return{key:"check_ddic",title:"Check DDIC",shortDescription:'Checks the types of DDIC objects can be resolved, the namespace of the development/errors can be configured in "errorNamespace" ',tags:[s.RuleTag.Syntax]}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){let t;return e instanceof i.DataElement||e instanceof i.Domain||e instanceof i.Table||e instanceof i.View||e instanceof i.AuthorizationCheckField||e instanceof i.LockObject||e instanceof i.MaintenanceAndTransportObject||e instanceof i.TableType?(t=e.parseType(this.reg),this.check(t,e)):[]}check(e,t){const n=[];if(e instanceof c.UnknownType){const s=new a.Position(1,1),i="Unknown/un-resolveable type in "+t.getName()+": "+e.getError();n.push(o.Issue.atPosition(t.getFiles()[0],s,i,this.getMetadata().key,this.conf.severity))}else if(e instanceof c.StructureType)for(const s of e.getComponents())n.push(...this.check(s.type instanceof l.TypedIdentifier?s.type.getType():s.type,t));else e instanceof c.TableType&&n.push(...this.check(e.getRowType(),t));return n}}},82612(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDeferred=void 0;const s=n(3125),o=n(82245);t.ClassDeferred=class{getMatcher(){return(0,s.seq)("CLASS",o.ClassName,"DEFINITION DEFERRED",(0,s.optPrio)("PUBLIC"))}}},82623(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtUserCommand=void 0;const s=n(3125),o=n(49028);t.AtUserCommand=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"AT USER-COMMAND")}}},82729(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tables=void 0;const s=n(82245),o=n(15838),i=n(69953),r=n(2403);t.Tables=class{runSyntax(e,t){var n,a;const c=null===(n=e.findFirstExpression(s.Field))||void 0===n?void 0:n.getFirstToken();if(void 0===c)return;let l=c.getStr();l.startsWith("*")&&(l=l.substring(1));const d=null===(a=t.scope.getDDIC())||void 0===a?void 0:a.lookupTableOrView(l);if(d)return t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:d.object,filename:t.filename,token:c}),void(t.scope.getType()===r.ScopeType.Form||t.scope.getType()===r.ScopeType.FunctionModule?t.scope.addNamedIdentifierToParent(c.getStr(),new o.TypedIdentifier(c,t.filename,d.type,["tables"])):t.scope.addIdentifier(new o.TypedIdentifier(c,t.filename,d.type,["tables"])));t.scope.addIdentifier(new o.TypedIdentifier(c,t.filename,new i.UnknownType("Tables, fallback")))}}},82736(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberRange=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"NROB"}getAllowedNaming(){return{maxLength:10,allowNamespace:!0}}getDomain(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.domain}getPercentage(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.percentage}setDirty(){this.parsedXML=void 0,super.setDirty()}parse(){var e,t,n,s,o,i;if(this.parsedXML)return{updated:!1,runtime:0};const r=Date.now();this.parsedXML={};const a=super.parseRaw2();if(void 0===a)return{updated:!1,runtime:0};const c=null===(n=null===(t=null===(e=a.abapGit)||void 0===e?void 0:e["asx:abap"])||void 0===t?void 0:t["asx:values"])||void 0===n?void 0:n.TEXT;this.parsedXML.description=null==c?void 0:c.TXT;const l=null===(i=null===(o=null===(s=a.abapGit)||void 0===s?void 0:s["asx:abap"])||void 0===o?void 0:o["asx:values"])||void 0===i?void 0:i.ATTRIBUTES;return this.parsedXML.domain=null==l?void 0:l.DOMLEN,this.parsedXML.percentage=parseFloat((null==l?void 0:l.PERCENTAGE)||""),{updated:!0,runtime:Date.now()-r}}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}}t.NumberRange=o},82822(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetPFStatus=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetPFStatus=class{getMatcher(){const e=(0,s.seq)("PROGRAM",o.Source),t=(0,s.seq)("EXCLUDING",o.Source),n=(0,s.seq)("GET PF-STATUS",o.Target,(0,s.opt)(e),(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},82847(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Concatenate=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(20572),a=n(14365),c=n(3240),l=n(82054);t.Concatenate=class{runSyntax(e,t){const n=void 0!==e.findDirectTokenByText("BYTE"),d=void 0!==e.findDirectTokenByText("LINES"),u=e.findFirstExpression(s.Target),p=null==u?void 0:u.findDirectExpression(s.InlineData);if(p)n?a.InlineData.runSyntax(p,t,r.XStringType.get()):a.InlineData.runSyntax(p,t,r.StringType.get());else if(u){const s=i.Target.runSyntax(u,t);if(!1===(n?new c.TypeUtils(t.scope).isHexLike(s):new c.TypeUtils(t.scope).isCharLikeStrict(s))){const n="Target type not compatible";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}if(d)for(const i of e.findDirectExpressions(s.Source)){const s=o.Source.runSyntax(i,t);if(!(s instanceof r.UnknownType||s instanceof r.VoidType||s instanceof r.TableType)){const n="Source must be an internal table";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}if(!0===d&&!0===n&&s instanceof r.TableType&&s.getRowType()instanceof r.StructureType){const n="Source row type must not be a structure in BYTE mode";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}for(const i of e.findDirectExpressions(s.SimpleSource3)){const s=o.Source.runSyntax(i,t);if(!1===(n?new c.TypeUtils(t.scope).isHexLike(s):new c.TypeUtils(t.scope).isCharLikeStrict(s))){const n="Source type not compatible";return void t.issues.push((0,l.syntaxIssue)(t,e.getFirstToken(),n))}}}}},82883(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MixReturning=t.MixReturningConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(77465),c=n(86696);class l extends a.BasicRuleConfig{}t.MixReturningConf=l;class d extends o.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"mix_returning",title:"Mix of returning and exporting",shortDescription:"Checks that methods don't have a mixture of returning and exporting/changing parameters",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-either-returning-or-exporting-or-changing-but-not-a-combination\n\nThis syntax is not allowed on versions earlier than 740sp02, https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-us/abennews-740-abap_objects.htm#!ABAP_MODIFICATION_1@1@",tags:[c.RuleTag.Styleguide,c.RuleTag.SingleFile,c.RuleTag.Syntax],badExample:"CLASS lcl DEFINITION.\n  PUBLIC SECTION.\n    METHODS\n      foobar\n        EXPORTING foo TYPE i\n        RETURNING VALUE(rv_string) TYPE string.\nENDCLASS."}}getMessage(){return"Don't mix RETURNING and EXPORTING/CHANGING parameters in a single method."}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllStatements(i.MethodDef))if(o.findFirstExpression(r.MethodDefReturning)&&(o.findFirstExpression(r.MethodDefExporting)||o.findFirstExpression(r.MethodDefChanging))){const n=o.getFirstToken(),i=s.Issue.atToken(e,n,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(i)}return t}}t.MixReturning=d},82955(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.At=void 0;const s=n(3125),o=n(82245);t.At=class{getMatcher(){const e=(0,s.alt)((0,s.seq)(o.FieldSub,(0,s.opt)(o.FieldOffset),(0,s.opt)(o.FieldLength)),o.Dynamic,o.SourceFieldSymbol),t=(0,s.seq)("NEW",e),n=(0,s.seq)("END OF",e),i=(0,s.regex)(/^[%\w]+$/);return(0,s.seq)("AT",(0,s.altPrio)(t,n,i))}}},82956(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParam=void 0;const s=n(15838),o=n(20572),i=n(46743),r=n(82245),a=n(83978),c=n(42647),l=n(38788);t.MethodParam=class{static runSyntax(e,t,n){const d=e.findDirectExpression(r.MethodParamName);if(void 0===d)throw new l.AssertError("MethodParam, todo, handle pass by value and reference");const u=e.findDirectExpression(r.TypeParam);if(void 0===u)throw new l.AssertError("MethodParam, unexpected structure");const p=u.findDirectExpression(r.Default);if(p)try{a.Default.runSyntax(p,t)}catch(e){return new s.TypedIdentifier(d.getFirstToken(),t.filename,new o.UnknownType(e.toString()),n)}const f=u.concatTokens().toUpperCase();if("TYPE C"===f||f.startsWith("TYPE C "))return new s.TypedIdentifier(d.getFirstToken(),t.filename,c.CGenericType.get(),n);if("TYPE X"===f||f.startsWith("TYPE X "))return new s.TypedIdentifier(d.getFirstToken(),t.filename,o.XGenericType.get(),n);const g=new i.BasicTypes(t).parseType(u);return g?new s.TypedIdentifier(d.getFirstToken(),t.filename,g,n):new s.TypedIdentifier(d.getFirstToken(),t.filename,new o.UnknownType("method param, todo"),n)}}},83036(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PlusW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"+ "}}t.PlusW=o},83067(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExitOrCheck=t.ExitOrCheckConf=void 0;const s=n(71759),o=n(50612),i=n(99732),r=n(77465),a=n(86696),c=n(71249);class l extends r.BasicRuleConfig{constructor(){super(...arguments),this.allowExit=!1,this.allowCheck=!1}}t.ExitOrCheckConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"exit_or_check",title:"Find EXIT or CHECK outside loops",shortDescription:"Detects usages of EXIT or CHECK statements outside of loops.\nUse RETURN to leave procesing blocks instead.",extendedInformation:"https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abenleave_processing_blocks.htm\nhttps://help.sap.com/doc/abapdocu_750_index_htm/7.50/en-US/abapcheck_processing_blocks.htm\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#check-vs-return",tags:[a.RuleTag.Styleguide,a.RuleTag.SingleFile,a.RuleTag.Quickfix]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=[];for(const i of e.getStatements()){const r=i.get();if(r instanceof o.Loop||r instanceof o.While||r instanceof o.LoopAtScreen||r instanceof o.SelectLoop||r instanceof o.Do)n.push(i);else if(r instanceof o.EndLoop||r instanceof o.EndWhile||r instanceof o.EndSelect||r instanceof o.EndDo)n.pop();else if(!1===this.conf.allowCheck&&r instanceof o.Check&&0===n.length){const n="CHECK is not allowed outside of loops";let o=i.concatTokens();o=o.replace(/^check /i,"CHECK "),o=o.split("CHECK")[1].trim();const r="IF NOT "+o+"\n  RETURN.\nENDIF.",a=c.EditHelper.replaceRange(e,i.getFirstToken().getStart(),i.getLastToken().getEnd(),r),l=s.Issue.atStatement(e,i,n,this.getMetadata().key,this.conf.severity,a);t.push(l)}else if(!1===this.conf.allowExit&&r instanceof o.Exit&&0===n.length){const n="EXIT is not allowed outside of loops",o=c.EditHelper.replaceToken(e,i.getFirstToken(),"RETURN"),r=s.Issue.atStatement(e,i,n,this.getMetadata().key,this.conf.severity,o);t.push(r)}}return t}}t.ExitOrCheck=d},83089(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CorrespondingBodyBase=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)("BASE",(0,s.tok)(o.WParenLeftW),i.Source,(0,s.tok)(o.WParenRightW))}}t.CorrespondingBodyBase=r},83091(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodCallChain=void 0;const s=n(75457),o=n(82245),i=n(20572),r=n(45769),a=n(2416),c=n(28835),l=n(18424),d=n(56727),u=n(25675),p=n(36453),f=n(66228),g=n(98885),h=n(82054);t.MethodCallChain=class{static runSyntax(e,t,n){var r,c;const l=new a.ObjectOriented(t.scope),T=e.getChildren(),m=T[0];if(void 0===m){const n="MethodCallChain, first child expected";return t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n)),i.VoidType.get(h.CheckSyntaxKey)}let y,S=1,v=this.findTop(m,t,n);for(m.get()instanceof o.MethodCall&&S--;S<=T.length;){const e=T[S];if(void 0===e)break;if(S++,e instanceof s.ExpressionNode&&e.get()instanceof o.MethodCall){const n=v instanceof i.ObjectReferenceType?v.getIdentifierName():void 0,s=null===(r=e.findDirectExpression(o.MethodName))||void 0===r?void 0:r.getFirstToken(),a=null==s?void 0:s.getStr(),f=t.scope.findObjectDefinition(n);let{method:g,def:T}=l.searchMethodName(f,a);if(void 0===g&&e===m)g=d.BuiltIn.searchBuiltin(null==a?void 0:a.toUpperCase()),g&&t.scope.addReference(s,g,p.ReferenceType.BuiltinMethodReference,t.filename);else{if(y&&"=>"===y.getFirstToken().getStr()&&!1===(null==g?void 0:g.isStatic())){const e='Method "'+a+'" not static';return t.issues.push((0,h.syntaxIssue)(t,s,e)),i.VoidType.get(h.CheckSyntaxKey)}const e=v instanceof i.VoidType?v.getVoided():void 0,o=l.methodReferenceExtras(T,n||e);t.scope.addReference(s,g,p.ReferenceType.MethodReference,t.filename,o)}if(null==a?void 0:a.includes("~")){const e=a.split("~")[0],n=t.scope.findInterfaceDefinition(e);n&&t.scope.addReference(s,n,p.ReferenceType.ObjectOrientedReference,t.filename)}if(void 0===g&&"CONSTRUCTOR"===(null==a?void 0:a.toUpperCase()))v=void 0;else{if(!(void 0!==g||v instanceof i.VoidType)){const e='Method "'+a+'" not found, methodCallChain';return t.issues.push((0,h.syntaxIssue)(t,s,e)),i.VoidType.get(h.CheckSyntaxKey)}g&&(v=null===(c=g.getParameters().getReturning())||void 0===c?void 0:c.getType())}const S=e.findDirectExpression(o.MethodCallParam);S&&g?u.MethodCallParam.runSyntax(S,t,g):S&&v instanceof i.VoidType&&u.MethodCallParam.runSyntax(S,t,v)}else e instanceof s.ExpressionNode&&e.get()instanceof o.ComponentName?v=f.ComponentName.runSyntax(v,e,t):e instanceof s.ExpressionNode&&e.get()instanceof o.AttributeName&&(v=g.AttributeName.runSyntax(v,e,t));y=e}return v}static findTop(e,t,n){var a;if(e.get()instanceof o.ClassName){const n=e.getFirstToken(),s=n.getStr(),o=t.scope.findObjectDefinition(s);if(void 0===o&&!1===t.scope.getDDIC().inErrorNamespace(s)){const e={ooName:s,ooType:"Void"};return t.scope.addReference(n,void 0,p.ReferenceType.ObjectOrientedVoidReference,t.filename,e),i.VoidType.get(s)}if(void 0===o){const n="Class "+s+" not found";return t.issues.push((0,h.syntaxIssue)(t,e.getFirstToken(),n)),i.VoidType.get(h.CheckSyntaxKey)}return t.scope.addReference(e.getFirstToken(),o,p.ReferenceType.ObjectOrientedReference,t.filename),new i.ObjectReferenceType(o)}if(e instanceof s.ExpressionNode&&e.get()instanceof o.FieldChain)return r.FieldChain.runSyntax(e,t,p.ReferenceType.DataReadReference);if(e instanceof s.ExpressionNode&&e.get()instanceof o.NewObject)return c.NewObject.runSyntax(e,t,n);if(e instanceof s.ExpressionNode&&e.get()instanceof o.Cast)return l.Cast.runSyntax(e,t,n);{const e=null===(a=t.scope.findVariable("me"))||void 0===a?void 0:a.getType();if(e)return e}}}},83161(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLSourceSimple=void 0;const s=n(3125),o=n(49028),i=n(89301),r=n(82245);class a extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(i.ParenLeftW),r.Source,(0,s.tok)(i.WParenRightW)),t=(0,s.ver)(o.Version.v740sp05,(0,s.seq)((0,s.tok)(i.WAt),(0,s.alt)(r.SimpleSource3,e)),o.Version.OpenABAP);return(0,s.alt)(r.SimpleSource3,t)}}t.SQLSourceSimple=a},83171(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Class=t.ClassCategory=void 0;const s=n(12620);var o;!function(e){e.Test="05",e.Persistent="10",e.PersistentFactory="11",e.Exception="40",e.SharedObject="45"}(o||(t.ClassCategory=o={}));class i extends s.ABAPObject{constructor(){super(...arguments),this.def=void 0,this.parsedXML=void 0}getType(){return"CLAS"}getSequencedFiles(){const e=[".clas.locals_def.abap",".clas.locals_imp.abap",".clas.abap",".clas.testclasses.abap"];return this.getABAPFiles().slice().sort(((t,n)=>e.findIndex((e=>t.getFilename().endsWith(e)))-e.findIndex((e=>n.getFilename().endsWith(e)))))}setDefinition(e){this.def=e}getDefinition(){return this.def}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}setDirty(){this.def=void 0,this.parsedXML=void 0,super.setDirty()}getClassDefinition(){var e;return null===(e=this.getMainABAPFile())||void 0===e?void 0:e.getInfo().getClassDefinitionByName(this.getName())}getIdentifier(){var e;return null===(e=this.getClassDefinition())||void 0===e?void 0:e.identifier}getDescription(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.description}getNameFromXML(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.name}getCategory(){var e;return this.parseXML(),null===(e=this.parsedXML)||void 0===e?void 0:e.category}getLocalsImpFile(){for(const e of this.getABAPFiles())if(e.getFilename().endsWith(".clas.locals_imp.abap"))return e}getTestclassFile(){for(const e of this.getABAPFiles())if(e.getFilename().endsWith(".clas.testclasses.abap"))return e}parseXML(){if(void 0!==this.parsedXML)return;this.parsedXML={};const e=super.parseRaw2();if(void 0===e||void 0===e.abapGit["asx:abap"]||void 0===e.abapGit["asx:abap"]["asx:values"])return;const t=e.abapGit["asx:abap"]["asx:values"].VSEOCLASS;void 0!==t&&(this.parsedXML.category=t.CATEGORY,this.parsedXML.description=t.DESCRIPT?t.DESCRIPT:"",this.parsedXML.name=t.CLSNAME?t.CLSNAME:"")}}t.Class=i},83197(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StaticArrow=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"=>"}}t.StaticArrow=o},83256(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSCardinality=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){const e=(0,s.seq)("[",(0,s.alt)("0","1","*"),(0,s.opt)((0,s.seq)(".",".",(0,s.alt)("0","1","*"))),"]"),t=(0,s.alt)("ONE","MANY"),n=(0,s.seq)("OF",t,"TO",t);return(0,s.alt)(e,n)}}t.CDSCardinality=o},83339(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeIfToCase=t.ChangeIfToCaseConf=void 0;const s=n(71759),o=n(82245),i=n(50612),r=n(94967),a=n(99732),c=n(77465),l=n(86696);class d extends c.BasicRuleConfig{constructor(){super(...arguments),this.skipNames=[]}}t.ChangeIfToCaseConf=d;class u extends a.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"change_if_to_case",title:"Change IF to CASE",shortDescription:"Finds IF constructs that can be changed to CASE",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-case-to-else-if-for-multiple-alternative-conditions\n\nIf the first comparison is a boolean compare, no issue is reported.",tags:[l.RuleTag.SingleFile,l.RuleTag.Styleguide],badExample:"IF l_fcat-fieldname EQ 'FOO'.\nELSEIF l_fcat-fieldname = 'BAR'\n    OR l_fcat-fieldname = 'MOO'.\nENDIF.",goodExample:"CASE l_fcat-fieldname.\n  WHEN 'FOO'.\n  WHEN 'BAR' OR 'MOO'.\nENDCASE."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],a=e.getStructure();if(void 0===a)return n;for(const c of a.findAllStructuresRecursive(r.If)){const a=[],l=c.findDirectStatement(i.If);if(void 0!==l&&!l.concatTokens().match(/ (abap_true|abap_false)\s*\./i)){a.push(null==l?void 0:l.findDirectExpression(o.Cond));for(const e of c.findDirectStructures(r.ElseIf))a.push(null===(t=e.findDirectStatement(i.ElseIf))||void 0===t?void 0:t.findDirectExpression(o.Cond));if(1!==a.length&&!0===this.analyze(a)){const t="Change IF to CASE";n.push(s.Issue.atStatement(e,l,t,this.getMetadata().key,this.getConfig().severity))}}}return n}analyze(e){var t,n,s,i,r;const a=[];for(const c of e)if(void 0!==c){if(c.findFirstExpression(o.CondSub))return!1;if(c.findDirectTokenByText("AND")||c.findDirectTokenByText("EQUIV"))return!1;for(const e of c.findAllExpressions(o.Compare)){const c=null===(t=e.findDirectExpression(o.CompareOperator))||void 0===t?void 0:t.concatTokens().toUpperCase();if(3!==e.getChildren().length)return!1;if("="!==c&&"EQ"!==c)return!1;const l=null===(s=null===(n=e.getChildren()[0])||void 0===n?void 0:n.concatTokens())||void 0===s?void 0:s.toUpperCase(),d=null===(r=null===(i=e.getChildren()[2])||void 0===i?void 0:i.concatTokens())||void 0===r?void 0:r.toUpperCase();a.push({left:l,right:d})}}if(1===a.length)return!1;let c="";if(a[0].left===a[1].left)c=a[0].left;else if(a[0].left===a[1].right)c=a[0].left;else if(a[0].right===a[1].right)c=a[0].right;else{if(a[0].right!==a[1].left)return!1;c=a[0].right}for(const e of this.getConfig().skipNames||[]){const t=new RegExp(e,"i");if(c.match(t))return!1}for(const e of a)if(e.left!==c&&e.right!==c)return!1;return!0}}t.ChangeIfToCase=u},83360(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FreeMemory=void 0;const s=n(3125),o=n(82245),i=n(49028);t.FreeMemory=class{getMatcher(){const e=(0,s.seq)("FREE MEMORY",(0,s.optPrio)((0,s.seq)("ID",o.Source)));return(0,s.verNot)(i.Version.Cloud,e)}}},83460(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantEnd=void 0;const s=n(3125),o=n(82245);t.ConstantEnd=class{getMatcher(){return(0,s.seq)("CONSTANTS","END","OF",o.DefinitionName)}}},83516(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const s=n(46203),o=n(96493);class i{constructor(e){this.reg=e}findIssues(e){const t=this.reg.getFileByName(e.uri);if(void 0===t)return[];const n=this.reg.findObjectForFile(t);if(void 0===n)return[];this.reg.parse();let s=this.reg.findIssuesObject(n);return s=s.filter((e=>e.getFilename()===t.getFilename())),s}static mapDiagnostic(e){return{severity:this.mapSeverity(e.getSeverity()),range:{start:{line:e.getStart().getRow()-1,character:e.getStart().getCol()-1},end:{line:e.getEnd().getRow()-1,character:e.getEnd().getCol()-1}},code:e.getKey(),codeDescription:{href:"https://rules.abaplint.org/"+e.getKey()+"/"},message:e.getMessage().toString(),source:"abaplint"}}find(e){const t=this.findIssues(e),n=[];for(const e of t)n.push(i.mapDiagnostic(e));return n}static mapSeverity(e){switch(e){case o.Severity.Error:return s.DiagnosticSeverity.Error;case o.Severity.Warning:return s.DiagnosticSeverity.Warning;case o.Severity.Info:return s.DiagnosticSeverity.Information;default:return s.DiagnosticSeverity.Error}}}t.Diagnostics=i},83568(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028),a=n(99057),c=n(55771),l=n(97329);class d extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.Dash),i.ComponentChain),t=(0,s.seq)(i.Arrow,c.AttributeChain),n=(0,s.optPrio)((0,s.ver)(r.Version.v756,l.Dereference)),u=(0,s.seq)(i.MethodCallChain,(0,s.optPrio)((0,s.altPrio)(t,e)),n),p=(0,s.tok)(o.WParenRightW),f=(0,s.altPrio)((0,s.tok)(o.ParenRightW),(0,s.tok)(o.WParenRightW)),g=(0,s.altPrio)((0,s.tok)(o.ParenLeft),(0,s.tok)(o.ParenLeftW)),h=(0,s.seq)((0,s.tok)(o.WParenLeftW),d,p),T=(0,s.seq)((0,s.altPrio)("&","&&",i.ArithOperator),d),m=(0,s.seq)((0,s.altPrio)((0,s.ver)(r.Version.v702,(0,s.regex)(/^BOOLC$/i),r.Version.OpenABAP),(0,s.ver)(r.Version.v740sp08,(0,s.regex)(/^XSDBOOL$/i),r.Version.OpenABAP)),(0,s.tok)(o.ParenLeftW),i.Cond,")"),y=(0,s.altPrio)((0,s.tok)(o.WPlus),"BIT-NOT"),S=(0,s.seq)((0,s.optPrio)(y),(0,s.altPrio)(i.Constant,i.StringTemplate,a.TextElement,m,u,(0,s.seq)(i.FieldChain,n),h),(0,s.optPrio)(T)),v=(0,s.ver)(r.Version.v740sp05,(0,s.seq)("CORRESPONDING",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.CorrespondingBody,p,(0,s.optPrio)(T)),r.Version.OpenABAP),E=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("CONV",i.TypeNameOrInfer,g,i.ConvBody,f,(0,s.optPrio)(T)),r.Version.OpenABAP),C=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("SWITCH",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.SwitchBody,f,(0,s.optPrio)(T)),r.Version.OpenABAP),b=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("VALUE",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.ValueBody,f,(0,s.optPrio)(T)),r.Version.OpenABAP),I=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("COND",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.CondBody,f,(0,s.optPrio)(T)),r.Version.OpenABAP),D=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("REF",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),d,(0,s.optPrio)("OPTIONAL"),p),r.Version.OpenABAP),x=(0,s.ver)(r.Version.v740sp02,(0,s.seq)("EXACT",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),d,p,(0,s.optPrio)(T))),P=(0,s.ver)(r.Version.v740sp08,(0,s.seq)("FILTER",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.FilterBody,p),r.Version.OpenABAP),A=(0,s.ver)(r.Version.v740sp08,(0,s.seq)("REDUCE",i.TypeNameOrInfer,(0,s.tok)(o.ParenLeftW),i.ReduceBody,p,(0,s.optPrio)(T)),r.Version.OpenABAP),N=(0,s.altPrio)((0,s.tok)(o.WDashW),(0,s.tok)(o.WPlusW));return(0,s.seq)((0,s.starPrio)(N),(0,s.altPrio)(P,D,v,E,b,I,x,C,A,S))}}t.Source=d},83578(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceBinding=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SRVB"}getAllowedNaming(){return{maxLength:26,allowNamespace:!0}}getDescription(){}}t.ServiceBinding=o},83663(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceDef=void 0;const s=n(49028),o=n(3125),i=n(82245);t.InterfaceDef=class{getMatcher(){const e=(0,o.seq)(i.AttributeName,"=",i.Source),t=(0,o.seq)("DATA VALUES",(0,o.plus)(e)),n=(0,o.alt)(i.AbstractMethods,i.FinalMethods,"ALL METHODS ABSTRACT","ALL METHODS FINAL",(0,o.ver)(s.Version.v740sp02,"PARTIALLY IMPLEMENTED",s.Version.OpenABAP));return(0,o.seq)("INTERFACES",i.InterfaceName,(0,o.opt)(n),(0,o.opt)(t))}}},83668(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StructureType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t,n,s){if(super({qualifiedName:t,ddicName:n,description:s}),0===e.length)throw new Error("Structure does not contain any components");this.indexed={};for(const n of e){const e=n.name.toUpperCase();if(void 0!==this.indexed[e])throw new Error('Structure, duplicate field name "'+e+'", '+t);this.indexed[e]=n.type}this.components=e}getComponents(){return this.components}getComponentByName(e){return this.indexed[e.toUpperCase()]}toText(e){const t=[];for(const n of this.components)t.push(n.name+" TYPE "+n.type.toText(e+1));const n="  ".repeat(e);return"Structure\n"+n+"* "+t.join("\n"+n+"* ")}isGeneric(){return!1}toABAP(){return this.getQualifiedName()||"StructureTypetoABAPtodo"}containsVoid(){return this.getComponents().some((e=>e.type.containsVoid()))}toCDS(){return"abap.TODO_STRUCTURE"}}t.StructureType=o},83695(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CloseDataset=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CloseDataset=class{getMatcher(){const e=(0,s.seq)("CLOSE DATASET",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},83707(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Break=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Break=class{getMatcher(){const e=(0,s.str)("AT NEXT APPLICATION STATEMENT"),t=(0,s.altPrio)((0,s.seq)("BREAK-POINT",(0,s.optPrio)((0,s.altPrio)(e,o.Source))),(0,s.seq)("BREAK",(0,s.starPrio)((0,s.regex)(/.*/))));return(0,s.verNot)(i.Version.Cloud,t)}}},83790(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Ranges=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(46743),a=n(38788);t.Ranges=class{runSyntax(e,t){var n;const c=null===(n=e.findFirstExpression(s.DefinitionName))||void 0===n?void 0:n.getFirstToken(),l=e.findFirstExpression(s.SimpleFieldChain2);if(void 0===l)throw new a.AssertError("Ranges, unexpected node");const d=new r.BasicTypes(t).resolveLikeName(l);if(d&&c){const e=new i.StructureType([{name:"sign",type:new i.CharacterType(1)},{name:"option",type:new i.CharacterType(2)},{name:"low",type:d},{name:"high",type:d}]),n=new i.TableType(e,{withHeader:!0,keyType:i.TableKeyType.default}),s=new o.TypedIdentifier(c,t.filename,n);t.scope.addIdentifier(s)}}}},83852(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldLength=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)((0,s.tok)(o.Plus)),(0,s.altPrio)((0,s.regex)(/^\d+$/),i.SimpleFieldChain2));return(0,s.seq)((0,s.tok)(o.ParenLeft),(0,s.optPrio)((0,s.altPrio)(e,"*")),(0,s.tok)(o.ParenRightW))}}t.FieldLength=r},83856(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneOData=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN21"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneOData=o},83978(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Default=void 0;const s=n(82245),o=n(45769),i=n(36453),r=n(95271);t.Default=class{static runSyntax(e,t){const n=e.findDirectExpression(s.FieldChain);if(n)return o.FieldChain.runSyntax(n,t,i.ReferenceType.DataReadReference);const a=e.findDirectExpression(s.Constant);return a?r.Constant.runSyntax(a):void 0}}},83979(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBody=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.optPrio)(o.Let),(0,s.optPrio)(o.ValueBase),(0,s.star)(o.For),(0,s.plusPrio)((0,s.altPrio)(o.FieldAssignment,o.ValueBodyLine))),t=(0,s.ver)(i.Version.v740sp08,(0,s.altPrio)("OPTIONAL",(0,s.seq)("DEFAULT",o.Source)),i.Version.OpenABAP);return(0,s.optPrio)((0,s.altPrio)(e,(0,s.seq)(o.Source,(0,s.optPrio)(t))))}}t.ValueBody=r},84257(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;const s=n(82245),o=n(93170),i=n(9646),r=n(14365),a=n(3240),c=n(82054);t.Move=class{runSyntax(e,t){const n=e.findDirectExpressions(s.Target),l=n[0],d=null==l?void 0:l.findDirectExpression(s.InlineData);let u;if(void 0===d){u=l?i.Target.runSyntax(l,t):void 0;for(const e of n)e!==l&&i.Target.runSyntax(e,t)}const p=e.findDirectExpression(s.Source),f=p?o.Source.runSyntax(p,t,u):void 0;if(void 0!==f){if(d&&(r.InlineData.runSyntax(d,t,f),u=f),e.findDirectTokenByText("?=")){if(!1===new a.TypeUtils(t.scope).isCastable(f,u)){const n="Incompatible types";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}}else if(!1===new a.TypeUtils(t.scope).isAssignableNew(f,u,p)){const n="Incompatible types";return void t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}}else{const n="No source type determined";t.issues.push((0,c.syntaxIssue)(t,e.getFirstToken(),n))}}}},84296(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionName=void 0;const s=n(89301),o=n(3125),i=n(12741);class r extends o.Expression{getRunnable(){return(0,o.seq)(i.Field,(0,o.starPrio)((0,o.seq)((0,o.tok)(s.Dash),i.Field)))}}t.ExceptionName=r},84347(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplateFormatting=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(17808);class a extends s.Expression{getRunnable(){const e=(0,s.altPrio)("OUT","RAW","IN",o.Source),t=(0,s.altPrio)("LEFT","RIGHT","CENTER",o.Source,r.Dynamic),n=(0,s.altPrio)("RAW","ISO","USER","ENVIRONMENT",o.Source,r.Dynamic),a=(0,s.altPrio)("SPACE","ISO","USER","ENVIRONMENT",o.Source,r.Dynamic),c=(0,s.altPrio)("RAW","USER","ENVIRONMENT",o.Source,r.Dynamic),l=(0,s.altPrio)("LEFT","LEFTPLUS","LEFTSPACE","RIGHT","RIGHTPLUS","RIGHTSPACE",o.Source),d=(0,s.altPrio)("RAW","UPPER","LOWER",o.Source,r.Dynamic),u=(0,s.altPrio)("YES","NO",o.Source),p=(0,s.altPrio)("SIMPLE","SIGN_AS_POSTFIX","SCALE_PRESERVING","SCIENTIFIC","SCIENTIFIC_WITH_LEADING_ZERO","SCALE_PRESERVING_SCIENTIFIC","ENGINEERING",o.Source),f=(0,s.seq)("WIDTH =",o.Source),g=(0,s.seq)("ALIGN =",t),h=(0,s.seq)("TIMEZONE =",o.Source),T=(0,s.seq)("TIMESTAMP =",a),m=(0,s.seq)("PAD =",o.Source),y=(0,s.seq)("NUMBER =",c),S=(0,s.seq)("SIGN =",l),v=(0,s.seq)("DECIMALS =",o.Source),E=(0,s.ver)(i.Version.v740sp02,(0,s.seq)("ALPHA =",e),i.Version.OpenABAP),C=(0,s.ver)(i.Version.v740sp02,(0,s.seq)("XSD =",u)),b=(0,s.seq)("COUNTRY =",o.Source);return(0,s.altPrio)((0,s.seq)("TIME =",n),(0,s.seq)("DATE =",n),(0,s.seq)("CASE =",d),(0,s.seq)("EXPONENT",o.Source),(0,s.seq)("ZERO =",u),C,(0,s.seq)("STYLE =",p),(0,s.seq)("CURRENCY =",o.Source),(0,s.per)(S,y,v,f,m,E,g,b),(0,s.per)(h,T))}}t.StringTemplateFormatting=a},84348(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParameterNames=t.MethodParameterNamesConf=void 0;const s=n(71759),o=n(86696),i=n(12620),r=n(50127),a=n(74650),c=n(22755),l=n(5518);class d extends r.NamingRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!0,this.importing="^I._.+$",this.returning="^R._.+$",this.changing="^C._.+$",this.exporting="^E._.+$"}}t.MethodParameterNamesConf=d,t.MethodParameterNames=class{constructor(){this.conf=new d}getMetadata(){return{key:"method_parameter_names",title:"Method parameter naming conventions",shortDescription:"Allows you to enforce a pattern, such as a prefix, for method parameter names",tags:[o.RuleTag.Naming,o.RuleTag.SingleFile]}}getDescription(e,t){return"required"===this.conf.patternKind?"Method parameter name does not match pattern "+e+": "+t:"Method parameter name must not match pattern "+e+": "+t}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){let t=[];if(void 0===this.conf.patternKind&&(this.conf.patternKind="required"),!(e instanceof i.ABAPObject))return[];const n=new l.DDIC(this.reg);for(const s of e.getABAPFiles()){for(const e of s.getInfo().listInterfaceDefinitions())for(const n of e.methods)t=t.concat(this.checkMethod(n));for(const o of s.getInfo().listClassDefinitions())if(!this.conf.ignoreExceptions||!n.isException(o,e))for(const e of o.methods)e.isEventHandler||(t=t.concat(this.checkMethod(e)))}return t}checkMethod(e){let t=[];for(const n of e.parameters)switch(n.direction){case c.MethodParameterDirection.Importing:t=t.concat(this.checkParameter(n,this.conf.importing));break;case c.MethodParameterDirection.Exporting:t=t.concat(this.checkParameter(n,this.conf.exporting));break;case c.MethodParameterDirection.Changing:t=t.concat(this.checkParameter(n,this.conf.changing));break;case c.MethodParameterDirection.Returning:t=t.concat(this.checkParameter(n,this.conf.returning))}return t}checkParameter(e,t){const n=[],o=new RegExp(t,"i"),i=e.name;if(a.NameValidator.violatesRule(i,o,this.conf)){const o=this.getDescription(t,i),r=s.Issue.atIdentifier(e.identifier,o,this.getMetadata().key,this.conf.severity);n.push(r)}return n}}},84383(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(29718),t),o(n(71033),t),o(n(21093),t),o(n(42991),t),o(n(22632),t),o(n(67814),t),o(n(25578),t),o(n(980),t),o(n(16218),t),o(n(94889),t),o(n(28158),t),o(n(2212),t),o(n(5390),t),o(n(27058),t),o(n(51553),t),o(n(55156),t),o(n(68654),t),o(n(90469),t),o(n(88673),t),o(n(62699),t),o(n(45455),t),o(n(70468),t),o(n(84405),t),o(n(52977),t),o(n(74952),t),o(n(10315),t),o(n(19134),t),o(n(78467),t),o(n(94693),t),o(n(31702),t),o(n(32334),t),o(n(79117),t),o(n(32518),t),o(n(5591),t),o(n(4016),t),o(n(14489),t),o(n(83171),t),o(n(77587),t),o(n(51244),t),o(n(11694),t),o(n(14644),t),o(n(61219),t),o(n(37436),t),o(n(97260),t),o(n(94931),t),o(n(4991),t),o(n(89224),t),o(n(70613),t),o(n(65339),t),o(n(52992),t),o(n(72334),t),o(n(44322),t),o(n(74353),t),o(n(16655),t),o(n(52330),t),o(n(74910),t),o(n(81285),t),o(n(21836),t),o(n(67658),t),o(n(43664),t),o(n(18503),t),o(n(30673),t),o(n(30673),t),o(n(45134),t),o(n(93721),t),o(n(74887),t),o(n(98648),t),o(n(16867),t),o(n(10079),t),o(n(52191),t),o(n(93683),t),o(n(26811),t),o(n(66825),t),o(n(11707),t),o(n(46614),t),o(n(32893),t),o(n(52974),t),o(n(20407),t),o(n(14651),t),o(n(91733),t),o(n(78255),t),o(n(58413),t),o(n(7668),t),o(n(53324),t),o(n(36305),t),o(n(46070),t),o(n(31937),t),o(n(34106),t),o(n(69704),t),o(n(27690),t),o(n(59195),t),o(n(76093),t),o(n(18260),t),o(n(24769),t),o(n(74008),t),o(n(76480),t),o(n(731),t),o(n(85151),t),o(n(53425),t),o(n(61192),t),o(n(80261),t),o(n(34494),t),o(n(87562),t),o(n(66157),t),o(n(17679),t),o(n(91291),t),o(n(31050),t),o(n(16561),t),o(n(37068),t),o(n(14833),t),o(n(47209),t),o(n(48472),t),o(n(15649),t),o(n(83856),t),o(n(78623),t),o(n(36470),t),o(n(23062),t),o(n(75133),t),o(n(79851),t),o(n(99337),t),o(n(10830),t),o(n(45893),t),o(n(52379),t),o(n(82736),t),o(n(96834),t),o(n(61338),t),o(n(56827),t),o(n(9603),t),o(n(25979),t),o(n(38248),t),o(n(97352),t),o(n(81849),t),o(n(30015),t),o(n(85553),t),o(n(57395),t),o(n(1561),t),o(n(7450),t),o(n(16428),t),o(n(57342),t),o(n(10566),t),o(n(38620),t),o(n(55729),t),o(n(95749),t),o(n(83578),t),o(n(20490),t),o(n(87062),t),o(n(74367),t),o(n(52248),t),o(n(17060),t),o(n(215),t),o(n(32226),t),o(n(38078),t),o(n(18919),t),o(n(37518),t),o(n(24941),t),o(n(44195),t),o(n(25294),t),o(n(90532),t),o(n(60623),t),o(n(15718),t),o(n(57727),t),o(n(19698),t),o(n(26639),t),o(n(95047),t),o(n(86786),t),o(n(55428),t),o(n(35469),t)},84405(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessCatalogAppAssignment=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SIA7"}getAllowedNaming(){return{maxLength:200,allowNamespace:!0}}getDescription(){}}t.BusinessCatalogAppAssignment=o},84423(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormDefinition=void 0;const s=n(50612),o=n(82245),i=n(89301),r=n(2088),a=n(75457),c=n(15838),l=n(70515),d=n(20572);class u extends r.Identifier{constructor(e,t){const n=e instanceof a.StructureNode?e.findFirstStatement(s.Form):e,r=n.findFirstExpression(o.FormName),c=r.getFirstToken().getStart(),l=r.concatTokens();super(new i.Identifier(c,l),t.filename),this.node=n,this.tableParameters=this.findTables(t),this.usingParameters=this.findType(o.FormUsing,t),this.changingParameters=this.findType(o.FormChanging,t)}getTablesParameters(){return this.tableParameters}getUsingParameters(){return this.usingParameters}getChangingParameters(){return this.changingParameters}findTables(e){const t=[],n=this.node.findFirstExpression(o.FormTables);if(void 0===n)return[];for(const s of n.findAllExpressions(o.FormParam))if(1===s.getChildren().length)t.push(new c.TypedIdentifier(s.getFirstToken(),e.filename,d.VoidType.get("FORM:UNTYPED"),["form_parameter"]));else{const n=l.FormParam.runSyntax(s,e);let o=n.getType();void 0!==s.findDirectTokenByText("STRUCTURE")&&(o=new d.TableType(o,{withHeader:!0,keyType:d.TableKeyType.default})),o instanceof d.TableType?o=new d.TableType(o.getRowType(),{withHeader:!0,keyType:d.TableKeyType.default}):o instanceof d.UnknownType||o instanceof d.VoidType||(o=new d.UnknownType("FORM TABLES type must be table type")),t.push(new c.TypedIdentifier(n.getToken(),e.filename,o,["form_parameter"]))}return t}findType(e,t){const n=this.node.findFirstExpression(e);return void 0===n?[]:this.findParams(n,t)}findParams(e,t){const n=[];for(const s of e.findAllExpressions(o.FormParam)){const e=l.FormParam.runSyntax(s,t);n.push(e)}return n}}t.FormDefinition=u},84478(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLForAllEntries=void 0;const s=n(3125),o=n(14933);class i extends s.Expression{getRunnable(){return(0,s.seq)("FOR ALL ENTRIES IN",o.SQLSource)}}t.SQLForAllEntries=i},84530(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceBeforeColon=t.SpaceBeforeColonConf=void 0;const s=n(86789),o=n(71249),i=n(71759),r=n(99732),a=n(77465),c=n(86696),l=n(52024),d=n(89301);class u extends a.BasicRuleConfig{}t.SpaceBeforeColonConf=u;class p extends r.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"space_before_colon",title:"Space before colon",shortDescription:"Checks that there are no spaces in front of colons in chained statements.",extendedInformation:"https://docs.abapopenchecks.org/checks/80/",tags:[c.RuleTag.Whitespace,c.RuleTag.SingleFile,c.RuleTag.Quickfix],badExample:"DATA : foo TYPE string.",goodExample:"DATA: foo TYPE string."}}getMessage(){return"Remove space before colon"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements()){const r=n.getColon();if(void 0===r||n.get()instanceof l.NativeSQL||n.get()instanceof d.Comment)continue;const a=[...n.getTokens()];a.push(r),a.sort(((e,t)=>e.getStart().isAfter(t.getStart())?1:-1));let c=a[0];for(const n of a){if(":"!==n.getStr()||c){if(":"===n.getStr()&&c.getRow()===n.getRow()&&c.getCol()+c.getStr().length<n.getCol()){const r=new s.Position(n.getRow(),c.getEnd().getCol()),a=new s.Position(n.getRow(),n.getStart().getCol()),l=o.EditHelper.deleteRange(e,r,a),d=i.Issue.atRowRange(e,r.getRow(),r.getCol(),a.getCol(),this.getMessage(),this.getMetadata().key,this.conf.severity,l);t.push(d)}}else{const s=i.Issue.atToken(e,n,this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(s)}c=n}}return t}}t.SpaceBeforeColon=p},84612(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoYodaConditions=t.NoYodaConditionsConf=void 0;const s=n(82245),o=n(71759),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{constructor(){super(...arguments),this.onlyConstants=!1}}t.NoYodaConditionsConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"no_yoda_conditions",title:"No Yoda conditions",shortDescription:"Finds Yoda conditions and reports issues",extendedInformation:"https://en.wikipedia.org/wiki/Yoda_conditions\n\nConditions with operators CP, NP, CS, NS, CA, NA, CO, CN are ignored",tags:[a.RuleTag.SingleFile],badExample:"IF 0 <> sy-subrc.\nENDIF.",goodExample:"IF sy-subrc <> 0.\nENDIF."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t,n;const i=[];for(const r of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllExpressions(s.Compare))||[]){const t=null===(n=r.findDirectExpression(s.CompareOperator))||void 0===n?void 0:n.concatTokens().toUpperCase();if(void 0===t||"CP"===t||"NP"===t||"CS"===t||"NS"===t||"CA"===t||"NA"===t||"CO"===t||"CN"===t)continue;const a=r.findDirectExpressions(s.Source);if(2===a.length)if(!0!==this.conf.onlyConstants){if(!1===this.withoutSpaces(a[0])&&!0===this.withoutSpaces(a[1])||!0===this.isConstant(a[0])&&!0===this.isFieldChain(a[1])){const t=a[0].getFirstToken().getStart(),n=a[1].getLastToken().getEnd(),s=o.Issue.atRange(e,t,n,"No Yoda conditions",this.getMetadata().key,this.conf.severity);i.push(s)}}else if(!0===this.isConstant(a[0])&&!1===this.isConstant(a[1])){const t=a[0].getFirstToken().getStart(),n=a[1].getLastToken().getEnd(),s=o.Issue.atRange(e,t,n,"No Yoda conditions",this.getMetadata().key,this.conf.severity);i.push(s)}}return i}isConstant(e){var t;return!(e.getChildren().length>1)&&(null===(t=e.getFirstChild())||void 0===t?void 0:t.get())instanceof s.Constant}isFieldChain(e){var t;return!(e.getChildren().length>1)&&(null===(t=e.getFirstChild())||void 0===t?void 0:t.get())instanceof s.FieldChain}withoutSpaces(e){return e.concatTokensWithoutStringsAndComments().includes(" ")}}t.NoYodaConditions=l},84613(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetCursor=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SetCursor=class{getMatcher(){const e=(0,s.seq)("LINE",o.Source),t=(0,s.seq)("OFFSET",o.Source),n=(0,s.seq)("FIELD",o.Source),r=(0,s.seq)(o.Source,o.Source),a=(0,s.seq)("SET CURSOR",(0,s.altPrio)((0,s.per)(n,t,e),r));return(0,s.verNot)(i.Version.Cloud,a)}}},84681(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Throw=void 0;const s=n(3125),o=n(82245),i=n(89301);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("MESSAGE",o.MessageSource,(0,s.opt)(o.RaiseWith));return(0,s.seq)("THROW",(0,s.opt)("RESUMABLE"),o.ClassName,(0,s.altPrio)((0,s.tok)(i.ParenLeftW),(0,s.tok)(i.ParenLeft)),(0,s.opt)((0,s.alt)(o.Source,o.ParameterListS,e)),(0,s.altPrio)((0,s.tok)(i.WParenRightW),(0,s.tok)(i.ParenRightW)))}}t.Throw=r},84685(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLHaving=void 0;const s=n(3125),o=n(17808),i=n(53504),r=n(19768),a=n(14933);class c extends s.Expression{getRunnable(){const e=(0,s.seq)(i.SQLAggregation,r.SQLCompareOperator,a.SQLSource);return(0,s.seq)("HAVING",(0,s.altPrio)(o.Dynamic,e))}}t.SQLHaving=c},84725(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteTextpool=void 0;const s=n(3125),o=n(82245),i=n(49028);t.DeleteTextpool=class{getMatcher(){const e=(0,s.seq)("LANGUAGE",o.Source),t=(0,s.seq)("STATE",o.Source),n=(0,s.seq)("DELETE TEXTPOOL",o.Source,(0,s.opt)(e),(0,s.opt)(t));return(0,s.verNot)(i.Version.Cloud,n)}}},84835(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSGroupBy=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.seq)(s.CDSName,(0,o.star)((0,o.seq)(".",s.CDSName)));return(0,o.seq)("GROUP BY",e,(0,o.star)((0,o.seq)(",",e)))}}t.CDSGroupBy=i},85086(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPDocumentHighlightProvider=void 0;const s=n(55864);t.ABAPDocumentHighlightProvider=class{constructor(e){this.reg=e}provideDocumentHighlights(e,t,n){const o=new s.LanguageServer(this.reg),i={textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}},r=[];for(const e of o.documentHighlight(i))r.push({range:new monaco.Range(e.range.start.line+1,e.range.start.character+1,e.range.end.line+1,e.range.end.character+1)});return r}}},85151(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessagingChannel=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SAMC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.MessagingChannel=o},85190(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFrom=void 0;const s=n(82245),o=n(53414),i=n(85913);t.SQLFrom=class{static runSyntax(e,t){const n=[],r=e.findAllExpressions(s.SQLFromSource);for(const e of r){for(const n of e.findAllExpressions(s.Dynamic))o.Dynamic.runSyntax(n,t);const r=e.findFirstExpression(s.DatabaseTable);void 0!==r&&n.push(i.DatabaseTable.runSyntax(r,t))}return n}}},85301(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSource2=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("&&",o.StringTemplate),t=(0,s.seq)(o.StringTemplate,(0,s.star)(e));return(0,s.altPrio)(o.Constant,o.TextElement,t,o.FieldChain)}}t.SimpleSource2=i},85325(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Try=void 0;const s=n(3125);t.Try=class{getMatcher(){return(0,s.str)("TRY")}}},85360(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IdenticalContents=t.IdenticalContentsConf=void 0;const s=n(94967),o=n(71759),i=n(77465),r=n(99732),a=n(86696),c=n(75457),l=n(52024);class d extends i.BasicRuleConfig{}t.IdenticalContentsConf=d;class u extends r.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"identical_contents",title:"Identical contents",shortDescription:"Find identical contents in blocks inside IFs, both in the beginning and in the end.",extendedInformation:"\nPrerequsites: code is pretty printed with identical cAsE\n\nChained statments are ignored",tags:[a.RuleTag.SingleFile],badExample:"IF foo = bar.\n  WRITE 'bar'.\n  WRITE 'world'.\nELSE.\n  WRITE 'foo'.\n  WRITE 'world'.\nENDIF.",goodExample:"IF foo = bar.\n  WRITE 'bar'.\nELSE.\n  WRITE 'foo'.\nENDIF.\nWRITE 'world'."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){let t=[];const n=e.getStructure();if(void 0===n)return[];for(const t of e.getStatements())if(t.get()instanceof l.Unknown)return[];for(const o of n.findAllStructuresRecursive(s.If))t=t.concat(this.analyzeIf(e,o));return t}analyzeIf(e,t){var n;const i=t.findDirectStructure(s.Body),r=t.findDirectStructures(s.ElseIf)||[],a=null===(n=t.findDirectStructure(s.Else))||void 0===n?void 0:n.findDirectStructure(s.Body);if(void 0===a)return[];const c=null==i?void 0:i.getFirstChild(),l=null==a?void 0:a.getFirstChild(),d=null==i?void 0:i.getLastChild(),u=null==a?void 0:a.getLastChild();if(r.length>0){let n=!0,i=!0;for(const e of r){const t=e.findDirectStructure(s.Body),o=null==t?void 0:t.getFirstChild(),r=null==t?void 0:t.getLastChild();if(void 0===c||void 0===d||void 0===u||void 0===l)return[];void 0!==o&&c.concatTokens()===o.concatTokens()&&l.concatTokens()===o.concatTokens()||(n=!1),void 0!==r&&d.concatTokens()===r.concatTokens()&&u.concatTokens()===r.concatTokens()||(i=!1)}if(!0===n||!0===i){const n="Identical contents";return[o.Issue.atToken(e,t.getFirstToken(),n,this.getMetadata().key,this.conf.severity)]}return[]}if(void 0===a||void 0===i)return[];if(void 0===c||void 0===l||this.isChained(c))return[];if(c.concatTokens()===l.concatTokens()){const n="Identical contents";return[o.Issue.atToken(e,t.getFirstToken(),n,this.getMetadata().key,this.conf.severity)]}if(void 0===d||void 0===u||this.isChained(d))return[];if(d.concatTokens()===u.concatTokens()){const n="Identical contents";return[o.Issue.atToken(e,t.getFirstToken(),n,this.getMetadata().key,this.conf.severity)]}return[]}isChained(e){return void 0!==e&&(e instanceof c.StatementNode?void 0!==e.getColon():this.isChained(e.getFirstStatement()))}}t.IdenticalContents=u},85409(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Divide=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Divide=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},85553(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyObject=void 0;const s=n(86219),o=n(80300),i=n(18260),r=n(67718);class a extends o.AbstractObject{getType(){return"SPRX"}getAllowedNaming(){return{maxLength:34,allowNamespace:!0}}getDescription(){var e;this.parse();const t=null===(e=this.parsedXML)||void 0===e?void 0:e.proxyData.find((e=>"INTF"===e.R3_TYPE));return null==t?void 0:t.R3_TEXT}setDirty(){this.parsedXML=void 0,super.setDirty()}parse(e,t,n){if(this.parsedXML)return{updated:!1,runtime:0};const s=Date.now();this.parsedXML=this.parseXML();const o=Date.now(),i=this.generateABAPObjects();for(const e of i)null==n||n.addDependencies(e.getFiles());return{updated:!0,runtime:o-s}}parseXML(){var e,t;const n={proxyData:[]},o=super.parseRaw2();if(void 0===o||void 0===o.abapGit||void 0===(null===(e=o.abapGit["asx:abap"])||void 0===e?void 0:e["asx:values"]))return n;const i=o.abapGit["asx:abap"]["asx:values"];return n.proxyData=(0,s.xmlToArray)(null===(t=i.PROXY_DATA)||void 0===t?void 0:t.item),n}generateABAPObjects(){var e,t,n,s,o;this.parse();const a=[];if(!this.parsedXML)return a;const c=this.parsedXML.proxyData.find((e=>"INTF"===e.R3_TYPE));if(!c||!c.R3_NAME)return a;const l=c.R3_NAME.toLowerCase(),d=this.parsedXML.proxyData.filter((e=>"METH"===e.R3_TYPE));let u=`INTERFACE ${l} PUBLIC.\n`;for(const i of d){const r=null===(e=i.R3_NAME)||void 0===e?void 0:e.toLowerCase();if(!r)continue;const a=this.parsedXML.proxyData.filter((e=>"PAIM"===e.R3_TYPE&&e.OBJ_NAME1===i.OBJ_NAME1)),c=this.parsedXML.proxyData.filter((e=>"PAEX"===e.R3_TYPE&&e.OBJ_NAME1===i.OBJ_NAME1));if(u+=`  METHODS ${r}\n`,a.length>0){u+="    IMPORTING\n";for(let e=0;e<a.length;e++){const s=a[e];u+=`      ${null===(t=s.OBJ_NAME2)||void 0===t?void 0:t.toLowerCase()} TYPE ${null===(n=s.OBJ_NAME_R)||void 0===n?void 0:n.toLowerCase()}${e===a.length-1&&0===c.length?".":""}\n`}}if(c.length>0){u+="    EXPORTING\n";for(let e=0;e<c.length;e++){const t=c[e];u+=`      ${null===(s=t.OBJ_NAME2)||void 0===s?void 0:s.toLowerCase()} TYPE ${null===(o=t.OBJ_NAME_R)||void 0===o?void 0:o.toLowerCase()}${e===c.length-1?".":""}\n`}}}u+="ENDINTERFACE.";const p=new i.Interface(l.toUpperCase());return p.addFile(new r.MemoryFile(`${l}.intf.abap`,u)),a.push(p),a}}t.ProxyObject=a},85562(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLStructureField=void 0;const s=n(3125),o=n(80997),i=n(26130);class r extends s.Expression{getRunnable(){return(0,s.seq)(o.DDLName,":",i.DDLType,";")}}t.DDLStructureField=r},85604(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CorrespondingBodyMapping=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("MAPPING",(0,s.plus)((0,s.seq)(o.ComponentName,"=",o.ComponentChain)))}}t.CorrespondingBodyMapping=i},85632(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Return=void 0;const s=n(3125),o=n(49028),i=n(82245);t.Return=class{getMatcher(){return(0,s.seq)((0,s.str)("RETURN"),(0,s.optPrio)((0,s.ver)(o.Version.v758,i.Source)))}}},85655(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionScreen=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(82054);t.SelectionScreen=class{runSyntax(e,t){const n=e.findFirstExpression(s.BlockName),a=null==n?void 0:n.getFirstToken(),c=null==n?void 0:n.concatTokens(),l=e.concatTokens().toUpperCase(),d=l.includes("BEGIN OF TABBED BLOCK")?16:20;if(void 0!==c&&c.length>d){const n="SELECTION-SCREEN block name too long, "+c;return void t.issues.push((0,r.syntaxIssue)(t,e.getFirstToken(),n))}const u=e.findFirstExpression(s.InlineField);if(void 0!==u&&u.concatTokens().length>8){const e="SELECTION-SCREEN name too long, "+u.concatTokens();return void t.issues.push((0,r.syntaxIssue)(t,u.getFirstToken(),e))}const p=null==u?void 0:u.getFirstToken();if(l.includes("BEGIN OF TABBED BLOCK")&&a){const e=new i.StructureType([{name:"PROG",type:new i.CharacterType(40)},{name:"DYNNR",type:new i.CharacterType(4)},{name:"ACTIVETAB",type:new i.CharacterType(132)}]);t.scope.addIdentifier(new o.TypedIdentifier(a,t.filename,e,["selection_screen_tab"]))}else if(l.startsWith("SELECTION-SCREEN TAB")&&p){const e=new o.TypedIdentifier(p,t.filename,new i.CharacterType(83),["selection_screen_tab"]);t.scope.addNamedIdentifier(u.concatTokens(),e)}else if(p){const e=new o.TypedIdentifier(p,t.filename,new i.CharacterType(83));t.scope.addNamedIdentifier(u.concatTokens(),e)}}}},85664(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodImplementation=void 0;const s=n(3125),o=n(82245);t.MethodImplementation=class{getMatcher(){const e=(0,s.regex)(/[\w~]+/),t=(0,s.seq)("KERNEL MODULE",(0,s.plus)(e),(0,s.optPrio)((0,s.altPrio)("FAIL","IGNORE"))),n=(0,s.seq)("USING",(0,s.plus)(o.SimpleFieldChain)),i=(0,s.seq)("DATABASE",(0,s.alt)("PROCEDURE","FUNCTION","GRAPH WORKSPACE"),"FOR HDB",o.Language,(0,s.opt)("OPTIONS READ-ONLY"),(0,s.opt)(n)),r=(0,s.seq)("BY",(0,s.alt)(t,i));return(0,s.seq)("METHOD",o.MethodName,(0,s.optPrio)(r))}}},85732(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InterfaceGlobal=void 0;const s=n(94967),o=n(50612),i=n(58720);t.InterfaceGlobal=class{getMatcher(){return(0,i.seq)((0,i.star)((0,i.sta)(o.TypePools)),(0,i.star)((0,i.sta)(o.InterfaceLoad)),(0,i.sub)(s.Interface))}}},85913(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseTable=void 0;const s=n(36453),o=n(82054);t.DatabaseTable=class{static runSyntax(e,t){const n=e.getFirstToken(),i=n.getStr();if("("===i)return;const r=t.scope.getDDIC().lookupTableOrView2(i);if(void 0===r&&!0===t.scope.getDDIC().inErrorNamespace(i)){const n='Database table or view "'+i+'" not found';t.issues.push((0,o.syntaxIssue)(t,e.getFirstToken(),n))}else void 0===r?t.scope.addReference(n,void 0,s.ReferenceType.TableVoidReference,t.filename):(t.scope.addReference(n,r.getIdentifier(),s.ReferenceType.TableReference,t.filename),t.scope.getDDICReferences().addUsing(t.scope.getParentObj(),{object:r,token:n,filename:t.filename}));return r}}},85991(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WDashW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" - "}}t.WDashW=o},85996(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLAsName=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){const e=(0,o.regex)(/^[&_!]?\*?\w*(\/\w+\/)?\d*[a-zA-Z_%\$][\w\*%\$\?]*(~\w+)?$/);return(0,o.seq)(e,(0,o.starPrio)((0,o.seq)((0,o.tok)(s.Dash),e)))}}t.SQLAsName=i},86181(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLIntoTable=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)((0,s.altPrio)("INTO","APPENDING"),(0,s.optPrio)("CORRESPONDING FIELDS OF"),"TABLE",o.SQLTarget)}}t.SQLIntoTable=i},86219(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.xmlToArray=function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},t.unescape=function(e){return void 0===e?"":(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&gt;/g,">")).replace(/&lt;/g,"<")).replace(/&quot;/g,'"')).replace(/&apos;/g,"'")}},86220(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const s=n(86260),o=n(75457),i=n(29780),r=n(15838),a=n(45363),c=n(20572),l=n(82245),d=n(50612),u=n(94967),p=n(80017),f=n(9224),g=n(5807),h=n(83790),T=n(95997),m=n(3201);class y{static runSyntax(e,t){var n;const i=null===(n=e.getFirstChild())||void 0===n?void 0:n.getChildren()[3];if(i instanceof o.TokenNode&&"COMMON"===i.concatTokens().toUpperCase())return void this.runCommonPartSyntax(e,t);const a=e.findFirstExpression(l.DefinitionName).getFirstToken();let f=!1;const g={},h=[];for(const n of e.getChildren()){const e=n.get();if(n instanceof o.StatementNode&&e instanceof d.Data){const e=(new s.Data).runSyntax(n,t);e&&(h.push({name:e.getName(),type:e.getType()}),void 0!==e.getValue()&&(g[e.getName()]=e.getValue()))}else if(n instanceof o.StructureNode&&e instanceof u.Data){const e=y.runSyntax(n,t);e&&h.push({name:e.getName(),type:e.getType()})}else if(n instanceof o.StatementNode&&e instanceof d.DataBegin)n.findDirectTokenByText("OCCURS")&&(f=!0);else if(n instanceof o.StatementNode&&e instanceof d.IncludeType){const e=(new p.IncludeType).runSyntax(n,t);if(e instanceof c.VoidType){if(!0===f){const n=new c.TableType(e,{withHeader:!0,keyType:c.TableKeyType.default});return new r.TypedIdentifier(a,t.filename,n)}return new r.TypedIdentifier(a,t.filename,e)}if(e instanceof c.UnknownType)return new r.TypedIdentifier(a,t.filename,e);for(const t of e)h.push(t)}}if(!0===f)return new r.TypedIdentifier(a,t.filename,new c.TableType(new c.StructureType(h),{withHeader:!0,keyType:c.TableKeyType.default}));{const e=Object.keys(g).length>0?g:void 0;return new r.TypedIdentifier(a,t.filename,new c.StructureType(h),void 0,e)}}static runCommonPartSyntax(e,t){for(const n of e.getChildren()){const e=n.get();if(n instanceof o.StatementNode&&e instanceof d.Data){const e=(new s.Data).runSyntax(n,t);e&&t.scope.addIdentifier(e)}else if(n instanceof o.StructureNode&&e instanceof u.Data){const e=y.runSyntax(n,t);e&&t.scope.addIdentifier(e)}else if(n instanceof o.StatementNode&&e instanceof d.Type){const e=(new i.Type).runSyntax(n,t);e&&t.scope.addType(e)}else if(n instanceof o.StructureNode&&e instanceof u.Types){const e=(new a.Types).runSyntax(n,t);e&&t.scope.addType(e)}else if(n instanceof o.StatementNode&&e instanceof d.Constant){const e=(new f.Constant).runSyntax(n,t);e&&t.scope.addIdentifier(e)}else if(n instanceof o.StatementNode&&e instanceof d.Ranges)(new h.Ranges).runSyntax(n,t);else if(n instanceof o.StatementNode&&e instanceof d.SelectOption)(new T.SelectOption).runSyntax(n,t);else if(n instanceof o.StatementNode&&e instanceof d.Parameter)(new m.Parameter).runSyntax(n,t);else if(n instanceof o.StructureNode&&e instanceof u.Constants){const{type:e,values:s}=(new g.Constants).runSyntax(n,t);e&&t.scope.addIdentifier(e)}}}}t.Data=y},86242(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceFieldSymbol=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return new o.FieldSymbol}}t.SourceFieldSymbol=i},86260(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Data=void 0;const s=n(82245),o=n(15838),i=n(7275),r=n(69953),a=n(82054),c=n(20572);t.Data=class{runSyntax(e,t){const n=e.findFirstExpression(s.DefinitionName),l=e.findFirstExpression(s.DataDefinition);if(l){const s=i.DataDefinition.runSyntax(l,t);if(!0===(null==s?void 0:s.getType().isGeneric())&&!1===(null==s?void 0:s.getType().containsVoid())){const i="DATA definition cannot be generic, "+(null==n?void 0:n.concatTokens());return t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),i)),new o.TypedIdentifier(s.getToken(),t.filename,c.VoidType.get(a.CheckSyntaxKey))}return s}if(n)return new o.TypedIdentifier(n.getFirstToken(),t.filename,new r.UnknownType("data, fallback"))}}},86369(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexCompletelyContained=t.IndexCompletelyContainedConf=void 0;const s=n(77465),o=n(86696),i=n(71759),r=n(86789),a=n(84383);class c extends s.BasicRuleConfig{}t.IndexCompletelyContainedConf=c,t.IndexCompletelyContained=class{constructor(){this.conf=new c}getMetadata(){return{key:"index_completely_contained",title:"Check if database table indexes are completely contained",shortDescription:"If indexes are completely contained in other indexes, they can be removed to improve performance.",tags:[o.RuleTag.Performance,o.RuleTag.SingleFile]}}initialize(){return this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){if(!(e instanceof a.Table))return[];const t=e.getSecondaryIndexes();if(void 0===t||0===t.length)return[];const n=[];for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<t.length;a++){if(s===a)continue;const c=t[a];let l=!0;for(const e of o.fields)if(-1===c.fields.indexOf(e)){l=!1;break}if(l){const t=new r.Position(1,1),s=`Index "${o.name}" is completely contained in index "${c.name}"`;n.push(i.Issue.atPosition(e.getFiles()[0],t,s,this.getMetadata().key,this.conf.severity))}}}return n}}},86471(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CSequenceType=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```csequence```"}isGeneric(){return!0}toABAP(){throw new Error("csequence, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_CSEQUENCE"}}t.CSequenceType=o},86582(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoExternalFormCalls=t.NoExternalFormCallsConf=void 0;const s=n(50612),o=n(82245),i=n(99732),r=n(77465),a=n(71759),c=n(86696);class l extends r.BasicRuleConfig{}t.NoExternalFormCallsConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"no_external_form_calls",title:"No external FORM calls",shortDescription:"Detect external form calls",badExample:"PERFORM foo IN PROGRAM bar.\n\nPERFORM foo(bar).",tags:[c.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return t;for(const i of n.findAllStatements(s.Perform))if(i.findDirectExpression(o.IncludeName)||i.findDirectTokenByText("PROGRAM")){const n="No external FORM calls";t.push(a.Issue.atStatement(e,i,n,this.getMetadata().key,this.conf.severity))}return t}}t.NoExternalFormCalls=d},86589(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DynproLoop=void 0;const s=n(50612),o=n(58720),i=n(62582);t.DynproLoop=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.DynproLoop),(0,o.star)((0,o.alt)((0,o.sta)(s.Module),(0,o.sta)(s.Field),(0,o.sub)(i.Chain))),(0,o.sta)(s.EndLoop))}}},86620(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalMethods=void 0;const s=n(3125),o=n(55276);class i extends s.Expression{getRunnable(){return(0,s.seq)("FINAL METHODS",(0,s.plus)(o.MethodName))}}t.FinalMethods=i},86667(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dereference=void 0;const s=n(20572),o=n(82054);t.Dereference=class{static runSyntax(e,t,n){if(t instanceof s.VoidType||t instanceof s.AnyType||t instanceof s.DataType||void 0===t||t instanceof s.UnknownType)return t;if(!(t instanceof s.DataReference)){const t="Not a data reference, cannot be dereferenced";return n.issues.push((0,o.syntaxIssue)(n,e.getFirstToken(),t)),s.VoidType.get(o.CheckSyntaxKey)}return t.getType()}}},86696(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RuleTag=void 0,function(e){e.Experimental="Experimental",e.DeprecationCandidate="DeprecationCandidate",e.Upport="Upport",e.Downport="Downport",e.Whitespace="Whitespace",e.Naming="Naming",e.Quickfix="Quickfix",e.Performance="Performance",e.Syntax="Syntax",e.Security="Security",e.Styleguide="Styleguide",e.SingleFile="SingleFile"}(n||(t.RuleTag=n={}))},86720(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessAfterInput=void 0;const s=n(50612),o=n(58720),i=n(62582),r=n(12749),a=n(86589),c=n(58755);t.ProcessAfterInput=class{getMatcher(){const e=(0,o.star)((0,o.alt)((0,o.sta)(s.Module),(0,o.sta)(s.Field),(0,o.sta)(s.CallSubscreen),(0,o.sub)(i.Chain),(0,o.sub)(a.DynproLoop),(0,o.sub)(c.LoopExtract),(0,o.sub)(r.Loop)));return(0,o.seq)((0,o.sta)(s.ProcessAfterInput),e)}}},86768(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLTable=void 0;const s=n(3125),o=n(376),i=n(80997),r=n(92759);class a extends s.Expression{getRunnable(){return(0,s.seq)("DEFINE TABLE",i.DDLName,"{",(0,s.plusPrio)((0,s.altPrio)(r.DDLTableField,o.DDLInclude)),"}")}}t.DDLTable=a},86786(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebDynproComponent=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WDYN"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.WebDynproComponent=o},86789(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Position=void 0,t.Position=class{constructor(e,t){this.row=e,this.col=t}getCol(){return this.col}getRow(){return this.row}isAfter(e){return this.row>e.row||this.row===e.row&&this.col>=e.col}equals(e){return this.row===e.getRow()&&this.col===e.getCol()}isBefore(e){return this.row<e.row||this.row===e.row&&this.col<e.col}isBetween(e,t){return this.isAfter(e)&&this.isBefore(t)}}},86822(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Initialization=void 0;const s=n(3125),o=n(49028);t.Initialization=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"INITIALIZATION")}}},86831(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tables=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Tables=class{getMatcher(){const e=(0,s.seq)("TABLES",o.Field);return(0,s.verNot)(i.Version.Cloud,e)}}},86910(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;const s=n(84423),o=n(2403),i=n(82245),r=n(82054);t.Form=class{runSyntax(e,t){var n;const a=null===(n=e.findDirectExpression(i.FormName))||void 0===n?void 0:n.concatTokens();if(void 0===a){const n="Form, could not find name";return void t.issues.push((0,r.syntaxIssue)(t,e.getFirstToken(),n))}t.scope.push(o.ScopeType.Form,a,e.getFirstToken().getStart(),t.filename);const c=new s.FormDefinition(e,t);t.scope.addList(c.getUsingParameters()),t.scope.addList(c.getChangingParameters()),t.scope.addList(c.getTablesParameters())}}},86926(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetTime=void 0;const s=n(3125),o=n(82245);t.GetTime=class{getMatcher(){const e=(0,s.seq)((0,s.alt)("STAMP FIELD","FIELD"),o.Target);return(0,s.seq)("GET TIME",(0,s.opt)(e))}}},86933(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextElementKey=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^\w{3}$/)}}t.TextElementKey=o},87062(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SharedMemory=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SHMA"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SharedMemory=o},87140(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadTextpool=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ReadTextpool=class{getMatcher(){const e=(0,s.seq)("LANGUAGE",o.Source),t=(0,s.seq)("INTO",o.SimpleTarget),n=(0,s.seq)("STATE",o.Source),r=(0,s.seq)("READ TEXTPOOL",o.Source,(0,s.per)(t,e,n));return(0,s.verNot)(i.Version.Cloud,r)}}},87259(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ForbiddenIdentifier=t.ForbiddenIdentifierConf=void 0;const s=n(99732),o=n(77465),i=n(71759),r=n(75457),a=n(86696);class c extends o.BasicRuleConfig{constructor(){super(...arguments),this.check=[]}}t.ForbiddenIdentifierConf=c;class l extends s.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"forbidden_identifier",title:"Forbidden Identifier",shortDescription:"Forbid use of specified identifiers, list of regex.",extendedInformation:"Used in the transpiler to find javascript keywords in ABAP identifiers,\nhttps://github.com/abaplint/transpiler/blob/bda94b8b56e2b7f2f87be2168f12361aa530220e/packages/transpiler/src/validation.ts#L44",tags:[a.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e,void 0===this.conf.check&&(this.conf.check=[])}runParsed(e){if(0===this.conf.check.length)return[];let t=[];for(const n of e.getStatements())t=t.concat(this.traverse(n,e));return t}traverse(e,t){let n=[];for(const s of e.getChildren())if(s instanceof r.TokenNodeRegex)n=n.concat(this.check(s.get(),t));else{if(s instanceof r.TokenNode)continue;n=n.concat(this.traverse(s,t))}return n}check(e,t){const n=e.getStr(),s=[];for(const o of this.conf.check)if(new RegExp(o,"i").exec(n)){const o='Identifer "'+n+'" not allowed';s.push(i.Issue.atToken(t,e,o,this.getMetadata().key,this.conf.severity))}return s}}t.ForbiddenIdentifier=l},87309(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldOffset=void 0;const s=n(82245),o=n(36453),i=n(45769);t.FieldOffset=class{static runSyntax(e,t){const n=e.findDirectExpression(s.SimpleFieldChain2);return n?void i.FieldChain.runSyntax(n,t,o.ReferenceType.DataReadReference):parseInt(e.getLastToken().getStr(),10)}}},87322(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Translate=void 0;const s=n(3125),o=n(82245);t.Translate=class{getMatcher(){const e=(0,s.seq)("TO",(0,s.altPrio)("UPPER","LOWER"),"CASE"),t=(0,s.seq)("USING",o.Source);return(0,s.seq)("TRANSLATE",o.Target,(0,s.altPrio)(e,t))}}},87357(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TestInjection=void 0;const s=n(50612),o=n(58720),i=n(79175);t.TestInjection=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.TestInjection),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndTestInjection))}}},87562(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneCustomColor=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN13"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneCustomColor=o},87869(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLParser=t.DDLKind=void 0;const s=n(3125),o=n(75457),i=n(49028),r=n(79922),a=n(6491);var c;!function(e){e.Structure="structure",e.Table="table"}(c||(t.DDLKind=c={})),t.DDLParser=class{parse(e){const t=r.DDLLexer.run(e);let n=s.Combi.run(new a.DDLStructure,t,i.defaultVersion);if(void 0===n&&(n=s.Combi.run(new a.DDLTable,t,i.defaultVersion)),void 0!==n&&n[0]instanceof o.ExpressionNode)return this.parsedToResult(n[0])}parsedToResult(e){var t,n;const s=[];let o=e.findDirectExpressions(a.DDLStructureField);o=o.concat(e.findDirectExpressions(a.DDLTableField)),o=o.concat(e.findDirectExpressions(a.DDLInclude));for(const e of o){const o=(null===(t=e.findDirectExpression(a.DDLName))||void 0===t?void 0:t.concatTokens())||"";if(e.get()instanceof a.DDLInclude)s.push({name:".INCLUDE",type:o,key:!1,notNull:!1});else{const t=(null===(n=e.findDirectExpression(a.DDLType))||void 0===n?void 0:n.concatTokens())||"";s.push({name:o,type:t,key:!1,notNull:!1})}}return{name:e.findDirectExpression(a.DDLName).concatTokens(),kind:e.get()instanceof a.DDLStructure?c.Structure:c.Table,fields:s}}}},87923(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Parameter=class{getMatcher(){const e=(0,s.altPrio)("PARAMETER","PARAMETERS"),t=(0,s.seq)("DEFAULT",(0,s.altPrio)(o.Constant,o.FieldChain)),n=(0,s.seq)("RADIOBUTTON GROUP",o.RadioGroupName),r=(0,s.seq)((0,s.altPrio)("TYPE","LIKE"),(0,s.altPrio)(o.TypeName,o.Dynamic),(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength)),a=(0,s.seq)("MEMORY ID",o.SimpleSource1),c=(0,s.str)("AS LISTBOX"),l=(0,s.seq)("USER-COMMAND",(0,s.regex)(/^[\w\?\/]+$/)),d=(0,s.seq)("MODIF ID",o.Modif),u=(0,s.seq)("VISIBLE LENGTH",o.Constant),p=(0,s.seq)("LENGTH",o.Constant),f=(0,s.seq)("MATCHCODE OBJECT",o.Field),g=(0,s.seq)("DECIMALS",o.Source),h=(0,s.seq)("FOR TABLE",o.DatabaseTable,(0,s.opt)("VALUE-REQUEST")),T=(0,s.per)(r,t,"OBLIGATORY",f,l,p,g,n,a,d,c,u,h,"VALUE CHECK","NO-DISPLAY","AS CHECKBOX","LOWER CASE"),m=(0,s.seq)(e,o.FieldSub,(0,s.opt)(o.ConstantFieldLength),(0,s.opt)(T));return(0,s.verNot)(i.Version.Cloud,m)}}},88124(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractFile=void 0,t.AbstractFile=class{constructor(e){this.filename=e}getFilename(){return this.filename}baseName(){let e=this.getFilename(),t=e.lastIndexOf("\\");return t&&(t+=1),e=e.substring(t),t=e.lastIndexOf("/"),t&&(t+=1),e.substring(t)}getObjectType(){var e;return null===(e=this.baseName().split(".")[1])||void 0===e?void 0:e.toUpperCase()}getObjectName(){const e=this.baseName().split(".");return e[0]=e[0].replace(/%23/g,"#"),e[0]=e[0].replace(/%3e/g,">"),e[0]=e[0].replace(/%3c/g,"<"),e[0]=e[0].toUpperCase().replace(/#/g,"/"),e[0]=e[0].replace("(","/"),e[0]=e[0].replace(")","/"),e[0]}}},88158(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Return=void 0;const s=n(82245),o=n(36453),i=n(82054),r=n(93170);t.Return=class{runSyntax(e,t){const n=e.findDirectExpression(s.Source);if(n){const e=t.scope.findReturningParameter();if(void 0===e){const e="Method does not have a RETURNING parameter to assign to";return void t.issues.push((0,i.syntaxIssue)(t,n.getFirstToken(),e))}t.scope.addReference(n.getFirstToken(),e,o.ReferenceType.DataReadReference,t.filename),r.Source.runSyntax(n,t,e.getType())}}}},88167(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.StringTemplateBegin=void 0;const s=n(61785);class o extends s.AbstractToken{}t.StringTemplateBegin=o},88314(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RadioGroupName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[\w\d%]+$/)}}t.RadioGroupName=o},88532(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassConstant=void 0;const s=n(15838);class o extends s.TypedIdentifier{constructor(e,t,n){super(e.getToken(),e.getFilename(),e.getType(),["read_only","static"],n),this.visibility=t}getVisibility(){return this.visibility}}t.ClassConstant=o},88558(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferInline=t.PreferInlineConf=void 0;const s=n(50612),o=n(77465),i=n(71759),r=n(86696),a=n(49028),c=n(12620),l=n(52424),d=n(2403),u=n(36453),p=n(71249);class f extends o.BasicRuleConfig{}t.PreferInlineConf=f,t.PreferInline=class{constructor(){this.conf=new f}getMetadata(){return{key:"prefer_inline",title:"Prefer Inline Declarations",shortDescription:"Prefer inline to up-front declarations.",extendedInformation:"EXPERIMENTAL\n\nActivates if language version is v740sp02 or above.\n\nVariables must be local(METHOD or FORM).\n\nNo generic or void typed variables. No syntax errors.\n\nFirst position used must be a full/pure write.\n\nMove statment is not a cast(?=)\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#prefer-inline-to-up-front-declarations",tags:[r.RuleTag.Styleguide,r.RuleTag.Upport,r.RuleTag.Experimental,r.RuleTag.Quickfix],badExample:"DATA foo TYPE i.\nfoo = 2.\nDATA percentage TYPE decfloat34.\npercentage = ( comment_number / abs_statement_number ) * 100.",goodExample:"DATA(foo) = 2.\nDATA(percentage) = CONV decfloat34( comment_number / abs_statement_number ) * 100."}}getConfig(){return this.conf}initialize(e){return this.reg=e,this}setConfig(e){this.conf=e}run(e){if("INTF"===e.getType())return[];if(this.reg.getConfig().getVersion()<a.Version.v740sp02&&this.reg.getConfig().getVersion()!==a.Version.Cloud)return[];if(!(e instanceof c.ABAPObject))return[];const t=new l.SyntaxLogic(this.reg,e).run();if(t.issues.length>0)return[];const n=this.findScopeCandidates(t.spaghetti.getTop()),s=[];for(const t of n)s.push(...this.analyzeScope(t,e));return s}analyzeScope(e,t){var n,o;const r=[],a=e.getData().vars;for(const c in a){const l=a[c];if(!1===this.isLocalDefinition(e,l)||l.getMeta().includes("inline")||l.getMeta().includes("form_parameter"))continue;if(!0===l.getType().isGeneric())continue;if(!0===l.getType().containsVoid())continue;const d=this.firstUseIsWrite(e,l);if(void 0===d)continue;const u=this.findNextToken(d,t);if(void 0===u)continue;if((null==u?void 0:u.getStart().equals(d.position.getEnd()))&&"."!==u.getStr()&&","!==u.getStr())continue;const f=t.getABAPFileByName(l.getFilename()),g=p.EditHelper.findStatement(u,f),h=null==g?void 0:g.get();if(void 0===h)continue;if(!(h instanceof s.Move||h instanceof s.Catch||h instanceof s.ReadTable||h instanceof s.Loop)||(null===(n=null==g?void 0:g.concatTokens())||void 0===n?void 0:n.includes("?="))||(null===(o=null==g?void 0:g.concatTokens())||void 0===o?void 0:o.includes(" #(")))continue;const T=p.EditHelper.findStatement(l.getToken(),f),m=null==T?void 0:T.concatTokens().toUpperCase();if(null==m?void 0:m.includes("BEGIN OF"))continue;let y;if(f&&T){const e=p.EditHelper.deleteStatement(f,T),t=l.getName(),n=t.startsWith("<")?"FIELD-SYMBOL("+t+")":"DATA("+t+")",s=p.EditHelper.replaceRange(f,d.position.getStart(),d.position.getEnd(),n);y=p.EditHelper.merge(e,s)}const S=this.getMetadata().title+", "+c;r.push(i.Issue.atIdentifier(l,S,this.getMetadata().key,this.conf.severity,y))}return r}findNextToken(e,t){const n=t.getABAPFileByName(e.resolved.getFilename());if(void 0!==n)for(const t of n.getTokens())if(t.getStart().isAfter(e.position.getEnd()))return t}firstUseIsWrite(e,t){var n,s,o;for(const s of e.getData().references)if(s.referenceType===u.ReferenceType.TypeReference&&!0===(null===(n=s.resolved)||void 0===n?void 0:n.getStart().equals(t.getStart())))return;let i,r;for(const n of e.getData().references)if(n.referenceType===u.ReferenceType.DataReadReference&&!1!==(null===(s=n.resolved)||void 0===s?void 0:s.getStart().equals(t.getStart()))&&n.resolved){i={position:n.position,resolved:n.resolved};break}for(const n of e.getData().references)if(n.referenceType===u.ReferenceType.DataWriteReference&&!1!==(null===(o=n.resolved)||void 0===o?void 0:o.getStart().equals(t.getStart()))&&n.resolved){r={position:n.position,resolved:n.resolved};break}return void 0===i||void 0!==r&&r.position.getStart().getRow()!==i.position.getStart().getRow()&&r.position.getStart().isBefore(i.position.getStart())?r:void 0}isLocalDefinition(e,t){const{start:n,end:s}=e.calcCoverage();return!(!t.getStart().isAfter(n)||!t.getStart().isBefore(s))}findScopeCandidates(e){if(e.getIdentifier().stype===d.ScopeType.Form||e.getIdentifier().stype===d.ScopeType.Method)return[e];let t=[];for(const n of e.getChildren())t=t.concat(this.findScopeCandidates(n));return t}}},88636(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndTry=void 0;const s=n(3125);t.EndTry=class{getMatcher(){return(0,s.str)("ENDTRY")}}},88673(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BehaviorDefinition=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"BDEF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BehaviorDefinition=o},88705(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CLikeType=void 0;const s=n(97502);class o extends s.AbstractType{static get(){return this.singleton}constructor(){super()}toText(){return"```clike```"}isGeneric(){return!0}toABAP(){throw new Error("clike, generic")}containsVoid(){return!1}toCDS(){return"abap.TODO_CLIKE"}}t.CLikeType=o,o.singleton=new o},88758(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RaiseWith=void 0;const s=n(82245),o=n(93170);t.RaiseWith=class{static runSyntax(e,t){for(const n of e.findAllExpressionsMulti([s.SimpleSource1,s.Source]))o.Source.runSyntax(n,t)}}},88853(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndCase=void 0;const s=n(3125);t.EndCase=class{getMatcher(){return(0,s.str)("ENDCASE")}}},88904(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WAtW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return" @ "}}t.WAtW=o},88920(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.If=void 0;const s=n(50612),o=n(58720),i=n(79175),r=n(32161),a=n(10894);t.If=class{getMatcher(){const e=(0,o.seq)((0,o.opt)((0,o.sub)(i.Body)),(0,o.star)((0,o.sub)(r.ElseIf)),(0,o.opt)((0,o.sub)(a.Else)));return(0,o.beginEnd)((0,o.sta)(s.If),e,(0,o.sta)(s.EndIf))}}},88993(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetCursor=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetCursor=class{getMatcher(){const e=(0,s.seq)("LINE",o.Target),t=(0,s.seq)("FIELD",o.Target),n=(0,s.seq)("OFFSET",o.Target),r=(0,s.seq)("VALUE",o.Target),a=(0,s.seq)("LENGTH",o.Target),c=(0,s.seq)("AREA",o.Target),l=(0,s.seq)("GET CURSOR",(0,s.per)(e,(0,s.opt)("DISPLAY"),t,n,r,a,c));return(0,s.verNot)(i.Version.Cloud,l)}}},89003(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Convert=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Convert=class{getMatcher(){const e=(0,s.seq)("TIME",o.Target),t=(0,s.seq)("DATE",o.Target),n=(0,s.seq)("INTO",(0,s.per)(e,t)),r=(0,s.seq)("DAYLIGHT SAVING TIME",o.Source),a=(0,s.seq)("DAYLIGHT SAVING TIME",o.Target),c=(0,s.seq)("TIME ZONE",o.Source),l=(0,s.seq)("TIME STAMP",o.Source,(0,s.per)(c,n,a)),d=(0,s.seq)("DATE",o.Source),u=(0,s.seq)("TIME",o.Source),p=(0,s.seq)("INTO TIME STAMP",o.Target),f=(0,s.ver)(i.Version.v754,(0,s.seq)("INTO UTCLONG",o.Target)),g=(0,s.seq)("INTO INVERTED-DATE",o.Target),h=(0,s.seq)((0,s.per)(d,u),(0,s.per)(r,p,c,g,f)),T=(0,s.seq)("INVERTED-DATE",o.Source,"INTO DATE",o.Target),m=(0,s.ver)(i.Version.v754,(0,s.seq)("UTCLONG",o.Source,(0,s.per)(c,n,r)));return(0,s.seq)("CONVERT",(0,s.alt)(l,h,T,m))}}},89072(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSource=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.seq)((0,s.tok)(o.ParenLeft),i.MessageClass,(0,s.tok)(o.ParenRightW)),t=(0,s.seq)(i.MessageTypeAndNumber,(0,s.opt)(e)),n=(0,s.seq)("ID",i.Source,"TYPE",i.Source,"NUMBER",(0,s.altPrio)(i.MessageNumber,i.Source));return(0,s.altPrio)(t,n)}}t.MessageSource=r},89186(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EntityAssociation=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[\/\w]+(\\_|\\\\)[\/\_\w\\~]+$/)}}t.EntityAssociation=o},89224(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomizingTransaction=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CUS1"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.CustomizingTransaction=o},89301(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(67400),t),o(n(17587),t),o(n(27137),t),o(n(88904),t),o(n(24485),t),o(n(46216),t),o(n(29020),t),o(n(9363),t),o(n(94884),t),o(n(34475),t),o(n(15247),t),o(n(49906),t),o(n(14884),t),o(n(30345),t),o(n(49615),t),o(n(39616),t),o(n(46901),t),o(n(10392),t),o(n(90316),t),o(n(74851),t),o(n(91508),t),o(n(66651),t),o(n(43372),t),o(n(38562),t),o(n(15961),t),o(n(16140),t),o(n(42e3),t),o(n(85991),t),o(n(76037),t),o(n(61180),t),o(n(83036),t),o(n(2455),t),o(n(83197),t),o(n(34268),t),o(n(44036),t),o(n(72983),t),o(n(36196),t),o(n(82293),t),o(n(88167),t),o(n(32059),t),o(n(20357),t),o(n(43438),t),o(n(51520),t),o(n(93422),t),o(n(26137),t),o(n(493),t)},89320(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnum=void 0;const s=n(3125),o=n(82245),i=n(49028);t.TypeEnum=class{getMatcher(){return(0,s.ver)(i.Version.v751,(0,s.seq)("TYPES",o.NamespaceSimpleName,o.Value))}}},89386(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Stop=void 0;const s=n(3125),o=n(49028);t.Stop=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"STOP")}}},89430(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionNode=void 0;const s=n(80387),o=n(89301),i=n(98069);class r extends i.AbstractNode{constructor(e){super(),this.expression=e}get(){return this.expression}countTokens(){let e=0;for(const t of this.getChildren())e+=t.countTokens();return e}getFirstToken(){for(const e of this.getChildren())return e.getFirstToken();throw new Error("ExpressionNode, getFirstToken, no children")}concatTokensWithLinebreaks(){let e,t="";for(const n of this.getTokens())n instanceof o.Pragma||(""===t?t=n.getStr():e&&e.getStr().length+e.getCol()===n.getCol()&&e.getRow()===n.getRow()?t+=n.getStr():t=e&&e.getRow()!==n.getRow()?t+"\n"+n.getStr():t+" "+n.getStr(),e=n);return t}concatTokens(){let e,t="";for(const n of this.getTokens())n instanceof o.Pragma||(""===t?t=n.getStr():e&&e.getStr().length+e.getCol()===n.getCol()&&e.getRow()===n.getRow()?t+=n.getStr():t=t+" "+n.getStr(),e=n);return t}concatTokensWithoutStringsAndComments(){let e,t="";for(const n of this.getTokens())n instanceof o.Comment||n instanceof o.StringToken||n instanceof o.StringTemplate||n instanceof o.StringTemplateBegin||n instanceof o.StringTemplateMiddle||n instanceof o.StringTemplateEnd||(""===t?t=n.getStr():e&&e.getStr().length+e.getCol()===n.getCol()&&e.getRow()===n.getRow()?t+=n.getStr():t=t+" "+n.getStr(),e=n);return t}getTokens(){const e=[];for(const t of this.getChildren())e.push(...this.toTokens(t));return e}toTokens(e){const t=[];if(e instanceof s.TokenNode)return t.push(e.get()),t;for(const n of e.getChildren())n instanceof s.TokenNode?t.push(n.get()):t.push(...this.toTokens(n));return t}getLastToken(){const e=this.getLastChild();if(e)return e.getLastToken();throw new Error("ExpressionNode, getLastToken, no children")}getAllTokens(){const e=[];for(const t of this.getChildren())t instanceof s.TokenNode?e.push(t.get()):e.push(...t.getAllTokens());return e}getDirectTokens(){const e=[];for(const t of this.getChildren())t instanceof s.TokenNode&&e.push(t.get());return e}findDirectExpression(e){for(const t of this.getChildren())if(t instanceof r&&t.get()instanceof e)return t}findExpressionAfterToken(e){const t=this.getChildren();for(let n=0;n<t.length-1;n++){const o=t[n],i=t[n+1];if(o instanceof s.TokenNode&&o.get().getStr().toUpperCase()===e.toUpperCase()&&i instanceof r)return i}}findDirectExpressions(e){const t=[];for(const n of this.getChildren())n instanceof r&&n.get()instanceof e&&t.push(n);return t}findDirectExpressionsMulti(e){const t=[];for(const n of this.getChildren())if(n instanceof r)for(const s of e)if(n.get()instanceof s){t.push(n);break}return t}findDirectTokenByText(e){const t=e.toUpperCase();for(const e of this.getChildren())if(e instanceof s.TokenNode&&e.get().getStr().toUpperCase()===t)return e.get()}findAllExpressionsRecursive(e){const t=[];for(const n of this.getChildren())n instanceof s.TokenNode||(n.get()instanceof e&&t.push(n),t.push(...n.findAllExpressionsRecursive(e)));return t}findAllExpressions(e){const t=[];for(const n of this.getChildren())n instanceof s.TokenNode||(n.get()instanceof e?t.push(n):t.push(...n.findAllExpressions(e)));return t}findAllExpressionsMulti(e,t=!1){const n=[];for(const o of this.getChildren()){if(o instanceof s.TokenNode)continue;const i=n.length;for(const t of e)o.get()instanceof t&&n.push(o);i!==n.length&&!0!==t||n.push(...o.findAllExpressionsMulti(e,t))}return n}findFirstExpression(e){if(this.get()instanceof e)return this;for(const t of this.getChildren())if(!(t instanceof s.TokenNode)){if(t.get()instanceof e)return t;{const n=t.findFirstExpression(e);if(n)return n}}}}t.ExpressionNode=r},89556(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionScreenNaming=t.SelectionScreenNamingConf=void 0;const s=n(99732),o=n(71759),i=n(50127),r=n(50612),a=n(74650),c=n(82245),l=n(86696);class d extends i.NamingRuleConfig{constructor(){super(...arguments),this.parameter="^P_.+$",this.selectOption="^S_.+$",this.screenElement="^SC_.+$"}}t.SelectionScreenNamingConf=d;class u extends s.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"selection_screen_naming",title:"Selection screen naming conventions",shortDescription:"Allows you to enforce a pattern, such as a prefix, for selection-screen variable names.",tags:[l.RuleTag.Naming,l.RuleTag.SingleFile]}}getDescription(e,t){return"required"===this.conf.patternKind?`Selection-Screen variable name does not match pattern ${e}: ${t}`:`Selection-Screen variable name must not match pattern ${e}: ${t}`}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];void 0===this.conf.patternKind&&(this.conf.patternKind="required");let n=!1,s=!1,i=!1;void 0!==this.conf.parameter&&0!==this.conf.parameter.length||(n=!0),void 0!==this.conf.selectOption&&0!==this.conf.selectOption.length||(s=!0),void 0!==this.conf.screenElement&&0!==this.conf.screenElement.length||(i=!0);for(const c of e.getStatements())if(c.get()instanceof r.Parameter&&!n||c.get()instanceof r.SelectOption&&!s||c.get()instanceof r.SelectionScreen&&!i){const n=this.getFieldForStatementNode(c),s=new RegExp(this.getPatternForStatement(c.get()),"i");n&&a.NameValidator.violatesRule(n.getFirstToken().getStr(),s,this.conf)&&t.push(o.Issue.atToken(e,n.getFirstToken(),this.getDescription(this.getPatternForStatement(c.get()),n.getFirstToken().getStr()),this.getMetadata().key,this.conf.severity))}return t}getPatternForStatement(e){let t="";return e instanceof r.Parameter?t=this.conf.parameter:e instanceof r.SelectOption?t=this.conf.selectOption:e instanceof r.SelectionScreen&&(t=this.conf.screenElement),t}getFieldForStatementNode(e){if(e.get()instanceof r.Parameter)return e.findFirstExpression(c.FieldSub);if(e.get()instanceof r.SelectOption)return e.findFirstExpression(c.FieldSub);if(e.get()instanceof r.SelectionScreen){let t=e.findFirstExpression(c.InlineField);return void 0===t&&e.concatTokens().toUpperCase().includes(" BEGIN OF TABBED BLOCK")&&(t=e.findFirstExpression(c.BlockName)),t}}}t.SelectionScreenNaming=u},89592(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingPointType=void 0;const s=n(97502);class o extends s.AbstractType{constructor(e,t){if(super({qualifiedName:t}),e<=0)throw new Error("Bad LENGTH, Floating Point");this.length=e}getLength(){return this.length}toText(){return"```f LENGTH "+this.getLength()+"```"}toABAP(){return"f LENGTH "+this.getLength()}isGeneric(){return!1}containsVoid(){return!1}toCDS(){return"abap.fltp"}}t.FloatingPointType=o},89641(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("WITH INDICATORS",o.ComponentName,(0,s.optPrio)((0,s.seq)("TYPE",o.TypeName))),t=(0,s.seq)(o.TypeName,(0,s.optPrio)(o.Default)),n=(0,s.altPrio)((0,s.seq)("LINE OF",o.FieldChain),(0,s.seq)("REF TO",o.FieldChain),o.FieldChain),r=(0,s.altPrio)((0,s.seq)("LINE OF",t),(0,s.seq)("REF TO",t),(0,s.seq)(t,(0,s.optPrio)(o.LOBHandle)));return(0,s.seq)((0,s.altPrio)((0,s.seq)("LIKE",n),(0,s.seq)("TYPE",r)),(0,s.optPrio)((0,s.ver)(i.Version.v755,e)))}}t.Type=r},89674(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveDescriptions=t.RemoveDescriptionsConf=void 0;const s=n(71759),o=n(94603),i=n(84383),r=n(77465),a=n(86789),c=n(5518),l=n(86219);class d extends r.BasicRuleConfig{constructor(){super(...arguments),this.ignoreExceptions=!1,this.ignoreWorkflow=!0}}t.RemoveDescriptionsConf=d,t.RemoveDescriptions=class{constructor(){this.conf=new d}getMetadata(){return{key:"remove_descriptions",title:"Remove descriptions",shortDescription:"Ensures you have no descriptions in metadata of methods, parameters, etc.\n\nClass descriptions are required, see rule description_empty.\n\nConsider using ABAP Doc for documentation.",tags:[]}}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){const t=new c.DDIC(this.reg);if(e instanceof i.Class){let n;try{n=e.getClassDefinition()}catch(e){return[]}return void 0===n||this.conf.ignoreExceptions&&t.isException(n,e)||!0===this.conf.ignoreWorkflow&&n.interfaces.find((e=>"IF_WORKFLOW"===e.name.toUpperCase()))?[]:this.checkClass(e)}return e instanceof i.Interface?this.checkInterface(e):[]}checkInterface(e){const t=e.getXML();if(void 0===t)return[];const n=e.getXMLFile();return void 0===n?[]:this.checkXML(t,n)}checkClass(e){const t=e.getXML();if(void 0===t)return[];const n=e.getXMLFile();return void 0===n?[]:this.checkXML(t,n)}checkXML(e,t){const n=new o.XMLParser({parseTagValue:!1,ignoreAttributes:!0,trimValues:!1}).parse(e);if(void 0===n||void 0===n.abapGit["asx:abap"]["asx:values"])return[];const i=n.abapGit["asx:abap"]["asx:values"].DESCRIPTIONS;if(void 0===i)return[];const r={},c=[];for(const e of(0,l.xmlToArray)(i.SEOCOMPOTX)){const n="Remove description for "+e.CMPNAME;if(void 0!==r[e.CMPNAME])continue;const o=new a.Position(1,1),i=s.Issue.atPosition(t,o,n,this.getMetadata().key,this.conf.severity);c.push(i),r[e.CMPNAME]=!0}return c}}},89757(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAnnotationArray=void 0;const s=n(18483),o=n(3125),i=n(71176);class r extends o.Expression{getRunnable(){const e=(0,o.alt)(i.CDSAnnotationSimple,s.CDSAnnotationObject,r);return(0,o.seq)("[",e,(0,o.starPrio)((0,o.seq)(",",e)),"]")}}t.CDSAnnotationArray=r},89792(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFrom=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){const e=(0,s.starPrio)((0,s.seq)((0,s.optPrio)((0,s.tok)(o.WParenRightW)),i.SQLJoin)),t=(0,s.seq)("FROM",i.SQLFromSource,e),n=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW))),r=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW))),a=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW))),c=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW))),l=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW))),d=(0,s.seq)("FROM",(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeftW),i.SQLFromSource,e,(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)),(0,s.optPrio)((0,s.tok)(o.WParenRightW)));return(0,s.altPrio)(d,l,c,a,r,n,t)}}t.SQLFrom=r},89966(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionModuleRecommendations=t.FunctionModuleRecommendationsConf=void 0;const s=n(82245),o=n(71759),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{constructor(){super(...arguments),this.recommendations=[{name:"CALCULATE_HASH_FOR_RAW",replace:"use CL_ABAP_HMAC or CL_ABAP_MESSAGE_DIGEST"},{name:"CCU_TIMESTAMP_DIFFERENCE",replace:"use CL_ABAP_TSTMP"},{name:"CONVERT_DATE_TO_EXTERNAL",replace:"use CL_ABAP_DATFM"},{name:"CONVERT_TIME_INPUT",replace:"use CL_ABAP_TIMEFM"},{name:"ECATT_CONV_XSTRING_TO_STRING",replace:"use CL_BINARY_CONVERT"},{name:"F4_FILENAME",replace:"use CL_GUI_FRONTEND_SERVICES"},{name:"FUNCTION_EXISTS",replace:"surround with try-catch CX_SY_DYN_CALL_ILLEGAL_METHOD instead"},{name:"GUI_DOWNLOAD",replace:"use CL_GUI_FRONTEND_SERVICES"},{name:"GUI_UPLOAD",replace:"use CL_GUI_FRONTEND_SERVICES"},{name:"GUID_CREATE",replace:"use CL_SYSTEM_UUID"},{name:"IGN_TIMESTAMP_DIFFERENCE",replace:"use CL_ABAP_TSTMP"},{name:"IGN_TIMESTAMP_PLUSMINUS",replace:"use CL_ABAP_TSTMP"},{name:"ISM_SD_GET_PRICING_CONDITIONS",replace:"use CL_PRC_RESULT_FACTORY as per note 2220005"},{name:"JOB_CREATE",replace:"use CL_BP_ABAP_JOB"},{name:"JOB_SUBMIT",replace:"use CL_BP_ABAP_JOB"},{name:"POPUP_TO_CONFIRM_STEP",replace:"use POPUP_TO_CONFIRM"},{name:"POPUP_TO_DECIDE",replace:"use POPUP_TO_CONFIRM"},{name:"POPUP_TO_GET_VALUE",replace:"use POPUP_GET_VALUES"},{name:"QF05_RANDOM_INTEGER",replace:"use CL_ABAP_RANDOM_INT"},{name:"REUSE_ALV_GRID_DISPLAY",replace:"use CL_SALV_TABLE=>FACTORY or CL_GUI_ALV_GRID"},{name:"ROUND",replace:"use built in function: round()"},{name:"SAPGUI_PROGRESS_INDICATOR",replace:"use CL_PROGRESS_INDICATOR"},{name:"SCMS_BASE64_DECODE_STR",replace:"use class CL_HTTP_UTILITY methods"},{name:"SCMS_STRING_TO_XSTRING",replace:"use CL_BINARY_CONVERT"},{name:"SO_NEW_DOCUMENT_ATT_SEND_API1",replace:"use CL_BCS"},{name:"SSFC_BASE64_DECODE",replace:"use class CL_HTTP_UTILITY methods"},{name:"SSFC_BASE64_ENCODE",replace:"use class CL_HTTP_UTILITY methods"},{name:"SUBST_GET_FILE_LIST",replace:"see note 1686357"},{name:"WS_FILENAME_GET",replace:"use CL_GUI_FRONTEND_SERVICES"}]}}t.FunctionModuleRecommendationsConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"function_module_recommendations",title:"Function Module Recommendations",shortDescription:"Suggests replacements for various function modules",extendedInformation:"https://docs.abapopenchecks.org/checks/53/",tags:[a.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];if(!this.conf.recommendations)return n;const i=this.reg.getConfig().getVersion();for(const r of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllExpressions(s.FunctionName))||[]){const t=r.getFirstToken();let s=t.getStr().toUpperCase();if(!s.startsWith("'"))continue;s=s.slice(1,s.length-1);const a=this.conf.recommendations.findIndex((e=>e.name.toUpperCase()===s&&(void 0===e.from||i>=e.from)));a>=0&&n.push(o.Issue.atToken(e,t,this.getMessage(a),this.getMetadata().key,this.conf.severity))}return n}getMessage(e){return`Recommendation: Replace Function ${this.conf.recommendations[e].name} with: ${this.conf.recommendations[e].replace}`}}t.FunctionModuleRecommendations=l},89978(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSLexer=void 0;const s=n(89301),o=n(86789);class i{constructor(e){this.buffer=e}takeNext(){const e=this.buffer.substring(0,1);return this.buffer=this.buffer.substring(1),e}peekNext(){return this.buffer.substring(0,1)}length(){return this.buffer.length}}var r;!function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.SingleLineComment=2]="SingleLineComment",e[e.MultiLineComment=3]="MultiLineComment"}(r||(r={}));class a{constructor(){this.result=[]}add(e,t,n,i){return e.length>0&&(i===r.SingleLineComment&&(e.startsWith("--")||e.startsWith("//"))?this.result.push(new s.Comment(new o.Position(t,n-e.length),e)):this.result.push(new s.Identifier(new o.Position(t,n),e))),""}get(){return this.result}}t.CDSLexer=class{static run(e){const t=new a;let n=r.Default,s=1,o=1,c="";const l=new i(e.getRaw().replace(/\r/g,"").replace(/\u00a0/g," "));let d="";for(;l.length()>0;){const e=d;d=l.takeNext();const i=l.peekNext();if(o++,n!==r.String){if(n===r.SingleLineComment){if("\n"!==d){c+=d;continue}c=t.add(c,s,o,n),n=r.Default}else{if(n===r.Default&&"/"===d&&"/"===i){n=r.SingleLineComment,c=t.add(c,s,o,n),c+=d;continue}if(n===r.Default&&"-"===d&&"-"===i){n=r.SingleLineComment,c=t.add(c,s,o,n),c+=d;continue}}if(n!==r.MultiLineComment)if(n!==r.Default||"/"!==d||"*"!==i)switch(d){case"'":n=r.String,c+=d;break;case" ":c=t.add(c,s,o,n);break;case"\n":c=t.add(c,s,o,n),s++,o=0;break;case";":case":":case",":case".":case"{":case"}":case"(":case")":case"[":case"]":case"=":case"<":case">":case"+":case"-":case"*":case"/":c=t.add(c,s,o,n),t.add(d,s,o,n);break;default:c+=d}else n=r.MultiLineComment,c=t.add(c,s,o,n);else"\n"===d?s++:"*"===e&&"/"===d&&(n=r.Default)}else c+=d,"'"===d&&"'"===i?(c+=l.takeNext(),o++):"'"===d&&(c=t.add(c,s,o,n),n=r.Default)}return t.add(c,s,o,n),t.get()}}},90061(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoInlineInOptionalBranches=t.NoInlineInOptionalBranchesConf=void 0;const s=n(71759),o=n(99732),i=n(77465),r=n(94967),a=n(82245),c=n(86696),l=n(49028);class d extends i.BasicRuleConfig{}t.NoInlineInOptionalBranchesConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"no_inline_in_optional_branches",title:"Don't declare inline in optional branches",shortDescription:"Don't declare inline in optional branches",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#dont-declare-inline-in-optional-branches\n\nConsidered optional branches:\n* inside IF/ELSEIF/ELSE\n* inside LOOP\n* inside WHILE\n* inside CASE/WHEN, CASE TYPE OF\n* inside DO\n* inside SELECT loops\n\nNot considered optional branches:\n* TRY/CATCH/CLEANUP",tags:[c.RuleTag.Styleguide,c.RuleTag.SingleFile]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=this.reg.getConfig().getVersion();if(n===l.Version.v700||n===l.Version.v702||n===l.Version.OpenABAP)return[];const o=e.getStructure();if(void 0===o)return[];const i=[...o.findAllStructures(r.If),...o.findAllStructures(r.Loop),...o.findAllStructures(r.While),...o.findAllStructures(r.Case),...o.findAllStructures(r.CaseType),...o.findAllStructures(r.Do),...o.findAllStructures(r.Select)];for(const n of i){const o=n.findFirstExpression(a.InlineData);if(o){const n="Don't declare inline in optional branches",i=s.Issue.atToken(e,o.getFirstToken(),n,this.getMetadata().key,this.getConfig().severity);t.push(i)}}return t}}t.NoInlineInOptionalBranches=u},90072(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSyntax=t.CheckSyntaxConf=void 0;const s=n(52424),o=n(77465),i=n(12620),r=n(71759),a=n(86696),c=n(96493),l=n(82054);class d extends o.BasicRuleConfig{}t.CheckSyntaxConf=d,t.CheckSyntax=class{constructor(){this.conf=new d}getMetadata(){return{key:l.CheckSyntaxKey,title:"Check syntax",shortDescription:"Enables syntax check and variable resolution",tags:[a.RuleTag.Syntax]}}getConfig(){return this.conf}initialize(e){return this.reg=e,this}setConfig(e){this.conf=e}run(e){if(!(e instanceof i.ABAPObject))return[];const t=new s.SyntaxLogic(this.reg,e).run().issues;return this.conf.severity&&this.conf.severity!==c.Severity.Error&&t.forEach(((e,n)=>{const s=e.getData();s.severity=this.conf.severity,t[n]=new r.Issue(s)})),t}}},90112(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FieldSymbol=void 0;const s=n(3125),o=n(82245);t.FieldSymbol=class{getMatcher(){const e=(0,s.seq)("STRUCTURE",o.TypeName,"DEFAULT",o.Field);return(0,s.seq)("FIELD-SYMBOLS",o.FieldSymbol,(0,s.opt)((0,s.alt)(o.Type,o.TypeTable,e)))}}},90179(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FSTarget=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)(o.InlineFS,o.TargetFieldSymbol)}}t.FSTarget=i},90303(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Add=void 0;const s=n(3125),o=n(82245);t.Add=class{getMatcher(){const e=(0,s.seq)("TO",o.Target),t=(0,s.seq)("ACCORDING TO",o.Source),n=(0,s.seq)("GIVING",o.Source),i=(0,s.seq)("THEN",o.Source,"UNTIL",o.Source,(0,s.opt)((0,s.per)(n,t)),(0,s.opt)(e));return(0,s.seq)("ADD",o.Source,(0,s.altPrio)(e,i))}}},90316(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParenLeftW=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"( "}}t.ParenLeftW=o},90325(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ShortCase=t.ShortCaseConf=void 0;const s=n(71759),o=n(99732),i=n(50612),r=n(82245),a=n(94967),c=n(77465),l=n(86696);class d extends c.BasicRuleConfig{constructor(){super(...arguments),this.length=1,this.allow=[]}}t.ShortCaseConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"short_case",title:"Short CASE",shortDescription:"Checks for CASE statements which have fewer than the specified number of branches",extendedInformation:"Short CASE constructs can be changed to IF",tags:[l.RuleTag.SingleFile],badExample:"CASE moo.\nWHEN 'X'.\nENDCASE.",goodExample:"IF moo = 'X'.\nENDIF."}}getMessage(){return"CASE construct too short, it must have a minimum of "+(this.conf.length+1)+" WHEN branches"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];for(const o of n.findAllStructures(a.Case)){const n=o.findDirectStatements(i.Case);if(!(n.length>0&&this.conf.allow&&this.conf.allow.find((e=>e===n[0].getTokens()[1].getStr())))&&o.findDirectStructures(a.When).length<=this.conf.length){if(o.findAllExpressions(r.Or).length>0)continue;const n=s.Issue.atToken(e,o.getFirstToken(),this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(n)}}return t}}t.ShortCase=u},90352(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Arrow=void 0;const s=n(3125),o=n(89301);class i extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.tok)(o.InstanceArrow),(0,s.tok)(o.StaticArrow))}}t.Arrow=i},90440(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PreferXsdbool=t.PreferXsdboolConf=void 0;const s=n(71759),o=n(99732),i=n(82245),r=n(77465),a=n(86696),c=n(49028),l=n(71249);class d extends r.BasicRuleConfig{}t.PreferXsdboolConf=d;class u extends o.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"prefer_xsdbool",title:"Prefer xsdbool over boolc",shortDescription:"Prefer xsdbool over boolc",extendedInformation:"Activates if language version is v740sp08 or above.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#use-xsdbool-to-set-boolean-variables",tags:[a.RuleTag.Styleguide,a.RuleTag.Upport,a.RuleTag.Quickfix,a.RuleTag.SingleFile],badExample:"DATA(sdf) = boolc( 1 = 2 ).",goodExample:"DATA(sdf) = xsdbool( 1 = 2 )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[];if(this.reg.getConfig().getVersion()<c.Version.v740sp08&&this.reg.getConfig().getVersion()!==c.Version.Cloud)return[];for(const o of(null===(t=e.getStructure())||void 0===t?void 0:t.findAllExpressions(i.Source))||[]){if(!1===o.concatTokens().toUpperCase().startsWith("BOOLC( "))continue;const t=o.getFirstToken(),i="Prefer xsdbool over boolc",r=l.EditHelper.replaceToken(e,t,"xsdbool");n.push(s.Issue.atToken(e,t,i,this.getMetadata().key,this.conf.severity,r))}return n}}t.PreferXsdbool=u},90446(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TargetFieldSymbol=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)(o.FieldSymbol,(0,s.optPrio)(o.TableBody))}}t.TargetFieldSymbol=i},90460(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSExtendView=void 0;const s=n(18483),o=n(3125),i=n(19181);class r extends o.Expression{getRunnable(){const e=(0,o.seq)(i.CDSName,(0,o.opt)((0,o.seq)(".",i.CDSName)),(0,o.opt)(s.CDSAs)),t=(0,o.seq)("{",e,(0,o.star)((0,o.seq)(",",e)),"}");return(0,o.seq)((0,o.star)(s.CDSAnnotation),(0,o.str)("EXTEND VIEW"),(0,o.opt)((0,o.str)("ENTITY")),i.CDSName,(0,o.str)("WITH"),(0,o.opt)(i.CDSName),t,(0,o.opt)(";"))}}t.CDSExtendView=r},90469(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BADIDefinition=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SXSD"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BADIDefinition=o},90532(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypePool=void 0;const s=n(12620);class o extends s.ABAPObject{getType(){return"TYPE"}getSequencedFiles(){const e=this.getMainABAPFile();return void 0===e?[]:[e]}getAllowedNaming(){return{maxLength:5,allowNamespace:!1}}getDescription(){var e,t,n;const s=super.parseRaw2();return(null===(n=null===(t=null===(e=null==s?void 0:s.abapGit)||void 0===e?void 0:e["asx:abap"])||void 0===t?void 0:t["asx:values"])||void 0===n?void 0:n.DDTEXT)||""}}t.TypePool=o},90617(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GetLocale=void 0;const s=n(3125),o=n(82245),i=n(49028);t.GetLocale=class{getMatcher(){const e=(0,s.seq)("COUNTRY",o.Target),t=(0,s.seq)("MODIFIER",o.Target),n=(0,s.seq)("GET LOCALE LANGUAGE",o.Target,e,t);return(0,s.verNot)(i.Version.Cloud,n)}}},90674(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Rollback=void 0;const s=n(3125),o=n(82245);t.Rollback=class{getMatcher(){return(0,s.seq)("ROLLBACK",(0,s.altPrio)("WORK",o.DatabaseConnection))}}},90733(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cond=void 0;const s=n(3125),o=n(82245),i=n(2376),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.altPrio)("AND","OR",(0,s.ver)(r.Version.v702,"EQUIV")),t=(0,s.altPrio)(o.Compare,i.CondSub);return(0,s.seq)(t,(0,s.starPrio)((0,s.seq)(e,t)))}}t.Cond=a},90772(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPHoverProvider=void 0;const s=n(55864);t.ABAPHoverProvider=class{constructor(e){this.reg=e}provideHover(e,t){const n=new s.LanguageServer(this.reg).hover({textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}});return n?{range:new monaco.Range(t.lineNumber,t.column,t.lineNumber,t.column),contents:[{value:n.contents.value}]}:void 0}}},91146(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSAs=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)("AS",s.CDSName)}}t.CDSAs=i},91193(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IfInIf=t.IfInIfConf=void 0;const s=n(71759),o=n(50612),i=n(94967),r=n(99732),a=n(77465),c=n(86696),l=n(71249);class d extends a.BasicRuleConfig{}t.IfInIfConf=d;class u extends r.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"if_in_if",title:"IF in IF",shortDescription:"Detects nested ifs which can be refactored.",extendedInformation:"\nDirectly nested IFs without ELSE can be refactored to a single condition using AND.\n\nELSE condtions with directly nested IF refactored to ELSEIF, quickfixes are suggested for this case.\n\nhttps://docs.abapopenchecks.org/checks/01/\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#keep-the-nesting-depth-low",badExample:"IF condition1.\n  IF condition2.\n    ...\n  ENDIF.\nENDIF.\n\nIF condition1.\n  ...\nELSE.\n  IF condition2.\n    ...\n  ENDIF.\nENDIF.",goodExample:"IF ( condition1 ) AND ( condition2 ).\n  ...\nENDIF.\n\nIF condition1.\n  ...\nELSEIF condition2.\n  ...\nENDIF.\n\nCASE variable.\n  WHEN value1.\n  ...\n  WHEN value2.\n    IF condition2.\n      ...\n    ENDIF.\nENDCASE.",tags:[c.RuleTag.Styleguide,c.RuleTag.SingleFile,c.RuleTag.Quickfix]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){var n,r;const a=[];if("INTF"===t.getType())return[];const c=e.getStructure();if(void 0===c)return[];let d=!1,u=c.findAllStructures(i.If);u=u.concat(c.findAllStructures(i.Else));for(const t of u){if(t.findDirectStructures(i.ElseIf).length>0||t.findDirectStructures(i.Else).length>0)continue;const c=t.findDirectStructures(i.Body);if(0===c.length)continue;const u=c[0].findDirectStructures(i.Normal);if(1!==u.length)continue;const p=u[0].findDirectStructures(i.If);if(1!==p.length)continue;const f=p[0];if(t.get()instanceof i.If&&(f.findDirectStructures(i.ElseIf).length>0||f.findDirectStructures(i.Else).length>0))continue;let g,h="IF in IF. Use IF cond1 AND cond2 instead";if(t.get()instanceof i.Else){h="Change ELSE part to ELSEIF";const s=t.findFirstStatement(o.Else),a=null===(n=t.findFirstStructure(i.If))||void 0===n?void 0:n.findDirectStatement(o.If),c=null===(r=t.findFirstStructure(i.If))||void 0===r?void 0:r.findDirectStatement(o.EndIf);if(!1===d&&a&&s&&c){const t=l.EditHelper.deleteRange(e,s.getLastToken().getStart(),null==a?void 0:a.getFirstToken().getStart()),n=l.EditHelper.deleteStatement(e,c);g=l.EditHelper.merge(t,n),d=!0}}const T=t.getFirstToken(),m=s.Issue.atToken(e,T,h,this.getMetadata().key,this.conf.severity,g);a.push(m)}return a}}t.IfInIf=u},91291(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneEnhancement=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN09"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneEnhancement=o},91306(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageSourceSource=void 0;const s=n(3125),o=n(82245),i=n(49028);class r extends s.Expression{getRunnable(){return(0,s.alt)((0,s.ver)(i.Version.v740sp02,o.Source,i.Version.OpenABAP),o.SimpleSource3)}}t.MessageSourceSource=r},91391(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CDSHaving=void 0;const s=n(18483),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)("HAVING",s.CDSCondition)}}t.CDSHaving=i},91508(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParenRight=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return")"}}t.ParenRight=o},91518(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceStringTemplates=t.ReduceStringTemplatesConf=void 0;const s=n(82245),o=n(71759),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.ReduceStringTemplatesConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"reduce_string_templates",title:"Reduce string templates",shortDescription:"Checks for string templates",tags:[a.RuleTag.SingleFile],badExample:"WRITE |{ |sdf| }|.\nWRITE |{ 'sdf' }|.",goodExample:"WRITE |sdf|."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e,t){const n=[],i=e.getStructure();if(void 0===i)return[];for(const t of i.findAllExpressions(s.StringTemplate))for(const i of t.findAllExpressions(s.StringTemplateSource))for(const t of i.findDirectExpressions(s.Source)){for(const i of t.findDirectExpressions(s.StringTemplate))n.push(o.Issue.atToken(e,i.getFirstToken(),"Nested string templates, reduce",this.getMetadata().key,this.conf.severity));if(!i.findDirectExpression(s.StringTemplateFormatting))for(const i of t.findDirectExpressions(s.Constant))for(const t of i.findDirectExpressions(s.ConstantString))n.push(o.Issue.atToken(e,t.getFirstToken(),"Constant string in text template, reduce",this.getMetadata().key,this.conf.severity))}for(const t of i.findAllExpressions(s.Source)){const i=t.getChildren();if(3!==i.length)continue;if(!(i[0].get()instanceof s.StringTemplate))continue;if("&&"!==i[1].getFirstToken().getStr())continue;if(!(i[2].get()instanceof s.Source))continue;const r=i[2].getChildren();if(1!==r.length)continue;const a=i[0].getFirstToken().getStart(),c=r[0].getLastToken().getEnd();if(a.getRow()===c.getRow()){const t='Reduce template, remove "&&"';n.push(o.Issue.atToken(e,i[1].getFirstToken(),t,this.getMetadata().key,this.conf.severity))}}return n}}t.ReduceStringTemplates=l},91574(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Exporting=t.ExportingConf=void 0;const s=n(71759),o=n(86696),i=n(99732),r=n(77465),a=n(82245),c=n(71249);class l extends r.BasicRuleConfig{}t.ExportingConf=l;class d extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"exporting",title:"EXPORTING can be omitted",shortDescription:"Detects EXPORTING statements which can be omitted.",badExample:"call_method( EXPORTING foo = bar ).",goodExample:"call_method( foo = bar ).",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#omit-the-optional-keyword-exporting\nhttps://docs.abapopenchecks.org/checks/30/",tags:[o.RuleTag.Styleguide,o.RuleTag.Quickfix,o.RuleTag.SingleFile]}}getMessage(){return"The EXPORTING keyword can be omitted"}runParsed(e,t){let n=[];if("INTF"===t.getType())return[];for(const t of e.getStatements()){const s=t.findAllExpressionsMulti([a.MethodCallBody,a.MethodCall]);for(const t of s)if(t.get()instanceof a.MethodCallBody){if("("!==t.getFirstToken().getStr())continue;n=n.concat(this.check(t,e))}else t.get()instanceof a.MethodCall&&(n=n.concat(this.check(t,e)))}return n}getConfig(){return this.conf}setConfig(e){this.conf=e}check(e,t){const n=e.findFirstExpression(a.MethodParameters);if(void 0===n)return[];if("EXPORTING"!==n.getFirstToken().getStr().toUpperCase())return[];const o=n.getDirectTokens(),i=o.map((e=>e.getStr().toUpperCase()));if("EXPORTING"===i[0]&&!1===i.includes("IMPORTING")&&!1===i.includes("RECEIVING")&&!1===i.includes("EXCEPTIONS")&&!1===i.includes("CHANGING")){const e=n.getAllTokens()[1],i=c.EditHelper.deleteRange(t,o[0].getStart(),e.getStart());return[s.Issue.atToken(t,o[0],this.getMessage(),this.getMetadata().key,this.conf.severity,i)]}return[]}}t.Exporting=d},91626(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constant=void 0;const s=n(3125),o=n(82245);t.Constant=class{getMatcher(){const e=(0,s.seq)(o.DefinitionName,(0,s.opt)(o.ConstantFieldLength),(0,s.per)(o.Type,o.Value,o.Decimals,o.Length));return(0,s.seq)((0,s.alt)("CONSTANT","CONSTANTS"),e,(0,s.optPrio)("%_PREDEFINED"))}}},91675(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^(\/\w+\/)?(?!\*)[\w\d_\*\~%]+$/)}}t.AttributeName=o},91733(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralText=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"DOCT"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.GeneralText=o},91766(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Free=void 0;const s=n(82245),o=n(9646);t.Free=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Target))o.Target.runSyntax(n,t)}}},91785(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentChainSimple=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)(o.ComponentName,(0,s.starPrio)((0,s.seq)(o.ArrowOrDash,o.ComponentName)));return(0,s.seq)(e,(0,s.optPrio)(o.FieldOffset),(0,s.optPrio)(o.FieldLength))}}t.ComponentChainSimple=i},91803(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NewLine=void 0;const s=n(3125),o=n(49028);t.NewLine=class{getMatcher(){const e=(0,s.seq)("NEW-LINE",(0,s.opt)((0,s.alt)("SCROLLING","NO-SCROLLING")));return(0,s.verNot)(o.Version.Cloud,e)}}},92040(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(89301);t.Field=class{getMatcher(){const e=(0,s.alt)("ON INPUT","ON REQUEST","ON CHAIN-REQUEST","ON CHAIN-INPUT","AT CURSOR-SELECTION"),t=(0,s.seq)("MODULE",o.FormName,(0,s.opt)(e)),n=(0,s.seq)(e,"MODULE",o.FormName),a=(0,s.seq)("VALUES",(0,s.tok)(r.WParenLeft),"BETWEEN",o.Constant,"AND",o.Constant,(0,s.tok)(r.ParenRightW)),c=(0,s.seq)("WITH",(0,s.altPrio)(o.FieldChain,o.Constant)),l=(0,s.seq)(o.FieldChain,"=",o.FieldChain),d=(0,s.seq)(l,(0,s.starPrio)((0,s.seq)("AND",l))),u=(0,s.seq)("INTO",o.FieldChain),p=(0,s.seq)("SELECT * FROM",o.FieldChain,"WHERE",d,(0,s.opt)(u),(0,s.opt)("WHENEVER NOT FOUND SEND ERRORMESSAGE")),f=(0,s.seq)("FIELD",o.FieldChain,(0,s.opt)((0,s.altPrio)(t,n,a,c,p)));return(0,s.verNot)(i.Version.Cloud,f)}}},92117(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IntegerType=void 0;const s=n(97502);class o extends s.AbstractType{static get(e){const t=JSON.stringify(e);if(this.singletons.has(t))return this.singletons.get(t);const n=new o(e);return this.singletons.set(t,n),n}constructor(e){super(e)}getQualifiedName(){var e;const t=null===(e=this.data)||void 0===e?void 0:e.qualifiedName;return void 0===t?"I":t}toText(){return"```i```"}isGeneric(){return!1}toABAP(){return"i"}containsVoid(){return!1}toCDS(){return"abap.int4"}}t.IntegerType=o,o.singletons=new Map},92170(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReadTextpool=void 0;const s=n(82245),o=n(93170),i=n(9646);t.ReadTextpool=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleTarget))i.Target.runSyntax(n,t)}}},92213(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassData=void 0;const s=n(82245),o=n(50612),i=n(75457),r=n(15838),a=n(20572),c=n(96381);t.ClassData=class{runSyntax(e,t){const n=e.findFirstExpression(s.NamespaceSimpleName).getFirstToken(),l={},d=[];for(const n of e.getChildren()){const e=n.get();if(n instanceof i.StatementNode&&e instanceof o.ClassData){const e=(new c.ClassData).runSyntax(n,t);e&&(d.push({name:e.getName(),type:e.getType()}),l[e.getName()]=e.getValue())}}return new r.TypedIdentifier(n,t.filename,new a.StructureType(d),["static"],l)}}},92232(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodOverwritesBuiltIn=t.MethodOverwritesBuiltInConf=void 0;const s=n(56727),o=n(71759),i=n(99732),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.MethodOverwritesBuiltInConf=c;class l extends i.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"method_overwrites_builtin",title:"Method name overwrites builtin function",shortDescription:"Checks Method names that overwrite builtin SAP functions",extendedInformation:"https://help.sap.com/doc/abapdocu_752_index_htm/7.52/en-us/abenbuilt_in_functions_overview.htm\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-obscuring-built-in-functions\n\nInterface method names are ignored",tags:[a.RuleTag.Naming,a.RuleTag.SingleFile,a.RuleTag.Styleguide],badExample:"CLASS lcl DEFINITION.\n  PUBLIC SECTION.\n    METHODS matches.\nENDCLASS.\n\nCLASS lcl IMPLEMENTATION.\n  METHOD matches.\n  ENDMETHOD.\nENDCLASS."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=[];for(const t of e.getInfo().listClassDefinitions())n=n.concat(t.methods);for(const e of n)if(s.BuiltIn.searchBuiltin(e.name.toUpperCase())){const n=`Method name "${e.name}" overwrites built-in SAP function name`;t.push(o.Issue.atIdentifier(e.identifier,n,this.getMetadata().key))}return t}}t.MethodOverwritesBuiltIn=l},92469(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WhitespaceEnd=t.WhitespaceEndConf=void 0;const s=n(71759),o=n(86789),i=n(77465),r=n(71249),a=n(86696),c=n(84383);class l extends i.BasicRuleConfig{}t.WhitespaceEndConf=l,t.WhitespaceEnd=class{constructor(){this.conf=new l}getMetadata(){return{key:"whitespace_end",title:"Whitespace at end of line",shortDescription:"Checks for redundant whitespace at the end of each line.",extendedInformation:"SMIM and W3MI files are not checked.",tags:[a.RuleTag.Whitespace,a.RuleTag.Quickfix,a.RuleTag.SingleFile],badExample:"WRITE 'hello'.      ",goodExample:"WRITE 'hello'."}}getMessage(){return"Remove whitespace at end of line"}getConfig(){return this.conf}setConfig(e){this.conf=e}initialize(e){return this}run(e){const t=[];for(const n of e.getFiles()){if(e instanceof c.MIMEObject||e instanceof c.WebMIME)continue;const i=n.getRawRows();for(let e=0;e<i.length;e++)if(i[e].endsWith(" ")||i[e].endsWith(" \r")){const a=/ +\r?$/.exec(i[e]),c=new o.Position(e+1,a.index+1),l=new o.Position(e+1,i[e].length+1),d=r.EditHelper.deleteRange(n,c,l),u=s.Issue.atRange(n,c,l,this.getMessage(),this.getMetadata().key,this.conf.severity,d);t.push(u)}}return t}}},92587(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OpenDataset=void 0;const s=n(82245),o=n(93170),i=n(9646);t.OpenDataset=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},92698(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancementSection=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(15961);t.EnhancementSection=class{getMatcher(){const e=(0,s.seq)("ENHANCEMENT-SECTION",(0,s.seq)(o.Field,(0,s.starPrio)((0,s.seq)((0,s.tok)(r.Dash),o.Field))),"SPOTS",o.Field,(0,s.opt)("STATIC"),(0,s.opt)("INCLUDE BOUND"));return(0,s.verNot)(i.Version.Cloud,e)}}},92759(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DDLTableField=void 0;const s=n(3125),o=n(80997),i=n(26130);class r extends s.Expression{getRunnable(){return(0,s.seq)((0,s.optPrio)("KEY"),o.DDLName,":",i.DDLType,(0,s.optPrio)("NOT NULL"),";")}}t.DDLTableField=r},92838(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RollbackEntities=void 0;const s=n(3125),o=n(49028);t.RollbackEntities=class{getMatcher(){return(0,s.ver)(o.Version.v754,"ROLLBACK ENTITIES")}}},93100(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodDefRaising=void 0;const s=n(3125),o=n(89301),i=n(47583);class r extends s.Expression{getRunnable(){const e=(0,s.seq)("RESUMABLE",(0,s.tok)(o.ParenLeft),i.ClassName,(0,s.tok)(o.ParenRightW));return(0,s.seq)("RAISING",(0,s.plus)((0,s.altPrio)(e,i.ClassName)))}}t.MethodDefRaising=r},93161(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Scan=void 0;const s=n(82245),o=n(93170),i=n(9646);t.Scan=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},93170(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0;const s=n(75457),o=n(82245),i=n(83091),r=n(69953),a=n(45769),c=n(20572),l=n(95271),d=n(46743),u=n(56478),p=n(34551),f=n(68837),g=n(60635),h=n(94700),T=n(36453),m=n(8606),y=n(57162),S=n(4116),v=n(6008),E=n(78691),C=n(56727),b=n(13813),I=n(86667),D=n(15838),x=n(3240),P=n(82054),A=n(38788);class N{static runSyntax(e,t,n,d=!1,D=!1){if(void 0===e)return;const A=e.getChildren().slice();let O=A.shift();if(O instanceof s.TokenNode){const s=O.getFirstToken(),i=s.getStr().toUpperCase();switch(i){case"(":case"-":case"+":case"BIT":break;case"BOOLC":{const n=C.BuiltIn.searchBuiltin(i);return t.scope.addReference(s,n,T.ReferenceType.BuiltinMethodReference,t.filename),g.Cond.runSyntax(e.findDirectExpression(o.Cond),t),c.StringType.get()}case"XSDBOOL":{const n=C.BuiltIn.searchBuiltin(i);return t.scope.addReference(s,n,T.ReferenceType.BuiltinMethodReference,t.filename),g.Cond.runSyntax(e.findDirectExpression(o.Cond),t),new c.CharacterType(1,{qualifiedName:"ABAP_BOOL",ddicName:"ABAP_BOOL"})}case"REDUCE":{const s=this.determineType(e,t,n),i=h.ReduceBody.runSyntax(e.findDirectExpression(o.ReduceBody),t,s);return void 0===s||s.isGeneric()?this.addIfInferred(e,t,i):this.addIfInferred(e,t,s),s||i}case"SWITCH":{const s=this.determineType(e,t,n),i=m.SwitchBody.runSyntax(e.findDirectExpression(o.SwitchBody),t);return void 0===s||s.isGeneric()?this.addIfInferred(e,t,i):this.addIfInferred(e,t,s),s||i}case"COND":{const s=this.determineType(e,t,n),i=y.CondBody.runSyntax(e.findDirectExpression(o.CondBody),t,s);return void 0===s||s.isGeneric()?this.addIfInferred(e,t,i):this.addIfInferred(e,t,s),A.shift(),A.shift(),A.shift(),A.shift(),this.traverseRemainingChildren(A,t),s||i}case"CONV":{const s=this.determineType(e,t,n),i=S.ConvBody.runSyntax(e.findDirectExpression(o.ConvBody),t);if(!1===new x.TypeUtils(t.scope).isConvable(s,i)){const n=`CONV: Types not compatible, ${null==s?void 0:s.constructor.name}, ${null==i?void 0:i.constructor.name}`;return t.issues.push((0,P.syntaxIssue)(t,e.getFirstToken(),n)),c.VoidType.get(P.CheckSyntaxKey)}return this.addIfInferred(e,t,s),s}case"REF":{let s=this.determineType(e,t,n);const i=N.runSyntax(e.findDirectExpression(o.Source),t);return s&&s.isGeneric()&&i?s=new c.DataReference(i):void 0===s&&i?s=i instanceof c.AnyType?new c.DataReference(c.VoidType.get("REF-ANY")):new c.DataReference(i):s&&void 0===n&&(s=new c.DataReference(s)),this.addIfInferred(e,t,s),s}case"FILTER":{const s=this.determineType(e,t,n),i=v.FilterBody.runSyntax(e.findDirectExpression(o.FilterBody),t,s);return void 0===s||s.isGeneric()?this.addIfInferred(e,t,i):this.addIfInferred(e,t,s),!s||s instanceof r.UnknownType?i:s}case"CORRESPONDING":{const s=this.determineType(e,t,n);return E.CorrespondingBody.runSyntax(e.findDirectExpression(o.CorrespondingBody),t,s),this.addIfInferred(e,t,s),s}case"EXACT":{const s=this.determineType(e,t,n);return N.runSyntax(e.findDirectExpression(o.Source),t,s),this.addIfInferred(e,t,s),s}case"VALUE":{const s=this.determineType(e,t,n),i=f.ValueBody.runSyntax(e.findDirectExpression(o.ValueBody),t,s);return void 0===s||s.isGeneric()?this.addIfInferred(e,t,i):this.addIfInferred(e,t,s),s||i}default:return new r.UnknownType("todo, Source type "+i)}}else if(void 0===O||!(O instanceof s.ExpressionNode))return;let R=new r.UnknownType("todo, Source type");const M=[T.ReferenceType.DataReadReference];d&&M.push(T.ReferenceType.DataWriteReference);let k=!1,F=!1;for(;A.length>=0;){if(O instanceof s.ExpressionNode){const s=O.get();if(s instanceof o.MethodCallChain){if(R=i.MethodCallChain.runSyntax(O,t,n),void 0===R){const n="Method has no RETURNING value";return t.issues.push((0,P.syntaxIssue)(t,e.getFirstToken(),n)),c.VoidType.get(P.CheckSyntaxKey)}}else if(s instanceof o.FieldChain)R=a.FieldChain.runSyntax(O,t,M,D);else if(s instanceof o.StringTemplate)R=p.StringTemplate.runSyntax(O,t);else if(s instanceof o.Source){const e=N.runSyntax(O,t);R=this.infer(R,e)}else if(s instanceof o.Constant){const e=l.Constant.runSyntax(O);R=this.infer(R,e)}else if(s instanceof o.Dereference)R=I.Dereference.runSyntax(O,R,t);else if(s instanceof o.ComponentChain)R=u.ComponentChain.runSyntax(R,O,t);else if(s instanceof o.ArithOperator){"**"===O.concatTokens()&&(R=new c.FloatType);const e=O.concatTokens().toUpperCase();"BIT-OR"!==e&&"BIT-AND"!==e&&"BIT-XOR"!==e||(k=!0,F=!0)}else s instanceof o.AttributeChain&&(R=b.AttributeChain.runSyntax(R,O,t,M))}if(!0===k){if(!(R instanceof c.VoidType||R instanceof c.XStringType||R instanceof c.HexType||R instanceof c.XGenericType||R instanceof c.XSequenceType||R instanceof r.UnknownType)){const n="Operator only valid for XSTRING or HEX";return t.issues.push((0,P.syntaxIssue)(t,e.getFirstToken(),n)),c.VoidType.get(P.CheckSyntaxKey)}!1===F&&(k=!1),F=!1}if(O=A.shift(),void 0===O)break}return e.findDirectTokenByText("&&")?c.StringType.get():R}static traverseRemainingChildren(e,t){const n=e[e.length-1];n&&n.get()instanceof o.Source&&N.runSyntax(n,t)}static infer(e,t){return e instanceof c.FloatType&&t instanceof c.IntegerType||e instanceof c.IntegerType&&(null==t?void 0:t.isGeneric())?e:t}static addIfInferred(e,t,n){const s=new d.BasicTypes(t),i=e.findDirectExpression(o.TypeNameOrInfer),r=null==i?void 0:i.getFirstToken();if(n&&r)if(s.lookupQualifiedName(n.getQualifiedName())){const e=new D.TypedIdentifier(r,t.filename,n);t.scope.addReference(r,e,T.ReferenceType.InferredType,t.filename,{foundQualified:!0})}else if(n instanceof c.ObjectReferenceType){const e=t.scope.findObjectDefinition(n.getQualifiedName()),s=new D.TypedIdentifier(r,t.filename,n);e?t.scope.addReference(r,s,T.ReferenceType.InferredType,t.filename,{foundQualified:!0}):t.scope.addReference(r,s,T.ReferenceType.InferredType,t.filename,{foundQualified:!1})}else{const e=new D.TypedIdentifier(r,t.filename,n);t.scope.addReference(r,e,T.ReferenceType.InferredType,t.filename,{foundQualified:!1})}}static determineType(e,t,n){const s=new d.BasicTypes(t),i=e.findDirectExpression(o.TypeNameOrInfer),a=null==i?void 0:i.getFirstToken(),l=null==a?void 0:a.getStr();if(void 0===i)throw new A.AssertError("determineType, child TypeNameOrInfer not found");if("#"===l&&n)return n;if("#"!==l&&a){const n=s.parseType(i);if(n&&n instanceof r.UnknownType){if(!1===t.scope.getDDIC().inErrorNamespace(l))return t.scope.addReference(a,void 0,T.ReferenceType.VoidType,t.filename),c.VoidType.get(l);{const e=new D.TypedIdentifier(a,t.filename,n);return t.scope.addReference(a,e,T.ReferenceType.TypeReference,t.filename),n}}if(void 0===n){const n='Type "'+l+'" not found in scope, VALUE';return t.issues.push((0,P.syntaxIssue)(t,e.getFirstToken(),n)),c.VoidType.get(P.CheckSyntaxKey)}return n}return n}}t.Source=N},93271(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CallOLE=void 0;const s=n(3125),o=n(82245),i=n(49028);t.CallOLE=class{getMatcher(){const e=(0,s.seq)("=",o.Target),t=(0,s.seq)("CALL METHOD OF",o.Source,o.Source,(0,s.opt)(e),(0,s.opt)("NO FLUSH"),(0,s.opt)((0,s.alt)("QUEUE-ONLY","QUEUEONLY")),(0,s.opt)(o.OLEExporting));return(0,s.verNot)(i.Version.Cloud,t)}}},93286(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Static=void 0;const s=n(82245),o=n(15838),i=n(46743),r=n(20572),a=n(9048);t.Static=class{runSyntax(e,t){if(e.findFirstExpression(s.TypeTable)){const n=a.TypeTable.runSyntax(e,t);if(n)return n}const n=new i.BasicTypes(t).simpleType(e);if(n)return n;const c=e.findFirstExpression(s.NamespaceSimpleName);return c?new o.TypedIdentifier(c.getFirstToken(),t.filename,new r.UnknownType("Static, fallback")):void 0}}},93366(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DecFloat16Type=void 0;const s=n(97502);class o extends s.AbstractType{toText(){return"```decfloat16```"}isGeneric(){return!1}toABAP(){return"decfloat16"}containsVoid(){return!1}toCDS(){return"abap.d16n"}}t.DecFloat16Type=o},93422(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Identifier=void 0;const s=n(61785);class o extends s.AbstractToken{}t.Identifier=o},93442(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLFieldListLoop=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(70015),a=n(89301);class c extends s.Expression{getRunnable(){const e=(0,s.opt)((0,s.ver)(i.Version.v740sp05,",",i.Version.OpenABAP)),t=(0,s.seq)("AS",o.SQLAsName),n=(0,s.seq)(o.SQLField,e),c=(0,s.ver)(i.Version.v740sp05,(0,s.seq)((0,s.tok)(a.WAt),o.SimpleFieldChain2),i.Version.OpenABAP),l=(0,s.seq)((0,s.star)(n),(0,s.alt)(o.SQLFieldName,c,r.SQLPath,o.Constant),(0,s.optPrio)(t),e,(0,s.star)(n));return(0,s.alt)("*",o.Dynamic,l)}}t.SQLFieldListLoop=c},93464(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBodyLine=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(25799);class a extends s.Expression{getRunnable(){return(0,s.seq)((0,s.altPrio)((0,s.tok)(o.WParenLeftW),(0,s.tok)(o.WParenLeft)),(0,s.optPrio)((0,s.altPrio)((0,s.plusPrio)(i.FieldAssignment),r.ValueBodyLines,i.Source)),(0,s.altPrio)((0,s.tok)(o.WParenRightW),(0,s.tok)(o.ParenRightW)))}}t.ValueBodyLine=a},93478(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.When=void 0;const s=n(3125),o=n(82245);t.When=class{getMatcher(){const e=(0,s.seq)(o.Source,(0,s.starPrio)(o.Or));return(0,s.seq)("WHEN",e)}}},93524(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DataEnd=void 0;const s=n(3125),o=n(82245);t.DataEnd=class{getMatcher(){const e=(0,s.seq)("COMMON PART",(0,s.optPrio)(o.DefinitionName)),t=(0,s.seq)("END OF",(0,s.altPrio)(e,o.DefinitionName)),n=(0,s.seq)("VALID BETWEEN",o.ComponentName,"AND",o.ComponentName);return(0,s.seq)("DATA",t,(0,s.optPrio)(n))}}},93683(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GatewayModelMetadata=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"IWOM"}getAllowedNaming(){return{maxLength:40,allowNamespace:!0}}getDescription(){}}t.GatewayModelMetadata=o},93721(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionIndex=void 0;const s=n(80300);class o extends s.AbstractObject{constructor(){super(...arguments),this.parsedXML=void 0}getType(){return"XINX"}getAllowedNaming(){return{maxLength:33,allowNamespace:!0}}setDirty(){this.parsedXML=void 0,super.setDirty()}getDescription(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.ddtext}getTableName(){var e;return this.parse(),null===(e=this.parsedXML)||void 0===e?void 0:e.sqltab}parse(){var e,t,n,s,o;if(void 0!==this.parsedXML)return{updated:!1,runtime:0};const i=Date.now();this.parsedXML={};const r=super.parseRaw2();if(void 0===r)return{updated:!1,runtime:0};const a=null===(n=null===(t=null===(e=r.abapGit)||void 0===e?void 0:e["asx:abap"])||void 0===t?void 0:t["asx:values"])||void 0===n?void 0:n.XINX;return this.parsedXML={sqltab:null===(s=null==a?void 0:a.DD12V)||void 0===s?void 0:s.SQLTAB,ddtext:null===(o=null==a?void 0:a.DD12V)||void 0===o?void 0:o.DDTEXT},{updated:!0,runtime:Date.now()-i}}}t.ExtensionIndex=o},93745(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndClass=void 0;const s=n(3125);t.EndClass=class{getMatcher(){return(0,s.str)("ENDCLASS")}}},93756(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConstantBegin=void 0;const s=n(3125),o=n(82245);t.ConstantBegin=class{getMatcher(){return(0,s.seq)("CONSTANTS BEGIN OF",o.DefinitionName,(0,s.optPrio)("%_PREDEFINED"))}}},93791(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ArtifactsRules=void 0;const s=n(69712);t.ArtifactsRules=class{static getRules(){const e=[],t=s;for(const n in s)if("function"==typeof t[n]){const s=new t[n];void 0!==s.getMetadata&&e.push(s)}return e}}},93858(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[&_!]?\*?\w*(\/\w+\/)?\d*[a-zA-Z_%\$][\w\*%\$\?]*(~\w+)?$/)}}t.ParameterName=o},93859(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Interface=void 0;const s=n(3125),o=n(82245);t.Interface=class{getMatcher(){return(0,s.seq)("INTERFACE",o.InterfaceName,(0,s.opt)(o.ClassGlobal))}}},94466(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassImplementation=void 0;const s=n(2088),o=n(94967),i=n(50612),r=n(82245),a=n(11361);class c extends s.Identifier{constructor(e,t){if(!(e.get()instanceof o.ClassImplementation))throw new Error("ClassImplementation, unexpected node type");super(e.findFirstStatement(i.ClassImplementation).findFirstExpression(r.ClassName).getFirstToken(),t),this.node=e}getMethodImplementations(){const e=[];for(const t of this.node.findAllStructures(o.Method))e.push(new a.MethodImplementation(t,this.filename));return e}getMethodImplementation(e){for(const t of this.getMethodImplementations())if(t.getName().toUpperCase()===e.toUpperCase())return t}}t.ClassImplementation=c},94496(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoPrefixes=t.NoPrefixesConf=void 0;const s=n(71759),o=n(77465),i=n(99732),r=n(82245),a=n(50612),c=n(86696);class l extends o.BasicRuleConfig{constructor(){super(...arguments),this.data="^[LGM].?_",this.statics="^S.?_",this.fieldSymbols="^<[LGM].?_",this.constants="^[LGM]?C.?_",this.types="^TY_",this.methodParameters="^[ICER].?_",this.allowIsPrefixBoolean=!0,this.maxIssuesPerFile=10}}t.NoPrefixesConf=l;const d="Avoid hungarian notation";class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new l}getMetadata(){return{key:"no_prefixes",title:"No Prefixes",shortDescription:"Dont use hungarian notation",extendedInformation:"\nNote: not prefixing TYPES will require changing the errorNamespace in the abaplint configuration,\nallowing all types to become voided, abaplint will then provide less precise syntax errors.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#avoid-encodings-esp-hungarian-notation-and-prefixes\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/sub-sections/AvoidEncodings.md",tags:[c.RuleTag.SingleFile,c.RuleTag.Styleguide],badExample:"DATA lv_foo TYPE i.",goodExample:"DATA foo TYPE i."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=this.getConfig(),s=e.getStructure();if(void 0===s)return[];let o=n.maxIssuesPerFile;return(void 0===o||o<1)&&(o=10),void 0!==n.data&&""!==n.data&&t.push(...this.checkData(s,new RegExp(n.data,"i"),e)),t.length>=o||(void 0!==n.statics&&""!==n.statics&&t.push(...this.checkStatics(s,new RegExp(n.statics,"i"),e)),t.length>=o||(void 0!==n.fieldSymbols&&""!==n.fieldSymbols&&t.push(...this.checkFieldSymbols(s,new RegExp(n.fieldSymbols,"i"),e)),t.length>=o||(void 0!==n.constants&&""!==n.constants&&t.push(...this.checkConstants(s,new RegExp(n.constants,"i"),e)),t.length>=o||(void 0!==n.types&&""!==n.types&&t.push(...this.checkTypes(s,new RegExp(n.types,"i"),e)),t.length>=o||void 0!==n.methodParameters&&""!==n.methodParameters&&t.push(...this.checkMethodParameters(s,new RegExp(n.methodParameters,"i"),e)))))),t}checkData(e,t,n){const o=[];for(const i of e.findAllStatements(a.Data).concat(e.findAllStatements(a.DataBegin)).concat(e.findAllStatements(a.ClassDataBegin)).concat(e.findAllStatements(a.ClassData))){const e=i.findFirstExpression(r.DefinitionName)||i.findFirstExpression(r.NamespaceSimpleName),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}for(const i of e.findAllExpressions(r.InlineData)){const e=i.findFirstExpression(r.TargetField),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}return o}checkStatics(e,t,n){const o=[];for(const i of e.findAllStatements(a.Static).concat(e.findAllStatements(a.StaticBegin))){const e=i.findFirstExpression(r.DefinitionName),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}return o}checkFieldSymbols(e,t,n){const o=[];for(const i of e.findAllStatements(a.FieldSymbol)){const e=i.findFirstExpression(r.FieldSymbol),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}for(const i of e.findAllExpressions(r.InlineFS)){const e=i.findFirstExpression(r.FieldSymbol),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}return o}checkConstants(e,t,n){const o=[];for(const i of e.findAllStatements(a.Constant).concat(e.findAllStatements(a.ConstantBegin))){const e=i.findFirstExpression(r.DefinitionName),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}return o}checkTypes(e,t,n){const o=[];for(const i of e.findAllStatements(a.Type).concat(e.findAllStatements(a.TypeEnum)).concat(e.findAllStatements(a.TypeEnumBegin)).concat(e.findAllStatements(a.TypeMesh)).concat(e.findAllStatements(a.TypeMeshBegin)).concat(e.findAllStatements(a.TypeBegin))){const e=i.findFirstExpression(r.NamespaceSimpleName),a=(null==e?void 0:e.concatTokens())||"";if(""!==a&&e&&a.match(t)){const t=s.Issue.atToken(n,e.getFirstToken(),d,this.getMetadata().key,this.conf.severity);o.push(t)}}return o}checkMethodParameters(e,t,n){var o,i;const c=[];for(const l of e.findAllStatements(a.MethodDef))for(const e of l.findAllExpressionsMulti([r.MethodDefReturning,r.MethodParam])){const a=null==e?void 0:e.findFirstExpression(r.MethodParamName),l=null===(i=null===(o=null==e?void 0:e.findFirstExpression(r.TypeParam))||void 0===o?void 0:o.concatTokens())||void 0===i?void 0:i.toUpperCase();if(!0===this.getConfig().allowIsPrefixBoolean&&(null==l?void 0:l.endsWith("TYPE ABAP_BOOL")))continue;const u=null==a?void 0:a.concatTokens();if(a&&u&&""!==u&&u.match(t)){const e=s.Issue.atToken(n,a.getFirstToken(),d,this.getMetadata().key,this.conf.severity);c.push(e)}}return c}}t.NoPrefixes=u},94549(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessOnValueRequest=void 0;const s=n(3125),o=n(49028);t.ProcessOnValueRequest=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"PROCESS ON VALUE-REQUEST")}}},94693(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessObjectModel=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"BOBF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.BusinessObjectModel=o},94700(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReduceBody=void 0;const s=n(82245),o=n(2328),i=n(93170),r=n(49769),a=n(69953),c=n(23529),l=n(31666),d=n(2403);t.ReduceBody=class{static runSyntax(e,t,n){if(void 0===e)return;let u=!1;const p=e.findDirectExpression(s.Let);let f;p&&(u=l.Let.runSyntax(p,t));for(const o of e.findDirectExpressions(s.InlineFieldDefinition)){!1===u&&(t.scope.push(d.ScopeType.Let,"LET",e.getFirstToken().getStart(),t.filename),u=!0);let a=n;const c=o.findDirectExpression(s.Source);c&&(a=i.Source.runSyntax(c,t,n));const l=r.InlineFieldDefinition.runSyntax(o,t,a);l&&void 0===f&&(f=l)}let g=0;for(const n of e.findDirectExpressions(s.For)||[])!0===o.For.runSyntax(n,t)&&g++;for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.ReduceNext))c.ReduceNext.runSyntax(n,t);!0===u&&t.scope.pop(e.getLastToken().getEnd());for(let n=0;n<g;n++)t.scope.pop(e.getLastToken().getEnd());return f||new a.UnknownType("todo, ReduceBody")}}},94773(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Chain=void 0;const s=n(3125),o=n(49028);t.Chain=class{getMatcher(){return(0,s.verNot)(o.Version.Cloud,"CHAIN")}}},94884(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BracketRight=void 0;const s=n(61785);class o extends s.AbstractToken{static railroad(){return"]"}}t.BracketRight=o},94889(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ATCCheckCategory=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CHKC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.ATCCheckCategory=o},94894(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DECLARATION_STUFF=t.SELECTION_EVENTS=void 0;const s=n(50612);t.SELECTION_EVENTS=[s.StartOfSelection,s.AtSelectionScreen,s.AtLineSelection,s.AtPF,s.AtUserCommand,s.EndOfSelection,s.Initialization,s.TopOfPage,s.LoadOfProgram,s.EndOfPage],t.DECLARATION_STUFF=[s.Type,s.TypeBegin,s.TypeEnum,s.TypeEnumBegin,s.Data,s.DataBegin,s.Constant,s.ConstantBegin,s.Tables,s.Include,s.Parameter,s.SelectionScreen,s.Define]},94931(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomizingAttributes=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CUS2"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.CustomizingAttributes=o},94967(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(76609),t),o(n(71687),t),o(n(61929),t),o(n(82234),t),o(n(79175),t),o(n(38142),t),o(n(51815),t),o(n(15915),t),o(n(34168),t),o(n(62582),t),o(n(63674),t),o(n(70352),t),o(n(79069),t),o(n(536),t),o(n(46951),t),o(n(52346),t),o(n(5995),t),o(n(25188),t),o(n(29238),t),o(n(99580),t),o(n(10894),t),o(n(32161),t),o(n(38273),t),o(n(99489),t),o(n(41677),t),o(n(43397),t),o(n(95218),t),o(n(88920),t),o(n(85732),t),o(n(18044),t),o(n(47480),t),o(n(12749),t),o(n(11582),t),o(n(38075),t),o(n(17004),t),o(n(6261),t),o(n(2948),t),o(n(86720),t),o(n(10532),t),o(n(98312),t),o(n(64757),t),o(n(70242),t),o(n(54362),t),o(n(21585),t),o(n(39931),t),o(n(54178),t),o(n(86589),t),o(n(27392),t),o(n(87357),t),o(n(46896),t),o(n(58755),t),o(n(62998),t),o(n(98499),t),o(n(17239),t),o(n(23790),t),o(n(31346),t),o(n(16475),t),o(n(56458),t),o(n(4731),t)},95047(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebDynproComponentConfiguration=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"WDCC"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.WebDynproComponentConfiguration=o},95074(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TryWithoutCatch=t.TryWithoutCatchConf=void 0;const s=n(71759),o=n(99732),i=n(94967),r=n(77465),a=n(86696);class c extends r.BasicRuleConfig{}t.TryWithoutCatchConf=c;class l extends o.ABAPRule{constructor(){super(...arguments),this.conf=new c}getMetadata(){return{key:"try_without_catch",title:"TRY without CATCH",shortDescription:"Checks for TRY blocks without a CATCH and CLEANUP block",badExample:"TRY.\n  WRITE 'hello world'.\nENDTRY.",tags:[a.RuleTag.SingleFile]}}getMessage(){return"A TRY block must have a corresponding CATCH or CLEANUP block."}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return[];const o=n.findAllStructures(i.Try);for(const n of o){const o=n.findDirectStructures(i.Cleanup);if(0===n.findDirectStructures(i.Catch).length&&0===o.length){const o=s.Issue.atToken(e,n.getFirstToken(),this.getMessage(),this.getMetadata().key,this.conf.severity);t.push(o)}}return t}}t.TryWithoutCatch=l},95218(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionModule=void 0;const s=n(50612),o=n(58720),i=n(79175);t.FunctionModule=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.FunctionModule),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndFunction))}}},95271(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Constant=void 0;const s=n(20572),o=n(82245);t.Constant=class{static runSyntax(e){if(e.findDirectExpression(o.Integer))return s.IntegerType.get({derivedFromConstant:!0});const t=e.getFirstToken().getStr();if(t.startsWith("'")){let e=t.length-2;return e<=0&&(e=1),new s.CharacterType(e,{derivedFromConstant:!0})}return t.startsWith("`")?s.StringType.get({derivedFromConstant:!0}):s.StringType.get()}}},95351(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ElseIf=void 0;const s=n(82245),o=n(60635);t.ElseIf=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Cond))o.Cond.runSyntax(n,t)}}},95429(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RenameMessageClass=void 0;const s=n(46203),o=n(84383),i=n(33073);t.RenameMessageClass=class{constructor(e){this.reg=e}buildEdits(e,t,n){if(!(e instanceof o.MessageClass))throw new Error("RenameMessageClass, not a message class");let r=[];const a=new i.RenamerHelper(this.reg);r=r.concat(a.buildXMLFileEdits(e,"ARBGB",t,n)),r=r.concat(a.renameFiles(e,t,n));for(const o of e.getMessages())for(const i of this.reg.getMSAGReferences().listByMessage(e.getName(),o.getNumber())){const e=this.reg.getFileByName(i.filename);if(void 0===e)continue;const o=e.getRawRows(),a=i.token.getRow()-1,c=o[a].indexOf(t.toLowerCase());if(c>=0){const o=s.Range.create(a,c,a,c+t.length);r.push(s.TextDocumentEdit.create({uri:e.getFilename(),version:1},[s.TextEdit.replace(o,n.toLowerCase())]))}}return{documentChanges:r}}}},95567(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FetchNextCursor=void 0;const s=n(3125),o=n(82245),i=n(49028),r=n(30740);t.FetchNextCursor=class{getMatcher(){const e=(0,s.seq)("PACKAGE SIZE",o.SQLSourceSimple),t=(0,s.seq)("FETCH NEXT CURSOR",o.SQLSourceSimple,(0,s.alt)(r.SQLIntoStructure,o.SQLIntoTable,o.SQLIntoList),(0,s.optPrio)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},95626(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IntfReferencingClas=t.IntfReferencingClasConf=void 0;const s=n(71759),o=n(77465),i=n(84383),r=n(52424),a=n(36453),c=n(5518);class l extends o.BasicRuleConfig{constructor(){super(...arguments),this.allow=[]}}t.IntfReferencingClasConf=l,t.IntfReferencingClas=class{constructor(){this.conf=new l}getMetadata(){return{key:"intf_referencing_clas",title:"INTF referencing CLAS",shortDescription:"Interface contains references to class",extendedInformation:"Only global interfaces are checked.\n      Only first level references are checked.\n      Exception class references are ignored.\n      Void references are ignored."}}getConfig(){return void 0===this.conf.allow&&(this.conf.allow=[]),this.conf}setConfig(e){this.conf=e}initialize(e){return this.reg=e,this}run(e){return e instanceof i.Interface?this.traverse(new r.SyntaxLogic(this.reg,e).run().spaghetti.getTop()):[]}traverse(e){var t,n;let o=[];const i=new c.DDIC(this.reg);for(const r of e.getData().references)if(r.referenceType===a.ReferenceType.ObjectOrientedReference&&"CLAS"===(null===(t=r.extra)||void 0===t?void 0:t.ooType)&&void 0!==(null===(n=r.extra)||void 0===n?void 0:n.ooName)){const e=this.reg.getObject("CLAS",r.extra.ooName)||void 0;if(e&&i.isException(e.getClassDefinition(),e))continue;if(this.getConfig().allow.some((e=>new RegExp(e,"i").test(r.extra.ooName))))continue;o.push(s.Issue.atIdentifier(r.position,"Referencing CLAS: "+r.extra.ooName,this.getMetadata().key,this.conf.severity))}for(const t of e.getChildren())o=o.concat(this.traverse(t));return o}}},95640(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLOrderBy=void 0;const s=n(3125),o=n(17808),i=n(37210);class r extends s.Expression{getRunnable(){const e=(0,s.alt)("ASCENDING","DESCENDING"),t=(0,s.plus)((0,s.seq)(i.SQLFieldName,(0,s.opt)(e),(0,s.opt)(",")));return(0,s.seq)("ORDER BY",(0,s.altPrio)("PRIMARY KEY",o.Dynamic,t))}}t.SQLOrderBy=r},95749(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SearchHelp=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SHLP"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.SearchHelp=o},95760(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PerformChanging=void 0;const s=n(3125),o=n(57468);class i extends s.Expression{getRunnable(){return(0,s.seq)("CHANGING",(0,s.plus)(o.Target))}}t.PerformChanging=i},95843(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.LoadOfProgram=void 0;const s=n(3125),o=n(49028);t.LoadOfProgram=class{getMatcher(){const e=(0,s.str)("LOAD-OF-PROGRAM");return(0,s.verNot)(o.Version.Cloud,e)}}},95997(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectOption=void 0;const s=n(82245),o=n(15838),i=n(20572),r=n(46743),a=n(53414),c=n(82054),l=n(89301);t.SelectOption=class{runSyntax(e,t){var n;const d=null===(n=e.findFirstExpression(s.FieldSub))||void 0===n?void 0:n.getFirstToken();if(d&&d.getStr().length>8){const e="Select-option name too long, "+d.getStr();return void t.issues.push((0,c.syntaxIssue)(t,d,e))}if(void 0===d)return;for(const n of e.findDirectExpressions(s.Dynamic))return a.Dynamic.runSyntax(n,t),void t.scope.addIdentifier(new o.TypedIdentifier(d,t.filename,i.VoidType.get("DYNAMIC_SELECT_OPTION")));const u=e.findFirstExpression(s.FieldChain);let p=new r.BasicTypes(t).resolveLikeName(u);if(p){if(p instanceof i.StructureType){let e=0;for(const t of p.getComponents())t.type instanceof i.CharacterType&&(e+=t.type.getLength());p=0===e?i.VoidType.get("Selectoption, fallback"):new i.CharacterType(e)}const e=new i.StructureType([{name:"SIGN",type:new i.CharacterType(1)},{name:"OPTION",type:new i.CharacterType(2)},{name:"LOW",type:p},{name:"HIGH",type:p}]);t.scope.addIdentifier(new o.TypedIdentifier(d,t.filename,new i.TableType(e,{withHeader:!0,keyType:i.TableKeyType.default})))}else t.scope.addIdentifier(new o.TypedIdentifier(d,t.filename,new i.UnknownType("Select option, fallback")));const f="%_"+d.getStr()+"_%_app_%",g=new l.Identifier(d.getStart(),f);t.scope.addIdentifier(new o.TypedIdentifier(g,t.filename,i.VoidType.get("SELECT-OPTION magic")))}}},96024(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EndMethod=void 0;const s=n(3125);t.EndMethod=class{getMatcher(){return(0,s.str)("ENDMETHOD")}}},96249(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectAddOrderBy=t.SelectAddOrderByConf=void 0;const s=n(82245),o=n(50612),i=n(77465),r=n(71759),a=n(86696),c=n(52424),l=n(12620),d=n(20572);class u extends i.BasicRuleConfig{constructor(){super(...arguments),this.skipForAllEntries=!1}}t.SelectAddOrderByConf=u,t.SelectAddOrderBy=class{constructor(){this.conf=new u}getMetadata(){return{key:"select_add_order_by",title:"SELECT add ORDER BY",shortDescription:"SELECTs add ORDER BY clause",extendedInformation:"\nThis will make sure that the SELECT statement returns results in the same sequence on different databases\n\nadd ORDER BY PRIMARY KEY if in doubt\n\nIf the target is a sorted/hashed table, no issue is reported",tags:[a.RuleTag.SingleFile],badExample:"SELECT * FROM db INTO TABLE @DATA(tab).",goodExample:"SELECT * FROM db INTO TABLE @DATA(tab) ORDER BY PRIMARY KEY."}}getConfig(){return this.conf}initialize(e){return this.reg=e,this}setConfig(e){this.conf=e}run(e){var t,n;const i=[];if(!(e instanceof l.ABAPObject)||"INTF"===e.getType())return[];const a=new c.SyntaxLogic(this.reg,e).run().spaghetti;for(const c of e.getABAPFiles()){const e=c.getStructure();if(void 0===e)return i;const l=e.findAllStatements(o.Select);l.push(...e.findAllStatements(o.SelectLoop));for(const e of l){const o=e.concatTokens().toUpperCase();if(o.startsWith("SELECT SINGLE "))continue;if(!0===(null===(t=this.getConfig())||void 0===t?void 0:t.skipForAllEntries)&&o.includes(" FOR ALL ENTRIES "))continue;const l=e.findAllExpressions(s.SQLField);1===l.length&&(null===(n=l[0].getFirstChild())||void 0===n?void 0:n.get())instanceof s.SQLAggregation||e.findFirstExpression(s.SQLOrderBy)||this.isTargetSortedOrHashed(e,a,c)||e.findFirstExpression(s.SQLJoin)&&e.findFirstExpression(s.SQLForAllEntries)||i.push(r.Issue.atStatement(c,e,"Add ORDER BY",this.getMetadata().key,this.conf.severity))}}return i}isTargetSortedOrHashed(e,t,n){var o,i;const r=null===(o=e.findFirstExpression(s.SQLIntoTable))||void 0===o?void 0:o.findFirstExpression(s.Target);if(r){const e=r.getFirstToken().getStart(),s=t.lookupPosition(e,n.getFilename());let o=null===(i=null==s?void 0:s.findWriteReference(e))||void 0===i?void 0:i.getType();const a=r.getChildren();if(o instanceof d.StructureType&&a.length>=3&&"-"===a[1].concatTokens()){const e=o.getComponentByName(a[2].concatTokens());if(void 0===e)return!1;o=e}if(o instanceof d.TableType&&((null==o?void 0:o.getAccessType())===d.TableAccessType.sorted||(null==o?void 0:o.getAccessType())===d.TableAccessType.hashed))return!0}return!1}}},96283(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodImplementedTwice=t.MethodImplementedTwiceConf=void 0;const s=n(99732),o=n(77465),i=n(71759),r=n(86696);class a extends o.BasicRuleConfig{}t.MethodImplementedTwiceConf=a;class c extends s.ABAPRule{constructor(){super(...arguments),this.conf=new a}getMetadata(){return{key:"method_implemented_twice",title:"Method implemented twice",shortDescription:"Reports an error if a method is implemented or defined twice",tags:[r.RuleTag.SingleFile,r.RuleTag.Syntax]}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getInfo().listClassImplementations()){const s={};for(const o of n.methods){const n=o.getName().toUpperCase();if(void 0===s[n])s[n]=!0;else{const s=`Method ${n} implemented twice`;t.push(i.Issue.atToken(e,o.getToken(),s,this.getMetadata().key,this.getConfig().severity))}}}for(const n of e.getInfo().listClassDefinitions()){const s={};for(const o of n.methods){const n=o.name.toUpperCase();if(void 0===s[n])s[n]=!0;else{const s=`Method ${n} defined twice`;t.push(i.Issue.atToken(e,o.identifier.getToken(),s,this.getMetadata().key,this.getConfig().severity))}}}for(const n of e.getInfo().listInterfaceDefinitions()){const e={};for(const s of n.methods){const n=s.name.toUpperCase();if(void 0===e[n])e[n]=!0;else{const e=`Method ${n} implemented twice`;t.push(i.Issue.atIdentifier(s.identifier,e,this.getMetadata().key,this.getConfig().severity))}}}return t}}t.MethodImplementedTwice=c},96343(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineFieldDefinition=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.altPrio)((0,s.seq)(o.Field,"=",o.Source),(0,s.seq)(o.Field,"TYPE",o.TypeName))}}t.InlineFieldDefinition=i},96378(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollList=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ScrollList=class{getMatcher(){const e=(0,s.seq)("INDEX",o.Source),t=(0,s.seq)("LINE",o.Source),n=(0,s.seq)("TO COLUMN",o.Source),r=(0,s.seq)("TO",(0,s.alt)("FIRST PAGE","LAST PAGE",(0,s.seq)("PAGE",o.Source))),a=(0,s.seq)(o.Source,"PAGES"),c=(0,s.seq)("SCROLL LIST",(0,s.per)(e,(0,s.seq)((0,s.alt)(r,"BACKWARD","FORWARD"),(0,s.opt)(a)),(0,s.seq)((0,s.alt)("LEFT","RIGHT"),(0,s.opt)((0,s.seq)("BY",o.Source,"PLACES"))),n,t));return(0,s.verNot)(i.Version.Cloud,c)}}},96381(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassData=void 0;const s=n(82245),o=n(15838),i=n(7275),r=n(69953),a=n(82054),c=n(20572);t.ClassData=class{runSyntax(e,t){const n=e.findFirstExpression(s.DataDefinition);if(n){const s=i.DataDefinition.runSyntax(n,t);if(void 0===s)return;if(!0===(null==s?void 0:s.getType().isGeneric())&&!1===(null==s?void 0:s.getType().containsVoid())){const n="DATA definition cannot be generic, "+s.getName();return t.issues.push((0,a.syntaxIssue)(t,e.getFirstToken(),n)),new o.TypedIdentifier(s.getToken(),t.filename,c.VoidType.get(a.CheckSyntaxKey))}const r=[...s.getMeta(),"static"];return new o.TypedIdentifier(s.getToken(),t.filename,s.getType(),r,s.getValue())}const l=e.findFirstExpression(s.NamespaceSimpleName);if(l)return new o.TypedIdentifier(l.getFirstToken(),t.filename,new r.UnknownType("class data, fallback"))}}},96484(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FreeObject=void 0;const s=n(3125),o=n(82245),i=n(49028);t.FreeObject=class{getMatcher(){const e=(0,s.seq)("FREE OBJECT",o.Target,(0,s.opt)("NO FLUSH"));return(0,s.verNot)(i.Version.Cloud,e)}}},96493(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Severity=void 0,function(e){e.Error="Error",e.Warning="Warning",e.Info="Info"}(n||(t.Severity=n={}))},96523(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UnusedDDIC=t.UnusedDDICConf=void 0;const s=n(71759),o=n(84383),i=n(77465);class r extends i.BasicRuleConfig{}t.UnusedDDICConf=r,t.UnusedDDIC=class{constructor(){this.conf=new r}getMetadata(){return{key:"unused_ddic",title:"Unused DDIC",shortDescription:"Checks the usage of DDIC objects",extendedInformation:"Objects checked: DOMA + DTEL + TABL + TTYP + VIEW",tags:[]}}initialize(e){return this.reg=e,this}getConfig(){return this.conf}setConfig(e){this.conf=e}run(e){return e instanceof o.Domain||e instanceof o.TableType||e instanceof o.View||e instanceof o.Table||e instanceof o.DataElement?this.check(e):[]}check(e){const t=e.getIdentifier(),n=this.reg.getDDICReferences().listWhereUsed(e);if(t&&0===n.length){const n=e.getType()+" "+e.getName()+" not statically referenced";return[s.Issue.atIdentifier(t,n,this.getMetadata().key,this.conf.severity)]}return[]}}},96573(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineLoopDefinition=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){const e=(0,s.seq)("INDEX INTO",o.TargetField),t=(0,s.seq)("USING KEY",o.SimpleName);return(0,s.seq)((0,s.altPrio)(o.TargetFieldSymbol,o.TargetField),"IN",(0,s.opt)("GROUP"),o.Source,(0,s.optPrio)(t),(0,s.optPrio)(e))}}t.InlineLoopDefinition=i},96808(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentCompare=void 0;const s=n(82245),o=n(82054),i=n(56478),r=n(93170);t.ComponentCompare=class{static runSyntax(e,t,n){const a=e.findDirectExpression(s.ComponentChainSimple);if(void 0===a){const n="ComponentCompare, chain not found";return void t.issues.push((0,o.syntaxIssue)(t,e.getFirstToken(),n))}const c=i.ComponentChain.runSyntax(n,a,t);for(const n of e.findDirectExpressions(s.Source))r.Source.runSyntax(n,t,c)}}},96810(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLeft=void 0;const s=n(3125),o=n(49028),i=n(82245);t.SetLeft=class{getMatcher(){const e=(0,s.seq)("COLUMN",i.Source);return(0,s.verNot)(o.Version.Cloud,(0,s.seq)("SET LEFT SCROLL-BOUNDARY",(0,s.opt)(e)))}}},96834(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Oauth2Profile=void 0;const s=n(86219),o=n(80300);class i extends o.AbstractObject{getType(){return"OA2P"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}listScopes(){var e,t,n;const o=[],i=super.parseRaw2();for(const r of(0,s.xmlToArray)(null===(n=null===(t=null===(e=i.abapGit["asx:abap"]["asx:values"])||void 0===e?void 0:e.PROFILE)||void 0===t?void 0:t.T_SCOPES)||void 0===n?void 0:n.OA2P_SCOPES))o.push(r.SCOPE);return o}}t.Oauth2Profile=i},96928(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodLengthStats=void 0;const s=n(50612),o=n(82245),i=n(82245),r=n(12620),a=n(52024);t.MethodLengthStats=class{static run(e){var t;const n=[];let i,c="",l=0,d=!1;if(!(e instanceof r.ABAPObject))return[];for(const r of e.getABAPFiles()){let e="";for(const u of r.getStatements()){const p=u.get();if(p instanceof s.MethodImplementation)i=u.getFirstToken().getStart(),c=this.findName(u),d=!0,l=0;else if(p instanceof s.ClassImplementation)e=(null===(t=u.findFirstExpression(o.ClassName))||void 0===t?void 0:t.concatTokens())||"INTERNAL_ERROR";else if(p instanceof s.EndMethod){if(!i)continue;n.push({name:c,className:e,count:l,file:r,pos:i}),d=!1}else!0!==d||p instanceof a.Comment||p instanceof a.Empty||(l+=1)}}return n}static findName(e){let t="";const n=e.findFirstExpression(i.MethodName);if(!n)throw new Error("MethodLength, findName, expected MethodName");return t=n.getFirstToken().getStr(),t}}},96979(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyScreen=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ModifyScreen=class{getMatcher(){const e=(0,s.seq)("MODIFY SCREEN",(0,s.opt)((0,s.seq)("FROM",o.Source)));return(0,s.verNot)(i.Version.Cloud,e)}}},97003(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MaxOneStatement=t.MaxOneStatementConf=void 0;const s=n(71759),o=n(52024),i=n(99732),r=n(77465),a=n(71249),c=n(86696),l=n(297);class d extends r.BasicRuleConfig{}t.MaxOneStatementConf=d;class u extends i.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"max_one_statement",title:"Max one statement per line",shortDescription:"Checks that each line contains only a single statement.",extendedInformation:"Does not report empty statements, use rule empty_statement for detecting empty statements.\n\nDoes not report anything for chained statements.\n\nhttps://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#no-more-than-one-statement-per-line\nhttps://docs.abapopenchecks.org/checks/11/",tags:[c.RuleTag.Styleguide,c.RuleTag.Quickfix,c.RuleTag.SingleFile],badExample:"WRITE foo. WRITE bar.",goodExample:"WRITE foo.\nWRITE bar."}}getMessage(){return"Only one statement is allowed per line"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];let n=0,i=0;for(const r of e.getStatements()){const c=r.getTerminator();if(r.get()instanceof o.Comment||r.get()instanceof o.NativeSQL||","===c)continue;const d=r.getStart();if(d instanceof l.VirtualPosition)continue;const u=d.getRow();if(n===u&&u!==i&&"."!==r.getFirstToken().getStr()){const n=a.EditHelper.insertAt(e,d,"\n"),o=s.Issue.atPosition(e,d,this.getMessage(),this.getMetadata().key,this.conf.severity,n);t.push(o),i=u}n=u}return t}}t.MaxOneStatement=u},97007(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLClient=void 0;const s=n(49028),o=n(3125),i=n(83161);class r extends o.Expression{getRunnable(){return(0,o.alt)((0,o.verNot)(s.Version.Cloud,"CLIENT SPECIFIED"),(0,o.seq)("USING",(0,o.alt)((0,o.ver)(s.Version.v740sp05,(0,o.seq)("CLIENT",i.SQLSourceSimple)),(0,o.ver)(s.Version.v754,(0,o.seq)("CLIENTS IN",(0,o.alt)(i.SQLSourceSimple,"T000"))),(0,o.ver)(s.Version.v754,"ALL CLIENTS"))))}}t.SQLClient=r},97092(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Assert=void 0;const s=n(3125),o=n(82245);t.Assert=class{getMatcher(){const e=(0,s.seq)("FIELDS",(0,s.plus)(o.Source)),t=(0,s.seq)("SUBKEY",o.Source),n=(0,s.seq)("ID",o.NamespaceSimpleName);return(0,s.seq)("ASSERT",(0,s.optPrio)(n),(0,s.optPrio)(t),(0,s.opt)(e),(0,s.optPrio)("CONDITION"),o.Cond)}}},97112(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InlineData=void 0;const s=n(3125),o=n(89301),i=n(82245),r=n(49028);class a extends s.Expression{getRunnable(){const e=(0,s.altPrio)((0,s.tok)(o.ParenRightW),(0,s.tok)(o.ParenRight)),t=(0,s.tok)(o.ParenLeft),n=(0,s.seq)("DATA",t,i.TargetField,e),a=(0,s.seq)("FINAL",t,i.TargetField,e);return(0,s.altPrio)((0,s.ver)(r.Version.v740sp02,n,r.Version.OpenABAP),(0,s.ver)(r.Version.v757,a,r.Version.OpenABAP))}}t.InlineData=a},97234(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Raise=void 0;const s=n(82245),o=n(75457),i=n(93170),r=n(36453),a=n(20572),c=n(59853),l=n(88758),d=n(2416),u=n(19945),p=n(82054);t.Raise=class{runSyntax(e,t){var n,f,g,h,T,m;const y=new d.ObjectOriented(t.scope);let S;const v=null===(n=e.findDirectExpression(s.ClassName))||void 0===n?void 0:n.getFirstToken(),E=null==v?void 0:v.getStr();if(v&&E){const e=t.scope.existsObject(E);if(null==e?void 0:e.id){t.scope.addReference(v,e.id,r.ReferenceType.ObjectOrientedReference,t.filename);const n=t.scope.findObjectDefinition(E);S=null===(f=y.searchMethodName(n,"CONSTRUCTOR"))||void 0===f?void 0:f.method}else{if(!1!==t.scope.getDDIC().inErrorNamespace(E)){const e="RAISE, unknown class "+E;return void t.issues.push((0,p.syntaxIssue)(t,v,e))}{const e={ooName:E,ooType:"Void"};t.scope.addReference(v,void 0,r.ReferenceType.ObjectOrientedVoidReference,t.filename,e),S=a.VoidType.get(E)}}void 0===S&&(S=a.VoidType.get(E))}const C=e.findExpressionAfterToken("EXCEPTION");if(C instanceof o.ExpressionNode&&(C.get()instanceof s.SimpleSource2||C.get()instanceof s.Source)){const e=i.Source.runSyntax(C,t);if(e instanceof a.VoidType)S=e;else if(e instanceof a.ObjectReferenceType){const n=t.scope.findObjectDefinition(e.getIdentifierName());S=null===(g=y.searchMethodName(n,"CONSTRUCTOR"))||void 0===g?void 0:g.method}else if(void 0!==e){const n="RAISE EXCEPTION, must be object reference, got "+e.constructor.name;return void t.issues.push((0,p.syntaxIssue)(t,C.getFirstToken(),n))}}void 0===S&&(S=a.VoidType.get("Exception"));const b=e.findDirectExpression(s.ParameterListS);b&&(new u.MethodParameters).checkExporting(b,t,S,!0);for(const n of e.findDirectExpressions(s.RaiseWith))l.RaiseWith.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Source))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.SimpleSource2))i.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.MessageSource))c.MessageSource.runSyntax(n,t);const I=null===(h=e.findExpressionAfterToken("ID"))||void 0===h?void 0:h.concatTokens();let D=null===(T=e.findDirectExpression(s.MessageNumber))||void 0===T?void 0:T.concatTokens();if(void 0===D){const t=null===(m=e.findExpressionAfterToken("NUMBER"))||void 0===m?void 0:m.concatTokens();(null==t?void 0:t.startsWith("'"))&&(D=t.substring(1,t.length-1).toUpperCase())}if((null==I?void 0:I.startsWith("'"))&&D){const n=I.substring(1,I.length-1).toUpperCase();t.scope.getMSAGReferences().addUsing(t.filename,e.getFirstToken(),n,D)}}}},97260(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerEnhancementProject=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"CMOD"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.CustomerEnhancementProject=o},97329(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Dereference=void 0;const s=n(89301),o=n(3125);class i extends o.Expression{getRunnable(){return(0,o.seq)((0,o.tok)(s.InstanceArrow),"*")}}t.Dereference=i},97352(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"PARA"}getAllowedNaming(){return{maxLength:20,allowNamespace:!0}}getDescription(){}}t.Parameter=o},97502(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractType=void 0,t.AbstractType=class{constructor(e){this.data=e}getAbstractTypeData(){return this.data}getQualifiedName(){var e;return null===(e=this.data)||void 0===e?void 0:e.qualifiedName}getRTTIName(){var e;return null===(e=this.data)||void 0===e?void 0:e.RTTIName}getDescription(){var e;return null===(e=this.data)||void 0===e?void 0:e.description}getConversionExit(){var e;return null===(e=this.data)||void 0===e?void 0:e.conversionExit}getDDICName(){var e;return null===(e=this.data)||void 0===e?void 0:e.ddicName}}},97601(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VerificationMessage=void 0;const s=n(3125),o=n(82245),i=n(49028);t.VerificationMessage=class{getMatcher(){const e=(0,s.seq)("PRIORITY",o.Source),t=(0,s.seq)("VERIFICATION-MESSAGE",o.Source,o.Source,(0,s.opt)(e));return(0,s.verNot)(i.Version.Cloud,t)}}},97645(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionModule=void 0;const s=n(3125),o=n(82245);t.FunctionModule=class{getMatcher(){return(0,s.seq)("FUNCTION",o.Field)}}},97650(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Type=class{getMatcher(){const e=(0,s.per)(o.Type,o.Decimals,o.Length),t=(0,s.seq)(o.NamespaceSimpleName,(0,s.opt)(o.ConstantFieldLength),(0,s.opt)((0,s.alt)(e,o.TypeTable,o.TypeStructure))),n=(0,s.ver)(i.Version.v702,"BOXED");return(0,s.seq)("TYPES",t,(0,s.opt)(n))}}},97868(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FindGlobalDefinitions=void 0;const s=n(19364),o=n(70105),i=n(3646),r=n(94967),a=n(18260),c=n(83171),l=n(20572),d=n(84383);t.FindGlobalDefinitions=class{constructor(e){this.reg=e}run(e){let t=Number.MAX_SAFE_INTEGER,n=[];for(const e of this.reg.getObjects())(e instanceof a.Interface||e instanceof c.Class)&&void 0===e.getDefinition()?n.push(e):(e instanceof d.DataElement||e instanceof d.Table||e instanceof d.TableType||e instanceof d.View||e instanceof d.LockObject||e instanceof d.AuthorizationCheckField)&&e.parseType(this.reg);n.sort(((e,t)=>e.getName().localeCompare(t.getName())));for(let s=1;s<=10;s++){null==e||e.set(n.length,"Global OO types, pass "+s);let o=0;const i=[];for(const t of n){null==e||e.tickSync("Global OO types(pass "+s+"), next pass: "+i.length),this.update(t);const n=this.countUntyped(t);n>0&&i.push(t),o+=n}if(n=i,t===o||0===o)break;t=o}}countUntyped(e){const t=e.getDefinition();if(void 0===t)return 1;let n=0;for(const e of t.getTypeDefinitions().getAll())n+=this.count(e.type.getType());for(const e of t.getAttributes().getAll())n+=this.count(e.getType());for(const e of t.getAttributes().getConstants())n+=this.count(e.getType());for(const e of t.getMethodDefinitions().getAll())for(const t of e.getParameters().getAll())n+=this.count(t.getType());for(const e of t.getEvents()||[])for(const t of e.getParameters())n+=this.count(t.getType());return n}count(e){if(e instanceof l.UnknownType||e instanceof l.VoidType)return 1;if(e instanceof l.TableType)return this.count(e.getRowType());if(e instanceof l.DataReference)return this.count(e.getType());if(e instanceof l.StructureType){let t=0;for(const n of e.getComponents())t+=this.count(n.type);return t}return 0}update(e){const t=e.getMainABAPFile();if(void 0===t)return void e.setDefinition(void 0);const n=null==t?void 0:t.getStructure();if(void 0===n)return void e.setDefinition(void 0);const c={filename:t.getFilename(),scope:i.CurrentScope.buildDefault(this.reg,e),issues:[]};if(e instanceof a.Interface){const t=n.findFirstStructure(r.Interface);if(t)try{const n=new s.InterfaceDefinition(t,c);e.setDefinition(n)}catch(t){e.setDefinition(void 0)}else e.setDefinition(void 0)}else{const t=n.findFirstStructure(r.ClassDefinition);if(t)try{const n=new o.ClassDefinition(t,c);e.setDefinition(n)}catch(t){e.setDefinition(void 0)}else e.setDefinition(void 0)}}}},97950(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MethodParamName=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^!?\w*(\/\w+\/)?\w+$/)}}t.MethodParamName=o},98006(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImportDynpro=void 0;const s=n(82245),o=n(93170),i=n(9646);t.ImportDynpro=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t);for(const n of e.findDirectExpressions(s.Target))i.Target.runSyntax(n,t)}}},98069(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractNode=void 0,t.AbstractNode=class{constructor(){this.children=[]}addChild(e){this.children.push(e)}setChildren(e){this.children=e}getChildren(){return this.children}getFirstChild(){return this.children[0]}getLastChild(){return this.children[this.children.length-1]}}},98126(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPReferencesProvider=void 0;const s=n(55864);t.ABAPReferencesProvider=class{constructor(e){this.reg=e}provideReferences(e,t,n,o){const i=new s.LanguageServer(this.reg),r={textDocument:{uri:e.uri.toString()},position:{line:t.lineNumber-1,character:t.column-1}},a=[];for(const e of i.references(r))a.push({uri:monaco.Uri.parse(e.uri),range:new monaco.Range(e.range.start.line+1,e.range.start.character+1,e.range.end.line+1,e.range.end.character+1)});return a}}},98312(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessOnValueRequest=void 0;const s=n(50612),o=n(58720);t.ProcessOnValueRequest=class{getMatcher(){const e=(0,o.star)((0,o.sta)(s.Field));return(0,o.seq)((0,o.sta)(s.ProcessOnValueRequest),e)}}},98466(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Hide=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Hide=class{getMatcher(){const e=(0,s.seq)("HIDE",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},98499(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeEnum=void 0;const s=n(50612),o=n(58720);t.TypeEnum=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.TypeEnumBegin),(0,o.star)((0,o.alt)((0,o.sta)(s.TypeEnum),(0,o.sta)(s.Type))),(0,o.sta)(s.TypeEnumEnd))}}},98544(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoChainedAssignment=t.NoChainedAssignmentConf=void 0;const s=n(82245),o=n(50612),i=n(71759),r=n(99732),a=n(77465),c=n(86696),l=n(71249);class d extends a.BasicRuleConfig{}t.NoChainedAssignmentConf=d;class u extends r.ABAPRule{constructor(){super(...arguments),this.conf=new d}getMetadata(){return{key:"no_chained_assignment",title:"No chained assignment",shortDescription:"Find chained assingments and reports issues",extendedInformation:"https://github.com/SAP/styleguides/blob/main/clean-abap/CleanABAP.md#dont-chain-assignments",tags:[c.RuleTag.SingleFile,c.RuleTag.Styleguide,c.RuleTag.Quickfix],badExample:"var1 = var2 = var3.",goodExample:"var2 = var3.\nvar1 = var2."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[];for(const n of e.getStatements())if(n.get()instanceof o.Move&&n.findDirectExpressions(s.Target).length>=2){const s="No chained assignment",o=this.buildFix(e,n),r=i.Issue.atStatement(e,n,s,this.getMetadata().key,this.getConfig().severity,o);t.push(r)}return t}buildFix(e,t){const n=t.getChildren();let s="";for(let e=n.length-4;e>=0;e-=2)s+=n[e].concatTokens()+" "+n[e+1].concatTokens()+" "+n[e+2].concatTokens()+".\n";return l.EditHelper.replaceRange(e,t.getStart(),t.getEnd(),s.trimEnd())}}t.NoChainedAssignment=u},98576(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignParameters=t.AlignParametersConf=void 0;const s=n(71759),o=n(82245),i=n(99732),r=n(77465),a=n(86696),c=n(86789),l=n(50612),d=n(71249);class u extends r.BasicRuleConfig{}t.AlignParametersConf=u;class p extends i.ABAPRule{constructor(){super(...arguments),this.conf=new u}getMetadata(){return{key:"align_parameters",title:"Align Parameters",shortDescription:"Checks for vertially aligned parameters",extendedInformation:"Checks:\n* function module calls\n* method calls\n* VALUE constructors\n* NEW constructors\n* RAISE EXCEPTION statements\n* CREATE OBJECT statements\n* RAISE EVENT statements\n\nhttps://github.com/SAP/styleguides/blob/master/clean-abap/CleanABAP.md#align-parameters\n\nDoes not take effect on non functional method calls, use https://rules.abaplint.org/functional_writing/\n\nIf parameters are on the same row, no issues are reported, see\nhttps://rules.abaplint.org/max_one_method_parameter_per_line/ for splitting parameters to lines",tags:[a.RuleTag.SingleFile,a.RuleTag.Whitespace,a.RuleTag.Styleguide,a.RuleTag.Quickfix],badExample:"CALL FUNCTION 'FOOBAR'\n  EXPORTING\n    foo = 2\n    parameter = 3.\n\nfoobar( moo = 1\n  param = 1 ).\n\nfoo = VALUE #(\n    foo = bar\n        moo = 2 ).",goodExample:"CALL FUNCTION 'FOOBAR'\n  EXPORTING\n    foo       = 2\n    parameter = 3.\n\nfoobar( moo   = 1\n        param = 1 ).\n\nfoo = VALUE #(\n    foo = bar\n    moo = 2 ).\n\nDATA(sdf) = VALUE type(\n  common_val     = 2\n  another_common = 5\n  ( row_value = 4\n    value_foo = 5 ) )."}}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){const t=[],n=e.getStructure();if(void 0===n)return t;const s=[];s.push(...this.functionParameterCandidates(n)),s.push(...this.methodCallParamCandidates(n)),s.push(...this.valueBodyCandidates(n)),s.push(...this.raiseAndCreateCandidates(n)),s.push(...this.newCandidates(n));for(const n of s){const s=this.checkCandidate(n,e);s&&t.push(s)}return t}checkCandidate(e,t){if(0===e.parameters.length)return;let n=0,o=0;for(const t of e.parameters){const e=t.left.getLastToken().getCol()+t.left.getLastToken().getStr().length+1;if(t.eq.getRow()===o)return;o=t.eq.getRow(),e>n&&(n=e)}for(const o of e.parameters)if(o.eq.getCol()!==n){let e;e=o.eq.getCol()<n?d.EditHelper.insertAt(t,o.eq," ".repeat(n-o.eq.getCol())):d.EditHelper.deleteRange(t,new c.Position(o.eq.getRow(),n),o.eq);const i="Align parameters to column "+n;return s.Issue.atPosition(t,o.eq,i,this.getMetadata().key,this.getConfig().severity,e)}}newCandidates(e){const t=[];for(const n of e.findAllExpressionsRecursive(o.NewObject)){const e=[],s=n.findDirectExpressions(o.FieldAssignment);if(s.length>=2){for(const t of s){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}if(e.length>0){t.push({parameters:e});continue}}const i=n.findDirectExpression(o.ParameterListS);if(i){for(const t of i.getChildren()){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}e.length>0&&t.push({parameters:e})}}return t}valueBodyCandidates(e){const t=[];for(const n of e.findAllExpressionsRecursive(o.ValueBody)){const e=[],s=n.findDirectExpressions(o.FieldAssignment);if(!(s.length<=1)){for(const t of s){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}e.length>0&&t.push({parameters:e})}}for(const n of e.findAllExpressionsRecursive(o.ValueBodyLine)){const e=[],s=n.findDirectExpressions(o.FieldAssignment);if(!(s.length<=1)){for(const t of s){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}e.length>0&&t.push({parameters:e})}}return t}raiseAndCreateCandidates(e){const t=[],n=e.findAllStatements(l.Raise);n.push(...e.findAllStatements(l.CreateObject)),n.push(...e.findAllStatements(l.RaiseEvent));for(const e of n){const n=[],s=e.findDirectExpression(o.ParameterListS);for(const e of(null==s?void 0:s.getChildren())||[]){const t=e.getChildren();t.length<3||n.push({left:t[0],eq:t[1].getFirstToken().getStart(),right:t[2]})}const i=e.findDirectExpression(o.ParameterListExceptions);for(const e of(null==i?void 0:i.getChildren())||[]){const t=e.getChildren();t.length<3||n.push({left:t[0],eq:t[1].getFirstToken().getStart(),right:t[2]})}n.length>0&&t.push({parameters:n})}return t}methodCallParamCandidates(e){var t,n,s;const i=[];for(const r of e.findAllExpressionsRecursive(o.MethodCallParam)){const e=[];for(const n of(null===(t=r.findDirectExpression(o.ParameterListS))||void 0===t?void 0:t.getChildren())||[]){const t=n.getChildren();t.length<3||e.push({left:t[0],eq:t[1].getFirstToken().getStart(),right:t[2]})}const a=r.findDirectExpression(o.MethodParameters);if(a){for(const t of(null===(n=a.findDirectExpression(o.ParameterListS))||void 0===n?void 0:n.getChildren())||[]){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}for(const t of a.findDirectExpressions(o.ParameterListT))for(const n of t.findDirectExpressions(o.ParameterT)||[]){const t=n.getChildren();t.length<3||e.push({left:t[0],eq:t[1].getFirstToken().getStart(),right:t[2]})}const t=a.findDirectExpression(o.ParameterT);if(t){const n=t.getChildren();if(n.length<3)continue;e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}for(const t of(null===(s=a.findDirectExpression(o.ParameterListExceptions))||void 0===s?void 0:s.getChildren())||[]){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}}e.length>0&&i.push({parameters:e})}return i}functionParameterCandidates(e){const t=[];for(const n of e.findAllExpressionsRecursive(o.FunctionParameters)){const e=[];for(const t of n.findAllExpressions(o.FunctionExportingParameter)){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}for(const t of n.findDirectExpressions(o.ParameterListT))for(const n of t.findDirectExpressions(o.ParameterT)){const t=n.getChildren();t.length<3||e.push({left:t[0],eq:t[1].getFirstToken().getStart(),right:t[2]})}const s=n.findDirectExpression(o.ParameterListExceptions);if(s)for(const t of s.findDirectExpressions(o.ParameterException)){const n=t.getChildren();n.length<3||e.push({left:n[0],eq:n[1].getFirstToken().getStart(),right:n[2]})}e.length>0&&t.push({parameters:e})}return t}}t.AlignParameters=p},98648(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.FormObjectForm=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"SFPF"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.FormObjectForm=o},98750(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefinitionsTop=t.DefinitionsTopConf=void 0;const s=n(71759),o=n(52024),i=n(50612),r=n(94967),a=n(99732),c=n(77465),l=n(86696),d=n(71249),u=n(75457);class p extends c.BasicRuleConfig{}t.DefinitionsTopConf=p;class f extends a.ABAPRule{constructor(){super(...arguments),this.conf=new p}getMetadata(){return{key:"definitions_top",title:"Place definitions in top of routine",shortDescription:"Checks that definitions are placed at the beginning of METHODs, FORMs and FUNCTIONs.",extendedInformation:"https://docs.abapopenchecks.org/checks/17/",tags:[l.RuleTag.SingleFile,l.RuleTag.Quickfix],badExample:"FROM foo.\n  WRITE 'hello'.\n  DATA int TYPE i.\nENDFORM.",goodExample:"FROM foo.\n  DATA int TYPE i.\n  WRITE 'hello'.\nENDFORM."}}getMessage(){return"Reorder definitions to top of routine"}getConfig(){return this.conf}setConfig(e){this.conf=e}runParsed(e){var t;const n=[],s=e.getStructure();if(void 0===s)return[];if(!0===e.getStatements().some((e=>e.get()instanceof o.Unknown)))return[];const i=s.findAllStructuresMulti([r.Form,r.Method,r.FunctionModule]);for(const s of i){this.fixed=!1,this.mode=2,this.moveTo=null===(t=s.getFirstStatement())||void 0===t?void 0:t.getLastToken().getEnd();const o=this.walk(s,e);o&&n.push(o)}return n}walk(e,t){var n,a,c,l,p,f;let g;for(const h of e.getChildren()){const e=h.get();if(h instanceof u.StatementNode){if(e instanceof o.Comment)continue;if(e instanceof i.FunctionModule)continue;if(e instanceof i.Form)continue;if(e instanceof i.MethodImplementation)continue}if(h instanceof u.StructureNode&&(e instanceof r.Data||e instanceof r.Types||e instanceof r.Constants||e instanceof r.Statics)){if(3===this.mode){let e;if("."===(null===(a=null===(n=h.getLastChild())||void 0===n?void 0:n.getLastChild())||void 0===a?void 0:a.getFirstToken().getStr())&&!(g instanceof u.StructureNode)&&this.moveTo){const n=null===(l=null===(c=h.getFirstChild())||void 0===c?void 0:c.getFirstChild())||void 0===l?void 0:l.getFirstToken().getStart(),s=null===(f=null===(p=h.getLastChild())||void 0===p?void 0:p.getLastChild())||void 0===f?void 0:f.getLastToken().getEnd();if(n&&s){let o=h.concatTokens();o=o.replace(/,/g,".\n");const i=d.EditHelper.deleteRange(t,n,s),r=d.EditHelper.insertAt(t,this.moveTo,"\n"+o);e=d.EditHelper.merge(i,r)}}return s.Issue.atStatement(t,h.getFirstStatement(),this.getMessage(),this.getMetadata().key,this.conf.severity,e)}this.moveTo=h.getLastToken().getEnd()}else if(h instanceof u.StatementNode&&(e instanceof i.Data||e instanceof i.Type||e instanceof i.Constant||e instanceof i.Move&&h.concatTokens().toUpperCase().startsWith("DATA(")||e instanceof i.Static||e instanceof i.FieldSymbol))if(3===this.mode){if(!(e instanceof i.Move&&h.concatTokens().toUpperCase().startsWith("DATA("))){let e;return!1===this.fixed&&this.moveTo&&(e=this.buildFix(t,h,this.moveTo),this.fixed=!0),s.Issue.atStatement(t,h,this.getMessage(),this.getMetadata().key,this.conf.severity,e)}}else this.moveTo=h.getLastToken().getEnd();else{if(h instanceof u.StructureNode&&e instanceof r.Define)return void(this.mode=4);if(h instanceof u.StatementNode&&e instanceof o.Unknown)return void(this.mode=4);if(h instanceof u.StatementNode&&2===this.mode)this.mode=3;else if(h instanceof u.StructureNode){const e=this.walk(h,t);if(e)return e}}g=h}}buildFix(e,t,n){let s=t.concatTokens();s=s.replace(/,$/,".");const o=d.EditHelper.deleteStatement(e,t),i=" ".repeat(t.getFirstToken().getCol()-1),r=d.EditHelper.insertAt(e,n,"\n"+i+s);return d.EditHelper.merge(o,r)}}t.DefinitionsTop=f},98761(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WithLoop=void 0;const s=n(82245),o=n(63171),i=n(56348);t.WithLoop=class{runSyntax(e,t){for(const n of e.findAllExpressions(s.Select))o.Select.runSyntax(n,t);for(const n of e.findAllExpressions(s.SelectLoop))i.SelectLoop.runSyntax(n,t)}}},98885(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeName=void 0;const s=n(13075),o=n(83668),i=n(2550),r=n(2416),a=n(47015),c=n(36453),l=n(20572),d=n(82054);t.AttributeName=class{static runSyntax(e,t,n,u,p=!0){if(e instanceof s.VoidType)return e;const f=new r.ObjectOriented(n.scope);let g;if(e instanceof i.ObjectReferenceType){const o=n.scope.findObjectDefinition(e.getIdentifierName());if(void 0===o){const o='Definition for "'+e.getIdentifierName()+'" not found in scope(AttributeName)';return n.issues.push((0,d.syntaxIssue)(n,t.getFirstToken(),o)),s.VoidType.get(d.CheckSyntaxKey)}const i=t.getFirstToken(),r=i.getStr();let a=f.searchAttributeName(o,r);if(void 0===a&&(a=f.searchConstantName(o,r)),void 0===a){const e='Attribute or constant "'+r+'" not found in "'+o.getName()+'"';return!0===p&&n.issues.push((0,d.syntaxIssue)(n,t.getFirstToken(),e)),s.VoidType.get(d.CheckSyntaxKey)}if(u&&n.scope.addReference(i,a,u,n.filename),a&&r.includes("~")){const e=n.scope.findInterfaceDefinition(r.split("~")[0]);e&&n.scope.addReference(i,e,c.ReferenceType.ObjectOrientedReference,n.filename)}g=a.getType()}else{if(!(e instanceof a.DataReference)){const e="Not an object reference, attribute name";return n.issues.push((0,d.syntaxIssue)(n,t.getFirstToken(),e)),s.VoidType.get(d.CheckSyntaxKey)}{const i=e.getType(),r=t.getFirstToken().getStr();if("*"===r||i instanceof s.VoidType||i instanceof l.AnyType)return i;if(!(i instanceof o.StructureType)){const e="Data reference not structured";return n.issues.push((0,d.syntaxIssue)(n,t.getFirstToken(),e)),s.VoidType.get(d.CheckSyntaxKey)}if(g=i.getComponentByName(r),void 0===g){const e='Component "'+r+'" not found in data reference structure';return n.issues.push((0,d.syntaxIssue)(n,t.getFirstToken(),e)),s.VoidType.get(d.CheckSyntaxKey)}}}return g}}},98958(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Modif=void 0;const s=n(3125);class o extends s.Expression{getRunnable(){return(0,s.regex)(/^[\w\*]{1,3}$/)}}t.Modif=o},99057(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextElement=void 0;const s=n(3125),o=n(89301),i=n(82245);class r extends s.Expression{getRunnable(){return(0,s.seq)("TEXT",(0,s.tok)(o.Dash),i.TextElementKey)}}t.TextElement=r},99145(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Format=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Format=class{getMatcher(){const e=(0,s.seq)("=",o.Source),t=(0,s.altPrio)(e,"ON","OFF"),n=(0,s.per)("RESET",(0,s.seq)("INTENSIFIED",(0,s.opt)(t)),(0,s.seq)("INVERSE",(0,s.opt)(t)),(0,s.seq)("HOTSPOT",(0,s.opt)(t)),(0,s.seq)("FRAMES",t),(0,s.seq)("INPUT",(0,s.opt)(t)),o.Color),r=(0,s.seq)("FORMAT",n);return(0,s.verNot)(i.Version.Cloud,r)}}},99172(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Program=class{getMatcher(){const e=(0,s.seq)("MESSAGE-ID",o.MessageClass),t=(0,s.seq)("LINE-SIZE",o.Source),n=(0,s.str)("NO STANDARD PAGE HEADING"),r=(0,s.seq)("LINE-COUNT",o.Source,(0,s.opt)(o.FieldLength)),a=(0,s.per)(e,t,n,r),c=(0,s.seq)("PROGRAM",(0,s.opt)(o.ReportName),(0,s.opt)(a));return(0,s.verNot)(i.Version.Cloud,c)}}},99212(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Cleanup=void 0;const s=n(3125),o=n(82245);t.Cleanup=class{getMatcher(){const e=(0,s.seq)("INTO",o.Target);return(0,s.seq)("CLEANUP",(0,s.opt)(e))}}},99337(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NeptuneTileGroup=void 0;const s=n(80300);class o extends s.AbstractObject{getType(){return"ZN04"}getAllowedNaming(){return{maxLength:30,allowNamespace:!0}}getDescription(){}}t.NeptuneTileGroup=o},99349(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Destination=void 0;const s=n(3125),o=n(82245);class i extends s.Expression{getRunnable(){return(0,s.seq)("DESTINATION",(0,s.optPrio)("IN GROUP"),(0,s.altPrio)("DEFAULT",o.Source))}}t.Destination=i},99440(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImportDynpro=void 0;const s=n(3125),o=n(82245),i=n(49028);t.ImportDynpro=class{getMatcher(){const e=(0,s.seq)("IMPORT DYNPRO",o.Target,o.Target,o.Target,o.Target,"ID",o.Source);return(0,s.verNot)(i.Version.Cloud,e)}}},99442(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SubtractCorresponding=void 0;const s=n(3125),o=n(82245),i=n(49028);t.SubtractCorresponding=class{getMatcher(){const e=(0,s.seq)("SUBTRACT-CORRESPONDING",o.Source,"FROM",o.Target);return(0,s.verNot)(i.Version.Cloud,e)}}},99489(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Enhancement=void 0;const s=n(50612),o=n(58720),i=n(79175);t.Enhancement=class{getMatcher(){return(0,o.beginEnd)((0,o.sta)(s.Enhancement),(0,o.opt)((0,o.sub)(i.Body)),(0,o.sta)(s.EndEnhancement))}}},99580(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DynproLogic=void 0;const s=n(94967),o=n(58720);t.DynproLogic=class{getMatcher(){return(0,o.seq)((0,o.sub)(s.ProcessBeforeOutput),(0,o.opt)((0,o.sub)(s.ProcessAfterInput)),(0,o.opt)((0,o.sub)(s.ProcessOnHelpRequest)),(0,o.opt)((0,o.sub)(s.ProcessOnValueRequest)),(0,o.opt)((0,o.sub)(s.ProcessOnHelpRequest)))}}},99653(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Statics=void 0;const s=n(82245),o=n(50612),i=n(94967),r=n(75457),a=n(15838),c=n(20572),l=n(93286),d=n(82054);class u{runSyntax(e,t){var n,p;const f=e.findFirstExpression(s.DefinitionName).getFirstToken();let g=!1;const h=[];for(const T of e.getChildren()){const m=T.get();if(T instanceof r.StatementNode&&m instanceof o.Static){const e=(new l.Static).runSyntax(T,t);e&&h.push({name:e.getName(),type:e.getType()})}else if(T instanceof r.StructureNode&&m instanceof i.Statics){const e=(new u).runSyntax(T,t);e&&h.push({name:e.getName(),type:e.getType()})}else if(T instanceof r.StatementNode&&m instanceof o.StaticBegin)T.findDirectTokenByText("OCCURS")&&(g=!0);else if(T instanceof r.StatementNode&&m instanceof o.IncludeType){const o=null===(n=T.findFirstExpression(s.TypeName))||void 0===n?void 0:n.getFirstToken().getStr();let i=null===(p=t.scope.findType(o))||void 0===p?void 0:p.getType();if(void 0===i){const e=t.scope.getDDIC().lookupTableOrView(o).type;i=e instanceof a.TypedIdentifier?e.getType():e}if(i instanceof c.VoidType){if(!0===g){const e=new c.TableType(i,{withHeader:!0,keyType:c.TableKeyType.default});return new a.TypedIdentifier(f,t.filename,e)}return new a.TypedIdentifier(f,t.filename,i)}if(i instanceof c.UnknownType)return new a.TypedIdentifier(f,t.filename,new c.UnknownType("unknown type, "+o));if(!(i instanceof c.StructureType)){const n="not structured, "+o;return t.issues.push((0,d.syntaxIssue)(t,e.getFirstToken(),n)),new a.TypedIdentifier(f,t.filename,c.VoidType.get(d.CheckSyntaxKey))}for(const e of i.getComponents())h.push(e)}}if(!0===g){const e=new c.TableType(new c.StructureType(h),{withHeader:!0,keyType:c.TableKeyType.default});return new a.TypedIdentifier(f,t.filename,e)}return new a.TypedIdentifier(f,t.filename,new c.StructureType(h))}}t.Statics=u},99732(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ABAPRule=void 0;const s=n(12620);t.ABAPRule=class{initialize(e){return this.reg=e,this}run(e){if(!(e instanceof s.ABAPObject))return[];const t=e,n=[];for(const s of t.getABAPFiles())n.push(...this.runParsed(s,e));return n}}},99747(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Leave=void 0;const s=n(3125),o=n(82245),i=n(49028);t.Leave=class{getMatcher(){const e=(0,s.seq)(o.AndReturn,"TO SCREEN",o.Source),t=(0,s.seq)("TO TRANSACTION",o.Source,(0,s.opt)("AND SKIP FIRST SCREEN")),n=(0,s.seq)("LEAVE",(0,s.opt)((0,s.alt)((0,s.seq)("TO CURRENT TRANSACTION",(0,s.opt)("AND SKIP FIRST SCREEN")),(0,s.seq)((0,s.opt)("TO"),"LIST-PROCESSING",(0,s.opt)(e)),"LIST-PROCESSING","SCREEN",t,"PROGRAM",(0,s.seq)("TO SCREEN",o.Source))));return(0,s.verNot)(i.Version.Cloud,n)}}},99793(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SQLGroupBy=void 0;const s=n(3125),o=n(17808),i=n(37210);class r extends s.Expression{getRunnable(){const e=(0,s.alt)(i.SQLFieldName,o.Dynamic),t=(0,s.seq)((0,s.plus)((0,s.seq)(e,",")),e);return(0,s.seq)("GROUP BY",(0,s.altPrio)(t,(0,s.plus)(e)))}}t.SQLGroupBy=r},99846(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AtLast=void 0;const s=n(3125);t.AtLast=class{getMatcher(){return(0,s.str)("AT LAST")}}},99981(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.InsertTextpool=void 0;const s=n(82245),o=n(93170);t.InsertTextpool=class{runSyntax(e,t){for(const n of e.findDirectExpressions(s.Source))o.Source.runSyntax(n,t)}}}}]);