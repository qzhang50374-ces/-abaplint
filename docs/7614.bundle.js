/*! For license information please see 7614.bundle.js.LICENSE.txt */
(self.webpackChunkabaplint_playground=self.webpackChunkabaplint_playground||[]).push([[11,304,886,931,1197,1504,2060,2230,2603,2891,3930,4830,5320,5628,5767,5996,6756,6995,7042,7614,8148,9376,9520],{251(e,t){t.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,h=(1<<a)-1,l=h>>1,c=-7,u=n?i-1:0,d=n?-1:1,g=e[t+u];for(u+=d,s=g&(1<<-c)-1,g>>=-c,c+=a;c>0;s=256*s+e[t+u],u+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+e[t+u],u+=d,c-=8);if(0===s)s=1-l;else{if(s===h)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,r),s-=l}return(g?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,n,r,i,s){var o,a,h,l=8*s-i-1,c=(1<<l)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,f=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),(t+=o+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(t*h-1)*Math.pow(2,i),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[n+g]=255&a,g+=f,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[n+g]=255&o,g+=f,o/=256,l-=8);e[n+g-f]|=128*p}},1804(e,t,n){"use strict";n.d(t,{Fu:()=>BracketsUtils,az:()=>RichEditBrackets,xb:()=>createBracketOrRegExp});var r=n(16844),i=n(54324),s=n(28061);class RichEditBracket{constructor(e,t,n,r,i,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=r,this.forwardRegex=i,this.reversedRegex=s,this._openSet=RichEditBracket._toSet(this.open),this._closeSet=RichEditBracket._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}class RichEditBrackets{constructor(e,t){this._richEditBracketsBrand=void 0;const n=function groupFuzzyBrackets(e){const t=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const n=[];for(let e=0;e<t;e++)n[e]=e;const areOverlapping=(e,t)=>{const[n,r]=e,[i,s]=t;return n===i||n===s||r===i||r===s},mergeGroups=(e,r)=>{const i=Math.min(e,r),s=Math.max(e,r);for(let e=0;e<t;e++)n[e]===s&&(n[e]=i)};for(let r=0;r<t;r++){const i=e[r];for(let s=r+1;s<t;s++)areOverlapping(i,e[s])&&mergeGroups(n[r],n[s])}const r=[];for(let i=0;i<t;i++){const s=[],o=[];for(let r=0;r<t;r++)if(n[r]===i){const[t,n]=e[r];s.push(t),o.push(n)}s.length>0&&r.push({open:s,close:o})}return r}(t);this.brackets=n.map(((t,r)=>new RichEditBracket(e,r,t.open,t.close,function getRegexForBracketPair(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)collectSuperstrings(i[e],n,r,i);return i=unique(i),i.sort(lengthcmp),i.reverse(),createBracketOrRegExp(i)}(t.open,t.close,n,r),function getReversedRegexForBracketPair(e,t,n,r){let i=[];i=i.concat(e),i=i.concat(t);for(let e=0,t=i.length;e<t;e++)collectSuperstrings(i[e],n,r,i);return i=unique(i),i.sort(lengthcmp),i.reverse(),createBracketOrRegExp(i.map(o))}(t.open,t.close,n,r)))),this.forwardRegex=function getRegexForBrackets(e){let t=[];for(const n of e){for(const e of n.open)t.push(e);for(const e of n.close)t.push(e)}return t=unique(t),createBracketOrRegExp(t)}(this.brackets),this.reversedRegex=function getReversedRegexForBrackets(e){let t=[];for(const n of e){for(const e of n.open)t.push(e);for(const e of n.close)t.push(e)}return t=unique(t),createBracketOrRegExp(t.map(o))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const e of this.brackets){for(const t of e.open)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,t.length);for(const t of e.close)this.textIsBracket[t]=e,this.textIsOpenBracket[t]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,t.length)}}}function collectSuperstrings(e,t,n,r){for(let i=0,s=t.length;i<s;i++){if(i===n)continue;const s=t[i];for(const t of s.open)t.indexOf(e)>=0&&r.push(t);for(const t of s.close)t.indexOf(e)>=0&&r.push(t)}}function lengthcmp(e,t){return e.length-t.length}function unique(e){if(e.length<=1)return e;const t=[],n=new Set;for(const r of e)n.has(r)||(t.push(r),n.add(r));return t}function prepareBracketForRegExp(e){const t=/^[\w ]+$/.test(e);return e=r.bm(e),t?`\\b${e}\\b`:e}function createBracketOrRegExp(e,t){const n=`(${e.map(prepareBracketForRegExp).join(")|(")})`;return r.OS(n,!0,t)}const o=function(){let e=null,t=null;return function toReversedString(n){return e!==n&&(e=n,t=function reverse(e){const t=new Uint16Array(e.length);let n=0;for(let r=e.length-1;r>=0;r--)t[n++]=e.charCodeAt(r);return i.b7().decode(t)}(e)),t}}();class BracketsUtils{static _findPrevBracketInText(e,t,n,r){const i=n.match(e);if(!i)return null;const o=n.length-(i.index||0),a=i[0].length,h=r+o;return new s.Q(t,h-a+1,t,h+1)}static findPrevBracketInRange(e,t,n,r,i){const s=o(n).substring(n.length-i,n.length-r);return this._findPrevBracketInText(e,t,s,r)}static findNextBracketInText(e,t,n,r){const i=n.match(e);if(!i)return null;const o=i.index||0,a=i[0].length;if(0===a)return null;const h=r+o;return new s.Q(t,h+1,t,h+1+a)}static findNextBracketInRange(e,t,n,r,i){const s=n.substring(r,i);return this.findNextBracketInText(e,t,s,r)}}},2603(e,t,n){"use strict";n.r(t),n.d(t,{DraggedTreeItemsIdentifier:()=>DraggedTreeItemsIdentifier,TreeViewsDnDService:()=>TreeViewsDnDService});class TreeViewsDnDService{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class DraggedTreeItemsIdentifier{constructor(e){this.identifier=e}}},3902(e,t,n){"use strict";function countEOL(e){let t=0,n=0,r=0,i=0;for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);13===a?(0===t&&(n=s),t++,s+1<o&&10===e.charCodeAt(s+1)?(i|=2,s++):i|=3,r=s+1):10===a&&(i|=1,0===t&&(n=s),t++,r=s+1)}return 0===t&&(n=e.length),[t,n,e.length-r,i]}n.d(t,{W:()=>countEOL})},6949(e,t,n){"use strict";n.d(t,{k:()=>TextChange,x:()=>compressConsecutiveTextChanges});var r=n(42802),i=n(54324);function escapeNewLine(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class TextChange{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${escapeNewLine(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${escapeNewLine(this.oldText)}")`:`(replace@${this.oldPosition} "${escapeNewLine(this.oldText)}" with "${escapeNewLine(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;r.Sw(e,i,n),n+=4;for(let s=0;s<i;s++)r.gN(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=r.bb(e,t);return t+=4,(0,i.Su)(e,t,n)}writeSize(){return 8+TextChange._writeStringSize(this.oldText)+TextChange._writeStringSize(this.newText)}write(e,t){return r.Sw(e,this.oldPosition,t),t+=4,r.Sw(e,this.newPosition,t),t+=4,t=TextChange._writeString(e,this.oldText,t),t=TextChange._writeString(e,this.newText,t)}static read(e,t,n){const i=r.bb(e,t);t+=4;const s=r.bb(e,t);t+=4;const o=TextChange._readString(e,t);t+=TextChange._writeStringSize(o);const a=TextChange._readString(e,t);return t+=TextChange._writeStringSize(a),n.push(new TextChange(i,o,s,a)),t}}function compressConsecutiveTextChanges(e,t){if(null===e||0===e.length)return t;return new TextChangeCompressor(e,t).compress()}class TextChangeCompressor{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===n){this._acceptCurr(r),r=this._getCurr(++t);continue}if(null===r){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldEnd<=n.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(n.newEnd<=r.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldPosition<n.newPosition){const[e,t]=TextChangeCompressor._splitCurr(r,n.newPosition-r.oldPosition);this._acceptCurr(e),r=t;continue}if(n.newPosition<r.oldPosition){const[e,t]=TextChangeCompressor._splitPrev(n,r.oldPosition-n.newPosition);this._acceptPrev(e),n=t;continue}let i,s;if(r.oldEnd===n.newEnd)i=n,s=r,n=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<n.newEnd){const[e,o]=TextChangeCompressor._splitPrev(n,r.oldLength);i=e,s=r,n=o,r=this._getCurr(++t)}else{const[t,o]=TextChangeCompressor._splitCurr(r,n.newLength);i=n,s=t,n=this._getPrev(++e),r=o}this._result[this._resultLen++]=new TextChange(i.oldPosition,i.oldText,s.newPosition,s.newText),this._prevDeltaOffset+=i.newLength-i.oldLength,this._currDeltaOffset+=s.newLength-s.oldLength}const i=TextChangeCompressor._merge(this._result);return TextChangeCompressor._removeNoOps(i)}_acceptCurr(e){this._result[this._resultLen++]=TextChangeCompressor._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=TextChangeCompressor._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new TextChange(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new TextChange(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),r=e.newText.substr(t);return[new TextChange(e.oldPosition,e.oldText,e.newPosition,n),new TextChange(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new TextChange(e.oldPosition,n,e.newPosition,e.newText),new TextChange(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const t=[];let n=0,r=e[0];for(let i=1;i<e.length;i++){const s=e[i];r.oldEnd===s.oldPosition?r=new TextChange(r.oldPosition,r.oldText+s.oldText,r.newPosition,r.newText+s.newText):(t[n++]=r,r=s)}return t[n++]=r,t}static _removeNoOps(e){if(0===e.length)return e;const t=[];let n=0;for(let r=0;r<e.length;r++){const i=e[r];i.oldText!==i.newText&&(t[n++]=i)}return t}}},8897(e,t,n){"use strict";n.d(t,{KC:()=>equalsIfDefined,S3:()=>itemsEquals,dB:()=>structuralEquals,nx:()=>strictEquals,r:()=>itemEquals});var r=n(13338);const strictEquals=(e,t)=>e===t;function itemsEquals(e=strictEquals){return(t,n)=>r.aI(t,n,e)}function itemEquals(){return(e,t)=>e.equals(t)}function equalsIfDefined(e,t,n){if(void 0!==n){const r=e;return null==r||null==t?t===r:n(r,t)}{const t=e;return(e,n)=>null==e||null==n?n===e:t(e,n)}}function structuralEquals(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!structuralEquals(e[n],t[n]))return!1;return!0}if(e&&"object"==typeof e&&t&&"object"==typeof t&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const n=e,r=t,i=Object.keys(n),s=Object.keys(r),o=new Set(s);if(i.length!==s.length)return!1;for(const e of i){if(!o.has(e))return!1;if(!structuralEquals(n[e],r[e]))return!1}return!0}return!1}new WeakMap},9520(e,t,n){"use strict";n.r(t),n.d(t,{SemanticTokensProviderStyling:()=>c,toMultilineTokens2:()=>toMultilineTokens2});n(15910);var r=n(89044),i=n(46441),s=n(15365),o=n(28061),a=n(3902);class SparseMultilineTokens{static create(e,t){return new SparseMultilineTokens(e,new SparseMultilineTokensStorage(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e?new o.Q(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[r,i,s]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new SparseMultilineTokens(this._startLineNumber,r),new SparseMultilineTokens(this._startLineNumber+s,i)]}applyEdit(e,t){const[n,r,i]=(0,a.W)(t);this.acceptEdit(e,n,r,i,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,i){this._acceptDeleteRange(e),this._acceptInsertText(new s.y(e.startLineNumber,e.startColumn),t,n,r,i),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const e=n-t;return void(this._startLineNumber-=e)}const r=this._tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){const r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,i){if(0===t&&0===n)return;const s=e.lineNumber-this._startLineNumber;if(s<0)return void(this._startLineNumber+=t);s>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(s,e.column-1,t,n,r,i)}}class SparseMultilineTokensStorage{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new o.Q(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const r=t+Math.floor((n-t)/2),i=this._getDeltaLine(r);if(i<e)t=r+1;else{if(!(i>e)){let i=r;for(;i>t&&this._getDeltaLine(i-1)===e;)i--;let s=r;for(;s<n&&this._getDeltaLine(s+1)===e;)s++;return new SparseLineTokens(this._tokens.subarray(4*i,4*s+4))}n=r-1}}return this._getDeltaLine(t)===e?new SparseLineTokens(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){const i=this._tokens,s=this._tokenCount;let o=0,a=!1,h=0;for(let l=0;l<s;l++){const s=4*l,c=i[s],u=i[s+1],d=i[s+2],g=i[s+3];if((c>e||c===e&&d>=t)&&(c<n||c===n&&u<=r))a=!0;else{if(0===o&&(h=c),a){const e=4*o;i[e]=c-h,i[e+1]=u,i[e+2]=d,i[e+3]=g}o++}}return this._tokenCount=o,h}split(e,t,n,r){const i=this._tokens,s=this._tokenCount,o=[],a=[];let h=o,l=0,c=0;for(let o=0;o<s;o++){const s=4*o,u=i[s],d=i[s+1],g=i[s+2],f=i[s+3];if(u>e||u===e&&g>=t){if(u<n||u===n&&d<=r)continue;h!==a&&(h=a,l=0,c=u)}h[l++]=u-c,h[l++]=d,h[l++]=g,h[l++]=f}return[new SparseMultilineTokensStorage(new Uint32Array(o)),new SparseMultilineTokensStorage(new Uint32Array(a)),c]}acceptDeleteRange(e,t,n,r,i){const s=this._tokens,o=this._tokenCount,a=r-t;let h=0,l=!1;for(let c=0;c<o;c++){const u=4*c;let d=s[u],g=s[u+1],f=s[u+2];const p=s[u+3];if(d<t||d===t&&f<=n){h++;continue}if(d===t&&g<n)d===r&&f>i?f-=i-n:f=n;else if(d===t&&g===n){if(!(d===r&&f>i)){l=!0;continue}f-=i-n}else if(d<r||d===r&&g<i){if(!(d===r&&f>i)){l=!0;continue}d=t,g=n,f=g+(f-i)}else if(d>r){if(0===a&&!l){h=o;break}d-=a}else{if(!(d===r&&g>=i))throw new Error("Not possible!");e&&0===d&&(g+=e,f+=e),d-=a,g-=i-n,f-=i-n}const m=4*h;s[m]=d,s[m+1]=g,s[m+2]=f,s[m+3]=p,h++}this._tokenCount=h}acceptInsertText(e,t,n,r,i,s){const o=0===n&&1===r&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),a=this._tokens,h=this._tokenCount;for(let s=0;s<h;s++){const h=4*s;let l=a[h],c=a[h+1],u=a[h+2];if(!(l<e||l===e&&u<t)){if(l===e&&u===t){if(!o)continue;u+=1}else if(l===e&&c<t&&t<u)0===n?u+=r:u=t;else{if(l===e&&c===t&&o)continue;if(l===e)if(l+=n,0===n)c+=r,u+=r;else{const e=u-c;c=i+(c-t),u=c+e}else l+=n}a[h]=l,a[h+1]=c,a[h+2]=u}}}}class SparseLineTokens{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var h=n(77922),__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};const l=!1;let c=class SemanticTokensProviderStyling{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._languageService=n,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new HashTable}getMetadata(e,t,n){const r=this._languageService.languageIdCodec.encodeLanguageId(n),i=this._hashTable.get(e,t,r);let s;if(i)s=i.metadata;else{let i=this._legend.tokenTypes[e];const o=[];if(i){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&o.push(this._legend.tokenModifiers[t]),e>>=1;l;const r=this._themeService.getColorTheme().getTokenStyleMetadata(i,o,n);if(void 0===r)s=2147483647;else{if(s=0,void 0!==r.italic){s|=1|(r.italic?1:0)<<11}if(void 0!==r.bold){s|=2|(r.bold?2:0)<<11}if(void 0!==r.underline){s|=4|(r.underline?4:0)<<11}if(void 0!==r.strikethrough){s|=8|(r.strikethrough?8:0)<<11}if(r.foreground){s|=16|r.foreground<<15}0===s&&(s=2147483647)}}else s=2147483647,i="not-in-legend";this._hashTable.add(e,t,r,s)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,r,i){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${r} is outside the previous data (length ${i}).`))}};function toMultilineTokens2(e,t,n){const r=e.data,i=e.data.length/5|0,s=Math.max(Math.ceil(i/1024),400),o=[];let a=0,h=1,l=0;for(;a<i;){const e=a;let c=Math.min(e+s,i);if(c<i){let t=c;for(;t-1>e&&0===r[5*t];)t--;if(t-1===e){let e=c;for(;e+1<i&&0===r[5*e];)e++;c=e}else c=t}let u=new Uint32Array(4*(c-e)),d=0,g=0,f=0,p=0;for(;a<c;){const e=5*a,i=r[e],s=r[e+1],o=h+i|0,c=0===i?l+s|0:s,m=c+r[e+2]|0,k=r[e+3],_=r[e+4];if(m<=c)t.warnInvalidLengthSemanticTokens(o,c+1);else if(f===o&&p>c)t.warnOverlappingSemanticTokens(o,c+1);else{const e=t.getMetadata(k,_,n);2147483647!==e&&(0===g&&(g=o),u[d]=o-g,u[d+1]=c,u[d+2]=m,u[d+3]=e,d+=4,f=o,p=m)}h=o,l=c,a++}d!==u.length&&(u=u.subarray(0,d));const m=SparseMultilineTokens.create(g,u);o.push(m)}return o}c=__decorate([__param(1,r.Gy),__param(2,h.L),__param(3,i.rr)],c);class HashTableEntry{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}}class HashTable{static{this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]}constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const r=this._hashFunc(e,t,n);let i=this._elements[r];for(;i;){if(i.tokenTypeIndex===e&&i.tokenModifierSet===t&&i.languageId===n)return i;i=i.next}return null}add(e,t,n,r){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength);for(const t of e){let e=t;for(;e;){const t=e.next;e.next=null,this._add(e),e=t}}}this._add(new HashTableEntry(e,t,n,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}},11907(e,t,n){"use strict";n.d(t,{Ho:()=>ModelDecorationInjectedTextOptions,kI:()=>ModelDecorationOptions,Bz:()=>ie});var r=n(13338),i=n(94901),s=n(94327),o=n(2106),a=n(10998),h=n(16844),l=n(37264),c=n(3902),u=n(57999),d=n(15365),g=n(28061),f=n(93702),p=n(12590),m=n(77922),k=n(52394),_=n(66055),b=n(19184),C=n(1804);class BracketInfo{constructor(e,t,n,r){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=r}}class BracketPairInfo{constructor(e,t,n,r,i,s){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=i,this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class BracketPairWithMinIndentationInfo extends BracketPairInfo{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i,s),this.minVisibleColumnIndentation=o}}var v=n(22994),x=n(85702),L=n(34883),y=n(68302),I=n(60756),w=n(33206),T=n(47132);class BracketPairsTree extends a.jG{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new o.vl,this.denseKeyProvider=new I.Mg,this.brackets=new x.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),t=new w._(this.textModel.getValue(),e);this.initialAstWithoutTokens=(0,y.T)(t,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){const e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map((e=>new v.c((0,L.qe)(e.fromLineNumber-1,0),(0,L.qe)(e.toLineNumber,0),(0,L.qe)(e.toLineNumber-e.fromLineNumber+1,0))));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=v.c.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=(0,T.M)(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=(0,T.M)(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const r=t,i=new w.tk(this.textModel,this.brackets);return(0,y.T)(i,e,r,n)}getBracketsInRange(e,t){this.flushQueue();const n=(0,L.qe)(e.startLineNumber-1,e.startColumn-1),i=(0,L.qe)(e.endLineNumber-1,e.endColumn-1);return new r.c1((e=>{const r=this.initialAstWithoutTokens||this.astWithTokens;collectBrackets(r,L.Vp,r.length,n,i,e,0,0,new Map,t)}))}getBracketPairsInRange(e,t){this.flushQueue();const n=(0,L.VL)(e.getStartPosition()),i=(0,L.VL)(e.getEndPosition());return new r.c1((e=>{const r=this.initialAstWithoutTokens||this.astWithTokens,s=new CollectBracketPairsContext(e,t,this.textModel);collectBracketPairs(r,L.Vp,r.length,n,i,s,0,new Map)}))}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketAfter(t,L.Vp,t.length,(0,L.VL)(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketBefore(t,L.Vp,t.length,(0,L.VL)(e))}}function getFirstBracketBefore(e,t,n,r){if(4===e.kind||2===e.kind){const i=[];for(const r of e.children)n=(0,L.QB)(t,r.length),i.push({nodeOffsetStart:t,nodeOffsetEnd:n}),t=n;for(let t=i.length-1;t>=0;t--){const{nodeOffsetStart:n,nodeOffsetEnd:s}=i[t];if((0,L.zG)(n,r)){const i=getFirstBracketBefore(e.children[t],n,s,r);if(i)return i}}return null}if(3===e.kind)return null;if(1===e.kind){const r=(0,L.Qx)(t,n);return{bracketInfo:e.bracketInfo,range:r}}return null}function getFirstBracketAfter(e,t,n,r){if(4===e.kind||2===e.kind){for(const i of e.children){if(n=(0,L.QB)(t,i.length),(0,L.zG)(r,n)){const e=getFirstBracketAfter(i,t,n,r);if(e)return e}t=n}return null}if(3===e.kind)return null;if(1===e.kind){const r=(0,L.Qx)(t,n);return{bracketInfo:e.bracketInfo,range:r}}return null}function collectBrackets(e,t,n,r,i,s,o,a,h,l,c=!1){if(o>200)return!0;e:for(;;)switch(e.kind){case 4:{const a=e.childrenLength;for(let c=0;c<a;c++){const a=e.getChild(c);if(a){if(n=(0,L.QB)(t,a.length),(0,L.vr)(t,i)&&(0,L.o0)(n,r)){if((0,L.o0)(n,i)){e=a;continue e}if(!collectBrackets(a,t,n,r,i,s,o,0,h,l))return!1}t=n}}return!0}case 2:{const c=!l||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo);let u=0;if(h){let t=h.get(e.openingBracket.text);void 0===t&&(t=0),u=t,c&&(t++,h.set(e.openingBracket.text,t))}const d=e.childrenLength;for(let g=0;g<d;g++){const d=e.getChild(g);if(d){if(n=(0,L.QB)(t,d.length),(0,L.vr)(t,i)&&(0,L.o0)(n,r)){if((0,L.o0)(n,i)&&1!==d.kind){e=d,c?(o++,a=u+1):a=u;continue e}if(c||1!==d.kind||!e.closingBracket){if(!collectBrackets(d,t,n,r,i,s,c?o+1:o,c?u+1:u,h,l,!e.closingBracket))return!1}}t=n}}return h?.set(e.openingBracket.text,u),!0}case 3:{const e=(0,L.Qx)(t,n);return s(new BracketInfo(e,o-1,0,!0))}case 1:{const e=(0,L.Qx)(t,n);return s(new BracketInfo(e,o-1,a-1,c))}case 0:return!0}}class CollectBracketPairsContext{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function collectBracketPairs(e,t,n,r,i,s,o,a){if(o>200)return!0;let h=!0;if(2===e.kind){let l=0;if(a){let t=a.get(e.openingBracket.text);void 0===t&&(t=0),l=t,t++,a.set(e.openingBracket.text,t)}const c=(0,L.QB)(t,e.openingBracket.length);let u=-1;if(s.includeMinIndentation&&(u=e.computeMinIndentation(t,s.textModel)),h=s.push(new BracketPairWithMinIndentationInfo((0,L.Qx)(t,n),(0,L.Qx)(t,c),e.closingBracket?(0,L.Qx)((0,L.QB)(c,e.child?.length||L.Vp),n):void 0,o,l,e,u)),t=c,h&&e.child){const l=e.child;if(n=(0,L.QB)(t,l.length),(0,L.vr)(t,i)&&(0,L.o0)(n,r)&&(h=collectBracketPairs(l,t,n,r,i,s,o+1,a),!h))return!1}a?.set(e.openingBracket.text,l)}else{let n=t;for(const t of e.children){const e=n;if(n=(0,L.QB)(n,t.length),(0,L.vr)(e,i)&&(0,L.vr)(r,n)&&(h=collectBracketPairs(t,e,n,r,i,s,o,a),!h))return!1}}return h}class BracketPairsTextModelPart extends a.jG{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new a.HE),this.onDidChangeEmitter=new o.vl,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){e.languageId&&!this.bracketPairsTree.value?.object.didLanguageChange(e.languageId)||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new a.Cm;this.bracketPairsTree.value=function createDisposableRef(e,t){return{object:e,dispose:()=>t?.dispose()}}(e.add(new BracketPairsTree(this.textModel,(e=>this.languageConfigurationService.getLanguageConfiguration(e)))),e),e.add(this.bracketPairsTree.value.object.onDidChange((e=>this.onDidChangeEmitter.fire(e)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||r.c1.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||r.c1.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||r.c1.empty}findMatchingBracketUp(e,t,n){const r=this.textModel.validatePosition(t),i=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){const n=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getClosingBracketInfo(e);if(!n)return null;const r=this.getBracketPairsInRange(g.Q.fromPositions(t,t)).findLast((e=>n.closes(e.openingBracketInfo)));return r?r.openingBracketRange:null}{const t=e.toLowerCase(),s=this.languageConfigurationService.getLanguageConfiguration(i).brackets;if(!s)return null;const o=s.textIsBracket[t];return o?stripBracketSearchCanceled(this._findMatchingBracketUp(o,r,createTimeBasedContinueBracketSearchPredicate(n))):null}}matchBracket(e,t){if(this.canBuildAST){const t=this.getBracketPairsInRange(g.Q.fromPositions(e,e)).filter((t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e)))).findLastMaxBy((0,r.VE)((t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange),g.Q.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{const n=createTimeBasedContinueBracketSearchPredicate(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,r){const i=t.getCount(),s=t.getLanguageId(r);let o=Math.max(0,e.column-1-n.maxBracketLength);for(let e=r-1;e>=0;e--){const n=t.getEndOffset(e);if(n<=o)break;if((0,b.Yo)(t.getStandardTokenType(e))||t.getLanguageId(e)!==s){o=n;break}}let a=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let e=r+1;e<i;e++){const n=t.getStartOffset(e);if(n>=a)break;if((0,b.Yo)(t.getStandardTokenType(e))||t.getLanguageId(e)!==s){a=n;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e,t){const n=e.lineNumber,r=this.textModel.tokenization.getLineTokens(n),i=this.textModel.getLineContent(n),s=r.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(s)).brackets;if(o&&!(0,b.Yo)(r.getStandardTokenType(s))){let{searchStartOffset:a,searchEndOffset:h}=this._establishBracketSearchOffsets(e,r,o,s),l=null;for(;;){const r=C.Fu.findNextBracketInRange(o.forwardRegex,n,i,a,h);if(!r)break;if(r.startColumn<=e.column&&e.column<=r.endColumn){const e=i.substring(r.startColumn-1,r.endColumn-1).toLowerCase(),n=this._matchFoundBracket(r,o.textIsBracket[e],o.textIsOpenBracket[e],t);if(n){if(n instanceof BracketSearchCanceled)return null;l=n}}a=r.endColumn-1}if(l)return l}if(s>0&&r.getStartOffset(s)===e.column-1){const o=s-1,a=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(a&&!(0,b.Yo)(r.getStandardTokenType(o))){const{searchStartOffset:s,searchEndOffset:h}=this._establishBracketSearchOffsets(e,r,a,o),l=C.Fu.findPrevBracketInRange(a.reversedRegex,n,i,s,h);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn){const e=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),n=this._matchFoundBracket(l,a.textIsBracket[e],a.textIsOpenBracket[e],t);if(n)return n instanceof BracketSearchCanceled?null:n}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;const i=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return i?i instanceof BracketSearchCanceled?i:[e,i]:null}_findMatchingBracketUp(e,t,n){const r=e.languageId,i=e.reversedRegex;let s=-1,o=0;const searchPrevMatchingBracketInRange=(t,r,a,h)=>{for(;;){if(n&&++o%100==0&&!n())return BracketSearchCanceled.INSTANCE;const l=C.Fu.findPrevBracketInRange(i,t,r,a,h);if(!l)break;const c=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(c)?s++:e.isClose(c)&&s--,0===s)return l;h=l.startColumn-1}return null};for(let e=t.lineNumber;e>=1;e--){const n=this.textModel.tokenization.getLineTokens(e),i=n.getCount(),s=this.textModel.getLineContent(e);let o=i-1,a=s.length,h=s.length;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),a=t.column-1,h=t.column-1);let l=!0;for(;o>=0;o--){const t=n.getLanguageId(o)===r&&!(0,b.Yo)(n.getStandardTokenType(o));if(t)l?a=n.getStartOffset(o):(a=n.getStartOffset(o),h=n.getEndOffset(o));else if(l&&a!==h){const t=searchPrevMatchingBracketInRange(e,s,a,h);if(t)return t}l=t}if(l&&a!==h){const t=searchPrevMatchingBracketInRange(e,s,a,h);if(t)return t}}return null}_findMatchingBracketDown(e,t,n){const r=e.languageId,i=e.forwardRegex;let s=1,o=0;const searchNextMatchingBracketInRange=(t,r,a,h)=>{for(;;){if(n&&++o%100==0&&!n())return BracketSearchCanceled.INSTANCE;const l=C.Fu.findNextBracketInRange(i,t,r,a,h);if(!l)break;const c=r.substring(l.startColumn-1,l.endColumn-1).toLowerCase();if(e.isOpen(c)?s++:e.isClose(c)&&s--,0===s)return l;a=l.endColumn-1}return null},a=this.textModel.getLineCount();for(let e=t.lineNumber;e<=a;e++){const n=this.textModel.tokenization.getLineTokens(e),i=n.getCount(),s=this.textModel.getLineContent(e);let o=0,a=0,h=0;e===t.lineNumber&&(o=n.findTokenIndexAtOffset(t.column-1),a=t.column-1,h=t.column-1);let l=!0;for(;o<i;o++){const t=n.getLanguageId(o)===r&&!(0,b.Yo)(n.getStandardTokenType(o));if(t)l||(a=n.getStartOffset(o)),h=n.getEndOffset(o);else if(l&&a!==h){const t=searchNextMatchingBracketInRange(e,s,a,h);if(t)return t}l=t}if(l&&a!==h){const t=searchNextMatchingBracketInRange(e,s,a,h);if(t)return t}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let n=null,r=null,i=null;for(let e=t.lineNumber;e>=1;e--){const s=this.textModel.tokenization.getLineTokens(e),o=s.getCount(),a=this.textModel.getLineContent(e);let h=o-1,l=a.length,c=a.length;if(e===t.lineNumber){h=s.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1;const e=s.getLanguageId(h);n!==e&&(n=e,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,i=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let u=!0;for(;h>=0;h--){const t=s.getLanguageId(h);if(n!==t){if(r&&i&&u&&l!==c){const t=C.Fu.findPrevBracketInRange(r.reversedRegex,e,a,l,c);if(t)return this._toFoundBracket(i,t);u=!1}n=t,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,i=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const o=!!r&&!(0,b.Yo)(s.getStandardTokenType(h));if(o)u?l=s.getStartOffset(h):(l=s.getStartOffset(h),c=s.getEndOffset(h));else if(i&&r&&u&&l!==c){const t=C.Fu.findPrevBracketInRange(r.reversedRegex,e,a,l,c);if(t)return this._toFoundBracket(i,t)}u=o}if(i&&r&&u&&l!==c){const t=C.Fu.findPrevBracketInRange(r.reversedRegex,e,a,l,c);if(t)return this._toFoundBracket(i,t)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const n=this.textModel.getLineCount();let r=null,i=null,s=null;for(let e=t.lineNumber;e<=n;e++){const n=this.textModel.tokenization.getLineTokens(e),o=n.getCount(),a=this.textModel.getLineContent(e);let h=0,l=0,c=0;if(e===t.lineNumber){h=n.findTokenIndexAtOffset(t.column-1),l=t.column-1,c=t.column-1;const e=n.getLanguageId(h);r!==e&&(r=e,i=this.languageConfigurationService.getLanguageConfiguration(r).brackets,s=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let u=!0;for(;h<o;h++){const t=n.getLanguageId(h);if(r!==t){if(s&&i&&u&&l!==c){const t=C.Fu.findNextBracketInRange(i.forwardRegex,e,a,l,c);if(t)return this._toFoundBracket(s,t);u=!1}r=t,i=this.languageConfigurationService.getLanguageConfiguration(r).brackets,s=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}const o=!!i&&!(0,b.Yo)(n.getStandardTokenType(h));if(o)u||(l=n.getStartOffset(h)),c=n.getEndOffset(h);else if(s&&i&&u&&l!==c){const t=C.Fu.findNextBracketInRange(i.forwardRegex,e,a,l,c);if(t)return this._toFoundBracket(s,t)}u=o}if(s&&i&&u&&l!==c){const t=C.Fu.findNextBracketInRange(i.forwardRegex,e,a,l,c);if(t)return this._toFoundBracket(s,t)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const e=g.Q.fromPositions(n),t=this.getBracketPairsInRange(g.Q.fromPositions(n,n)).findLast((t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e)));return t?[t.openingBracketRange,t.closingBracketRange]:null}const r=createTimeBasedContinueBracketSearchPredicate(t),i=this.textModel.getLineCount(),s=new Map;let o=[];const resetCounts=(e,t)=>{if(!s.has(e)){const n=[];for(let e=0,r=t?t.brackets.length:0;e<r;e++)n[e]=0;s.set(e,n)}o=s.get(e)};let a=0;const searchInRange=(e,t,n,i,s)=>{for(;;){if(r&&++a%100==0&&!r())return BracketSearchCanceled.INSTANCE;const h=C.Fu.findNextBracketInRange(e.forwardRegex,t,n,i,s);if(!h)break;const l=n.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),c=e.textIsBracket[l];if(c&&(c.isOpen(l)?o[c.index]++:c.isClose(l)&&o[c.index]--,-1===o[c.index]))return this._matchFoundBracket(h,c,!1,r);i=h.endColumn-1}return null};let h=null,l=null;for(let e=n.lineNumber;e<=i;e++){const t=this.textModel.tokenization.getLineTokens(e),r=t.getCount(),i=this.textModel.getLineContent(e);let s=0,o=0,a=0;if(e===n.lineNumber){s=t.findTokenIndexAtOffset(n.column-1),o=n.column-1,a=n.column-1;const e=t.getLanguageId(s);h!==e&&(h=e,l=this.languageConfigurationService.getLanguageConfiguration(h).brackets,resetCounts(h,l))}let c=!0;for(;s<r;s++){const n=t.getLanguageId(s);if(h!==n){if(l&&c&&o!==a){const t=searchInRange(l,e,i,o,a);if(t)return stripBracketSearchCanceled(t);c=!1}h=n,l=this.languageConfigurationService.getLanguageConfiguration(h).brackets,resetCounts(h,l)}const r=!!l&&!(0,b.Yo)(t.getStandardTokenType(s));if(r)c||(o=t.getStartOffset(s)),a=t.getEndOffset(s);else if(l&&c&&o!==a){const t=searchInRange(l,e,i,o,a);if(t)return stripBracketSearchCanceled(t)}c=r}if(l&&c&&o!==a){const t=searchInRange(l,e,i,o,a);if(t)return stripBracketSearchCanceled(t)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const r=e.getBracketInfo(n);return r?{range:t,bracketInfo:r}:null}}function createTimeBasedContinueBracketSearchPredicate(e){if(void 0===e)return()=>!0;{const t=Date.now();return()=>Date.now()-t<=e}}class BracketSearchCanceled{static{this.INSTANCE=new BracketSearchCanceled}constructor(){this._searchCanceledBrand=void 0}}function stripBracketSearchCanceled(e){return e instanceof BracketSearchCanceled?null:e}var S=n(48295),B=n(89044);class ColorizedBracketPairsDecorationProvider extends a.jG{constructor(e){super(),this.textModel=e,this.colorProvider=new ColorProvider,this.onDidChangeEmitter=new o.vl,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange((e=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,r){if(r)return[];if(void 0===t)return[];if(!this.colorizationOptions.enabled)return[];return this.textModel.bracketPairs.getBracketsInRange(e,!0).map((e=>({id:`bracket${e.range.toString()}-${e.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range}))).toArray()}getAllDecorations(e,t){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new g.Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class ColorProvider{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-"+e%30}}(0,B.zy)(((e,t)=>{const n=[S.sN,S.lQ,S.ss,S.l5,S.sH,S.zp],r=new ColorProvider;t.addRule(`.monaco-editor .${r.unexpectedClosingBracketClassName} { color: ${e.getColor(S.s7)}; }`);const i=n.map((t=>e.getColor(t))).filter((e=>!!e)).filter((e=>!e.isTransparent()));for(let e=0;e<30;e++){const n=i[e%i.length];t.addRule(`.monaco-editor .${r.getInlineClassNameOfLevel(e)} { color: ${n}; }`)}}));var O=n(54296),A=n(52818);class SpacesDiffResult{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function spacesDiff(e,t,n,r,i){let s;for(i.spacesDiff=0,i.looksLikeAlignment=!1,s=0;s<t&&s<r;s++){if(e.charCodeAt(s)!==n.charCodeAt(s))break}let o=0,a=0;for(let n=s;n<t;n++){32===e.charCodeAt(n)?o++:a++}let h=0,l=0;for(let e=s;e<r;e++){32===n.charCodeAt(e)?h++:l++}if(o>0&&a>0)return;if(h>0&&l>0)return;const c=Math.abs(a-l),u=Math.abs(o-h);if(0===c)return i.spacesDiff=u,void(u>0&&0<=h-1&&h-1<e.length&&h<n.length&&32!==n.charCodeAt(h)&&32===e.charCodeAt(h-1)&&44===e.charCodeAt(e.length-1)&&(i.looksLikeAlignment=!0));u%c!=0||(i.spacesDiff=u/c)}function guessIndentation(e,t,n){const r=Math.min(e.getLineCount(),1e4);let i=0,s=0,o="",a=0;const h=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],c=new SpacesDiffResult;for(let h=1;h<=r;h++){const r=e.getLineLength(h),u=e.getLineContent(h),d=r<=65536;let g=!1,f=0,p=0,m=0;for(let t=0,n=r;t<n;t++){const n=d?u.charCodeAt(t):e.getLineCharCode(h,t);if(9===n)m++;else{if(32!==n){g=!0,f=t;break}p++}}if(!g)continue;if(m>0?i++:p>1&&s++,spacesDiff(o,a,u,f,c),c.looksLikeAlignment&&(!n||t!==c.spacesDiff))continue;const k=c.spacesDiff;k<=8&&l[k]++,o=u,a=f}let u=n;i!==s&&(u=i<s);let d=t;if(u){let e=u?0:.1*r;h.forEach((t=>{const n=l[t];n>e&&(e=n,d=t)})),4===d&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(d=2)}return{insertSpaces:u,tabSize:d}}function getNodeColor(e){return(1&e.metadata)>>>0}function setNodeColor(e,t){e.metadata=254&e.metadata|t}function getNodeIsVisited(e){return(2&e.metadata)>>>1==1}function setNodeIsVisited(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function getNodeIsForValidation(e){return(4&e.metadata)>>>2==1}function setNodeIsForValidation(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function getNodeIsInGlyphMargin(e){return(64&e.metadata)>>>6==1}function setNodeIsInGlyphMargin(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function _setNodeStickiness(e,t){e.metadata=231&e.metadata|t<<3}function setCollapseOnReplaceEdit(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}class IntervalNode{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,setNodeColor(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,setNodeIsForValidation(this,!1),setNodeIsInGlyphMargin(this,!1),_setNodeStickiness(this,1),setCollapseOnReplaceEdit(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,setNodeIsVisited(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;const t=this.options.className;setNodeIsForValidation(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),setNodeIsInGlyphMargin(this,null!==this.options.glyphMarginClassName),_setNodeStickiness(this,this.options.stickiness),setCollapseOnReplaceEdit(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const D=new IntervalNode(null,0,0);D.parent=D,D.left=D,D.right=D,setNodeColor(D,0);class IntervalTree{constructor(){this.root=D,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,i,s){return this.root===D?[]:function intervalSearch(e,t,n,r,i,s,o){let a=e.root,h=0,l=0,c=0,u=0;const d=[];let g=0;for(;a!==D;)if(getNodeIsVisited(a))setNodeIsVisited(a.left,!1),setNodeIsVisited(a.right,!1),a===a.parent.right&&(h-=a.parent.delta),a=a.parent;else{if(!getNodeIsVisited(a.left)){if(l=h+a.maxEnd,l<t){setNodeIsVisited(a,!0);continue}if(a.left!==D){a=a.left;continue}}if(c=h+a.start,c>n)setNodeIsVisited(a,!0);else{if(u=h+a.end,u>=t){a.setCachedOffsets(c,u,s);let e=!0;r&&a.ownerId&&a.ownerId!==r&&(e=!1),i&&getNodeIsForValidation(a)&&(e=!1),o&&!getNodeIsInGlyphMargin(a)&&(e=!1),e&&(d[g++]=a)}setNodeIsVisited(a,!0),a.right===D||getNodeIsVisited(a.right)||(h+=a.delta,a=a.right)}}return setNodeIsVisited(e.root,!1),d}(this,e,t,n,r,i,s)}search(e,t,n,r){return this.root===D?[]:function search(e,t,n,r,i){let s=e.root,o=0,a=0,h=0;const l=[];let c=0;for(;s!==D;){if(getNodeIsVisited(s)){setNodeIsVisited(s.left,!1),setNodeIsVisited(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),s=s.parent;continue}if(s.left!==D&&!getNodeIsVisited(s.left)){s=s.left;continue}a=o+s.start,h=o+s.end,s.setCachedOffsets(a,h,r);let e=!0;t&&s.ownerId&&s.ownerId!==t&&(e=!1),n&&getNodeIsForValidation(s)&&(e=!1),i&&!getNodeIsInGlyphMargin(s)&&(e=!1),e&&(l[c++]=s),setNodeIsVisited(s,!0),s.right===D||getNodeIsVisited(s.right)||(o+=s.delta,s=s.right)}return setNodeIsVisited(e.root,!1),l}(this,e,t,n,r)}collectNodesFromOwner(e){return function collectNodesFromOwner(e,t){let n=e.root;const r=[];let i=0;for(;n!==D;)getNodeIsVisited(n)?(setNodeIsVisited(n.left,!1),setNodeIsVisited(n.right,!1),n=n.parent):n.left===D||getNodeIsVisited(n.left)?(n.ownerId===t&&(r[i++]=n),setNodeIsVisited(n,!0),n.right===D||getNodeIsVisited(n.right)||(n=n.right)):n=n.left;return setNodeIsVisited(e.root,!1),r}(this,e)}collectNodesPostOrder(){return function collectNodesPostOrder(e){let t=e.root;const n=[];let r=0;for(;t!==D;)getNodeIsVisited(t)?(setNodeIsVisited(t.left,!1),setNodeIsVisited(t.right,!1),t=t.parent):t.left===D||getNodeIsVisited(t.left)?t.right===D||getNodeIsVisited(t.right)?(n[r++]=t,setNodeIsVisited(t,!0)):t=t.right:t=t.left;return setNodeIsVisited(e.root,!1),n}(this)}insert(e){rbTreeInsert(this,e),this._normalizeDeltaIfNecessary()}delete(e){rbTreeDelete(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const i=n.start+r,s=n.end+r;n.setCachedOffsets(i,s,t)}acceptReplace(e,t,n,r){const i=function searchForEditing(e,t,n){let r=e.root,i=0,s=0,o=0,a=0;const h=[];let l=0;for(;r!==D;)if(getNodeIsVisited(r))setNodeIsVisited(r.left,!1),setNodeIsVisited(r.right,!1),r===r.parent.right&&(i-=r.parent.delta),r=r.parent;else{if(!getNodeIsVisited(r.left)){if(s=i+r.maxEnd,s<t){setNodeIsVisited(r,!0);continue}if(r.left!==D){r=r.left;continue}}o=i+r.start,o>n?setNodeIsVisited(r,!0):(a=i+r.end,a>=t&&(r.setCachedOffsets(o,a,0),h[l++]=r),setNodeIsVisited(r,!0),r.right===D||getNodeIsVisited(r.right)||(i+=r.delta,r=r.right))}return setNodeIsVisited(e.root,!1),h}(this,e,e+t);for(let e=0,t=i.length;e<t;e++){rbTreeDelete(this,i[e])}this._normalizeDeltaIfNecessary(),function noOverlapReplace(e,t,n,r){let i=e.root,s=0,o=0,a=0;const h=r-(n-t);for(;i!==D;)if(getNodeIsVisited(i))setNodeIsVisited(i.left,!1),setNodeIsVisited(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),recomputeMaxEnd(i),i=i.parent;else{if(!getNodeIsVisited(i.left)){if(o=s+i.maxEnd,o<t){setNodeIsVisited(i,!0);continue}if(i.left!==D){i=i.left;continue}}a=s+i.start,a>n?(i.start+=h,i.end+=h,i.delta+=h,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0),setNodeIsVisited(i,!0)):(setNodeIsVisited(i,!0),i.right===D||getNodeIsVisited(i.right)||(s+=i.delta,i=i.right))}setNodeIsVisited(e.root,!1)}(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,o=i.length;s<o;s++){const o=i[s];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,nodeAcceptEdit(o,e,e+t,n,r),o.maxEnd=o.end,rbTreeInsert(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function normalizeDelta(e){let t=e.root,n=0;for(;t!==D;)t.left===D||getNodeIsVisited(t.left)?t.right===D||getNodeIsVisited(t.right)?(t.start=n+t.start,t.end=n+t.end,t.delta=0,recomputeMaxEnd(t),setNodeIsVisited(t,!0),setNodeIsVisited(t.left,!1),setNodeIsVisited(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent):(n+=t.delta,t=t.right):t=t.left;setNodeIsVisited(e.root,!1)}(this))}}function adjustMarkerBeforeColumn(e,t,n,r){return e<n||!(e>n)&&(1!==r&&(2===r||t))}function nodeAcceptEdit(e,t,n,r,i){const s=function getNodeStickiness(e){return(24&e.metadata)>>>3}(e),o=0===s||2===s,a=1===s||2===s,h=n-t,l=r,c=Math.min(h,l),u=e.start;let d=!1;const g=e.end;let f=!1;t<=u&&g<=n&&function getCollapseOnReplaceEdit(e){return(32&e.metadata)>>>5==1}(e)&&(e.start=t,d=!0,e.end=t,f=!0);{const e=i?1:h>0?2:0;!d&&adjustMarkerBeforeColumn(u,o,t,e)&&(d=!0),!f&&adjustMarkerBeforeColumn(g,a,t,e)&&(f=!0)}if(c>0&&!i){const e=h>l?2:0;!d&&adjustMarkerBeforeColumn(u,o,t+c,e)&&(d=!0),!f&&adjustMarkerBeforeColumn(g,a,t+c,e)&&(f=!0)}{const r=i?1:0;!d&&adjustMarkerBeforeColumn(u,o,n,r)&&(e.start=t+l,d=!0),!f&&adjustMarkerBeforeColumn(g,a,n,r)&&(e.end=t+l,f=!0)}const p=l-h;d||(e.start=Math.max(0,u+p)),f||(e.end=Math.max(0,g+p)),e.start>e.end&&(e.end=e.start)}function rbTreeInsert(e,t){if(e.root===D)return t.parent=D,t.left=D,t.right=D,setNodeColor(t,0),e.root=t,e.root;!function treeInsert(e,t){let n=0,r=e.root;const i=t.start,s=t.end;for(;;){if(intervalCompare(i,s,r.start+n,r.end+n)<0){if(r.left===D){t.start-=n,t.end-=n,t.maxEnd-=n,r.left=t;break}r=r.left}else{if(r.right===D){t.start-=n+r.delta,t.end-=n+r.delta,t.maxEnd-=n+r.delta,r.right=t;break}n+=r.delta,r=r.right}}t.parent=r,t.left=D,t.right=D,setNodeColor(t,1)}(e,t),recomputeMaxEndWalkToRoot(t.parent);let n=t;for(;n!==e.root&&1===getNodeColor(n.parent);)if(n.parent===n.parent.parent.left){const t=n.parent.parent.right;1===getNodeColor(t)?(setNodeColor(n.parent,0),setNodeColor(t,0),setNodeColor(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,leftRotate(e,n)),setNodeColor(n.parent,0),setNodeColor(n.parent.parent,1),rightRotate(e,n.parent.parent))}else{const t=n.parent.parent.left;1===getNodeColor(t)?(setNodeColor(n.parent,0),setNodeColor(t,0),setNodeColor(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,rightRotate(e,n)),setNodeColor(n.parent,0),setNodeColor(n.parent.parent,1),leftRotate(e,n.parent.parent))}return setNodeColor(e.root,0),t}function rbTreeDelete(e,t){let n,r;if(t.left===D?(n=t.right,r=t,n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===D?(n=t.left,r=t):(r=function leftest(e){for(;e.left!==D;)e=e.left;return e}(t.right),n=r.right,n.start+=r.delta,n.end+=r.delta,n.delta+=r.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),r.start+=t.delta,r.end+=t.delta,r.delta=t.delta,(r.delta<-1073741824||r.delta>1073741824)&&(e.requestNormalizeDelta=!0)),r===e.root)return e.root=n,setNodeColor(n,0),t.detach(),resetSentinel(),recomputeMaxEnd(n),void(e.root.parent=D);const i=1===getNodeColor(r);if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?n.parent=r.parent:(r.parent===t?n.parent=r:n.parent=r.parent,r.left=t.left,r.right=t.right,r.parent=t.parent,setNodeColor(r,getNodeColor(t)),t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==D&&(r.left.parent=r),r.right!==D&&(r.right.parent=r)),t.detach(),i)return recomputeMaxEndWalkToRoot(n.parent),r!==t&&(recomputeMaxEndWalkToRoot(r),recomputeMaxEndWalkToRoot(r.parent)),void resetSentinel();let s;for(recomputeMaxEndWalkToRoot(n),recomputeMaxEndWalkToRoot(n.parent),r!==t&&(recomputeMaxEndWalkToRoot(r),recomputeMaxEndWalkToRoot(r.parent));n!==e.root&&0===getNodeColor(n);)n===n.parent.left?(s=n.parent.right,1===getNodeColor(s)&&(setNodeColor(s,0),setNodeColor(n.parent,1),leftRotate(e,n.parent),s=n.parent.right),0===getNodeColor(s.left)&&0===getNodeColor(s.right)?(setNodeColor(s,1),n=n.parent):(0===getNodeColor(s.right)&&(setNodeColor(s.left,0),setNodeColor(s,1),rightRotate(e,s),s=n.parent.right),setNodeColor(s,getNodeColor(n.parent)),setNodeColor(n.parent,0),setNodeColor(s.right,0),leftRotate(e,n.parent),n=e.root)):(s=n.parent.left,1===getNodeColor(s)&&(setNodeColor(s,0),setNodeColor(n.parent,1),rightRotate(e,n.parent),s=n.parent.left),0===getNodeColor(s.left)&&0===getNodeColor(s.right)?(setNodeColor(s,1),n=n.parent):(0===getNodeColor(s.left)&&(setNodeColor(s.right,0),setNodeColor(s,1),leftRotate(e,s),s=n.parent.left),setNodeColor(s,getNodeColor(n.parent)),setNodeColor(n.parent,0),setNodeColor(s.left,0),rightRotate(e,n.parent),n=e.root));setNodeColor(n,0),resetSentinel()}function resetSentinel(){D.parent=D,D.delta=0,D.start=0,D.end=0}function leftRotate(e,t){const n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==D&&(n.left.parent=t),n.parent=t.parent,t.parent===D?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,recomputeMaxEnd(t),recomputeMaxEnd(n)}function rightRotate(e,t){const n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==D&&(n.right.parent=t),n.parent=t.parent,t.parent===D?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,recomputeMaxEnd(t),recomputeMaxEnd(n)}function computeMaxEnd(e){let t=e.end;if(e.left!==D){const n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==D){const n=e.right.maxEnd+e.delta;n>t&&(t=n)}return t}function recomputeMaxEnd(e){e.maxEnd=computeMaxEnd(e)}function recomputeMaxEndWalkToRoot(e){for(;e!==D;){const t=computeMaxEnd(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function intervalCompare(e,t,n,r){return e===n?t-r:e-n}class TreeNode{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==N)return rbTreeBase_leftest(this.right);let e=this;for(;e.parent!==N&&e.parent.left!==e;)e=e.parent;return e.parent===N?N:e.parent}prev(){if(this.left!==N)return righttest(this.left);let e=this;for(;e.parent!==N&&e.parent.right!==e;)e=e.parent;return e.parent===N?N:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const N=new TreeNode(null,0);function rbTreeBase_leftest(e){for(;e.left!==N;)e=e.left;return e}function righttest(e){for(;e.right!==N;)e=e.right;return e}function calculateSize(e){return e===N?0:e.size_left+e.piece.length+calculateSize(e.right)}function calculateLF(e){return e===N?0:e.lf_left+e.piece.lineFeedCnt+calculateLF(e.right)}function rbTreeBase_resetSentinel(){N.parent=N}function rbTreeBase_leftRotate(e,t){const n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==N&&(n.left.parent=t),n.parent=t.parent,t.parent===N?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function rbTreeBase_rightRotate(e,t){const n=t.left;t.left=n.right,n.right!==N&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===N?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function rbDelete(e,t){let n,r;if(t.left===N?(r=t,n=r.right):t.right===N?(r=t,n=r.left):(r=rbTreeBase_leftest(t.right),n=r.right),r===e.root)return e.root=n,n.color=0,t.detach(),rbTreeBase_resetSentinel(),void(e.root.parent=N);const i=1===r.color;if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===t?(n.parent=r.parent,recomputeTreeMetadata(e,n)):(r.parent===t?n.parent=r:n.parent=r.parent,recomputeTreeMetadata(e,n),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==N&&(r.left.parent=r),r.right!==N&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,recomputeTreeMetadata(e,r)),t.detach(),n.parent.left===n){const t=calculateSize(n),r=calculateLF(n);if(t!==n.parent.size_left||r!==n.parent.lf_left){const i=t-n.parent.size_left,s=r-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=r,updateTreeMetadata(e,n.parent,i,s)}}if(recomputeTreeMetadata(e,n.parent),i)return void rbTreeBase_resetSentinel();let s;for(;n!==e.root&&0===n.color;)n===n.parent.left?(s=n.parent.right,1===s.color&&(s.color=0,n.parent.color=1,rbTreeBase_leftRotate(e,n.parent),s=n.parent.right),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.right.color&&(s.left.color=0,s.color=1,rbTreeBase_rightRotate(e,s),s=n.parent.right),s.color=n.parent.color,n.parent.color=0,s.right.color=0,rbTreeBase_leftRotate(e,n.parent),n=e.root)):(s=n.parent.left,1===s.color&&(s.color=0,n.parent.color=1,rbTreeBase_rightRotate(e,n.parent),s=n.parent.left),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.left.color&&(s.right.color=0,s.color=1,rbTreeBase_leftRotate(e,s),s=n.parent.left),s.color=n.parent.color,n.parent.color=0,s.left.color=0,rbTreeBase_rightRotate(e,n.parent),n=e.root));n.color=0,rbTreeBase_resetSentinel()}function fixInsert(e,t){for(recomputeTreeMetadata(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&rbTreeBase_leftRotate(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,rbTreeBase_rightRotate(e,t.parent.parent))}else{const n=t.parent.parent.left;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&rbTreeBase_rightRotate(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,rbTreeBase_leftRotate(e,t.parent.parent))}e.root.color=0}function updateTreeMetadata(e,t,n,r){for(;t!==e.root&&t!==N;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}function recomputeTreeMetadata(e,t){let n=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(n=calculateSize((t=t.parent).left)-t.size_left,r=calculateLF(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=r;t!==e.root&&(0!==n||0!==r);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=r),t=t.parent}}N.parent=N,N.left=N,N.right=N,N.color=0;var R=n(104);const F=65535;function createUintArray(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class LineStarts{constructor(e,t,n,r,i){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=i}}function createLineStartsFast(e,t=!0){const n=[0];let r=1;for(let t=0,i=e.length;t<i;t++){const s=e.charCodeAt(t);13===s?t+1<i&&10===e.charCodeAt(t+1)?(n[r++]=t+2,t++):n[r++]=t+1:10===s&&(n[r++]=t+1)}return t?createUintArray(n):n}class Piece{constructor(e,t,n,r,i){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=i}}class StringBuffer{constructor(e,t){this.buffer=e,this.lineStarts=t}}class PieceTreeSnapshot{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==N&&e.iterate(e.root,(e=>(e!==N&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class PieceTreeSearchCache{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let r=0;r<n.length;r++){const i=n[r];(null===i.node.parent||i.nodeStartOffset>=e)&&(n[r]=null,t=!0)}if(t){const e=[];for(const t of n)null!==t&&e.push(t);this._cache=e}}}class PieceTreeBase{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new StringBuffer("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=N,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let t=0,n=e.length;t<n;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=createLineStartsFast(e[t].buffer));const n=new Piece(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),r=this.rbInsertRight(r,n)}this._searchCache=new PieceTreeSearchCache(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=F,n=t-Math.floor(21845),r=2*n;let i="",s=0;const o=[];if(this.iterate(this.root,(t=>{const a=this.getNodeContent(t),h=a.length;if(s<=n||s+h<r)return i+=a,s+=h,!0;const l=i.replace(/\r\n|\r|\n/g,e);return o.push(new StringBuffer(l,createLineStartsFast(l))),i=a,s=h,!0})),s>0){const t=i.replace(/\r\n|\r|\n/g,e);o.push(new StringBuffer(t,createLineStartsFast(t)))}this.create(o,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new PieceTreeSnapshot(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==N;)if(r.left!==N&&r.lf_left+1>=e)r=r.left;else{if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;return n+(this.getAccumulatedValue(r,e-r.lf_left-2)+t-1)}e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const r=e;for(;t!==N;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const i=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+i.index,0===i.index){const e=r-this.getOffsetAt(n+1,1);return new d.y(n+1,e+1)}return new d.y(n+1,i.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===N){const t=r-e-this.getOffsetAt(n+1,1);return new d.y(n+1,t+1)}t=t.right}return new d.y(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),i=this.getValueInRange2(n,r);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?i:i.replace(/\r\n|\r|\n/g,t):i}getValueInRange2(e,t){if(e.node===t.node){const n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r.substring(i+e.remainder,i+t.remainder)}let n=e.node;const r=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let s=r.substring(i+e.remainder,i+n.piece.length);for(n=n.next();n!==N;){const e=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=e.substring(r,r+t.remainder);break}s+=e.substr(r,n.piece.length),n=n.next()}return s}getLinesContent(){const e=[];let t=0,n="",r=!1;return this.iterate(this.root,(i=>{if(i===N)return!0;const s=i.piece;let o=s.length;if(0===o)return!0;const a=this._buffers[s.bufferIndex].buffer,h=this._buffers[s.bufferIndex].lineStarts,l=s.start.line,c=s.end.line;let u=h[l]+s.start.column;if(r&&(10===a.charCodeAt(u)&&(u++,o--),e[t++]=n,n="",r=!1,0===o))return!0;if(l===c)return this._EOLNormalized||13!==a.charCodeAt(u+o-1)?n+=a.substr(u,o):(r=!0,n+=a.substr(u,o-1)),!0;n+=this._EOLNormalized?a.substring(u,Math.max(u,h[l+1]-this._EOLLength)):a.substring(u,h[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let r=l+1;r<c;r++)n=this._EOLNormalized?a.substring(h[r],h[r+1]-this._EOLLength):a.substring(h[r],h[r+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return this._EOLNormalized||13!==a.charCodeAt(h[c]+s.end.column-1)?n=a.substr(h[c],s.end.column):(r=!0,0===s.end.column?t--:n=a.substr(h[c],s.end.column-1)),!0})),r&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,i,s,o,a,h,l,c){const u=this._buffers[e.piece.bufferIndex],d=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),f=this.offsetInBuffer(e.piece.bufferIndex,i),p=this.offsetInBuffer(e.piece.bufferIndex,s);let m;const k={line:0,column:0};let _,b;t._wordSeparators?(_=u.buffer.substring(f,p),b=e=>e+f,t.reset(0)):(_=u.buffer,b=e=>e,t.reset(f));do{if(m=t.next(_),m){if(b(m.index)>=p)return l;this.positionInBuffer(e,b(m.index)-d,k);const t=this.getLineFeedCnt(e.piece.bufferIndex,i,k),s=k.line===i.line?k.column-i.column+r:k.column+1,o=s+m[0].length;if(c[l++]=(0,R.dr)(new g.Q(n+t,s,n+t,o),m,a),b(m.index)+m[0].length>=p)return l;if(l>=h)return l}}while(m);return l}findMatchesLineByLine(e,t,n,r){const i=[];let s=0;const o=new R.W5(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];const h=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===h)return[];let l=this.positionInBuffer(a.node,a.remainder);const c=this.positionInBuffer(h.node,h.remainder);if(a.node===h.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,c,t,n,r,s,i),i;let u=e.startLineNumber,d=a.node;for(;d!==h.node;){const h=this.getLineFeedCnt(d.piece.bufferIndex,l,d.piece.end);if(h>=1){const a=this._buffers[d.piece.bufferIndex].lineStarts,c=this.offsetInBuffer(d.piece.bufferIndex,d.piece.start),g=a[l.line+h],f=u===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(d,o,u,f,l,this.positionInBuffer(d,g-c),t,n,r,s,i),s>=r)return i;u+=h}const c=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){const a=this.getLineContent(u).substring(c,e.endColumn-1);return s=this._findMatchesInLine(t,o,a,e.endLineNumber,c,s,i,n,r),i}if(s=this._findMatchesInLine(t,o,this.getLineContent(u).substr(c),u,c,s,i,n,r),s>=r)return i;u++,a=this.nodeAt2(u,1),d=a.node,l=this.positionInBuffer(a.node,a.remainder)}if(u===e.endLineNumber){const a=u===e.startLineNumber?e.startColumn-1:0,h=this.getLineContent(u).substring(a,e.endColumn-1);return s=this._findMatchesInLine(t,o,h,e.endLineNumber,a,s,i,n,r),i}const g=u===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(h.node,o,u,g,l,c,t,n,r,s,i),i}_findMatchesInLine(e,t,n,r,i,s,o,a,h){const l=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,c=n.length;let u=-a;for(;-1!==(u=n.indexOf(t,u+a));)if((!l||(0,R.wC)(l,n,c,u,a))&&(o[s++]=new _.Dg(new g.Q(r,u+1+i,r,u+1+a+i),null),s>=h))return s;return s}let c;t.reset(0);do{if(c=t.next(n),c&&(o[s++]=(0,R.dr)(new g.Q(r,c.index+1+i,r,c.index+1+c[0].length+i),c,a),s>=h))return s}while(c);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==N){const{node:n,remainder:r,nodeStartOffset:i}=this.nodeAt(e),s=n.piece,o=s.bufferIndex,a=this.positionInBuffer(n,r);if(0===n.piece.bufferIndex&&s.end.line===this._lastChangeBufferPos.line&&s.end.column===this._lastChangeBufferPos.column&&i+s.length===e&&t.length<F)return this.appendToNode(n,t),void this.computeBufferMetadata();if(i===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(i+n.piece.length>e){const e=[];let i=new Piece(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),this.offsetInBuffer(o,s.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(n,r)){const e={line:i.start.line+1,column:0};i=new Piece(i.bufferIndex,e,i.end,this.getLineFeedCnt(i.bufferIndex,e,i.end),i.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(n,r-1)){const i=this.positionInBuffer(n,r-1);this.deleteNodeTail(n,i),t="\r"+t,0===n.piece.length&&e.push(n)}else this.deleteNodeTail(n,a)}else this.deleteNodeTail(n,a);const h=this.createNewPieces(t);i.length>0&&this.rbInsertRight(n,i);let l=n;for(let e=0;e<h.length;e++)l=this.rbInsertRight(l,h[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{const e=this.createNewPieces(t);let n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===N)return;const n=this.nodeAt(e),r=this.nodeAt(e+t),i=n.node,s=r.node;if(i===s){const s=this.positionInBuffer(i,n.remainder),o=this.positionInBuffer(i,r.remainder);if(n.nodeStartOffset===e){if(t===i.piece.length){const e=i.next();return rbDelete(this,i),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(i,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(i),void this.computeBufferMetadata()}return n.nodeStartOffset+i.piece.length===e+t?(this.deleteNodeTail(i,s),this.validateCRLFWithNextNode(i),void this.computeBufferMetadata()):(this.shrinkNode(i,s,o),void this.computeBufferMetadata())}const o=[],a=this.positionInBuffer(i,n.remainder);this.deleteNodeTail(i,a),this._searchCache.validate(e),0===i.piece.length&&o.push(i);const h=this.positionInBuffer(s,r.remainder);this.deleteNodeHead(s,h),0===s.piece.length&&o.push(s);for(let e=i.next();e!==N&&e!==s;e=e.next())o.push(e);const l=0===i.piece.length?i.prev():i;this.deleteNodes(o),this.validateCRLFWithNextNode(l),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,i={line:r.start.line+1,column:0},s=new Piece(r.bufferIndex,i,r.end,this.getLineFeedCnt(r.bufferIndex,i,r.end),r.length-1);t.piece=s,e+="\n",updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&n.push(t)}const r=this.createNewPieces(e);let i=this.rbInsertLeft(t,r[r.length-1]);for(let e=r.length-2;e>=0;e--)i=this.rbInsertLeft(i,r[e]);this.validateCRLFWithPrevNode(i),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]);let i=r;for(let e=1;e<n.length;e++)i=this.rbInsertRight(i,n[e]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){const r=e.piece,i=e.piece.bufferIndex,s=this._buffers[i].lineStarts,o=s[r.start.line]+r.start.column+t;let a=r.start.line,h=r.end.line,l=0,c=0,u=0;for(;a<=h&&(l=a+(h-a)/2|0,u=s[l],l!==h);)if(c=s[l+1],o<u)h=l-1;else{if(!(o>=c))break;a=l+1}return n?(n.line=l,n.column=o-u,null):{line:l,column:o-u}}getLineFeedCnt(e,t,n){if(0===n.column)return n.line-t.line;const r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;const i=r[n.line+1],s=r[n.line]+n.column;if(i>s+1)return n.line-t.line;const o=s-1;return 13===this._buffers[e].buffer.charCodeAt(o)?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)rbDelete(this,e[t])}createNewPieces(e){if(e.length>F){const t=[];for(;e.length>F;){const n=e.charCodeAt(65534);let r;13===n||n>=55296&&n<=56319?(r=e.substring(0,65534),e=e.substring(65534)):(r=e.substring(0,F),e=e.substring(F));const i=createLineStartsFast(r);t.push(new Piece(this._buffers.length,{line:0,column:0},{line:i.length-1,column:r.length-i[i.length-1]},i.length-1,r.length)),this._buffers.push(new StringBuffer(r,i))}const n=createLineStartsFast(e);return t.push(new Piece(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new StringBuffer(e,n)),t}let t=this._buffers[0].buffer.length;const n=createLineStartsFast(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const i=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,o={line:s,column:i-this._buffers[0].lineStarts[s]},a=new Piece(0,r,o,this.getLineFeedCnt(0,r,o),i-t);return this._lastChangeBufferPos=o,[a]}getLineRawContent(e,t=0){let n=this.root,r="";const i=this._searchCache.get2(e);if(i){n=i.node;const s=this.getAccumulatedValue(n,e-i.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(i.nodeStartLineNumber+n.piece.lineFeedCnt!==e){const r=this.getAccumulatedValue(n,e-i.nodeStartLineNumber);return o.substring(a+s,a+r-t)}r=o.substring(a+s,a+n.piece.length)}else{let i=0;const s=e;for(;n!==N;)if(n.left!==N&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1),a=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:i,nodeStartLineNumber:s-(e-1-n.lf_left)}),a.substring(h+r,h+o-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(n,e-n.lf_left-2),i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=i.substring(s+t,s+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}}for(n=n.next();n!==N;){const e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const i=this.getAccumulatedValue(n,0),s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=e.substring(s,s+i-t),r}{const t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=e.substr(t,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==N;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,r=this.positionInBuffer(e,t),i=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(t!==i)return{index:t,remainder:0}}return{index:i,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,i=n.start.line+t+1;return i>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[i]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.end),s=t,o=this.offsetInBuffer(n.bufferIndex,s),a=this.getLineFeedCnt(n.bufferIndex,n.start,s),h=a-r,l=o-i,c=n.length+l;e.piece=new Piece(n.bufferIndex,n.start,s,a,c),updateTreeMetadata(this,e,l,h)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,i=this.offsetInBuffer(n.bufferIndex,n.start),s=t,o=this.getLineFeedCnt(n.bufferIndex,s,n.end),a=o-r,h=i-this.offsetInBuffer(n.bufferIndex,s),l=n.length+h;e.piece=new Piece(n.bufferIndex,s,n.end,o,l),updateTreeMetadata(this,e,h,a)}shrinkNode(e,t,n){const r=e.piece,i=r.start,s=r.end,o=r.length,a=r.lineFeedCnt,h=t,l=this.getLineFeedCnt(r.bufferIndex,r.start,h),c=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,i);e.piece=new Piece(r.bufferIndex,r.start,h,l,c),updateTreeMetadata(this,e,c-o,l-a);const u=new Piece(r.bufferIndex,n,s,this.getLineFeedCnt(r.bufferIndex,n,s),this.offsetInBuffer(r.bufferIndex,s)-this.offsetInBuffer(r.bufferIndex,n)),d=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(d)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const i=createLineStartsFast(t,!1);for(let e=0;e<i.length;e++)i[e]+=r;if(n){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1));const s=this._buffers[0].lineStarts.length-1,o={line:s,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[s]},a=e.piece.length+t.length,h=e.piece.lineFeedCnt,l=this.getLineFeedCnt(0,e.piece.start,o),c=l-h;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,o,l,a),this._lastChangeBufferPos=o,updateTreeMetadata(this,e,t.length,c)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==N;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){r+=t.size_left;const n={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(n),n}e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==N;)if(n.left!==N&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const i=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(i+t-1,s),nodeStartOffset:r}}if(n.lf_left+n.piece.lineFeedCnt===e-1){const i=this.getAccumulatedValue(n,e-n.lf_left-2);if(i+t-1<=n.piece.length)return{node:n,remainder:i+t-1,nodeStartOffset:r};t-=n.piece.length-i;break}e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==N;){if(n.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:r}}if(n.piece.length>=t-1){return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)}}t-=n.piece.length,n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===N||0===e.piece.lineFeedCnt)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,i=n[r]+t.start.column;if(r===n.length-1)return!1;return!(n[r+1]>i+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(i)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==N&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],r=this._buffers[e.piece.bufferIndex].lineStarts;let i;i=0===e.piece.end.column?{line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,i,o,s),updateTreeMetadata(this,e,-1,-1),0===e.piece.length&&n.push(e);const a={line:t.piece.start.line+1,column:0},h=t.piece.length-1,l=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new Piece(t.piece.bufferIndex,a,t.piece.end,l,h),updateTreeMetadata(this,t,-1,-1),0===t.piece.length&&n.push(t);const c=this.createNewPieces("\r\n");this.rbInsertRight(e,c[0]);for(let e=0;e<n.length;e++)rbDelete(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)rbDelete(this,n);else{const e=n.piece,t={line:e.start.line+1,column:0},r=e.length-1,i=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new Piece(e.bufferIndex,t,e.end,i,r),updateTreeMetadata(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===N)return t(N);const n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}getNodeContent(e){if(e===N)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,r=this.offsetInBuffer(n.bufferIndex,n.start),i=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(r,i)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){const n=new TreeNode(t,1);n.left=N,n.right=N,n.parent=N,n.size_left=0,n.lf_left=0;if(this.root===N)this.root=n,n.color=0;else if(e.right===N)e.right=n,n.parent=e;else{const t=rbTreeBase_leftest(e.right);t.left=n,n.parent=t}return fixInsert(this,n),n}rbInsertLeft(e,t){const n=new TreeNode(t,1);if(n.left=N,n.right=N,n.parent=N,n.size_left=0,n.lf_left=0,this.root===N)this.root=n,n.color=0;else if(e.left===N)e.left=n,n.parent=e;else{const t=righttest(e.left);t.right=n,n.parent=t}return fixInsert(this,n),n}}var M=n(6949);class PieceTreeTextBuffer extends a.jG{constructor(e,t,n,r,i,s,a){super(),this._onDidChangeContent=this._register(new o.vl),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=i,this._pieceTree=new PieceTreeBase(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,r=this.getPositionAt(e),i=this.getPositionAt(n);return new g.Q(r.lineNumber,r.column,i.lineNumber,i.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),r=this.getOffsetAt(e.endLineNumber,e.endColumn);let i=0;const s=this._getEndOfLine(t),o=this.getEOL();if(s.length!==o.length){i=(s.length-o.length)*(e.endLineNumber-e.startLineNumber)}return r-n+i}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const r=e.startLineNumber,i=e.endLineNumber;for(let t=r;t<=i;t++){const s=this.getLineContent(t),o=t===r?e.startColumn-1:0,a=t===i?e.endColumn-1:s.length;for(let e=o;e<a;e++)h.pc(s.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(i-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=h.HG(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=h.lT(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let r=this._mightContainRTL,i=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,o=!0,a=[];for(let t=0;t<e.length;t++){const n=e[t];o&&n._isTracked&&(o=!1);const l=n.range;if(n.text){let e=!0;s||(e=!h.aC(n.text),s=e),!r&&e&&(r=h.E_(n.text)),!i&&e&&(i=h.$X(n.text))}let u="",d=0,g=0,f=0;if(n.text){let e;[d,g,f,e]=(0,c.W)(n.text);const t=this.getEOL();u=0===e||e===("\r\n"===t?2:1)?n.text:n.text.replace(/\r\n|\r|\n/g,t)}a[t]={sortIndex:t,identifier:n.identifier||null,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l),text:u,eolCount:d,firstLineLength:g,lastLineLength:f,forceMoveMarkers:Boolean(n.forceMoveMarkers),isAutoWhitespaceEdit:n.isAutoWhitespaceEdit||!1}}a.sort(PieceTreeTextBuffer._sortOpsAscending);let l=!1;for(let e=0,t=a.length-1;e<t;e++){const t=a[e].range.getEndPosition(),n=a[e+1].range.getStartPosition();if(n.isBeforeOrEqual(t)){if(n.isBefore(t))throw new Error("Overlapping ranges are not allowed!");l=!0}}o&&(a=this._reduceOperations(a));const u=n||t?PieceTreeTextBuffer._getInverseEditRanges(a):[],d=[];if(t)for(let e=0;e<a.length;e++){const t=a[e],n=u[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=n.startLineNumber;e<=n.endLineNumber;e++){let r="";e===n.startLineNumber&&(r=this.getLineContent(t.range.startLineNumber),-1!==h.HG(r))||d.push({lineNumber:e,oldContent:r})}}let g=null;if(n){let e=0;g=[];for(let t=0;t<a.length;t++){const n=a[t],r=u[t],i=this.getValueInRange(n.range),s=n.rangeOffset+e;e+=n.text.length-i.length,g[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:r,text:i,textChange:new M.k(n.rangeOffset,i,s,n.text)}}l||g.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=i,this._mightContainNonBasicASCII=s;const f=this._doApplyEdits(a);let p=null;if(t&&d.length>0){d.sort(((e,t)=>t.lineNumber-e.lineNumber)),p=[];for(let e=0,t=d.length;e<t;e++){const t=d[e].lineNumber;if(e>0&&d[e-1].lineNumber===t)continue;const n=d[e].oldContent,r=this.getLineContent(t);0!==r.length&&r!==n&&-1===h.HG(r)&&p.push(t)}}return this._onDidChangeContent.fire(),new _.F4(g,f,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,r=e[e.length-1].range,i=new g.Q(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn);let s=n.startLineNumber,o=n.startColumn;const a=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=r.range;t=t||r.forceMoveMarkers,a.push(this.getValueInRange(new g.Q(s,o,i.startLineNumber,i.startColumn))),r.text.length>0&&a.push(r.text),s=i.endLineNumber,o=i.endColumn}const h=a.join(""),[l,u,d]=(0,c.W)(h);return{sortIndex:0,identifier:e[0].identifier,range:i,rangeOffset:this.getOffsetAt(i.startLineNumber,i.startColumn),rangeLength:this.getValueLengthInRange(i,0),text:h,eolCount:l,firstLineLength:u,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(PieceTreeTextBuffer._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=r.range.startLineNumber,s=r.range.startColumn,o=r.range.endLineNumber,a=r.range.endColumn;if(i===o&&s===a&&0===r.text.length)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const h=new g.Q(i,s,o,a);t.push({range:h,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){const t=[];let n=0,r=0,i=null;for(let s=0,o=e.length;s<o;s++){const o=e[s];let a,h,l;if(i?i.range.endLineNumber===o.range.startLineNumber?(a=n,h=r+(o.range.startColumn-i.range.endColumn)):(a=n+(o.range.startLineNumber-i.range.endLineNumber),h=o.range.startColumn):(a=o.range.startLineNumber,h=o.range.startColumn),o.text.length>0){const e=o.eolCount+1;l=1===e?new g.Q(a,h,a,h+o.firstLineLength):new g.Q(a,h,a+e-1,o.lastLineLength+1)}else l=new g.Q(a,h,a,h);n=l.endLineNumber,r=l.endColumn,t.push(l),i=o}return t}static _sortOpsAscending(e,t){const n=g.Q.compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=g.Q.compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n}}class PieceTreeTextBufferFactory{constructor(e,t,n,r,i,s,o,a,h){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=i,this._containsRTL=s,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=h}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,r=n.length;e<r;e++){const r=n[e].buffer.replace(/\r\n|\r|\n/g,t),i=createLineStartsFast(r);n[e]=new StringBuffer(r,i)}const r=new PieceTreeTextBuffer(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class PieceTreeTextBufferBuilder{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&h.LU(e)&&(this.BOM=h.r_,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=function createLineStarts(e,t){e.length=0,e[0]=0;let n=1,r=0,i=0,s=0,o=!0;for(let a=0,h=t.length;a<h;a++){const l=t.charCodeAt(a);13===l?a+1<h&&10===t.charCodeAt(a+1)?(s++,e[n++]=a+2,a++):(r++,e[n++]=a+1):10===l?(i++,e[n++]=a+1):o&&9!==l&&(l<32||l>126)&&(o=!1)}const a=new LineStarts(createUintArray(e),r,i,s,o);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new StringBuffer(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=h.E_(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=h.$X(e)))}finish(e=!0){return this._finish(),new PieceTreeTextBufferFactory(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=createLineStartsFast(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}var P=n(79955),z=n(18782),V=n(44364),U=n(32177),H=n(65958),W=n(63339),q=n(23013),j=n(72532),G=n(97036);class FixedArray{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(0===t)return void this.insert(e,n);if(0===n)return void this.delete(e,t);const r=this._store.slice(0,e),i=this._store.slice(e+t),s=function arrayFill(e,t){const n=[];for(let r=0;r<e;r++)n[r]=t;return n}(n,this._default);this._store=r.concat(s,i)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;const n=[];for(let e=0;e<t;e++)n[e]=this._default;this._store=(0,r.nK)(this._store,e,n)}}class ContiguousMultilineTokens{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class ContiguousMultilineTokensBuilder{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new ContiguousMultilineTokens(e,[t]))}finalize(){return this._tokens}}var $=n(57445);class TokenizerWithStateStore{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new TrackingTokenizationStateStore(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class TokenizerWithStateStoreAndTextModel extends TokenizerWithStateStore{constructor(e,t,n,r){super(e,t),this._textModel=n,this._languageIdCodec=r}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const r=this.getFirstInvalidLine();if(!r||r.lineNumber>t)break;const i=this._textModel.getLineContent(r.lineNumber),s=safeTokenize(this._languageIdCodec,n,this.tokenizationSupport,i,!0,r.startState);e.add(r.lineNumber,s.tokens),this.store.setEndState(r.lineNumber,s.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const r=this._textModel.getLanguageId(),i=this._textModel.getLineContent(e.lineNumber),s=i.substring(0,e.column-1)+t+i.substring(e.column-1),o=safeTokenize(this._languageIdCodec,r,this.tokenizationSupport,s,!0,n),a=new $.f(o.tokens,s,this._languageIdCodec);if(0===a.getCount())return 0;const h=a.findTokenIndexAtOffset(e.column-1);return a.getStandardTokenType(h)}tokenizeLineWithEdit(e,t,n){const r=e.lineNumber,i=e.column,s=this.getStartState(r);if(!s)return null;const o=this._textModel.getLineContent(r),a=o.substring(0,i-1)+n+o.substring(i-1+t),h=this._textModel.getLanguageIdAtPosition(r,0),l=safeTokenize(this._languageIdCodec,h,this.tokenizationSupport,a,!0,s);return new $.f(l.tokens,a,this._languageIdCodec)}hasAccurateTokensForLine(e){return e<this.store.getFirstInvalidEndStateLineNumberOrMax()}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let r=this.guessStartState(t);const i=this._textModel.getLanguageId();for(let s=t;s<=n;s++){const t=this._textModel.getLineContent(s),n=safeTokenize(this._languageIdCodec,i,this.tokenizationSupport,t,!0,r);e.add(s,n.tokens),r=n.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let r=null;for(let i=e-1;t>1&&i>=1;i--){const e=this._textModel.getLineFirstNonWhitespaceColumn(i);if(0!==e&&(e<t&&(n.push(this._textModel.getLineContent(i)),t=e,r=this.getStartState(i),r)))break}r||(r=this.tokenizationSupport.getInitialState()),n.reverse();const i=this._textModel.getLanguageId();let s=r;for(const e of n){s=safeTokenize(this._languageIdCodec,i,this.tokenizationSupport,e,!1,s).endState}return s}}class TrackingTokenizationStateStore{constructor(e){this.lineCount=e,this._tokenizationStateStore=new TokenizationStateStore,this._invalidEndStatesLineNumbers=new RangePriorityQueueImpl,this._invalidEndStatesLineNumbers.addRange(new j.L(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new s.D7("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new j.L(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new j.L(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[e]=(0,c.W)(t.text);this.acceptChange(new P.M(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new j.L(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;const n=this.getStartState(t,e);if(!n)throw new s.D7("Start state must be defined");return{lineNumber:t,startState:n}}}class TokenizationStateStore{constructor(){this._lineEndStates=new FixedArray(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return(!n||!n.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class RangePriorityQueueImpl{constructor(){this._ranges=[]}get min(){return 0===this._ranges.length?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex((t=>t.contains(e)));if(-1!==t){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new j.L(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new j.L(n.start,e):this._ranges.splice(t,1,new j.L(n.start,e),new j.L(e+1,n.endExclusive))}}addRange(e){j.L.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let r=n;for(;!(r>=this._ranges.length||e.endExclusive<this._ranges[r].start);)r++;const i=t-e.length;for(let e=r;e<this._ranges.length;e++)this._ranges[e]=this._ranges[e].delta(i);if(n===r){const r=new j.L(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{const t=Math.min(e.start,this._ranges[n].start),s=Math.max(e.endExclusive,this._ranges[r-1].endExclusive),o=new j.L(t,s+i);o.isEmpty?this._ranges.splice(n,r-n):this._ranges.splice(n,r-n,o)}}toString(){return this._ranges.map((e=>e.toString())).join(" + ")}}function safeTokenize(e,t,n,r,i,o){let a=null;if(n)try{a=n.tokenizeEncoded(r,i,o.clone())}catch(e){(0,s.dz)(e)}return a||(a=(0,G.Lh)(e.encodeLanguageId(t),o)),$.f.convertToEndOffset(a.tokens,r.length),a}class DefaultBackgroundTokenizer{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,(0,H.$6)((e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)})))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),execute=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?(0,W._p)(execute):this._beginBackgroundTokenization())};execute()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new ContiguousMultilineTokensBuilder,n=q.W.create(!1);do{if(n.elapsed()>1)break;if(this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new P.M(e,t))}}class AttachedViews{constructor(){this._onDidChangeVisibleRanges=new o.vl,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new AttachedViewImpl((t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})}));return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class AttachedViewImpl{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map((e=>new P.M(e.startLineNumber,e.endLineNumber+1)));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class AttachedViewHandler extends a.jG{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new H.uC((()=>this.update()),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){(0,r.aI)(this._computedLineRanges,this._lineRanges,((e,t)=>e.equals(t)))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class AbstractTokens extends a.jG{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new o.vl),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new o.vl),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class TreeSitterTokens extends AbstractTokens{constructor(e,t,n,r){super(t,n,r),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();this._tokenizationSupport&&this._lastLanguageId===e||(this._lastLanguageId=e,this._tokenizationSupport=V.OB.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new $.f(n,t,this._languageIdCodec)}return $.f.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return 0}tokenizeLineWithEdit(e,t,n){return null}get hasTokens(){return void 0!==this._treeSitterService.getParseResult(this._textModel)}}var Q=n(35320);const K=new Uint32Array(0).buffer;class ContiguousTokensEditing{static deleteBeginning(e,t){return null===e||e===K?e:ContiguousTokensEditing.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===K)return e;const n=toUint32Array(e),r=n[n.length-2];return ContiguousTokensEditing.delete(e,t,r)}static delete(e,t,n){if(null===e||e===K||t===n)return e;const r=toUint32Array(e),i=r.length>>>1;if(0===t&&r[r.length-2]===n)return K;const s=$.f.findIndexInTokensArray(r,t),o=s>0?r[s-1<<1]:0;if(n<r[s<<1]){const o=n-t;for(let e=s;e<i;e++)r[e<<1]-=o;return e}let a,h;o!==t?(r[s<<1]=t,a=s+1<<1,h=t):(a=s<<1,h=o);const l=n-t;for(let e=s+1;e<i;e++){const t=r[e<<1]-l;t>h&&(r[a++]=t,r[a++]=r[1+(e<<1)],h=t)}if(a===r.length)return e;const c=new Uint32Array(a);return c.set(r.subarray(0,a),0),c.buffer}static append(e,t){if(t===K)return e;if(e===K)return t;if(null===e)return e;if(null===t)return null;const n=toUint32Array(e),r=toUint32Array(t),i=r.length>>>1,s=new Uint32Array(n.length+r.length);s.set(n,0);let o=n.length;const a=n[n.length-2];for(let e=0;e<i;e++)s[o++]=r[e<<1]+a,s[o++]=r[1+(e<<1)];return s.buffer}static insert(e,t,n){if(null===e||e===K)return e;const r=toUint32Array(e),i=r.length>>>1;let s=$.f.findIndexInTokensArray(r,t);if(s>0){r[s-1<<1]===t&&s--}for(let e=s;e<i;e++)r[e<<1]+=n;return e}}function toUint32Array(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var J=n(15910);class ContiguousTokensStore{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),null!==r&&r!==K)return new $.f(toUint32Array(r),n,this._languageIdCodec);const i=new Uint32Array(2);return i[0]=n.length,i[1]=getDefaultMetadata(this._languageIdCodec.encodeLanguageId(e)),new $.f(i,n,this._languageIdCodec)}static _massageTokens(e,t,n){const r=n?toUint32Array(n):null;if(0===t){let t=!1;if(r&&r.length>1&&(t=J.x.getLanguageId(r[1])!==e),!t)return K}if(!r||0===r.length){const n=new Uint32Array(2);return n[0]=t,n[1]=getDefaultMetadata(e),n.buffer}return r[r.length-2]=t,0===r.byteOffset&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;const n=[];for(let e=0;e<t;e++)n[e]=null;this._lineTokens=r.nK(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,r,i){const s=ContiguousTokensStore._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,r);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=s,!!i&&!ContiguousTokensStore._equals(o,s)}static _equals(e,t){if(!e||!t)return!e&&!t;const n=toUint32Array(e),r=toUint32Array(t);if(n.length!==r.length)return!1;for(let e=0,t=n.length;e<t;e++)if(n[e]!==r[e])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new d.y(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=ContiguousTokensEditing.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=ContiguousTokensEditing.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let r=null;n<this._len&&(r=ContiguousTokensEditing.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=ContiguousTokensEditing.append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(0===t&&0===n)return;const r=e.lineNumber-1;r>=this._len||(0!==t?(this._lineTokens[r]=ContiguousTokensEditing.deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=ContiguousTokensEditing.insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[r]=ContiguousTokensEditing.insert(this._lineTokens[r],e.column-1,n))}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};const n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];let s=0,o=0,a=!1;for(let e=i.startLineNumber;e<=i.endLineNumber;e++)if(a)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),i.getLineTokens(e),!1),o=e;else{this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),i.getLineTokens(e),!0)&&(a=!0,s=e,o=e)}a&&n.push({fromLineNumber:s,toLineNumber:o})}return{changes:n}}}function getDefaultMetadata(e){return(32768|e|2<<24|1024)>>>0}class SparseTokensStore{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),i=t[t.length-1].getRange();if(!r||!i)return e;n=e.plusRange(r).plusRange(i)}let i=null;for(let e=0,t=this._pieces.length;e<t;e++){const r=this._pieces[e];if(r.endLineNumber<n.startLineNumber)continue;if(r.startLineNumber>n.endLineNumber){i=i||{index:e};break}if(r.removeTokens(n),r.isEmpty()){this._pieces.splice(e,1),e--,t--;continue}if(r.endLineNumber<n.startLineNumber)continue;if(r.startLineNumber>n.endLineNumber){i=i||{index:e};continue}const[s,o]=r.split(n);s.isEmpty()?i=i||{index:e}:o.isEmpty()||(this._pieces.splice(e,1,s,o),e++,t++,i=i||{index:e})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=r.nK(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;const n=this._pieces;if(0===n.length)return t;const r=n[SparseTokensStore._findFirstPieceWithLine(n,e)].getLineTokens(e);if(!r)return t;const i=t.getCount(),s=r.getCount();let o=0;const a=[];let h=0,l=0;const emitToken=(e,t)=>{e!==l&&(l=e,a[h++]=e,a[h++]=t)};for(let e=0;e<s;e++){const n=r.getStartCharacter(e),s=r.getEndCharacter(e),a=r.getMetadata(e),h=((1&a?2048:0)|(2&a?4096:0)|(4&a?8192:0)|(8&a?16384:0)|(16&a?16744448:0)|(32&a?4278190080:0))>>>0,l=~h>>>0;for(;o<i&&t.getEndOffset(o)<=n;)emitToken(t.getEndOffset(o),t.getMetadata(o)),o++;for(o<i&&t.getStartOffset(o)<n&&emitToken(n,t.getMetadata(o));o<i&&t.getEndOffset(o)<s;)emitToken(t.getEndOffset(o),t.getMetadata(o)&l|a&h),o++;if(o<i)emitToken(s,t.getMetadata(o)&l|a&h),t.getEndOffset(o)===s&&o++;else{const e=Math.min(Math.max(0,o-1),i-1);emitToken(s,t.getMetadata(e)&l|a&h)}}for(;o<i;)emitToken(t.getEndOffset(o),t.getMetadata(o)),o++;return new $.f(new Uint32Array(a),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let i=n+Math.floor((r-n)/2);if(e[i].endLineNumber<t)n=i+1;else{if(!(e[i].startLineNumber>t)){for(;i>n&&e[i-1].startLineNumber<=t&&t<=e[i-1].endLineNumber;)i--;return i}r=i-1}}return n}acceptEdit(e,t,n,r,i){for(const s of this._pieces)s.acceptEdit(e,t,n,r,i)}}var Y,__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};let Z=Y=class TokenizationTextModelPart extends U._{constructor(e,t,n,r,i,s,h){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=r,this._languageService=i,this._languageConfigurationService=s,this._treeSitterService=h,this._semanticTokens=new SparseTokensStore(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new o.vl),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new o.vl),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new o.vl),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new a.Cm),this._register(this._languageConfigurationService.onDidChange((e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}))),this._register(o.Jh.filter(V.OB.onDidChange,(e=>e.changedLanguages.includes(this._languageId)))((()=>{this.createPreferredTokenProvider()}))),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new GrammarTokens(this._languageService.languageIdCodec,this._textModel,(()=>this._languageId),this._attachedViews))}createTreeSitterTokens(){return this._register(new TreeSitterTokens(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,(()=>this._languageId)))}createTokens(e){const t=void 0!==this._tokens;this._tokens?.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens((e=>{this._emitModelTokensChangedEvent(e)}))),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState((e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){V.OB.get(this._languageId)?this._tokens instanceof TreeSitterTokens||this.createTokens(!0):this._tokens instanceof GrammarTokens||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[e,n,r]=(0,c.W)(t.text);this._semanticTokens.acceptEdit(t.range,e,n,r,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new s.D7("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this._tokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),r=this.getLineTokens(t.lineNumber),i=r.findTokenIndexAtOffset(t.column-1),[s,o]=Y._findLanguageBoundaries(r,i),a=(0,z.Th)(t.column,this.getLanguageConfiguration(r.getLanguageId(i)).getWordDefinition(),n.substring(s,o),s);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(i>0&&s===t.column-1){const[s,o]=Y._findLanguageBoundaries(r,i-1),a=(0,z.Th)(t.column,this.getLanguageConfiguration(r.getLanguageId(i-1)).getWordDefinition(),n.substring(s,o),s);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let r=0;for(let i=t;i>=0&&e.getLanguageId(i)===n;i--)r=e.getStartOffset(i);let i=e.getLineContent().length;for(let r=t,s=e.getCount();r<s&&e.getLanguageId(r)===n;r++)i=e.getEndOffset(r);return[r,i]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new d.y(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};Z=Y=__decorate([__param(4,m.L),__param(5,k.JZ),__param(6,Q.ITreeSitterParserService)],Z);class GrammarTokens extends AbstractTokens{constructor(e,t,n,r){super(e,t,n),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new a.HE),this._tokens=new ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new a.HE),this._attachedViewStates=this._register(new a.$w),this._register(V.dG.onDidChange((e=>{const t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.resetTokenization()}))),this.resetTokenization(),this._register(r.onDidChangeVisibleRanges((({view:e,state:t})=>{if(t){let n=this._attachedViewStates.get(e);n||(n=new AttachedViewHandler((()=>this.refreshRanges(n.lineRanges))),this._attachedViewStates.set(e,n)),n.handleStateChange(t)}else this._attachedViewStates.deleteAndDispose(e)})))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new TrackingTokenizationStateStore(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const[t,n]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const e=V.dG.get(this.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(e){return(0,s.dz)(e),[null,null]}return[e,t]})();if(this._tokenizer=t&&n?new TokenizerWithStateStoreAndTextModel(this._textModel.getLineCount(),t,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{if(2===this._backgroundTokenizationState)return;this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(e,t)=>{if(!this._tokenizer)return;const n=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==n&&e>=n&&this._tokenizer?.store.setEndState(e,t)}};t&&t.createBackgroundTokenizer&&!t.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,e)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new DefaultBackgroundTokenizer(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),t?.backgroundTokenizerShouldOnlyVerifyTokens&&t.createBackgroundTokenizer?(this._debugBackgroundTokens=new ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundStates=new TrackingTokenizationStateStore(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=t.createBackgroundTokenizer(this._textModel,{setTokens:e=>{this._debugBackgroundTokens?.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{this._debugBackgroundStates?.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[e,n]=(0,c.W)(t.text);this._tokens.acceptEdit(t.range,e,n),this._debugBackgroundTokens?.acceptEdit(t.range,e,n)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=P.M.joinMany([...this._attachedViewStates].map((([e,t])=>t.lineRanges)));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new ContiguousMultilineTokensBuilder,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(n,e,t),i=this.setTokens(n.finalize());if(r)for(const e of i.changes)this._backgroundTokenizer.value?.requestTokens(e.fromLineNumber,e.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new ContiguousMultilineTokensBuilder;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}getLineTokens(e){const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(r)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const r=this._textModel.validatePosition(new d.y(e,t));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const r=this._textModel.validatePosition(e);return this.forceTokenization(r.lineNumber),this._tokenizer.tokenizeLineWithEdit(r,t,n)}get hasTokens(){return this._tokens.hasTokens}}var X,ee=n(83455),te=n(82399),ne=n(38803),textModel_decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},textModel_param=function(e,t){return function(n,r){t(n,r,e)}};function createTextBuffer(e,t){let n;return n="string"==typeof e?function createTextBufferFactory(e){const t=new PieceTreeTextBufferBuilder;return t.acceptChunk(e),t.finish()}(e):_.nk(e)?function createTextBufferFactoryFromSnapshot(e){const t=new PieceTreeTextBufferBuilder;let n;for(;"string"==typeof(n=e.read());)t.acceptChunk(n);return t.finish()}(e):e,n.create(t)}let re=0;class TextModelSnapshot{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;for(;;){const r=this._source.read();if(null===r)return this._eos=!0,0===t?null:e.join("");if(r.length>0&&(e[t++]=r,n+=r.length),n>=65536)return e.join("")}}}const invalidFunc=()=>{throw new Error("Invalid change accessor")};let ie=class TextModel extends a.jG{static{X=this}static{this._MODEL_SYNC_LIMIT=52428800}static{this.LARGE_FILE_SIZE_THRESHOLD=20971520}static{this.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5}static{this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456}static{this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:p.R.tabSize,indentSize:p.R.indentSize,insertSpaces:p.R.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:p.R.trimAutoWhitespace,largeFileOptimizations:p.R.largeFileOptimizations,bracketPairColorizationOptions:p.R.bracketPairColorizationOptions}}static resolveOptions(e,t){if(t.detectIndentation){const n=guessIndentation(e,t.tabSize,t.insertSpaces);return new _.X2({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new _.X2(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t.contentChangedEvent)))}onDidChangeContentOrInjectedText(e){return(0,a.qE)(this._eventEmitter.fastEvent((t=>e(t))),this._onDidChangeInjectedText.event((t=>e(t))))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,r=null,i,s,c,u){super(),this._undoRedoService=i,this._languageService=s,this._languageConfigurationService=c,this.instantiationService=u,this._onWillDispose=this._register(new o.vl),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new DidChangeDecorationsEmitter((e=>this.handleBeforeFireDecorationsChangedEvent(e)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new o.vl),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new o.vl),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new o.vl),this._eventEmitter=this._register(new DidChangeContentEmitter),this._languageSelectionListener=this._register(new a.HE),this._deltaDecorationCallCnt=0,this._attachedViews=new AttachedViews,re++,this.id="$model"+re,this.isForSimpleWidget=n.isForSimpleWidget,this._associatedResource=null==r?l.r.parse("inmemory://model/"+re):r,this._attachedEditorCount=0;const{textBuffer:d,disposable:f}=createTextBuffer(e,n.defaultEOL);this._buffer=d,this._bufferDisposable=f,this._options=X.resolveOptions(this._buffer,n);const p="string"==typeof t?t:t.languageId;"string"!=typeof t&&(this._languageSelectionListener.value=t.onDidChange((()=>this._setLanguage(t.languageId)))),this._bracketPairs=this._register(new BracketPairsTextModelPart(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new A.P(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ColorizedBracketPairsDecorationProvider(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Z,this,this._bracketPairs,p,this._attachedViews);const m=this._buffer.getLineCount(),k=this._buffer.getValueLengthInRange(new g.Q(1,1,m,this._buffer.getLineLength(m)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=k>X.LARGE_FILE_SIZE_THRESHOLD||m>X.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=k>X.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=k>X._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=h.tk(re),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager=new O.z8(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))),this._languageService.requestRichLanguageFeatures(p),this._register(this._languageConfigurationService.onDidChange((e=>{this._bracketPairs.handleLanguageConfigurationServiceChange(e),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(e)})))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new PieceTreeTextBuffer([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=a.jG.None}_assertNotDisposed(){if(this._isDisposed)throw new s.D7("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new ee.Ic(e,t)))}setValue(e){if(this._assertNotDisposed(),null==e)throw(0,s.Qg)();const{textBuffer:t,disposable:n}=createTextBuffer(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,i,s,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),isEolChange:a,versionId:this.getVersionId(),isUndoing:i,isRedoing:s,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),i=this.getLineCount(),s=this.getLineMaxColumn(i);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ee.HP([new ee.Wn],this._versionId,!1,!1),this._createContentChanged2(new g.Q(1,1,i,s),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),i=this.getLineCount(),s=this.getLineMaxColumn(i);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ee.HP([new ee.mS],this._versionId,!1,!1),this._createContentChanged2(new g.Q(1,1,i,s),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){const r=t[n],i=r.range,s=r.cachedAbsoluteStart-r.start,o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),a=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);r.cachedAbsoluteStart=o,r.cachedAbsoluteEnd=a,r.cachedVersionId=e,r.start=o-s,r.end=a-s,recomputeMaxEnd(r)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let r=1;r<=n;r++){const n=this._buffer.getLineLength(r);n>=1e4?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=void 0!==e.tabSize?e.tabSize:this._options.tabSize,n=void 0!==e.indentSize?e.indentSize:this._options.originalIndentSize,r=void 0!==e.insertSpaces?e.insertSpaces:this._options.insertSpaces,i=void 0!==e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=void 0!==e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,o=new _.X2({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:i,bracketPairColorizationOptions:s});if(this._options.equals(o))return;const a=this._options.createChangeEvent(o);this._options=o,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();const n=guessIndentation(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),(0,u.P)(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(h._J.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new s.D7("Operation would exceed heap memory limits");const n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new TextModelSnapshot(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.D7("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.D7("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new s.D7("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.D7("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.D7("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new s.D7("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn;let i=Math.floor("number"!=typeof n||isNaN(n)?1:n),s=Math.floor("number"!=typeof r||isNaN(r)?1:r);if(i<1)i=1,s=1;else if(i>t)i=t,s=this.getLineMaxColumn(i);else if(s<=1)s=1;else{const e=this.getLineMaxColumn(i);s>=e&&(s=e)}const o=e.endLineNumber,a=e.endColumn;let h=Math.floor("number"!=typeof o||isNaN(o)?1:o),l=Math.floor("number"!=typeof a||isNaN(a)?1:a);if(h<1)h=1,l=1;else if(h>t)h=t,l=this.getLineMaxColumn(h);else if(l<=1)l=1;else{const e=this.getLineMaxColumn(h);l>=e&&(l=e)}return n===i&&r===s&&o===h&&a===l&&e instanceof g.Q&&!(e instanceof f.L)?e:new g.Q(i,s,h,l)}_isValidPosition(e,t,n){if("number"!=typeof e||"number"!=typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===n){const n=this._buffer.getLineCharCode(e,t-2);if(h.pc(n))return!1}return!0}_validatePosition(e,t,n){const r=Math.floor("number"!=typeof e||isNaN(e)?1:e),i=Math.floor("number"!=typeof t||isNaN(t)?1:t),s=this._buffer.getLineCount();if(r<1)return new d.y(1,1);if(r>s)return new d.y(s,this.getLineMaxColumn(s));if(i<=1)return new d.y(r,1);const o=this.getLineMaxColumn(r);if(i>=o)return new d.y(r,o);if(1===n){const e=this._buffer.getLineCharCode(r,i-2);if(h.pc(e))return new d.y(r,i-1)}return new d.y(r,i)}validatePosition(e){return this._assertNotDisposed(),e instanceof d.y&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,r=e.startColumn,i=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,r,0))return!1;if(!this._isValidPosition(i,s,0))return!1;if(1===t){const e=r>1?this._buffer.getLineCharCode(n,r-2):0,t=s>1&&s<=this._buffer.getLineLength(i)?this._buffer.getLineCharCode(i,s-2):0,o=h.pc(e),a=h.pc(t);return!o&&!a}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof g.Q&&!(e instanceof f.L)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),r=t.lineNumber,i=t.column,s=n.lineNumber,o=n.column;{const e=i>1?this._buffer.getLineCharCode(r,i-2):0,t=o>1&&o<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,o-2):0,n=h.pc(e),a=h.pc(t);return n||a?r===s&&i===o?new g.Q(r,i-1,s,o-1):n&&a?new g.Q(r,i-1,s,o+1):n?new g.Q(r,i-1,s,o):new g.Q(r,i,s,o+1):new g.Q(r,i,s,o)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new g.Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,i,s,o=999){this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((e=>g.Q.isIRange(e)))&&(a=t.map((e=>this.validateRange(e))))),null===a&&(a=[this.getFullModelRange()]),a=a.sort(((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn));const h=[];let l;if(h.push(a.reduce(((e,t)=>g.Q.areIntersecting(e,t)?e.plusRange(t):(h.push(e),t)))),!n&&e.indexOf("\n")<0){const t=new R.lt(e,n,r,i).parseSearchRequest();if(!t)return[];l=e=>this.findMatchesLineByLine(e,t,s,o)}else l=t=>R.hB.findMatches(this,new R.lt(e,n,r,i),t,s,o);return h.map(l).reduce(((e,t)=>e.concat(t)),[])}findNextMatch(e,t,n,r,i,s){this._assertNotDisposed();const o=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){const t=new R.lt(e,n,r,i).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let h=new g.Q(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),l=this.findMatchesLineByLine(h,t,s,1);return R.hB.findNextMatch(this,new R.lt(e,n,r,i),o,s),l.length>0?l[0]:(h=new g.Q(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),l=this.findMatchesLineByLine(h,t,s,1),l.length>0?l[0]:null)}return R.hB.findNextMatch(this,new R.lt(e,n,r,i),o,s)}findPreviousMatch(e,t,n,r,i,s){this._assertNotDisposed();const o=this.validatePosition(t);return R.hB.findPreviousMatch(this,new R.lt(e,n,r,i),o,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof _.Wo?e:new _.Wo(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const n=t.map((e=>({range:this.validateRange(e.range),text:e.text})));let r=!0;if(e)for(let t=0,i=e.length;t<i;t++){const i=e[t];let s=!1;for(let e=0,t=n.length;e<t;e++){const t=n[e].range,r=t.startLineNumber>i.endLineNumber,o=i.startLineNumber>t.endLineNumber;if(!r&&!o){s=!0;break}}if(!s){r=!1;break}}if(r)for(let e=0,r=this._trimAutoWhitespaceLines.length;e<r;e++){const r=this._trimAutoWhitespaceLines[e],i=this.getLineMaxColumn(r);let s=!0;for(let e=0,t=n.length;e<t;e++){const t=n[e].range,o=n[e].text;if(!(r<t.startLineNumber||r>t.endLineNumber)&&!(r===t.startLineNumber&&t.startColumn===i&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0)||r===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1))){s=!1;break}}if(s){const e=new g.Q(r,1,r,i);t.push(new _.Wo(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,r)}_applyUndo(e,t,n,r){const i=e.map((e=>{const t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new g.Q(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}}));this._applyUndoRedoEdits(i,t,!0,!1,n,r)}_applyRedo(e,t,n,r){const i=e.map((e=>{const t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new g.Q(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}}));this._applyUndoRedoEdits(i,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,i,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(i)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),o=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,0!==o.length){for(let e=0,t=o.length;e<t;e++){const t=o[e];this._decorationsTree.acceptReplace(t.rangeOffset,t.rangeLength,t.text.length,t.forceMoveMarkers)}const e=[];this._increaseVersionId();let t=n;for(let n=0,i=o.length;n<i;n++){const i=o[n],[a]=(0,c.W)(i.text);this._onDidChangeDecorations.fire();const h=i.range.startLineNumber,l=i.range.endLineNumber,u=l-h,g=a,f=Math.min(u,g),p=g-u,m=s-t-p+h,k=m,_=m+g,b=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new d.y(k,1)),this.getOffsetAt(new d.y(_,this.getLineMaxColumn(_))),0),C=ee.uK.fromDecorations(b),v=new r.j3(C);for(let t=f;t>=0;t--){const n=h+t,r=m+t;v.takeFromEndWhile((e=>e.lineNumber>r));const i=v.takeFromEndWhile((e=>e.lineNumber===r));e.push(new ee.U0(n,this.getLineContent(r),i))}if(f<u){const t=h+f;e.push(new ee.E$(t+1,l))}if(f<g){const n=new r.j3(C),i=h+f,o=g-f,a=s-t-o+i+1,l=[],c=[];for(let e=0;e<o;e++){const t=a+e;c[e]=this.getLineContent(t),n.takeWhile((e=>e.lineNumber<t)),l[e]=n.takeWhile((e=>e.lineNumber===t))}e.push(new ee.bg(i+1,h+g,c,l))}t+=p}this._emitContentChangedEvent(new ee.HP(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===i.reverseEdits?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;const t=Array.from(e).map((e=>new ee.U0(e,this.getLineContent(e),this._getInjectedTextInLine(e))));this._onDidChangeInjectedText.fire(new ee.vn(t))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,_normalizeOptions(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>0===t.length&&0===n.length?[]:this._deltaDecorationsImpl(e,t,n)};let r=null;try{r=t(n)}catch(e){(0,s.dz)(e)}return n.addDecoration=invalidFunc,n.changeDecoration=invalidFunc,n.changeDecorationOptions=invalidFunc,n.removeDecoration=invalidFunc,n.deltaDecorations=invalidFunc,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),(0,s.dz)(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:se[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),o=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),s,o,i),r.setOptions(se[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let e=0,n=t.length;e<n;e++){const n=t[e];this._decorationsTree.delete(n),delete this._decorations[n.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1,s=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),h=Math.min(o,Math.max(1,t)),l=this.getLineMaxColumn(h),c=new g.Q(a,1,h,l),u=this._getDecorationsInRange(c,n,i,s);return(0,r.E4)(u,this._decorationProvider.getDecorationsInRange(c,n,i)),u}getDecorationsInRange(e,t=0,n=!1,i=!1,s=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,s);return(0,r.E4)(a,this._decorationProvider.getDecorationsInRange(o,t,n,i)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return ee.uK.fromDecorations(r).filter((t=>t.lineNumber===e))}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,r){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,i,s,t,n,r)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(n.options.before){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),i=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),s=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),i,s,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const r=!(!n.options.overviewRuler||!n.options.overviewRuler.color),i=!(!t.overviewRuler||!t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(n.options.before||t.before){const e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}const s=r!==i,o=function isOptionsInjectedText(e){return!!e.after||!!e.before}(t)!==isNodeInjectedText(n);s||o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,r=!1){const i=this.getVersionId(),s=t.length;let o=0;const a=n.length;let h=0;this._onDidChangeDecorations.beginDeferredEmit();try{const l=new Array(a);for(;o<s||h<a;){let c=null;if(o<s){do{c=this._decorations[t[o++]]}while(!c&&o<s);if(c){if(c.options.after){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(c.options.before){const e=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(c),r||this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(h<a){if(!c){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;c=new IntervalNode(t,0,0),this._decorations[t]=c}const t=n[h],s=this._validateRangeRelaxedNoAllocations(t.range),o=_normalizeOptions(t.options),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),u=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);c.ownerId=e,c.reset(i,a,u,s),c.setOptions(o),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(o),this._decorationsTree.insert(c),l[h]=c.id,h++}else c&&delete this._decorations[c.id]}return l}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"==typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange((()=>this._setLanguage(e.languageId,t))),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function indentOfLine(e){let t=0;for(const n of e){if(" "!==n&&"\t"!==n)break;t++}return t}(this.getLineContent(e))+1}};function isNodeInOverviewRuler(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function isNodeInjectedText(e){return!!e.options.after||!!e.options.before}ie=X=textModel_decorate([textModel_param(4,ne.$D),textModel_param(5,m.L),textModel_param(6,k.JZ),textModel_param(7,te._Y)],ie);class DecorationsTrees{constructor(){this._decorationsTree0=new IntervalTree,this._decorationsTree1=new IntervalTree,this._injectedTextDecorationsTree=new IntervalTree}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)null===n.range&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,i,s){const o=e.getVersionId(),a=this._intervalSearch(t,n,r,i,o,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,r,i,s){const o=this._decorationsTree0.intervalSearch(e,t,n,r,i,s),a=this._decorationsTree1.intervalSearch(e,t,n,r,i,s),h=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,i,s);return o.concat(a).concat(h)}getInjectedTextInInterval(e,t,n,r){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAllInjectedText(e,t){const n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,r).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAll(e,t,n,r,i){const s=e.getVersionId(),o=this._search(t,n,r,s,i);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,r,i){if(n)return this._decorationsTree1.search(e,t,r,i);{const n=this._decorationsTree0.search(e,t,r,i),s=this._decorationsTree1.search(e,t,r,i),o=this._injectedTextDecorationsTree.search(e,t,r,i);return n.concat(s).concat(o)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.insert(e):isNodeInOverviewRuler(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.delete(e):isNodeInOverviewRuler(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){isNodeInjectedText(e)?this._injectedTextDecorationsTree.resolveNode(e,t):isNodeInOverviewRuler(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}}function cleanClassName(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class DecorationOptions{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class ModelDecorationOverviewRulerOptions extends DecorationOptions{constructor(e){super(e),this._resolvedColor=null,this.position="number"==typeof e.position?e.position:_.A5.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"==typeof e)return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class ModelDecorationGlyphMarginOptions{constructor(e){this.position=e?.position??_.ZS.Center,this.persistLane=e?.persistLane}}class ModelDecorationMinimapOptions extends DecorationOptions{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"==typeof e?i.Q1.fromHex(e):t.getColor(e.id)}}class ModelDecorationInjectedTextOptions{static from(e){return e instanceof ModelDecorationInjectedTextOptions?e:new ModelDecorationInjectedTextOptions(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class ModelDecorationOptions{static register(e){return new ModelDecorationOptions(e)}static createDynamic(e){return new ModelDecorationOptions(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?cleanClassName(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?cleanClassName(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ModelDecorationOverviewRulerOptions(e.overviewRuler):null,this.minimap=e.minimap?new ModelDecorationMinimapOptions(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new ModelDecorationGlyphMarginOptions(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?cleanClassName(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?cleanClassName(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?cleanClassName(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?h.jy(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?cleanClassName(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?cleanClassName(e.marginClassName):null,this.inlineClassName=e.inlineClassName?cleanClassName(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?cleanClassName(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?cleanClassName(e.afterContentClassName):null,this.after=e.after?ModelDecorationInjectedTextOptions.from(e.after):null,this.before=e.before?ModelDecorationInjectedTextOptions.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}ModelDecorationOptions.EMPTY=ModelDecorationOptions.register({description:"empty"});const se=[ModelDecorationOptions.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ModelDecorationOptions.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _normalizeOptions(e){return e instanceof ModelDecorationOptions?e:ModelDecorationOptions.createDynamic(e)}class DidChangeDecorationsEmitter extends a.jG{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new o.vl),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class DidChangeContentEmitter extends a.jG{constructor(){super(),this._fastEmitter=this._register(new o.vl),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new o.vl),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}},12060(e,t,n){"use strict";n.r(t),n.d(t,{ILanguageFeatureDebounceService:()=>u,LanguageFeatureDebounceService:()=>g});var r=n(22344),i=n(27992),s=n(62992),o=n(88195),a=n(66726),h=n(82399),l=n(46441),c=n(13072),__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};const u=(0,h.u1)("ILanguageFeatureDebounceService");var d;!function(e){const t=new WeakMap;let n=0;e.of=function of(e){let r=t.get(e);return void 0===r&&(r=++n,t.set(e,r)),r}}(d||(d={}));class NullDebounceInformation{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class FeatureDebounceInformation{constructor(e,t,n,r,s,o){this._logService=e,this._name=t,this._registry=n,this._default=r,this._min=s,this._max=o,this._cache=new i.qK(50,.7)}_key(e){return e.id+this._registry.all(e).reduce(((e,t)=>(0,r.sN)(d.of(t),e)),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?(0,s.qE)(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let r=this._cache.get(n);r||(r=new s.mu(6),this._cache.set(n,r));const i=(0,s.qE)(r.update(t),this._min,this._max);return(0,c.v$)(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${i}ms`),i}_overall(){const e=new s.Uq;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=0|this._overall()||this._default;return(0,s.qE)(e,this._min,this._max)}}let g=class LanguageFeatureDebounceService{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){const r=n?.min??50,i=n?.max??r**2,s=n?.key??void 0,o=`${d.of(e)},${r}${s?","+s:""}`;let a=this._data.get(o);return a||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),a=new NullDebounceInformation(1.5*r)):a=new FeatureDebounceInformation(this._logService,t,e,0|this._overallAverage()||1.5*r,r,i),this._data.set(o,a)),a}_overallAverage(){const e=new s.Uq;for(const t of this._data.values())e.update(t.default());return e.value}};g=__decorate([__param(0,l.rr),__param(1,o.k)],g),(0,a.v)(u,g,1)},12146(e,t,n){"use strict";n.d(t,{OI:()=>recomputeInitiallyAndOnChange,Rl:()=>mapObservableArrayCached,Yd:()=>observableSignal,ZX:()=>derivedObservableWithCache,eP:()=>observableFromEventOpts,lk:()=>constObservable,t:()=>derivedConstOnceDefined,y0:()=>observableFromEvent,yQ:()=>observableSignalFromEvent});n(2106);var r=n(10998),i=n(34442),s=n(49855),o=n(18366),a=n(34950),h=n(8897);function constObservable(e){return new ConstObservable(e)}class ConstObservable extends i.zV{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function observableFromEvent(...e){let t,n,r;return 3===e.length?[t,n,r]=e:[n,r]=e,new FromEventObservable(new s.nA(t,void 0,r),n,r,(()=>FromEventObservable.globalTransaction),h.nx)}function observableFromEventOpts(e,t,n){return new FromEventObservable(new s.nA(e.owner,e.debugName,e.debugReferenceFn??n),t,n,(()=>FromEventObservable.globalTransaction),e.equalsFn??h.nx)}class FromEventObservable extends i.ZK{constructor(e,t,n,r,s){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=r,this._equalityComparator=s,this.hasValue=!1,this.handleEvent=e=>{const t=this._getValue(e),n=this.value,r=!this.hasValue||!this._equalityComparator(n,t);let s=!1;r&&(this.value=t,this.hasValue&&(s=!0,(0,i.PO)(this._getTransaction(),(e=>{(0,a.tZ)()?.handleFromEventObservableTriggered(this,{oldValue:n,newValue:t,change:void 0,didChange:r,hadValue:this.hasValue});for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>{const e=this.getDebugName();return"Event fired"+(e?`: ${e}`:"")}))),this.hasValue=!0),s||(0,a.tZ)()?.handleFromEventObservableTriggered(this,{oldValue:n,newValue:t,change:void 0,didChange:r,hadValue:this.hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){if(this.subscription)return this.hasValue||this.handleEvent(void 0),this.value;return this._getValue(void 0)}}function observableSignalFromEvent(e,t){return new FromEventObservableSignal(e,t)}!function(e){e.Observer=FromEventObservable,e.batchEventsGlobally=function batchEventsGlobally(e,t){let n=!1;void 0===FromEventObservable.globalTransaction&&(FromEventObservable.globalTransaction=e,n=!0);try{t()}finally{n&&(FromEventObservable.globalTransaction=void 0)}}}(observableFromEvent||(observableFromEvent={}));class FromEventObservableSignal extends i.ZK{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{(0,i.Rn)((e=>{for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>this.debugName))}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function observableSignal(e){return"string"==typeof e?new ObservableSignal(e):new ObservableSignal(void 0,e)}class ObservableSignal extends i.ZK{get debugName(){return new s.nA(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(e)for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t);else(0,i.Rn)((e=>{this.trigger(e,t)}),(()=>`Trigger signal ${this.debugName}`))}get(){}}function recomputeInitiallyAndOnChange(e,t){const n=new KeepAliveObserver(!0,t);return e.addObserver(n),t?t(e.get()):e.reportChanges(),(0,r.s)((()=>{e.removeObserver(n)}))}(0,i.FB)((function keepObserved(e){const t=new KeepAliveObserver(!1,void 0);return e.addObserver(t),(0,r.s)((()=>{e.removeObserver(t)}))})),(0,i.Bm)(recomputeInitiallyAndOnChange);class KeepAliveObserver{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function derivedObservableWithCache(e,t){let n;return(0,o.C)({owner:e,debugReferenceFn:t},(e=>(n=t(e,n),n)))}function mapObservableArrayCached(e,t,n,r){let i=new ArrayMap(n,r);return(0,o.C)({debugReferenceFn:n,owner:e,onLastObserverRemoved:()=>{i.dispose(),i=new ArrayMap(n)}},(e=>(i.setItems(t.read(e)),i.getItems())))}class ArrayMap{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach((e=>e.store.dispose())),this._cache.clear()}setItems(e){const t=[],n=new Set(this._cache.keys());for(const i of e){const e=this._keySelector?this._keySelector(i):i;let s=this._cache.get(e);if(s)n.delete(e);else{const t=new r.Cm;s={out:this._map(i,t),store:t},this._cache.set(e,s)}t.push(s.out)}for(const e of n){this._cache.get(e).store.dispose(),this._cache.delete(e)}this._items=t}getItems(){return this._items}}function derivedConstOnceDefined(e,t){return derivedObservableWithCache(e,((e,n)=>n??t(e)))}},12590(e,t,n){"use strict";n.d(t,{R:()=>r});const r={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}},15910(e,t,n){"use strict";n.d(t,{x:()=>TokenMetadata});class TokenMetadata{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return!!(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return 1&n&&(t+=" mtki"),2&n&&(t+=" mtkb"),4&n&&(t+=" mtku"),8&n&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),r=this.getFontStyle(e);let i=`color: ${t[n]};`;1&r&&(i+="font-style: italic;"),2&r&&(i+="font-weight: bold;");let s="";return 4&r&&(s+=" underline"),8&r&&(s+=" line-through"),s&&(i+=`text-decoration:${s};`),i}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(1&n),bold:Boolean(2&n),underline:Boolean(4&n),strikethrough:Boolean(8&n)}}}},16311(e,t,n){"use strict";n.d(t,{BK:()=>ObservablePromise,fm:()=>autorun,Y:()=>autorunHandleChanges,zL:()=>autorunOpts,yC:()=>autorunWithStore,ht:()=>autorunWithStoreHandleChanges,lk:()=>l.lk,un:()=>i.un,nb:()=>i.nb,ZX:()=>l.ZX,C:()=>i.C,rm:()=>i.rm,X2:()=>r.X2,y0:()=>l.y0,Yd:()=>l.Yd,yQ:()=>l.yQ,FY:()=>r.FY,Zh:()=>observableValueOpts,OI:()=>l.OI,PO:()=>r.PO,Rn:()=>r.Rn,oJ:()=>waitForState});var r=n(34442),i=n(18366),s=n(87110),o=n(10998),a=n(49855),h=n(34950);function autorun(e){return new AutorunObserver(new a.nA(void 0,void 0,e),e,void 0,void 0)}function autorunOpts(e,t){return new AutorunObserver(new a.nA(e.owner,e.debugName,e.debugReferenceFn??t),t,void 0,void 0)}function autorunHandleChanges(e,t){return new AutorunObserver(new a.nA(e.owner,e.debugName,e.debugReferenceFn??t),t,e.createEmptyChangeSummary,e.handleChange)}function autorunWithStoreHandleChanges(e,t){const n=new o.Cm,r=autorunHandleChanges({owner:e.owner,debugName:e.debugName,debugReferenceFn:e.debugReferenceFn??t,createEmptyChangeSummary:e.createEmptyChangeSummary,handleChange:e.handleChange},((e,r)=>{n.clear(),t(e,r,n)}));return(0,o.s)((()=>{r.dispose(),n.dispose()}))}function autorunWithStore(e){const t=new o.Cm,n=autorunOpts({owner:void 0,debugName:void 0,debugReferenceFn:e},(n=>{t.clear(),e(n,t)}));return(0,o.s)((()=>{n.dispose(),t.dispose()}))}class AutorunObserver{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,r){this._debugNameData=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),(0,h.tZ)()?.handleAutorunCreated(this),this._runIfNeeded(),(0,o.Ay)(this)}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),(0,o.VD)(this)}_runIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(0,h.tZ)()?.handleAutorunTriggered(this);const e=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,e)}}finally{t||(0,h.tZ)()?.handleAutorunFinished(this);for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){3===this.state&&(this.state=1),this.updateCount++}endUpdate(){if(1===this.updateCount)do{if(1===this.state){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break}this._runIfNeeded()}while(3!==this.state);this.updateCount--,(0,s.Ft)((()=>this.updateCount>=0))}handlePossibleChange(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary))&&(this.state=2)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}!function(e){e.Observer=AutorunObserver}(autorun||(autorun={}));var l=n(12146),c=n(94327);class ObservablePromise{static fromFn(e){return new ObservablePromise(e())}constructor(e){this._value=(0,r.FY)(this,void 0),this.promiseResult=this._value,this.promise=e.then((e=>((0,r.Rn)((t=>{this._value.set(new PromiseResult(e,void 0),t)})),e)),(e=>{throw(0,r.Rn)((t=>{this._value.set(new PromiseResult(void 0,e),t)})),e}))}}class PromiseResult{constructor(e,t){this.data=e,this.error=t}}function waitForState(e,t,n,r){return t||(t=e=>null!=e),new Promise(((i,s)=>{let o=!0,a=!1;const h=e.map((e=>({isFinished:t(e),error:!!n&&n(e),state:e}))),l=autorun((e=>{const{isFinished:t,error:n,state:r}=h.read(e);(t||n)&&(o?a=!0:l.dispose(),n?s(!0===n?r:n):i(r))}));if(r){const e=r.onCancellationRequested((()=>{l.dispose(),e.dispose(),s(new c.AL)}));if(r.isCancellationRequested)return l.dispose(),e.dispose(),void s(new c.AL)}o=!1,a&&l.dispose()}))}var u=n(8897);class LazyObservableValue extends r.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,1===this._updateCounter)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,0===this._updateCounter){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(void 0===n&&this._equalityComparator(this._value,e))return;let i;t||(t=i=new r.XL((()=>{}),(()=>`Setting ${this.debugName}`)));try{if(this._isUpToDate=!1,this._setValue(e),void 0!==n&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(e,t)=>{},handlePossibleChange:e=>{}},this),this._updateCounter>1)for(const e of this.observers)e.handlePossibleChange(this)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function observableValueOpts(e,t){return e.lazy?new LazyObservableValue(new a.nA(e.owner,e.debugName,void 0),t,e.equalsFn??u.nx):new r.Lj(new a.nA(e.owner,e.debugName,void 0),t,e.equalsFn??u.nx)}},18366(e,t,n){"use strict";n.d(t,{C:()=>derivedOpts,a0:()=>derivedDisposable,dQ:()=>derivedWithSetter,nb:()=>derivedHandleChanges,rm:()=>derivedWithStore,un:()=>derived});var r=n(87110),i=n(8897),s=n(10998),o=n(34442),a=n(49855),h=n(34950);function derived(e,t){return void 0!==t?new Derived(new a.nA(e,void 0,t),t,void 0,void 0,void 0,i.nx):new Derived(new a.nA(void 0,void 0,e),e,void 0,void 0,void 0,i.nx)}function derivedWithSetter(e,t,n){return new DerivedWithSetter(new a.nA(e,void 0,t),t,void 0,void 0,void 0,i.nx,n)}function derivedOpts(e,t){return new Derived(new a.nA(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??i.nx)}function derivedHandleChanges(e,t){return new Derived(new a.nA(e.owner,e.debugName,void 0),t,e.createEmptyChangeSummary,e.handleChange,void 0,e.equalityComparer??i.nx)}function derivedWithStore(e,t){let n,r;void 0===t?(n=e,r=void 0):(r=e,n=t);const o=new s.Cm;return new Derived(new a.nA(r,void 0,n),(e=>(o.clear(),n(e,o))),void 0,void 0,(()=>o.dispose()),i.nx)}function derivedDisposable(e,t){let n,r,o;return void 0===t?(n=e,r=void 0):(r=e,n=t),new Derived(new a.nA(r,void 0,n),(e=>{o?o.clear():o=new s.Cm;const t=n(e);return t&&o.add(t),t}),void 0,void 0,(()=>{o&&(o.dispose(),o=void 0)}),i.nx)}(0,o.N2)(derivedOpts);class Derived extends o.ZK{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,r,i=void 0,s){super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=r,this._handleLastObserverRemoved=i,this._equalityComparator=s,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.(),(0,h.tZ)()?.handleDerivedCreated(this)}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(0===this.observers.size){const e=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),e}do{if(1===this.state)for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break;1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}_recomputeIfNeeded(){if(3===this.state)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=0!==this.state,n=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,r)}finally{for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}const i=t&&!this._equalityComparator(n,this.value);if((0,h.tZ)()?.handleDerivedRecomputed(this,{oldValue:n,newValue:this.value,change:void 0,didChange:i,hadValue:t}),i)for(const e of this.observers)e.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=1===this.updateCount;if(3===this.state&&(this.state=1,!t))for(const e of this.observers)e.handlePossibleChange(this);if(t)for(const e of this.observers)e.beginUpdate(this)}endUpdate(e){if(this.updateCount--,0===this.updateCount){const e=[...this.observers];for(const t of e)t.endUpdate(this)}(0,r.Ft)((()=>this.updateCount>=0))}handlePossibleChange(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const e of this.observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary),r=3===this.state;if(n&&(1===this.state||r)&&(this.state=2,r))for(const e of this.observers)e.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class DerivedWithSetter extends Derived{constructor(e,t,n,r,i=void 0,s,o){super(e,t,n,r,i,s),this.set=o}}},19184(e,t,n){"use strict";function createScopedLineTokens(e,t){const n=e.getCount(),r=e.findTokenIndexAtOffset(t),i=e.getLanguageId(r);let s=r;for(;s+1<n&&e.getLanguageId(s+1)===i;)s++;let o=r;for(;o>0&&e.getLanguageId(o-1)===i;)o--;return new ScopedLineTokens(e,i,o,s+1,e.getStartOffset(o),e.getEndOffset(s))}n.d(t,{BQ:()=>createScopedLineTokens,Yo:()=>ignoreBracketsInToken});class ScopedLineTokens{constructor(e,t,n,r,i,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=i,this._lastCharOffset=s,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function ignoreBracketsInToken(e){return!!(3&e)}},19376(e,t,n){"use strict";n.r(t),n.d(t,{encodeSemanticTokensDto:()=>encodeSemanticTokensDto});var r=n(42802),i=n(63339);function encodeSemanticTokensDto(e){const t=new Uint32Array(function encodeSemanticTokensDtoSize(e){let t=0;if(t+=2,"full"===e.type)t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const n of e.deltas)n.data&&(t+=n.data.length)}return t}(e));let n=0;if(t[n++]=e.id,"full"===e.type)t[n++]=1,t[n++]=e.data.length,t.set(e.data,n),n+=e.data.length;else{t[n++]=2,t[n++]=e.deltas.length;for(const r of e.deltas)t[n++]=r.start,t[n++]=r.deleteCount,r.data?(t[n++]=r.data.length,t.set(r.data,n),n+=r.data.length):t[n++]=0}return function toLittleEndianBuffer(e){const t=new Uint8Array(e.buffer,e.byteOffset,4*e.length);return i.cm()||function reverseEndianness(e){for(let t=0,n=e.length;t<n;t+=4){const n=e[t+0],r=e[t+1],i=e[t+2],s=e[t+3];e[t+0]=s,e[t+1]=i,e[t+2]=r,e[t+3]=n}}(t),r.MB.wrap(t)}(t)}},22467(e,t,n){"use strict";n.d(t,{B6:()=>v,Fd:()=>m,LC:()=>g,P8:()=>d,Pi:()=>u,er:()=>l,iZ:()=>k,n4:()=>c,o1:()=>_,pD:()=>f,su:()=>originalFSPath,uJ:()=>p});var r=n(78518),i=n(13072),s=n(18019),o=n(63339),a=n(16844),h=n(37264);function originalFSPath(e){return(0,h.I)(e,!0)}class ExtUri{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:(0,a.UD)(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===i.ny.file)return r._1(originalFSPath(e),originalFSPath(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(b(e.authority,t.authority))return r._1(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return h.r.joinPath(e,...t)}basenameOrAuthority(e){return d(e)||e.authority}basename(e){return s.SA.basename(e.path)}extname(e){return s.SA.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===i.ny.file?t=h.r.file(s.pD(originalFSPath(e))).path:(t=s.SA.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===i.ny.file?h.r.file(s.S8(originalFSPath(e))).path:s.SA.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!b(e.authority,t.authority))return;if(e.scheme===i.ny.file){const n=s.V8(originalFSPath(e),originalFSPath(t));return o.uF?r.TH(n):n}let n=e.path||"/";const a=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(n.length,a.length);e<t&&(n.charCodeAt(e)===a.charCodeAt(e)||n.charAt(e).toLowerCase()===a.charAt(e).toLowerCase());e++);n=a.substr(0,e)+n.substr(e)}return s.SA.relative(n,a)}resolvePath(e,t){if(e.scheme===i.ny.file){const n=h.r.file(s.hd(originalFSPath(e),t));return e.with({authority:n.authority,path:n.path})}return t=r.kb(t),e.with({path:s.SA.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&(0,a.Q_)(e,t)}hasTrailingPathSeparator(e,t=s.Vn){if(e.scheme===i.ny.file){const n=originalFSPath(e);return n.length>r.Zn(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=s.Vn){return C(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=s.Vn){let n=!1;if(e.scheme===i.ny.file){const i=originalFSPath(e);n=void 0!==i&&i.length===r.Zn(i).length&&i[i.length-1]===t}else{t="/";const r=e.path;n=1===r.length&&47===r.charCodeAt(r.length-1)}return n||C(e,t)?e:e.with({path:e.path+"/"})}}const l=new ExtUri((()=>!1)),c=(new ExtUri((e=>e.scheme!==i.ny.file||!o.j9)),new ExtUri((e=>!0)),l.isEqual.bind(l)),u=(l.isEqualOrParent.bind(l),l.getComparisonKey.bind(l),l.basenameOrAuthority.bind(l)),d=l.basename.bind(l),g=l.extname.bind(l),f=l.dirname.bind(l),p=l.joinPath.bind(l),m=l.normalizePath.bind(l),k=l.relativePath.bind(l),_=l.resolvePath.bind(l),b=(l.isAbsolutePath.bind(l),l.isEqualAuthority.bind(l)),C=l.hasTrailingPathSeparator.bind(l);l.removeTrailingPathSeparator.bind(l),l.addTrailingPathSeparator.bind(l);var v;!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function parseMetaData(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,r]=e.split(":");t&&r&&n.set(t,r)}));const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(e.META_DATA_MIME,r),n}}(v||(v={}))},22994(e,t,n){"use strict";n.d(t,{W:()=>BeforeEditPositionMapper,c:()=>TextEditInfo});var r=n(28061),i=n(34883);class TextEditInfo{static fromModelContentChanges(e){return e.map((e=>{const t=r.Q.lift(e.range);return new TextEditInfo((0,i.VL)(t.getStartPosition()),(0,i.VL)(t.getEndPosition()),(0,i.rR)(e.text))})).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${(0,i.l4)(this.startOffset)}...${(0,i.l4)(this.endOffset)}) -> ${(0,i.l4)(this.newLength)}`}}class BeforeEditPositionMapper{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map((e=>TextEditInfoCache.from(e)))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return null===n?null:(0,i.MS)(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?(0,i.qe)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):(0,i.qe)(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=(0,i.l4)(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,i.qe)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):(0,i.qe)(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(!(0,i.vr)(n,e))break;{this.nextEditIdx++;const e=(0,i.l4)(n),r=(0,i.l4)(this.translateOldToCur(t.endOffsetBeforeObj)),s=e.lineCount-r.lineCount;this.deltaOldToNewLineCount+=s;const o=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,a=e.columnCount-r.columnCount;this.deltaOldToNewColumnCount=o+a,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}}class TextEditInfoCache{static from(e){return new TextEditInfoCache(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=(0,i.l4)(t),this.endOffsetAfterObj=(0,i.l4)((0,i.QB)(e,n)),this.offsetObj=(0,i.l4)(e)}}},26756(e,t,n){"use strict";n.r(t),n.d(t,{ITreeViewsDnDService:()=>o});var r=n(66726),i=n(82399),s=n(2603);const o=(0,i.u1)("treeViewsDndService");(0,r.v)(o,s.TreeViewsDnDService,1)},27142(e,t,n){"use strict";n.d(t,{Fd:()=>c,Gv:()=>overrideIdentifiersFromKey,rC:()=>x});var r=n(13338),i=n(2106),s=n(79359),o=n(19746),a=n(85753),h=n(51460),l=n(67167);const c={Configuration:"base.contributions.configuration"},u={properties:{},patternProperties:{}},d={properties:{},patternProperties:{}},g={properties:{},patternProperties:{}},f={properties:{},patternProperties:{}},p={properties:{},patternProperties:{}},m={properties:{},patternProperties:{}},k="vscode://schemas/settings/resourceLanguage",_=l.O.as(h.F.JSONContribution);const b="\\[([^\\]]+)\\]",C=new RegExp(b,"g"),v=`^(${b})+$`,x=new RegExp(v);function overrideIdentifiersFromKey(e){const t=[];if(x.test(e)){let n=C.exec(e);for(;n?.length;){const r=n[1].trim();r&&t.push(r),n=C.exec(e)}}return(0,r.dM)(t)}const L=new class ConfigurationRegistry{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new i.vl,this._onDidUpdateConfiguration=new i.vl,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:o.kg("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},_.registerSchema(k,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),_.registerSchema(k,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:r,source:i}of e)for(const e in r){t.add(e);const s=this.configurationDefaultsOverrides.get(e)??this.configurationDefaultsOverrides.set(e,{configurationDefaultOverrides:[]}).get(e),o=r[e];if(s.configurationDefaultOverrides.push({value:o,source:i}),x.test(e)){const t=this.mergeDefaultConfigurationsForOverrideIdentifier(e,o,i,s.configurationDefaultOverrideValue);if(!t)continue;s.configurationDefaultOverrideValue=t,this.updateDefaultOverrideProperty(e,t,i),n.push(...overrideIdentifiersFromKey(e))}else{const t=this.mergeDefaultConfigurationsForConfigurationProperty(e,o,i,s.configurationDefaultOverrideValue);if(!t)continue;s.configurationDefaultOverrideValue=t;const n=this.configurationProperties[e];n&&(this.updatePropertyDefaultValue(e,n),this.updateSchema(e,n))}}this.doRegisterOverrideIdentifiers(n)}updateDefaultOverrideProperty(e,t,n){const r={type:"object",default:t.value,description:o.kg("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",(0,a.Mo)(e)),$ref:k,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=r,this.defaultLanguageConfigurationOverridesNode.properties[e]=r}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,r){const i=r?.value||{},o=r?.source??new Map;if(o instanceof Map){for(const e of Object.keys(t)){const r=t[e];if(s.Gv(r)&&(s.b0(i[e])||s.Gv(i[e]))){if(i[e]={...i[e]??{},...r},n)for(const t in r)o.set(`${e}.${t}`,n)}else i[e]=r,n?o.set(e,n):o.delete(e)}return{value:i,source:o}}console.error("objectConfigurationSources is not a Map")}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,r){const i=this.configurationProperties[e],o=r?.value??i?.defaultDefaultValue;let a=n;if(s.Gv(t)&&(void 0!==i&&"object"===i.type||void 0===i&&(s.b0(o)||s.Gv(o)))){if(a=r?.source??new Map,!(a instanceof Map))return void console.error("defaultValueSource is not a Map");for(const r in t)n&&a.set(`${e}.${r}`,n);t={...s.Gv(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach((e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,n),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e,t=!0,n,r,i=3,o){i=s.z(e.scope)?i:e.scope;const a=e.properties;if(a)for(const e in a){const h=a[e];t&&validateProperty(e,h)?delete a[e]:(h.source=n,h.defaultDefaultValue=a[e].default,this.updatePropertyDefaultValue(e,h),x.test(e)?h.scope=void 0:(h.scope=s.z(h.scope)?i:h.scope,h.restricted=s.z(h.restricted)?!!r?.includes(e):h.restricted),!a[e].hasOwnProperty("included")||a[e].included?(this.configurationProperties[e]=a[e],a[e].policy?.name&&this.policyConfigurations.set(a[e].policy.name,e),!a[e].deprecationMessage&&a[e].markdownDeprecationMessage&&(a[e].deprecationMessage=a[e].markdownDeprecationMessage),o.add(e)):(this.excludedConfigurationProperties[e]=a[e],delete a[e]))}const h=e.allOf;if(h)for(const e of h)this.validateAndRegisterProperties(e,t,n,r,i,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const register=e=>{const t=e.properties;if(t)for(const e in t)this.updateSchema(e,t[e]);const n=e.allOf;n?.forEach(register)};register(e)}updateSchema(e,t){switch(u.properties[e]=t,t.scope){case 1:d.properties[e]=t;break;case 2:g.properties[e]=t;break;case 6:f.properties[e]=t;break;case 3:p.properties[e]=t;break;case 4:m.properties[e]=t;break;case 5:m.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:o.kg("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:o.kg("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:k};this.updatePropertyDefaultValue(t,n),u.properties[t]=n,d.properties[t]=n,g.properties[t]=n,f.properties[t]=n,p.properties[t]=n,m.properties[t]=n}}registerOverridePropertyPatternKey(){const e={type:"object",description:o.kg("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:o.kg("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:k};u.patternProperties[v]=e,d.patternProperties[v]=e,g.patternProperties[v]=e,f.patternProperties[v]=e,p.patternProperties[v]=e,m.patternProperties[v]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let r,i;!n||t.disallowConfigurationDefault&&n.source||(r=n.value,i=n.source),s.b0(r)&&(r=t.defaultDefaultValue,i=void 0),s.b0(r)&&(r=function getDefaultValue(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=r,t.defaultValueSource=i}};function validateProperty(e,t){return e.trim()?x.test(e)?o.kg("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==L.getConfigurationProperties()[e]?o.kg("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):t.policy?.name&&void 0!==L.getPolicyConfigurations().get(t.policy?.name)?o.kg("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,t.policy?.name,L.getPolicyConfigurations().get(t.policy?.name)):null:o.kg("config.property.empty","Cannot register an empty property")}l.O.add(c.Configuration,L)},27619(e,t,n){"use strict";n.d(t,{DR:()=>h,cj:()=>r,oc:()=>i});var r,i,s=n(66459),o=n(19746),a=n(82399);!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(r||(r={})),function(e){e.compare=function compare(e,t){return t-e};const t=Object.create(null);t[e.Error]=(0,o.kg)("sev.error","Error"),t[e.Warning]=(0,o.kg)("sev.warning","Warning"),t[e.Info]=(0,o.kg)("sev.info","Info"),e.toString=function toString(e){return t[e]||""},e.fromSeverity=function fromSeverity(t){switch(t){case s.A.Error:return e.Error;case s.A.Warning:return e.Warning;case s.A.Info:return e.Info;case s.A.Ignore:return e.Hint}},e.toSeverity=function toSeverity(t){switch(t){case e.Error:return s.A.Error;case e.Warning:return s.A.Warning;case e.Info:return s.A.Info;case e.Hint:return s.A.Ignore}}}(r||(r={})),function(e){const t="";function makeKeyOptionalMessage(e,n){const i=[t];return e.source?i.push(e.source.replace("","\\")):i.push(t),e.code?"string"==typeof e.code?i.push(e.code.replace("","\\")):i.push(e.code.value.replace("","\\")):i.push(t),void 0!==e.severity&&null!==e.severity?i.push(r.toString(e.severity)):i.push(t),e.message&&n?i.push(e.message.replace("","\\")):i.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?i.push(e.startLineNumber.toString()):i.push(t),void 0!==e.startColumn&&null!==e.startColumn?i.push(e.startColumn.toString()):i.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?i.push(e.endLineNumber.toString()):i.push(t),void 0!==e.endColumn&&null!==e.endColumn?i.push(e.endColumn.toString()):i.push(t),i.push(t),i.join("")}e.makeKey=function makeKey(e){return makeKeyOptionalMessage(e,!0)},e.makeKeyOptionalMessage=makeKeyOptionalMessage}(i||(i={}));const h=(0,a.u1)("markerService")},31540(e,t,n){"use strict";n.d(t,{f1:()=>ContextKeyEqualsExpr,M$:()=>ContextKeyExpr,fN:()=>v,N1:()=>RawContextKey,jQ:()=>expressionsAreEqualWithConstantSubstitution,M0:()=>implies});var r=n(63339),i=n(16844),s=n(94327),o=n(19746);function hintDidYouMean(...e){switch(e.length){case 1:return(0,o.kg)("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",e[0]);case 2:return(0,o.kg)("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",e[0],e[1]);case 3:return(0,o.kg)("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",e[0],e[1],e[2]);default:return}}const a=(0,o.kg)("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),h=(0,o.kg)("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class Scanner{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw(0,s.iH)(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static{this._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0))))}static{this._keywords=new Map([["not",14],["in",13],["false",12],["true",11]])}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(hintDidYouMean("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(hintDidYouMean("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(hintDidYouMean("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(r)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=Scanner._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(a):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(h);const r=this._input.charCodeAt(e);if(t)t=!1;else{if(47===r&&!n){e++;break}91===r?n=!0:92===r?t=!0:93===r&&(n=!1)}e++}for(;e<this._input.length&&Scanner._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const r=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:r,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}var l=n(82399);const c=new Map;c.set("false",!1),c.set("true",!0),c.set("isMac",r.zx),c.set("isLinux",r.j9),c.set("isWindows",r.uF),c.set("isWeb",r.HZ),c.set("isMacNative",r.zx&&!r.HZ),c.set("isEdge",r.UP),c.set("isFirefox",r.gm),c.set("isChrome",r.H8),c.set("isSafari",r.nr);const u=Object.prototype.hasOwnProperty,d={regexParsingWithErrorRecovery:!0},g=(0,o.kg)("contextkey.parser.error.emptyString","Empty context key expression"),f=(0,o.kg)("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),p=(0,o.kg)("contextkey.parser.error.noInAfterNot","'in' after 'not'."),m=(0,o.kg)("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),k=(0,o.kg)("contextkey.parser.error.unexpectedToken","Unexpected token"),_=(0,o.kg)("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),b=(0,o.kg)("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),C=(0,o.kg)("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");class Parser{static{this._parseError=new Error}constructor(e=d){this._config=e,this._scanner=new Scanner,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""!==e){this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const e=this._expr();if(!this._isAtEnd()){const e=this._peek(),t=17===e.type?_:void 0;throw this._parsingErrors.push({message:k,offset:e.offset,lexeme:Scanner.getLexeme(e),additionalInfo:t}),Parser._parseError}return e}catch(e){if(e!==Parser._parseError)throw e;return}}else this._parsingErrors.push({message:g,offset:0,lexeme:"",additionalInfo:f})}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return 1===e.length?e[0]:ContextKeyExpr.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return 1===e.length?e[0]:ContextKeyExpr.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),ContextKeyFalseExpr.INSTANCE;case 12:return this._advance(),ContextKeyTrueExpr.INSTANCE;case 0:{this._advance();const e=this._expr();return this._consume(1,m),e?.negate()}case 17:return this._advance(),ContextKeyNotExpr.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),ContextKeyExpr.true();case 12:return this._advance(),ContextKeyExpr.false();case 0:{this._advance();const e=this._expr();return this._consume(1,m),e}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const e=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);const n=e.lexeme,r=n.lastIndexOf("/"),i=r===n.length-1?void 0:this._removeFlagsGY(n.substring(r+1));let s;try{s=new RegExp(n.substring(1,r),i)}catch(t){throw this._errExpectedButGot("REGEX",e)}return ContextKeyRegexExpr.create(t,s)}switch(e.type){case 10:case 19:{const n=[e.lexeme];this._advance();let r=this._peek(),i=0;for(let t=0;t<e.lexeme.length;t++)40===e.lexeme.charCodeAt(t)?i++:41===e.lexeme.charCodeAt(t)&&i--;for(;!this._isAtEnd()&&15!==r.type&&16!==r.type;){switch(r.type){case 0:i++;break;case 1:i--;break;case 10:case 18:for(let t=0;t<r.lexeme.length;t++)40===r.lexeme.charCodeAt(t)?i++:41===e.lexeme.charCodeAt(t)&&i--}if(i<0)break;n.push(Scanner.getLexeme(r)),this._advance(),r=this._peek()}const s=n.join(""),o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let h;try{h=new RegExp(s.substring(1,o),a)}catch(t){throw this._errExpectedButGot("REGEX",e)}return ContextKeyExpr.regex(t,h)}case 18:{const n=e.lexeme;this._advance();let r=null;if(!(0,i.AV)(n)){const t=n.indexOf("/"),i=n.lastIndexOf("/");if(t!==i&&t>=0){const s=n.slice(t+1,i),o="i"===n[i+1]?"i":"";try{r=new RegExp(s,o)}catch(t){throw this._errExpectedButGot("REGEX",e)}}}if(null===r)throw this._errExpectedButGot("REGEX",e);return ContextKeyRegexExpr.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,p);const e=this._value();return ContextKeyExpr.notIn(t,e)}switch(this._peek().type){case 3:{this._advance();const e=this._value();if(18===this._previous().type)return ContextKeyExpr.equals(t,e);switch(e){case"true":return ContextKeyExpr.has(t);case"false":return ContextKeyExpr.not(t);default:return ContextKeyExpr.equals(t,e)}}case 4:{this._advance();const e=this._value();if(18===this._previous().type)return ContextKeyExpr.notEquals(t,e);switch(e){case"true":return ContextKeyExpr.not(t);case"false":return ContextKeyExpr.has(t);default:return ContextKeyExpr.notEquals(t,e)}}case 5:return this._advance(),ContextKeySmallerExpr.create(t,this._value());case 6:return this._advance(),ContextKeySmallerEqualsExpr.create(t,this._value());case 7:return this._advance(),ContextKeyGreaterExpr.create(t,this._value());case 8:return this._advance(),ContextKeyGreaterEqualsExpr.create(t,this._value());case 13:return this._advance(),ContextKeyExpr.in(t,this._value());default:return ContextKeyExpr.has(t)}}case 20:throw this._parsingErrors.push({message:b,offset:e.offset,lexeme:"",additionalInfo:C}),Parser._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const r=(0,o.kg)("contextkey.parser.error.expectedButGot","Expected: {0}\nReceived: '{1}'.",e,Scanner.getLexeme(t)),i=t.offset,s=Scanner.getLexeme(t);return this._parsingErrors.push({message:r,offset:i,lexeme:s,additionalInfo:n}),Parser._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}}class ContextKeyExpr{static false(){return ContextKeyFalseExpr.INSTANCE}static true(){return ContextKeyTrueExpr.INSTANCE}static has(e){return ContextKeyDefinedExpr.create(e)}static equals(e,t){return ContextKeyEqualsExpr.create(e,t)}static notEquals(e,t){return ContextKeyNotEqualsExpr.create(e,t)}static regex(e,t){return ContextKeyRegexExpr.create(e,t)}static in(e,t){return ContextKeyInExpr.create(e,t)}static notIn(e,t){return ContextKeyNotInExpr.create(e,t)}static not(e){return ContextKeyNotExpr.create(e)}static and(...e){return ContextKeyAndExpr.create(e,null,!0)}static or(...e){return ContextKeyOrExpr.create(e,null,!0)}static{this._parser=new Parser({regexParsingWithErrorRecovery:!1})}static deserialize(e){if(null==e)return;return this._parser.parse(e)}}function expressionsAreEqualWithConstantSubstitution(e,t){const n=e?e.substituteConstants():void 0,r=t?t.substituteConstants():void 0;return!n&&!r||!(!n||!r)&&n.equals(r)}function cmp(e,t){return e.cmp(t)}class ContextKeyFalseExpr{static{this.INSTANCE=new ContextKeyFalseExpr}constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ContextKeyTrueExpr.INSTANCE}}class ContextKeyTrueExpr{static{this.INSTANCE=new ContextKeyTrueExpr}constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return ContextKeyFalseExpr.INSTANCE}}class ContextKeyDefinedExpr{static create(e,t=null){const n=c.get(e);return"boolean"==typeof n?n?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyDefinedExpr(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=c.get(this.key);return"boolean"==typeof e?e?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotExpr.create(this.key,this)),this.negated}}class ContextKeyEqualsExpr{static create(e,t,n=null){if("boolean"==typeof t)return t?ContextKeyDefinedExpr.create(e,n):ContextKeyNotExpr.create(e,n);const r=c.get(e);if("boolean"==typeof r){return t===(r?"true":"false")?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE}return new ContextKeyEqualsExpr(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=c.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyInExpr{static create(e,t){return new ContextKeyInExpr(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):"string"==typeof n&&"object"==typeof t&&null!==t&&u.call(t,n)}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ContextKeyNotInExpr.create(this.key,this.valueKey)),this.negated}}class ContextKeyNotInExpr{static create(e,t){return new ContextKeyNotInExpr(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=ContextKeyInExpr.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class ContextKeyNotEqualsExpr{static create(e,t,n=null){if("boolean"==typeof t)return t?ContextKeyNotExpr.create(e,n):ContextKeyDefinedExpr.create(e,n);const r=c.get(e);if("boolean"==typeof r){return t===(r?"true":"false")?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE}return new ContextKeyNotEqualsExpr(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=c.get(this.key);if("boolean"==typeof e){const t=e?"true":"false";return this.value===t?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyNotExpr{static create(e,t=null){const n=c.get(e);return"boolean"==typeof n?n?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotExpr(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=c.get(this.key);return"boolean"==typeof e?e?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyDefinedExpr.create(this.key,this)),this.negated}}function withFloatOrStr(e,t){if("string"==typeof e){const t=parseFloat(e);isNaN(t)||(e=t)}return"string"==typeof e||"number"==typeof e?t(e):ContextKeyFalseExpr.INSTANCE}class ContextKeyGreaterExpr{static create(e,t,n=null){return withFloatOrStr(t,(t=>new ContextKeyGreaterExpr(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyGreaterEqualsExpr{static create(e,t,n=null){return withFloatOrStr(t,(t=>new ContextKeyGreaterEqualsExpr(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerExpr{static create(e,t,n=null){return withFloatOrStr(t,(t=>new ContextKeySmallerExpr(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerEqualsExpr{static create(e,t,n=null){return withFloatOrStr(t,(t=>new ContextKeySmallerEqualsExpr(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!=typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyRegexExpr{static create(e,t){return new ContextKeyRegexExpr(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotRegexExpr.create(this)),this.negated}}class ContextKeyNotRegexExpr{static create(e){return new ContextKeyNotRegexExpr(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function eliminateConstantsInArray(e){let t=null;for(let n=0,r=e.length;n<r;n++){const r=e[n].substituteConstants();if(e[n]!==r&&null===t){t=[];for(let r=0;r<n;r++)t[r]=e[r]}null!==t&&(t[n]=r)}return null===t?e:t}class ContextKeyAndExpr{static create(e,t,n){return ContextKeyAndExpr._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=cmp(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyAndExpr.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const r=[];let i=!1;for(const t of e)if(t)if(1!==t.type){if(0===t.type)return ContextKeyFalseExpr.INSTANCE;6!==t.type?r.push(t):r.push(...t.expr)}else i=!0;if(0===r.length&&i)return ContextKeyTrueExpr.INSTANCE;if(0!==r.length){if(1===r.length)return r[0];r.sort(cmp);for(let e=1;e<r.length;e++)r[e-1].equals(r[e])&&(r.splice(e,1),e--);if(1===r.length)return r[0];for(;r.length>1;){const e=r[r.length-1];if(9!==e.type)break;r.pop();const t=r.pop(),i=0===r.length,s=ContextKeyOrExpr.create(e.expr.map((e=>ContextKeyAndExpr.create([e,t],null,n))),null,i);s&&(r.push(s),r.sort(cmp))}if(1===r.length)return r[0];if(n){for(let e=0;e<r.length;e++)for(let t=e+1;t<r.length;t++)if(r[e].negate().equals(r[t]))return ContextKeyFalseExpr.INSTANCE;if(1===r.length)return r[0]}return new ContextKeyAndExpr(r,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}}class ContextKeyOrExpr{static create(e,t,n){return ContextKeyOrExpr._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=cmp(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyOrExpr.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let r=[],i=!1;if(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n)if(0!==n.type){if(1===n.type)return ContextKeyTrueExpr.INSTANCE;9!==n.type?r.push(n):r=r.concat(n.expr)}else i=!0}if(0===r.length&&i)return ContextKeyFalseExpr.INSTANCE;r.sort(cmp)}if(0!==r.length){if(1===r.length)return r[0];for(let e=1;e<r.length;e++)r[e-1].equals(r[e])&&(r.splice(e,1),e--);if(1===r.length)return r[0];if(n){for(let e=0;e<r.length;e++)for(let t=e+1;t<r.length;t++)if(r[e].negate().equals(r[t]))return ContextKeyTrueExpr.INSTANCE;if(1===r.length)return r[0]}return new ContextKeyOrExpr(r,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),r=[];for(const e of getTerminals(t))for(const t of getTerminals(n))r.push(ContextKeyAndExpr.create([e,t],null,!1));e.unshift(ContextKeyOrExpr.create(r,null,!1))}this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}}class RawContextKey extends ContextKeyDefinedExpr{static{this._info=[]}static all(){return RawContextKey._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,"object"==typeof n?RawContextKey._info.push({...n,key:e}):!0!==n&&RawContextKey._info.push({key:e,description:n,type:null!=t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ContextKeyEqualsExpr.create(this.key,e)}}const v=(0,l.u1)("contextKeyService");function cmp1(e,t){return e<t?-1:e>t?1:0}function cmp2(e,t,n,r){return e<n?-1:e>n?1:t<r?-1:t>r?1:0}function implies(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&allElementsIncluded(e.expr,t.expr);if(9===t.type){for(const n of t.expr)if(implies(e,n))return!0;return!1}if(6===e.type){if(6===t.type)return allElementsIncluded(t.expr,e.expr);for(const n of e.expr)if(implies(n,t))return!0;return!1}return e.equals(t)}function allElementsIncluded(e,t){let n=0,r=0;for(;n<e.length&&r<t.length;){const i=e[n].cmp(t[r]);if(i<0)return!1;0===i?(n++,r++):r++}return n===e.length}function getTerminals(e){return 9===e.type?e.expr:[e]}},32177(e,t,n){"use strict";n.d(t,{_:()=>TextModelPart});var r=n(10998);class TextModelPart extends r.jG{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}},33206(e,t,n){"use strict";n.d(t,{_:()=>FastTokenizer,ou:()=>Token,tk:()=>TextBufferTokenizer});var r=n(94327),i=n(15910),s=n(64651),o=n(34883),a=n(60756);class Token{constructor(e,t,n,r,i){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=i}}class TextBufferTokenizer{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new NonPeekableTextBufferTokenizer(this.textModel,this.bracketTokens),this._offset=o.Vp,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,o.qe)(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=(0,o.QB)(this._offset,e);const t=(0,o.l4)(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=(0,o.QB)(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class NonPeekableTextBufferTokenizer{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,o.sS)(e.length),e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,s=r.getCount();let a=null;if(this.lineTokenOffset<s){const h=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&h===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const l=0===i.x.getTokenType(h),c=i.x.containsBalancedBrackets(h),u=r.getEndOffset(this.lineTokenOffset);if(c&&l&&this.lineCharOffset<u){const e=r.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,u),n=this.bracketTokens.getSingleLanguageBracketTokens(e),i=n.regExpGlobal;if(i){i.lastIndex=0;const e=i.exec(t);e&&(a=n.getToken(e[0]),a&&(this.lineCharOffset+=e.index))}}if(n+=u-this.lineCharOffset,a){if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}return this.lineCharOffset+=(0,o.sS)(a.length),a}this.lineTokenOffset++,this.lineCharOffset=u}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3)break}if(n>1500)break}const r=(0,o.C7)(e,t,this.lineIdx,this.lineCharOffset);return new Token(r,0,-1,a.gV.getEmpty(),new s.yF(r))}}class FastTokenizer{constructor(e,t){this.text=e,this._offset=o.Vp,this.idx=0;const n=t.getRegExpStr(),r=n?new RegExp(n+"|\n","gi"):null,i=[];let h,l=0,c=0,u=0,d=0;const g=[];for(let e=0;e<60;e++)g.push(new Token((0,o.qe)(0,e),0,-1,a.gV.getEmpty(),new s.yF((0,o.qe)(0,e))));const f=[];for(let e=0;e<60;e++)f.push(new Token((0,o.qe)(1,e),0,-1,a.gV.getEmpty(),new s.yF((0,o.qe)(1,e))));if(r)for(r.lastIndex=0;null!==(h=r.exec(e));){const e=h.index,n=h[0];if("\n"===n)l++,c=e+1;else{if(u!==e){let t;if(d===l){const n=e-u;if(n<g.length)t=g[n];else{const e=(0,o.qe)(0,n);t=new Token(e,0,-1,a.gV.getEmpty(),new s.yF(e))}}else{const n=l-d,r=e-c;if(1===n&&r<f.length)t=f[r];else{const e=(0,o.qe)(n,r);t=new Token(e,0,-1,a.gV.getEmpty(),new s.yF(e))}}i.push(t)}i.push(t.getToken(n)),u=e+n.length,d=l}}const p=e.length;if(u!==p){const e=d===l?(0,o.qe)(0,p-u):(0,o.qe)(l-d,p-c);i.push(new Token(e,0,-1,a.gV.getEmpty(),new s.yF(e)))}this.length=(0,o.qe)(l,p-c),this.tokens=i}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new r.EM}}},34442(e,t,n){"use strict";n.d(t,{Bm:()=>_setRecomputeInitiallyAndOnChange,FB:()=>_setKeepObserved,FY:()=>observableValue,Lj:()=>ObservableValue,N2:()=>_setDerivedOpts,PO:()=>subtransaction,Rn:()=>transaction,X2:()=>disposableObservableValue,XL:()=>TransactionImpl,YY:()=>globalTransaction,ZK:()=>BaseObservable,fL:()=>asyncTransaction,zV:()=>ConvenientObservable});var r=n(8897),i=n(49855),s=n(34950);let o,a,h;function _setRecomputeInitiallyAndOnChange(e){o=e}function _setKeepObserved(e){a=e}function _setDerivedOpts(e){h=e}class ConvenientObservable{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=void 0===t?void 0:e,r=void 0===t?e:t;return h({owner:n,debugName:()=>{const e=(0,i.qQ)(r);if(void 0!==e)return e;const t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());return t?`${this.debugName}.${t[2]}`:n?void 0:`${this.debugName} (mapped)`},debugReferenceFn:r},(e=>r(this.read(e),e)))}flatten(){return h({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},(e=>this.read(e).read(e)))}recomputeInitiallyAndOnChange(e,t){return e.add(o(this,t)),this}keepObserved(e){return e.add(a(this)),this}}class BaseObservable extends ConvenientObservable{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&0===this.observers.size&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function transaction(e,t){const n=new TransactionImpl(e,t);try{e(n)}finally{n.finish()}}let l=3524==n.j?void 0:null;function globalTransaction(e){if(l)e(l);else{const t=new TransactionImpl(e,void 0);l=t;try{e(t)}finally{t.finish(),l=void 0}}}async function asyncTransaction(e,t){const n=new TransactionImpl(e,t);try{await e(n)}finally{n.finish()}}function subtransaction(e,t,n){e?t(e):transaction(t,n)}class TransactionImpl{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[],(0,s.tZ)()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,i.qQ)(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:n,observable:r}=e[t];n.endUpdate(r)}this.updatingObservers=null,(0,s.tZ)()?.handleEndTransaction()}}function observableValue(e,t){let n;return n="string"==typeof e?new i.nA(void 0,e,void 0):new i.nA(e,void 0,void 0),new ObservableValue(n,t,r.nx)}class ObservableValue extends BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}get(){return this._value}set(e,t,n){if(void 0===n&&this._equalityComparator(this._value,e))return;let r;t||(t=r=new TransactionImpl((()=>{}),(()=>`Setting ${this.debugName}`)));try{const r=this._value;this._setValue(e),(0,s.tZ)()?.handleObservableChanged(this,{oldValue:r,newValue:e,change:n,didChange:!0,hadValue:!0});for(const e of this.observers)t.updateObserver(e,this),e.handleChange(this,n)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function disposableObservableValue(e,t){let n;return n="string"==typeof e?new i.nA(void 0,e,void 0):new i.nA(e,void 0,void 0),new DisposableObservableValue(n,t,r.nx)}class DisposableObservableValue extends(3524==n.j?ObservableValue:null){_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}},34883(e,t,n){"use strict";n.d(t,{C7:()=>lengthDiff,MS:()=>lengthDiffNonNegative,QB:()=>lengthAdd,Qx:()=>lengthsToRange,VL:()=>positionToLength,Vh:()=>lengthIsZero,Vp:()=>o,eu:()=>lengthGetLineCount,l4:()=>lengthToObj,o0:()=>lengthGreaterThanEqual,pW:()=>sumLengths,qe:()=>toLength,rR:()=>lengthOfString,sS:()=>lengthGetColumnCountIfZeroLineCount,vr:()=>lengthLessThanEqual,wP:()=>lengthEquals,zG:()=>lengthLessThan});var r=n(16844),i=n(28061),s=n(58357);function lengthDiff(e,t,n,r){return e!==n?toLength(n-e,r):toLength(0,r-t)}const o=0;function lengthIsZero(e){return 0===e}const a=2**26;function toLength(e,t){return e*a+t}function lengthToObj(e){const t=e,n=Math.floor(t/a),r=t-n*a;return new s.W(n,r)}function lengthGetLineCount(e){return Math.floor(e/a)}function lengthGetColumnCountIfZeroLineCount(e){return e}function lengthAdd(e,t){let n=e+t;return t>=a&&(n-=e%a),n}function sumLengths(e,t){return e.reduce(((e,n)=>lengthAdd(e,t(n))),o)}function lengthEquals(e,t){return e===t}function lengthDiffNonNegative(e,t){const n=e,r=t;if(r-n<=0)return o;const i=Math.floor(n/a),s=Math.floor(r/a),h=r-s*a;if(i===s){return toLength(0,h-(n-i*a))}return toLength(s-i,h)}function lengthLessThan(e,t){return e<t}function lengthLessThanEqual(e,t){return e<=t}function lengthGreaterThanEqual(e,t){return e>=t}function positionToLength(e){return toLength(e.lineNumber-1,e.column-1)}function lengthsToRange(e,t){const n=e,r=Math.floor(n/a),s=n-r*a,o=t,h=Math.floor(o/a),l=o-h*a;return new i.Q(r+1,s+1,h+1,l+1)}function lengthOfString(e){const t=(0,r.uz)(e);return toLength(t.length-1,t[t.length-1].length)}},34950(e,t,n){"use strict";let r;function setLogger(e){r=e}function getLogger(){return r}n.d(t,{Br:()=>setLogger,jm:()=>ConsoleObservableLogger,tZ:()=>getLogger});class ConsoleObservableLogger{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(e){return function consoleTextToArgs(e){const t=new Array,n=[];let r="";function process(e){if("length"in e)for(const t of e)t&&process(t);else"text"in e?(r+=`%c${e.text}`,t.push(e.style),e.data&&n.push(...e.data)):"data"in e&&n.push(...e.data)}process(e);const i=[r,...t];return i.push(...n),i}([normalText(repeat("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[normalText(" "),styled(formatValue(e.oldValue,70),{color:"red",strikeThrough:!0}),normalText(" "),styled(formatValue(e.newValue,60),{color:"green"})]:[normalText(" (unchanged)")]:[normalText(" "),styled(formatValue(e.newValue,60),{color:"green"}),normalText(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([formatKind("observable value changed"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}formatChanges(e){if(0!==e.size)return styled(" (changed deps: "+[...e].map((e=>e.debugName)).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,r)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,r]))}handleDerivedRecomputed(e,t){const n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([formatKind("derived recomputed"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([formatKind("observable from event triggered"),styled(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,r)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,r]))}handleAutorunTriggered(e){const t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([formatKind("autorun"),styled(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();void 0===t&&(t=""),console.log(...this.textToConsoleArgs([formatKind("transaction"),styled(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}function normalText(e){return styled(e,{color:"black"})}function formatKind(e){return styled(function padStr(e,t){for(;e.length<t;)e+=" ";return e}(`${e}: `,10),{color:"black",bold:!0})}function styled(e,t={color:"black"}){const n={color:t.color};return t.strikeThrough&&(n["text-decoration"]="line-through"),t.bold&&(n["font-weight"]="bold"),{text:e,style:function objToCss(e){return Object.entries(e).reduce(((e,[t,n])=>`${e}${t}:${n};`),"")}(n)}}function formatValue(e,t){switch(typeof e){case"number":default:return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return null===e?"null":Array.isArray(e)?function formatArray(e,t){let n="[ ",r=!0;for(const i of e){if(r||(n+=", "),n.length-5>t){n+="...";break}r=!1,n+=`${formatValue(i,t-n.length)}`}return n+=" ]",n}(e,t):function formatObject(e,t){let n="{ ",r=!0;for(const[i,s]of Object.entries(e)){if(r||(n+=", "),n.length-5>t){n+="...";break}r=!1,n+=`${i}: ${formatValue(s,t-n.length)}`}return n+=" }",n}(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`}}function repeat(e,t){let n="";for(let r=1;r<=t;r++)n+=e;return n}},35320(e,t,n){"use strict";n.r(t),n.d(t,{ITreeSitterParserService:()=>r});const r=(0,n(82399).u1)("treeSitterParserService")},37042(e,t,n){"use strict";n.r(t),n.d(t,{ITextModelService:()=>r});const r=(0,n(82399).u1)("textModelService")},38148(e,t,n){"use strict";n.r(t),n.d(t,{SemanticTokensStylingService:()=>c});var r=n(10998),i=n(77922),s=n(89044),o=n(46441),a=n(9520),h=n(82891),l=n(66726),__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};let c=class SemanticTokensStylingService extends r.jG{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new a.SemanticTokensProviderStyling(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};c=__decorate([__param(0,s.Gy),__param(1,o.rr),__param(2,i.L)],c),(0,l.v)(h.ISemanticTokensStylingService,c,1)},38803(e,t,n){"use strict";n.d(t,{$D:()=>r,I_:()=>UndoRedoGroup,To:()=>ResourceEditStackSnapshot,Ym:()=>UndoRedoSource});const r=(0,n(82399).u1)("undoRedoService");class ResourceEditStackSnapshot{constructor(e,t){this.resource=e,this.elements=t}}class UndoRedoGroup{static{this._ID=0}constructor(){this.id=UndoRedoGroup._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static{this.None=new UndoRedoGroup}}class UndoRedoSource{static{this._ID=0}constructor(){this.id=UndoRedoSource._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}static{this.None=new UndoRedoSource}}},40931(e,t,n){"use strict";n.r(t),n.d(t,{DefaultModelSHA1Computer:()=>DefaultModelSHA1Computer,ModelService:()=>b});var r,i=n(2106),s=n(10998),o=n(63339),a=n(11907),h=n(12590),l=n(54957),c=n(41504),u=n(85753),d=n(38803),g=n(22344),f=n(54296),p=n(13072),m=n(71386),k=n(82399),__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};function MODEL_ID(e){return e.toString()}class ModelData{constructor(e,t,n){this.model=e,this._modelEventListeners=new s.Cm,this.model=e,this._modelEventListeners.add(e.onWillDispose((()=>t(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((t=>n(e,t))))}dispose(){this._modelEventListeners.dispose()}}const _=o.j9||o.zx?1:2;class DisposedModelInfo{constructor(e,t,n,r,i,s,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=i,this.sha1=s,this.versionId=o,this.alternativeVersionId=a}}let b=class ModelService extends s.jG{static{r=this}static{this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520}constructor(e,t,n,r){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=r,this._onModelAdded=this._register(new i.vl),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new i.vl),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new i.vl),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((e=>this._updateModelOptions(e)))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let n=h.R.tabSize;if(e.editor&&void 0!==e.editor.tabSize){const t=parseInt(e.editor.tabSize,10);isNaN(t)||(n=t),n<1&&(n=1)}let r="tabSize";if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const t=parseInt(e.editor.indentSize,10);isNaN(t)||(r=Math.max(t,1))}let i=h.R.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(i="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let s=_;const o=e.eol;"\r\n"===o?s=2:"\n"===o&&(s=1);let a=h.R.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(a="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let l=h.R.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(l="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let c=h.R.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(c="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));let u=h.R.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&"object"==typeof e.editor.bracketPairColorization&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:r,insertSpaces:i,detectIndentation:l,defaultEOL:s,trimAutoWhitespace:a,largeFileOptimizations:c,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&"string"==typeof n&&"auto"!==n?n:3===o.OS||2===o.OS?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e}getCreationOptions(e,t,n){const i="string"==typeof e?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[i+t];if(!s){const e=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),o=this._getEOL(t,i);s=r._readModelOptions({editor:e,eol:o},n),this._modelCreationOptionsByLanguageAndResource[i+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let i=0,s=n.length;i<s;i++){const s=n[i],o=this._models[s],a=o.model.getLanguageId(),h=o.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:a,resource:h})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:a,resource:h}))continue;const l=t[a+h],c=this.getCreationOptions(a,h,o.model.isForSimpleWidget);r._setModelOptionsForModel(o.model,c,l)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&(0,m.aI)(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(MODEL_ID(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(MODEL_ID(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(MODEL_ID(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||t.push(e)})),t.sort(((e,t)=>e.time-t.time));t.length>0&&this._disposedModelsHeapSize>e;){const e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){const i=this.getCreationOptions(t,n,r),s=this._instantiationService.createInstance(a.Bz,e,t,i,n);if(n&&this._disposedModels.has(MODEL_ID(n))){const e=this._removeDisposedModel(n),t=this._undoRedoService.getElements(n),r=this._getSHA1Computer(),i=!!r.canComputeSHA1(s)&&r.computeSHA1(s)===e.sha1;if(i||e.sharesUndoRedoStack){for(const e of t.past)(0,f.Th)(e)&&e.matchesResource(n)&&e.setModel(s);for(const e of t.future)(0,f.Th)(e)&&e.matchesResource(n)&&e.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,(e=>(0,f.Th)(e)&&e.matchesResource(n))),i&&(s._overwriteVersionId(e.versionId),s._overwriteAlternativeVersionId(e.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const o=MODEL_ID(s.uri);if(this._models[o])throw new Error("ModelService: Cannot add model because it already exists!");const h=new ModelData(s,(e=>this._onWillDispose(e)),((e,t)=>this._onDidChangeLanguage(e,t)));return this._models[o]=h,h}createModel(e,t,n,r=!1){let i;return i=t?this._createModelData(e,t,n,r):this._createModelData(e,l.vH,n,r),this._onModelAdded.fire(i.model),i.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=MODEL_ID(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===p.ny.file||e.scheme===p.ny.vscodeRemote||e.scheme===p.ny.vscodeUserData||e.scheme===p.ny.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){const t=MODEL_ID(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,o=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(const n of t.past)(0,f.Th)(n)&&n.matchesResource(e.uri)&&(s=!0,o+=n.heapSize(e.uri),n.setModel(e.uri));for(const n of t.future)(0,f.Th)(n)&&n.matchesResource(e.uri)&&(s=!0,o+=n.heapSize(e.uri),n.setModel(e.uri))}}const a=r.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,h=this._getSHA1Computer();if(s)if(i||!(o>a)&&h.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,(t=>(0,f.Th)(t)&&t.matchesResource(e.uri))),this._insertDisposedModel(new DisposedModelInfo(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,o,h.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else if(!i){const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);r._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new DefaultModelSHA1Computer}};b=r=__decorate([__param(0,u.pG),__param(1,c.ITextResourcePropertiesService),__param(2,d.$D),__param(3,k._Y)],b);class DefaultModelSHA1Computer{static{this.MAX_MODEL_SIZE=10485760}canComputeSHA1(e){return e.getValueLength()<=DefaultModelSHA1Computer.MAX_MODEL_SIZE}computeSHA1(e){const t=new g.v7,n=e.createSnapshot();let r;for(;r=n.read();)t.update(r);return t.digest()}}},41504(e,t,n){"use strict";n.r(t),n.d(t,{ITextResourceConfigurationService:()=>i,ITextResourcePropertiesService:()=>s});var r=n(82399);const i=(0,r.u1)("textResourceConfigurationService"),s=(0,r.u1)("textResourcePropertiesService")},42802(e,t,n){"use strict";n.d(t,{$l:()=>readUInt16LE,Gs:()=>writeUInt8,MB:()=>VSBuffer,Sw:()=>writeUInt32BE,bb:()=>readUInt32BE,gN:()=>writeUInt16LE,pJ:()=>readUInt8});var r=n(63946),i=n(48287).hp;const s=void 0!==i;new r.d((()=>new Uint8Array(256)));let o;class VSBuffer{static wrap(e){return s&&!i.isBuffer(e)&&(e=i.from(e.buffer,e.byteOffset,e.byteLength)),new VSBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return s?this.buffer.toString():(o||(o=new TextDecoder),o.decode(this.buffer))}}function readUInt16LE(e,t){return(e[t+0]|0)>>>0|e[t+1]<<8>>>0}function writeUInt16LE(e,t,n){e[n+0]=255&t,t>>>=8,e[n+1]=255&t}function readUInt32BE(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}function writeUInt32BE(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}function readUInt8(e,t){return e[t]}function writeUInt8(e,t,n){e[n]=t}},45628(e,t,n){"use strict";n.r(t)},46441(e,t,n){"use strict";n.d(t,{$b:()=>a,Cr:()=>ConsoleLogger,Dk:()=>MultiplexLogger,rr:()=>o});var r=n(2106),i=n(10998),s=n(31540);const o=(0,n(82399).u1)("logService");var a;!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(a||(a={}));const h=a.Info;class AbstractLogger extends i.jG{constructor(){super(...arguments),this.level=h,this._onDidChangeLogLevel=this._register(new r.vl),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==a.Off&&this.level<=e}}class ConsoleLogger extends AbstractLogger{constructor(e=h,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(a.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(a.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(a.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(a.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(a.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class MultiplexLogger extends AbstractLogger{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}new s.N1("logLevel",function LogLevelToString(e){switch(e){case a.Trace:return"trace";case a.Debug:return"debug";case a.Info:return"info";case a.Warning:return"warn";case a.Error:return"error";case a.Off:return"off"}}(a.Info))},47132(e,t,n){"use strict";n.d(t,{M:()=>combineTextEditInfos});var r=n(13338),i=n(22994),s=n(34883);function combineTextEditInfos(e,t){if(0===e.length)return t;if(0===t.length)return e;const n=new r.j3(toLengthMapping(e)),o=toLengthMapping(t);o.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let a=n.dequeue();function nextS0ToS1MapWithS1LengthOf(e){if(void 0===e){const e=n.takeWhile((e=>!0))||[];return a&&e.unshift(a),e}const t=[];for(;a&&!(0,s.Vh)(e);){const[r,i]=a.splitAt(e);t.push(r),e=(0,s.MS)(r.lengthAfter,e),a=i??n.dequeue()}return(0,s.Vh)(e)||t.push(new LengthMapping(!1,e,e)),t}const h=[];function pushEdit(e,t,n){if(h.length>0&&(0,s.wP)(h[h.length-1].endOffset,e)){const e=h[h.length-1];h[h.length-1]=new i.c(e.startOffset,t,(0,s.QB)(e.newLength,n))}else h.push({startOffset:e,endOffset:t,newLength:n})}let l=s.Vp;for(const e of o){const t=nextS0ToS1MapWithS1LengthOf(e.lengthBefore);if(e.modified){const n=(0,s.pW)(t,(e=>e.lengthBefore)),r=(0,s.QB)(l,n);pushEdit(l,r,e.lengthAfter),l=r}else for(const e of t){const t=l;l=(0,s.QB)(l,e.lengthBefore),e.modified&&pushEdit(t,l,e.lengthAfter)}}return h}class LengthMapping{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=(0,s.MS)(e,this.lengthAfter);return(0,s.wP)(t,s.Vp)?[this,void 0]:this.modified?[new LengthMapping(this.modified,this.lengthBefore,e),new LengthMapping(this.modified,s.Vp,t)]:[new LengthMapping(this.modified,e,e),new LengthMapping(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${(0,s.l4)(this.lengthBefore)} -> ${(0,s.l4)(this.lengthAfter)}`}}function toLengthMapping(e){const t=[];let n=s.Vp;for(const r of e){const e=(0,s.MS)(n,r.startOffset);(0,s.Vh)(e)||t.push(new LengthMapping(!1,e,e));const i=(0,s.MS)(r.startOffset,r.endOffset);t.push(new LengthMapping(!0,i,r.newLength)),n=r.endOffset}return t}},47614(e,t,n){var r={"./editorBaseApi":93059,"./editorBaseApi.js":93059,"./editorSimpleWorker":90735,"./editorSimpleWorker.js":90735,"./editorWorker":90304,"./editorWorker.js":90304,"./editorWorkerHost":96358,"./editorWorkerHost.js":96358,"./findSectionHeaders":99307,"./findSectionHeaders.js":99307,"./getIconClasses":78148,"./getIconClasses.js":78148,"./languageFeatureDebounce":12060,"./languageFeatureDebounce.js":12060,"./languageFeatures":52230,"./languageFeatures.js":52230,"./languageFeaturesService":81197,"./languageFeaturesService.js":81197,"./languageService":83930,"./languageService.js":83930,"./languagesAssociations":55996,"./languagesAssociations.js":55996,"./languagesRegistry":66995,"./languagesRegistry.js":66995,"./markerDecorations":80886,"./markerDecorations.js":80886,"./markerDecorationsService":90011,"./markerDecorationsService.js":90011,"./model":64830,"./model.js":64830,"./modelService":40931,"./modelService.js":40931,"./resolverService":37042,"./resolverService.js":37042,"./semanticTokensDto":19376,"./semanticTokensDto.js":19376,"./semanticTokensProviderStyling":9520,"./semanticTokensProviderStyling.js":9520,"./semanticTokensStyling":82891,"./semanticTokensStyling.js":82891,"./semanticTokensStylingService":38148,"./semanticTokensStylingService.js":38148,"./textModelSync/textModelSync.impl":75456,"./textModelSync/textModelSync.impl.js":75456,"./textModelSync/textModelSync.protocol":45628,"./textModelSync/textModelSync.protocol.js":45628,"./textResourceConfiguration":41504,"./textResourceConfiguration.js":41504,"./treeSitterParserService":35320,"./treeSitterParserService.js":35320,"./treeViewsDnd":2603,"./treeViewsDnd.js":2603,"./treeViewsDndService":26756,"./treeViewsDndService.js":26756,"./unicodeTextModelHighlighter":49887,"./unicodeTextModelHighlighter.js":49887};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=47614},48287(e,t,n){"use strict";const r=n(67526),i=n(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=Buffer,t.IS=50;const o=2147483647;function createBuffer(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer.prototype),t}function Buffer(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,n)}function from(e,t,n){if("string"==typeof e)return function fromString(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|byteLength(e,t);let r=createBuffer(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function fromArrayView(e){if(isInstance(e,Uint8Array)){const t=new Uint8Array(e);return fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return Buffer.from(r,t,n);const i=function fromObject(e){if(Buffer.isBuffer(e)){const t=0|checked(e.length),n=createBuffer(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e);if("Buffer"===e.type&&Array.isArray(e.data))return fromArrayLike(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const t=e.length<0?0:0|checked(e.length),n=createBuffer(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function fromArrayBuffer(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Buffer.prototype),r}function checked(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return r?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),numberIsNaN(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){let s,o=1,a=e.length,h=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,h/=2,n/=2}function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let r=-1;for(s=n;s<a;s++)if(read(e,s)===read(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===h)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+h>a&&(n=a-h),s=n;s>=0;s--){let n=!0;for(let r=0;r<h;r++)if(read(e,s+r)!==read(t,r)){n=!1;break}if(n)return s}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=t.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(numberIsNaN(r))return o;e[n+o]=r}return o}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(function asciiToBytes(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(function utf16leToBytes(e,t){let n,r,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,a,h;switch(o){case 1:t<128&&(s=t);break;case 2:n=e[i+1],128==(192&n)&&(h=(31&t)<<6|63&n,h>127&&(s=h));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(h=(15&t)<<12|(63&n)<<6|63&r,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(h=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function decodeCodePointsArray(e){const t=e.length;if(t<=a)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=a));return n}(r)}Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,t,n){return from(e,t,n)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,t,n){return function alloc(e,t,n){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof n?createBuffer(e).fill(t,n):createBuffer(e).fill(t):createBuffer(e)}(e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function isBuffer(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function compare(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=Buffer.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(isInstance(t,Uint8Array))i+t.length>r.length?(Buffer.isBuffer(t)||(t=Buffer.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!Buffer.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(Buffer.prototype[s]=Buffer.prototype.inspect),Buffer.prototype.compare=function compare(e,t,n,r,i){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const a=Math.min(s,o),h=this.slice(r,i),l=e.slice(t,n);for(let e=0;e<a;++e)if(h[e]!==l[e]){s=h[e],o=l[e];break}return s<o?-1:o<s?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const a=4096;function asciiSlice(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=c[e[r]];return i}function utf16leSlice(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,s){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,t,n,r,i){checkIntBI(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function wrtBigUInt64BE(e,t,n,r,i){checkIntBI(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function checkIEEE754(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,s){return t=+t,n>>>=0,s||checkIEEE754(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,s){return t=+t,n>>>=0,s||checkIEEE754(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function slice(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,Buffer.prototype),r},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function readUInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod((function readBigUInt64LE(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=defineBigIntMethod((function readBigUInt64BE(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),Buffer.prototype.readIntLE=function readIntLE(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function readInt8(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){e>>>=0,t||checkOffset(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){e>>>=0,t||checkOffset(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod((function readBigInt64LE(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer.prototype.readBigInt64BE=defineBigIntMethod((function readBigInt64BE(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),Buffer.prototype.readFloatLE=function readFloatLE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return e>>>=0,t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return e>>>=0,t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){checkInt(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){checkInt(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod((function writeBigUInt64LE(e,t=0){return wrtBigUInt64LE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod((function writeBigUInt64BE(e,t=0){return wrtBigUInt64BE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}let i=0,s=1,o=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod((function writeBigInt64LE(e,t=0){return wrtBigUInt64LE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=defineBigIntMethod((function writeBigInt64BE(e,t=0){return wrtBigUInt64BE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,r){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Buffer.prototype.fill=function fill(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const s=Buffer.isBuffer(e)?e:Buffer.from(e,r),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%o]}return this};const h={};function E(e,t,n){h[e]=class NodeError extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function checkIntBI(e,t,n,r,i,s){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new h.ERR_OUT_OF_RANGE("value",i,e)}!function checkBounds(e,t,n){validateNumber(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||boundsError(t,e.length-(n+1))}(r,i,s)}function validateNumber(e,t){if("number"!=typeof e)throw new h.ERR_INVALID_ARG_TYPE(t,"number",e)}function boundsError(e,t,n){if(Math.floor(e)!==e)throw validateNumber(e,n),new h.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new h.ERR_BUFFER_OUT_OF_BOUNDS;throw new h.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),E("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),E("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=addNumericalSeparator(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=addNumericalSeparator(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const l=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,t){let n;t=t||1/0;const r=e.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function base64ToBytes(e){return r.toByteArray(function base64clean(e){if((e=(e=e.split("=")[0]).trim().replace(l,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}const c=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}},48295(e,t,n){"use strict";n.d(t,{A3:()=>S,AQ:()=>H,Am:()=>w,As:()=>O,BD:()=>ee,Bo:()=>Z,CM:()=>y,D0:()=>l,Ek:()=>M,H0:()=>I,I2:()=>Y,IW:()=>te,If:()=>X,JB:()=>D,L0:()=>f,Mf:()=>h,P1:()=>oe,Pe:()=>ie,Qt:()=>m,WD:()=>se,WS:()=>re,WY:()=>ae,Xr:()=>R,aZ:()=>U,bB:()=>ne,hz:()=>v,je:()=>d,kG:()=>a,kM:()=>c,l5:()=>G,lQ:()=>q,n4:()=>J,ob:()=>C,ow:()=>x,s7:()=>K,sC:()=>u,sH:()=>$,sN:()=>W,ss:()=>j,tK:()=>T,tp:()=>B,vP:()=>L,vV:()=>b,vp:()=>z,w4:()=>p,we:()=>g,x9:()=>N,yI:()=>V,yw:()=>F,zp:()=>Q});var r=n(19746),i=n(94901),s=n(70559),o=n(89044);const a=(0,s.x1A)("editor.lineHighlightBackground",null,r.kg("lineHighlight","Background color for the highlight of line at the cursor position.")),h=(0,s.x1A)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:s.b1q},r.kg("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),l=((0,s.x1A)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},r.kg("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),(0,s.x1A)("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:s.buw,hcLight:s.buw},r.kg("rangeHighlightBorder","Background color of the border around highlighted ranges.")),(0,s.x1A)("editor.symbolHighlightBackground",{dark:s.Ubg,light:s.Ubg,hcDark:null,hcLight:null},r.kg("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),(0,s.x1A)("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:s.buw,hcLight:s.buw},r.kg("symbolHighlightBorder","Background color of the border around highlighted symbols.")),(0,s.x1A)("editorCursor.foreground",{dark:"#AEAFAD",light:i.Q1.black,hcDark:i.Q1.white,hcLight:"#0F4A85"},r.kg("caret","Color of the editor cursor."))),c=(0,s.x1A)("editorCursor.background",null,r.kg("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),u=(0,s.x1A)("editorMultiCursor.primary.foreground",l,r.kg("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),d=(0,s.x1A)("editorMultiCursor.primary.background",c,r.kg("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),g=(0,s.x1A)("editorMultiCursor.secondary.foreground",l,r.kg("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),f=(0,s.x1A)("editorMultiCursor.secondary.background",c,r.kg("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),p=(0,s.x1A)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},r.kg("editorWhitespaces","Color of whitespace characters in the editor.")),m=(0,s.x1A)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:i.Q1.white,hcLight:"#292929"},r.kg("editorLineNumbers","Color of editor line numbers.")),k=(0,s.x1A)("editorIndentGuide.background",p,r.kg("editorIndentGuides","Color of the editor indentation guides."),!1,r.kg("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),_=(0,s.x1A)("editorIndentGuide.activeBackground",p,r.kg("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,r.kg("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),b=(0,s.x1A)("editorIndentGuide.background1",k,r.kg("editorIndentGuides1","Color of the editor indentation guides (1).")),C=(0,s.x1A)("editorIndentGuide.background2","#00000000",r.kg("editorIndentGuides2","Color of the editor indentation guides (2).")),v=(0,s.x1A)("editorIndentGuide.background3","#00000000",r.kg("editorIndentGuides3","Color of the editor indentation guides (3).")),x=(0,s.x1A)("editorIndentGuide.background4","#00000000",r.kg("editorIndentGuides4","Color of the editor indentation guides (4).")),L=(0,s.x1A)("editorIndentGuide.background5","#00000000",r.kg("editorIndentGuides5","Color of the editor indentation guides (5).")),y=(0,s.x1A)("editorIndentGuide.background6","#00000000",r.kg("editorIndentGuides6","Color of the editor indentation guides (6).")),I=(0,s.x1A)("editorIndentGuide.activeBackground1",_,r.kg("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),w=(0,s.x1A)("editorIndentGuide.activeBackground2","#00000000",r.kg("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),T=(0,s.x1A)("editorIndentGuide.activeBackground3","#00000000",r.kg("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),S=(0,s.x1A)("editorIndentGuide.activeBackground4","#00000000",r.kg("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),B=(0,s.x1A)("editorIndentGuide.activeBackground5","#00000000",r.kg("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),O=(0,s.x1A)("editorIndentGuide.activeBackground6","#00000000",r.kg("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),A=(0,s.x1A)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:s.buw,hcLight:s.buw},r.kg("editorActiveLineNumber","Color of editor active line number"),!1,r.kg("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),D=((0,s.x1A)("editorLineNumber.activeForeground",A,r.kg("editorActiveLineNumber","Color of editor active line number")),(0,s.x1A)("editorLineNumber.dimmedForeground",null,r.kg("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."))),N=((0,s.x1A)("editorRuler.foreground",{dark:"#5A5A5A",light:i.Q1.lightgrey,hcDark:i.Q1.white,hcLight:"#292929"},r.kg("editorRuler","Color of the editor rulers.")),(0,s.x1A)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},r.kg("editorCodeLensForeground","Foreground color of editor CodeLens")),(0,s.x1A)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},r.kg("editorBracketMatchBackground","Background color behind matching brackets")),(0,s.x1A)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:s.b1q,hcLight:s.b1q},r.kg("editorBracketMatchBorder","Color for matching brackets boxes")),(0,s.x1A)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},r.kg("editorOverviewRulerBorder","Color of the overview ruler border."))),R=(0,s.x1A)("editorOverviewRuler.background",null,r.kg("editorOverviewRulerBackground","Background color of the editor overview ruler.")),F=((0,s.x1A)("editorGutter.background",s.YtV,r.kg("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),(0,s.x1A)("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:i.Q1.fromHex("#fff").transparent(.8),hcLight:s.b1q},r.kg("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),(0,s.x1A)("editorUnnecessaryCode.opacity",{dark:i.Q1.fromHex("#000a"),light:i.Q1.fromHex("#0007"),hcDark:null,hcLight:null},r.kg("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."))),M=((0,s.x1A)("editorGhostText.border",{dark:null,light:null,hcDark:i.Q1.fromHex("#fff").transparent(.8),hcLight:i.Q1.fromHex("#292929").transparent(.8)},r.kg("editorGhostTextBorder","Border color of ghost text in the editor.")),(0,s.x1A)("editorGhostText.foreground",{dark:i.Q1.fromHex("#ffffff56"),light:i.Q1.fromHex("#0007"),hcDark:null,hcLight:null},r.kg("editorGhostTextForeground","Foreground color of the ghost text in the editor."))),P=((0,s.x1A)("editorGhostText.background",null,r.kg("editorGhostTextBackground","Background color of the ghost text in the editor.")),new i.Q1(new i.bU(0,122,204,.6))),z=(0,s.x1A)("editorOverviewRuler.rangeHighlightForeground",P,r.kg("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),V=(0,s.x1A)("editorOverviewRuler.errorForeground",{dark:new i.Q1(new i.bU(255,18,18,.7)),light:new i.Q1(new i.bU(255,18,18,.7)),hcDark:new i.Q1(new i.bU(255,50,50,1)),hcLight:"#B5200D"},r.kg("overviewRuleError","Overview ruler marker color for errors.")),U=(0,s.x1A)("editorOverviewRuler.warningForeground",{dark:s.Hng,light:s.Hng,hcDark:s.Stt,hcLight:s.Stt},r.kg("overviewRuleWarning","Overview ruler marker color for warnings.")),H=(0,s.x1A)("editorOverviewRuler.infoForeground",{dark:s.pOz,light:s.pOz,hcDark:s.IIb,hcLight:s.IIb},r.kg("overviewRuleInfo","Overview ruler marker color for infos.")),W=(0,s.x1A)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},r.kg("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),q=(0,s.x1A)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},r.kg("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),j=(0,s.x1A)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},r.kg("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),G=(0,s.x1A)("editorBracketHighlight.foreground4","#00000000",r.kg("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),$=(0,s.x1A)("editorBracketHighlight.foreground5","#00000000",r.kg("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Q=(0,s.x1A)("editorBracketHighlight.foreground6","#00000000",r.kg("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),K=(0,s.x1A)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new i.Q1(new i.bU(255,18,18,.8)),light:new i.Q1(new i.bU(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},r.kg("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),J=(0,s.x1A)("editorBracketPairGuide.background1","#00000000",r.kg("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Y=(0,s.x1A)("editorBracketPairGuide.background2","#00000000",r.kg("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Z=(0,s.x1A)("editorBracketPairGuide.background3","#00000000",r.kg("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),X=(0,s.x1A)("editorBracketPairGuide.background4","#00000000",r.kg("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),ee=(0,s.x1A)("editorBracketPairGuide.background5","#00000000",r.kg("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),te=(0,s.x1A)("editorBracketPairGuide.background6","#00000000",r.kg("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),ne=(0,s.x1A)("editorBracketPairGuide.activeBackground1","#00000000",r.kg("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),re=(0,s.x1A)("editorBracketPairGuide.activeBackground2","#00000000",r.kg("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),ie=(0,s.x1A)("editorBracketPairGuide.activeBackground3","#00000000",r.kg("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),se=(0,s.x1A)("editorBracketPairGuide.activeBackground4","#00000000",r.kg("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),oe=(0,s.x1A)("editorBracketPairGuide.activeBackground5","#00000000",r.kg("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),ae=(0,s.x1A)("editorBracketPairGuide.activeBackground6","#00000000",r.kg("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));(0,s.x1A)("editorUnicodeHighlight.border",s.Hng,r.kg("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),(0,s.x1A)("editorUnicodeHighlight.background",s.whs,r.kg("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));(0,o.zy)(((e,t)=>{const n=e.getColor(s.YtV),r=e.getColor(a),i=r&&!r.isTransparent()?r:n;i&&t.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)}))},49550(e,t,n){"use strict";var r;n.d(t,{GB:()=>AutoClosingPairs,i3:()=>StandardAutoClosingPairConditional,l:()=>r}),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(r||(r={}));class StandardAutoClosingPairConditional{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++){switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(0===e.getTokenCount())return!0;const n=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(n);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const e=String.fromCharCode(n);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class AutoClosingPairs{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)appendEntry(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),appendEntry(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),appendEntry(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),appendEntry(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&appendEntry(this.autoClosingPairsCloseSingleChar,t.close,t)}}function appendEntry(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}},49855(e,t,n){"use strict";n.d(t,{nA:()=>DebugNameData,qQ:()=>getFunctionName});class DebugNameData{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return function getDebugName(e,t){const n=i.get(e);if(n)return n;const a=function computeDebugName(e,t){const n=i.get(e);if(n)return n;const r=t.owner?function formatOwner(e){const t=o.get(e);if(t)return t;const n=function getClassName(e){const t=e.constructor;if(t)return t.name;return"Object"}(e);let r=s.get(n)??0;r++,s.set(n,r);const i=1===r?n:`${n}#${r}`;return o.set(e,i),i}(t.owner)+".":"";let a;const h=t.debugNameSource;if(void 0!==h){if("function"!=typeof h)return r+h;if(a=h(),void 0!==a)return r+a}const l=t.referenceFn;if(void 0!==l&&(a=getFunctionName(l),void 0!==a))return r+a;if(void 0!==t.owner){const n=function findKey(e,t){for(const n in e)if(e[n]===t)return n;return}(t.owner,e);if(void 0!==n)return r+n}return}(e,t);if(a){let t=r.get(a)??0;t++,r.set(a,t);const n=1===t?a:`${a}#${t}`;return i.set(e,n),n}return}(e,this)}}const r=new Map,i=new WeakMap;const s=new Map,o=new WeakMap;function getFunctionName(e){const t=e.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),r=n?n[1]:void 0;return r?.trim()}},50969(e,t,n){"use strict";function computeIndentLevel(e,t){let n=0,r=0;const i=e.length;for(;r<i;){const i=e.charCodeAt(r);if(32===i)n++;else{if(9!==i)break;n=n-n%t+t}r++}return r===i?-1:n}n.d(t,{G:()=>computeIndentLevel})},51460(e,t,n){"use strict";n.d(t,{F:()=>s});var r=n(2106),i=n(67167);const s={JSONContribution:"base.contributions.json"};const o=new class JSONContributionRegistry{constructor(){this._onDidChangeSchema=new r.vl,this.schemasById={}}registerSchema(e,t){this.schemasById[function normalizeId(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};i.O.add(s.JSONContribution,o)},52230(e,t,n){"use strict";n.r(t),n.d(t,{ILanguageFeaturesService:()=>r});const r=(0,n(82399).u1)("ILanguageFeaturesService")},52394(e,t,n){"use strict";n.d(t,{JZ:()=>_,Cw:()=>getIndentationAtPosition});var r=n(2106),i=n(10998),s=n(16844),o=n(18782),a=n(49550);class CharacterPairSupport{static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t"}static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t"}constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new a.i3(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new a.i3({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new a.i3({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes="string"==typeof e.autoCloseBefore?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"==typeof e.autoCloseBefore?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}var h=n(13338),l=n(19184),c=n(1804);class BracketElectricCharacterSupport{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const t=n.charAt(n.length-1);e.push(t)}return(0,h.dM)(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const r=t.findTokenIndexAtOffset(n-1);if((0,l.Yo)(t.getStandardTokenType(r)))return null;const i=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,o=c.Fu.findPrevBracketInRange(i,1,s,0,s.length);if(!o)return null;const a=s.substring(o.startColumn-1,o.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[a])return null;const h=t.getActualLineContentBefore(o.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:a}:null}}function resetGlobalRegex(e){return e.global&&(e.lastIndex=0),!0}class IndentRulesSupport{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&resetGlobalRegex(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&resetGlobalRegex(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&resetGlobalRegex(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&resetGlobalRegex(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}var u=n(94327);class OnEnterSupport{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=OnEnterSupport._createOpenBracketRegExp(e[0]),n=OnEnterSupport._createCloseBracketRegExp(e[1]);t&&n&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:n})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let e=0,i=this._regExpRules.length;e<i;e++){const i=this._regExpRules[e];if([{reg:i.beforeText,text:n},{reg:i.afterText,text:r},{reg:i.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return i.action}if(e>=2&&n.length>0&&r.length>0)for(let e=0,t=this._brackets.length;e<t;e++){const t=this._brackets[e];if(t.openRegExp.test(n)&&t.closeRegExp.test(r))return{indentAction:a.l.IndentOutdent}}if(e>=2&&n.length>0)for(let e=0,t=this._brackets.length;e<t;e++){if(this._brackets[e].openRegExp.test(n))return{indentAction:a.l.Indent}}return null}static _createOpenBracketRegExp(e){let t=s.bm(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",OnEnterSupport._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=s.bm(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,OnEnterSupport._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return(0,u.dz)(e),null}}}var d=n(82399),g=n(85753),f=n(77922),p=n(66726),m=n(54957),k=n(36260);class LanguageBracketsConfiguration{constructor(e,t){this.languageId=e;const n=t.brackets?filterValidBrackets(t.brackets):[],r=new k.VV((e=>{const t=new Set;return{info:new OpeningBracketKind(this,e,t),closing:t}})),i=new k.VV((e=>{const t=new Set,n=new Set;return{info:new ClosingBracketKind(this,e,t,n),opening:t,openingColorized:n}}));for(const[e,t]of n){const n=r.get(e),s=i.get(t);n.closing.add(s.info),s.opening.add(n.info)}const s=t.colorizedBracketPairs?filterValidBrackets(t.colorizedBracketPairs):n.filter((e=>!("<"===e[0]&&">"===e[1])));for(const[e,t]of s){const n=r.get(e),s=i.get(t);n.closing.add(s.info),s.openingColorized.add(n.info),s.opening.add(n.info)}this._openingBrackets=new Map([...r.cachedValues].map((([e,t])=>[e,t.info]))),this._closingBrackets=new Map([...i.cachedValues].map((([e,t])=>[e,t.info])))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return(0,c.xb)(t,e)}}function filterValidBrackets(e){return e.filter((([e,t])=>""!==e&&""!==t))}class BracketKindBase{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class OpeningBracketKind extends BracketKindBase{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class ClosingBracketKind extends BracketKindBase{constructor(e,t,n,r){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=r,this.isOpeningBracket=!1}closes(e){return e.config===this.config&&this.openingBrackets.has(e)}closesColorized(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var __decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};class LanguageConfigurationServiceChangeEvent{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}}const _=(0,d.u1)("languageConfigurationService");let b=class LanguageConfigurationService extends i.jG{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new LanguageConfigurationRegistry),this.onDidChangeEmitter=this._register(new r.vl),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(C));this._register(this.configurationService.onDidChangeConfiguration((e=>{const t=e.change.keys.some((e=>n.has(e))),r=e.change.overrides.filter((([e,t])=>t.some((e=>n.has(e))))).map((([e])=>e));if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(void 0));else for(const e of r)this.languageService.isRegisteredLanguageId(e)&&(this.configurations.delete(e),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e)))}))),this._register(this._registry.onDidChange((e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(e.languageId))})))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=function computeConfig(e,t,n,r){let i=t.getLanguageConfiguration(e);if(!i){if(!r.isRegisteredLanguageId(e))return new ResolvedLanguageConfiguration(e,{});i=new ResolvedLanguageConfiguration(e,{})}const s=function getCustomizedLanguageConfig(e,t){const n=t.getValue(C.brackets,{overrideIdentifier:e}),r=t.getValue(C.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:validateBracketPairs(n),colorizedBracketPairs:validateBracketPairs(r)}}(i.languageId,n),o=combineLanguageConfigurations([i.underlyingConfig,s]);return new ResolvedLanguageConfiguration(i.languageId,o)}(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};b=__decorate([__param(0,g.pG),__param(1,f.L)],b);const C={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function validateBracketPairs(e){if(Array.isArray(e))return e.map((e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((e=>!!e))}function getIndentationAtPosition(e,t,n){const r=e.getLineContent(t);let i=s.UU(r);return i.length>n-1&&(i=i.substring(0,n-1)),i}class ComposedLanguageConfiguration{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new LanguageConfigurationContribution(e,t,++this._order);return this._entries.push(n),this._resolved=null,(0,i.s)((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===n){this._entries.splice(e,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new ResolvedLanguageConfiguration(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(LanguageConfigurationContribution.cmp),combineLanguageConfigurations(this._entries.map((e=>e.configuration))))}}function combineLanguageConfigurations(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const n of e)t={comments:n.comments||t.comments,brackets:n.brackets||t.brackets,wordPattern:n.wordPattern||t.wordPattern,indentationRules:n.indentationRules||t.indentationRules,onEnterRules:n.onEnterRules||t.onEnterRules,autoClosingPairs:n.autoClosingPairs||t.autoClosingPairs,surroundingPairs:n.surroundingPairs||t.surroundingPairs,autoCloseBefore:n.autoCloseBefore||t.autoCloseBefore,folding:n.folding||t.folding,colorizedBracketPairs:n.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:n.__electricCharacterSupport||t.__electricCharacterSupport};return t}class LanguageConfigurationContribution{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class LanguageConfigurationChangeEvent{constructor(e){this.languageId=e}}class LanguageConfigurationRegistry extends i.jG{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new r.vl),this.onDidChange=this._onDidChange.event,this._register(this.register(m.vH,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let r=this._entries.get(e);r||(r=new ComposedLanguageConfiguration(e),this._entries.set(e,r));const s=r.register(t,n);return this._onDidChange.fire(new LanguageConfigurationChangeEvent(e)),(0,i.s)((()=>{s.dispose(),this._onDidChange.fire(new LanguageConfigurationChangeEvent(e))}))}getLanguageConfiguration(e){const t=this._entries.get(e);return t?.getResolvedConfiguration()||null}}class ResolvedLanguageConfiguration{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new OnEnterSupport(this.underlyingConfig):null,this.comments=ResolvedLanguageConfiguration._handleComments(this.underlyingConfig),this.characterPair=new CharacterPairSupport(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||o.Ld,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new IndentRulesSupport(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new LanguageBracketsConfiguration(e,this.underlyingConfig)}getWordDefinition(){return(0,o.Io)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new c.az(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new BracketElectricCharacterSupport(this.brackets)),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}getAutoClosingPairs(){return new a.GB(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[e,r]=t.blockComment;n.blockCommentStartToken=e,n.blockCommentEndToken=r}return n}}(0,p.v)(_,b,1)},52818(e,t,n){"use strict";n.d(t,{P:()=>GuidesTextModelPart,k:()=>BracketPairGuidesClassNames});var r=n(97393),i=n(16844),s=n(62549),o=n(28061),a=n(32177),h=n(50969),l=n(60779),c=n(94327);class GuidesTextModelPart extends a._{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return(0,h.G)(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const r=this.textModel.getLineCount();if(e<1||e>r)throw new c.D7("Illegal value for lineNumber");const i=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,s=Boolean(i&&i.offSide);let o=-2,a=-1,h=-2,l=-1;const up_resolveIndents=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===h){h=-1,l=-1;for(let t=e;t<r;t++){const e=this._computeIndentLevel(t);if(e>=0){h=t,l=e;break}}}};let u=-2,d=-1,g=-2,f=-1;const down_resolveIndents=e=>{if(-2===u){u=-1,d=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){u=t,d=e;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,f=-1;for(let t=e;t<r;t++){const e=this._computeIndentLevel(t);if(e>=0){g=t,f=e;break}}}};let p=0,m=!0,k=0,_=!0,b=0,C=0;for(let i=0;m||_;i++){const o=e-i,c=e+i;i>1&&(o<1||o<t)&&(m=!1),i>1&&(c>r||c>n)&&(_=!1),i>5e4&&(m=!1,_=!1);let g=-1;if(m&&o>=1){const e=this._computeIndentLevel(o-1);e>=0?(h=o-1,l=e,g=Math.ceil(e/this.textModel.getOptions().indentSize)):(up_resolveIndents(o),g=this._getIndentLevelForWhitespaceLine(s,a,l))}let v=-1;if(_&&c<=r){const e=this._computeIndentLevel(c-1);e>=0?(u=c-1,d=e,v=Math.ceil(e/this.textModel.getOptions().indentSize)):(down_resolveIndents(c),v=this._getIndentLevelForWhitespaceLine(s,d,f))}if(0!==i){if(1===i){if(c<=r&&v>=0&&C+1===v){m=!1,p=c,k=c,b=v;continue}if(o>=1&&g>=0&&g-1===C){_=!1,p=o,k=o,b=g;continue}if(p=e,k=e,b=C,0===b)return{startLineNumber:p,endLineNumber:k,indent:b}}m&&(g>=b?p=o:m=!1),_&&(v>=b?k=c:_=!1)}else C=g}return{startLineNumber:p,endLineNumber:k,indent:b}}getLinesBracketGuides(e,t,n,s){const a=[];for(let n=e;n<=t;n++)a.push([]);const h=!0,c=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new o.Q(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let u;if(n&&c.length>0){const i=(e<=n.lineNumber&&n.lineNumber<=t?c:this.textModel.bracketPairs.getBracketPairsInRange(o.Q.fromPositions(n)).toArray()).filter((e=>o.Q.strictContainsPosition(e.range,n)));u=(0,r.Uk)(i,(e=>h))?.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,g=new BracketPairGuidesClassNames;for(const n of c){if(!n.closingBracketRange)continue;const r=u&&n.range.equalsRange(u);if(!r&&!s.includeInactive)continue;const o=g.getInlineClassName(n.nestingLevel,n.nestingLevelOfEqualBracketType,d)+(s.highlightActive&&r?" "+g.activeClassName:""),h=n.openingBracketRange.getStartPosition(),c=n.closingBracketRange.getStartPosition(),f=s.horizontalGuides===l.N6.Enabled||s.horizontalGuides===l.N6.EnabledForActive&&r;if(n.range.startLineNumber===n.range.endLineNumber){f&&a[n.range.startLineNumber-e].push(new l.TH(-1,n.openingBracketRange.getEndPosition().column,o,new l.pv(!1,c.column),-1,-1));continue}const p=this.getVisibleColumnFromPosition(c),m=this.getVisibleColumnFromPosition(n.openingBracketRange.getStartPosition()),k=Math.min(m,p,n.minVisibleColumnIndentation+1);let _=!1;i.HG(this.textModel.getLineContent(n.closingBracketRange.startLineNumber))<n.closingBracketRange.startColumn-1&&(_=!0);const b=Math.max(h.lineNumber,e),C=Math.min(c.lineNumber,t),v=_?1:0;for(let t=b;t<C+v;t++)a[t-e].push(new l.TH(k,-1,o,null,t===h.lineNumber?h.column:-1,t===c.lineNumber?c.column:-1));f&&(h.lineNumber>=e&&m>k&&a[h.lineNumber-e].push(new l.TH(k,-1,o,new l.pv(!1,h.column),-1,-1)),c.lineNumber<=t&&p>k&&a[c.lineNumber-e].push(new l.TH(k,-1,o,new l.pv(!_,c.column),-1,-1)))}for(const e of a)e.sort(((e,t)=>e.visibleColumn-t.visibleColumn));return a}getVisibleColumnFromPosition(e){return s.A.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const r=this.textModel.getOptions(),i=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,s=Boolean(i&&i.offSide),o=new Array(t-e+1);let a=-2,h=-1,l=-2,c=-1;for(let i=e;i<=t;i++){const t=i-e,u=this._computeIndentLevel(i-1);if(u>=0)a=i-1,h=u,o[t]=Math.ceil(u/r.indentSize);else{if(-2===a){a=-1,h=-1;for(let e=i-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){a=e,h=t;break}}}if(-1!==l&&(-2===l||l<i-1)){l=-1,c=-1;for(let e=i;e<n;e++){const t=this._computeIndentLevel(e);if(t>=0){l=e,c=t;break}}}o[t]=this._getIndentLevelForWhitespaceLine(s,h,c)}}return o}_getIndentLevelForWhitespaceLine(e,t,n){const r=this.textModel.getOptions();return-1===t||-1===n?0:t<n?1+Math.floor(t/r.indentSize):t===n||e?Math.ceil(n/r.indentSize):1+Math.floor(n/r.indentSize)}}class BracketPairGuidesClassNames{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-"+e%30}}},53720(e,t,n){"use strict";n.d(t,{K:()=>r});const r=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})},54296(e,t,n){"use strict";n.d(t,{Th:()=>isEditStackElement,z8:()=>EditStack});var r=n(19746),i=n(94327),s=n(93702),o=n(37264),a=n(6949),h=n(42802),l=n(22467);function uriGetComparisonKey(e){return e.toString()}class SingleModelEditStackData{static create(e,t){const n=e.getAlternativeVersionId(),r=getModelEOL(e);return new SingleModelEditStackData(n,n,r,r,t,t,[])}constructor(e,t,n,r,i,s,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=i,this.afterCursorState=s,this.changes=o}append(e,t,n,r,i){t.length>0&&(this.changes=(0,a.x)(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=i}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(h.Sw(e,t?t.length:0,n),n+=4,t)for(const r of t)h.Sw(e,r.selectionStartLineNumber,n),n+=4,h.Sw(e,r.selectionStartColumn,n),n+=4,h.Sw(e,r.positionLineNumber,n),n+=4,h.Sw(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const r=h.bb(e,t);t+=4;for(let i=0;i<r;i++){const r=h.bb(e,t);t+=4;const i=h.bb(e,t);t+=4;const o=h.bb(e,t);t+=4;const a=h.bb(e,t);t+=4,n.push(new s.L(r,i,o,a))}return t}serialize(){let e=10+SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)+SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)+4;for(const t of this.changes)e+=t.writeSize();const t=new Uint8Array(e);let n=0;h.Sw(t,this.beforeVersionId,n),n+=4,h.Sw(t,this.afterVersionId,n),n+=4,h.Gs(t,this.beforeEOL,n),n+=1,h.Gs(t,this.afterEOL,n),n+=1,n=SingleModelEditStackData._writeSelections(t,this.beforeCursorState,n),n=SingleModelEditStackData._writeSelections(t,this.afterCursorState,n),h.Sw(t,this.changes.length,n),n+=4;for(const e of this.changes)n=e.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const r=h.bb(t,n);n+=4;const i=h.bb(t,n);n+=4;const s=h.pJ(t,n);n+=1;const o=h.pJ(t,n);n+=1;const l=[];n=SingleModelEditStackData._readSelections(t,n,l);const c=[];n=SingleModelEditStackData._readSelections(t,n,c);const u=h.bb(t,n);n+=4;const d=[];for(let e=0;e<u;e++)n=a.k.read(t,n,d);return new SingleModelEditStackData(r,i,s,o,l,c,d)}}class SingleModelEditStackElement{get type(){return 0}get resource(){return o.r.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,r){this.label=e,this.code=t,this.model=n,this._data=SingleModelEditStackData.create(n,r)}toString(){return(this._data instanceof SingleModelEditStackData?this._data:SingleModelEditStackData.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(o.r.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof SingleModelEditStackData}append(e,t,n,r,i){this._data instanceof SingleModelEditStackData&&this._data.append(e,t,n,r,i)}close(){this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize())}open(){this._data instanceof SingleModelEditStackData||(this._data=SingleModelEditStackData.deserialize(this._data))}undo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize()),this._data.byteLength+168}}class MultiModelEditStackElement{get resources(){return this._editStackElementsArr.map((e=>e.resource))}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const e of this._editStackElementsArr){const t=uriGetComparisonKey(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=uriGetComparisonKey(e);return this._editStackElementsMap.has(t)}setModel(e){const t=uriGetComparisonKey(o.r.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=uriGetComparisonKey(e.uri);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).canAppend(e)}return!1}append(e,t,n,r,i){const s=uriGetComparisonKey(e.uri);this._editStackElementsMap.get(s).append(e,t,n,r,i)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=uriGetComparisonKey(e);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).heapSize()}return 0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${(0,l.P8)(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function getModelEOL(e){return"\n"===e.getEOL()?0:1}function isEditStackElement(e){return!!e&&(e instanceof SingleModelEditStackElement||e instanceof MultiModelEditStackElement)}class EditStack{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(n)&&n.canAppend(this._model))return n;const i=new SingleModelEditStackElement(r.kg("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],getModelEOL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,r){const i=this._getOrCreateEditStackElement(e,r),s=this._model.applyEdits(t,!0),o=EditStack._computeCursorState(n,s),a=s.map(((e,t)=>({index:t,textChange:e.textChange})));return a.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),i.append(this._model,a.map((e=>e.textChange)),getModelEOL(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return(0,i.dz)(e),null}}}},54324(e,t,n){"use strict";n.d(t,{Su:()=>decodeUTF16LE,b7:()=>getPlatformTextDecoder,fe:()=>StringBuilder});var r=n(16844),i=n(63339),s=n(42802);let o,a,h;function getUTF16LE_TextDecoder(){return o||(o=new TextDecoder("UTF-16LE")),o}function getPlatformTextDecoder(){return h||(h=i.cm()?getUTF16LE_TextDecoder():function getUTF16BE_TextDecoder(){return a||(a=new TextDecoder("UTF-16BE")),a}()),h}function decodeUTF16LE(e,t,n){const r=new Uint16Array(e.buffer,t,n);return n>0&&(65279===r[0]||65534===r[0])?function compatDecodeUTF16LE(e,t,n){const r=[];let i=0;for(let o=0;o<n;o++){const n=s.$l(e,t);t+=2,r[i++]=String.fromCharCode(n)}return r.join("")}(e,t,n):getUTF16LE_TextDecoder().decode(r)}class StringBuilder{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return getPlatformTextDecoder().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(0===t||r.pc(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}},54957(e,t,n){"use strict";n.d(t,{W6:()=>h,vH:()=>l});var r=n(19746),i=n(2106),s=n(67167),o=n(53720),a=n(27142);const h=new class EditorModesRegistry{constructor(){this._onDidChangeLanguages=new i.vl,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return this._languages}};s.O.add("editor.modesRegistry",h);const l="plaintext";h.registerLanguage({id:l,extensions:[".txt"],aliases:[r.kg("plainText.alias","Plain Text"),"text"],mimetypes:[o.K.text]}),s.O.as(a.Fd.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])},55996(e,t,n){"use strict";n.r(t),n.d(t,{clearPlatformLanguageAssociations:()=>clearPlatformLanguageAssociations,getLanguageIds:()=>getLanguageIds,registerPlatformLanguageAssociation:()=>registerPlatformLanguageAssociation});var r=n(83958),i=n(53720),s=n(13072),o=n(18019),a=n(22467),h=n(16844),l=n(54957);let c=[],u=[],d=[];function registerPlatformLanguageAssociation(e,t=!1){!function _registerLanguageAssociation(e,t,n){const i=function toLanguageAssociationItem(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?(0,r.qg)(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(o.SA.sep)>=0}}(e,t);c.push(i),i.userConfigured?d.push(i):u.push(i);n&&!i.userConfigured&&c.forEach((e=>{e.mime===i.mime||e.userConfigured||(i.extension&&e.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&e.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&e.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&e.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))}))}(e,!1,t)}function clearPlatformLanguageAssociations(){c=c.filter((e=>e.userConfigured)),u=[]}function getLanguageIds(e,t){return function getAssociations(e,t){let n;if(e)switch(e.scheme){case s.ny.file:n=e.fsPath;break;case s.ny.data:n=a.B6.parseMetaData(e).get(a.B6.META_DATA_LABEL);break;case s.ny.vscodeNotebookCell:n=void 0;break;default:n=e.path}if(!n)return[{id:"unknown",mime:i.K.unknown}];n=n.toLowerCase();const r=(0,o.P8)(n),g=getAssociationByPath(n,r,d);if(g)return[g,{id:l.vH,mime:i.K.text}];const f=getAssociationByPath(n,r,u);if(f)return[f,{id:l.vH,mime:i.K.text}];if(t){const e=function getAssociationByFirstline(e){(0,h.LU)(e)&&(e=e.substr(1));if(e.length>0)for(let t=c.length-1;t>=0;t--){const n=c[t];if(!n.firstline)continue;const r=e.match(n.firstline);if(r&&r.length>0)return n}return}(t);if(e)return[e,{id:l.vH,mime:i.K.text}]}return[{id:"unknown",mime:i.K.unknown}]}(e,t).map((e=>e.id))}function getAssociationByPath(e,t,n){let r,i,s;for(let o=n.length-1;o>=0;o--){const a=n[o];if(t===a.filenameLowercase){r=a;break}if(a.filepattern&&(!i||a.filepattern.length>i.filepattern.length)){const n=a.filepatternOnPath?e:t;a.filepatternLowercase?.(n)&&(i=a)}a.extension&&(!s||a.extension.length>s.extension.length)&&t.endsWith(a.extensionLowercase)&&(s=a)}return r||(i||(s||void 0))}},57445(e,t,n){"use strict";n.d(t,{T:()=>getStandardTokenTypeAtPosition,f:()=>LineTokens});var r=n(15910);class LineTokens{static{this.defaultTokenMetadata=33587200}static createEmpty(e,t){const n=LineTokens.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=n,new LineTokens(r,e,t)}static createFromTextAndMetadata(e,t){let n=0,r="";const i=new Array;for(const{text:t,metadata:s}of e)i.push(n+t.length,s),n+=t.length,r+=t;return new LineTokens(new Uint32Array(i),r,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof LineTokens&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const r=t<<1,i=r+(n<<1);for(let t=r;t<i;t++)if(this._tokens[t]!==e._tokens[t])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)],n=r.x.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return r.x.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return r.x.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return r.x.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[1+(e<<1)];return r.x.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[1+(e<<1)];return r.x.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return LineTokens.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new SliceLineTokens(this,e,t,n)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let t=0;t<n;t++)e[t<<1]=e[t+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){const i=n+Math.floor((r-n)/2),s=e[i<<1];if(s===t)return i+1;s<t?n=i+1:s>t&&(r=i)}return n}withInserted(e){if(0===e.length)return this;let t=0,n=0,r="";const i=new Array;let s=0;for(;;){const o=t<this._tokensCount?this._tokens[t<<1]:-1,a=n<e.length?e[n]:null;if(-1!==o&&(null===a||o<=a.offset)){r+=this._text.substring(s,o);const e=this._tokens[1+(t<<1)];i.push(r.length,e),t++,s=o}else{if(!a)break;if(a.offset>s){r+=this._text.substring(s,a.offset);const e=this._tokens[1+(t<<1)];i.push(r.length,e),s=a.offset}r+=a.text,i.push(r.length,a.tokenMetadata),n++}}return new LineTokens(new Uint32Array(i),r,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}}class SliceLineTokens{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let t=this._firstTokenIndex,r=e.getCount();t<r;t++){if(e.getStartOffset(t)>=n)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof SliceLineTokens&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),r=this._source.getEndOffset(t);let i=this._source.getTokenText(t);return n<this._startOffset&&(i=i.substring(this._startOffset-n)),r>this._endOffset&&(i=i.substring(0,i.length-(r-this._endOffset))),i}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function getStandardTokenTypeAtPosition(e,t){const n=t.lineNumber;if(!e.tokenization.isCheapToTokenize(n))return;e.tokenization.forceTokenization(n);const r=e.tokenization.getLineTokens(n),i=r.findTokenIndexAtOffset(t.column-1);return r.getStandardTokenType(i)}},57999(e,t,n){"use strict";n.d(t,{P:()=>normalizeIndentation});var r=n(16844),i=n(62549);function normalizeIndentation(e,t,n){let s=r.HG(e);return-1===s&&(s=e.length),function _normalizeIndentationFromWhitespace(e,t,n){let r=0;for(let n=0;n<e.length;n++)"\t"===e.charAt(n)?r=i.A.nextIndentTabStop(r,t):r++;let s="";if(!n){const e=Math.floor(r/t);r%=t;for(let t=0;t<e;t++)s+="\t"}for(let e=0;e<r;e++)s+=" ";return s}(e.substring(0,s),t,n)+e.substring(s)}},58881(e,t,n){"use strict";n.d(t,{L:()=>i});var r,i,s=n(5915);!function(e){e.isThemeColor=function isThemeColor(e){return e&&"object"==typeof e&&"string"==typeof e.id}}(r||(r={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function asClassNameArray(e){const n=t.exec(e.id);if(!n)return asClassNameArray(s.W.error);const[,r,i]=n,o=["codicon","codicon-"+r];return i&&o.push("codicon-modifier-"+i.substring(1)),o}e.asClassNameArray=asClassNameArray,e.asClassName=function asClassName(e){return asClassNameArray(e).join(" ")},e.asCSSSelector=function asCSSSelector(e){return"."+asClassNameArray(e).join(".")},e.isThemeIcon=function isThemeIcon(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(void 0===e.color||r.isThemeColor(e.color))};const n=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);e.fromString=function fromString(e){const t=n.exec(e);if(!t)return;const[,r]=t;return{id:r}},e.fromId=function fromId(e){return{id:e}},e.modify=function modify(e,t){let n=e.id;const r=n.lastIndexOf("~");return-1!==r&&(n=n.substring(0,r)),t&&(n=`${n}~${t}`),{id:n}},e.getModifier=function getModifier(e){const t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function isEqual(e,t){return e.id===t.id&&e.color?.id===t.color?.id}}(i||(i={}))},60756(e,t,n){"use strict";n.d(t,{FD:()=>i,Mg:()=>DenseKeyProvider,gV:()=>SmallImmutableSet});const r=[];class SmallImmutableSet{static{this.cache=new Array(129)}static create(e,t){if(e<=128&&0===t.length){let n=SmallImmutableSet.cache[e];return n||(n=new SmallImmutableSet(e,t),SmallImmutableSet.cache[e]=n),n}return new SmallImmutableSet(e,t)}static{this.empty=SmallImmutableSet.create(0,r)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let r=n>>5;if(0===r){const e=1<<n|this.items;return e===this.items?this:SmallImmutableSet.create(e,this.additionalItems)}r--;const i=this.additionalItems.slice(0);for(;i.length<r;)i.push(0);return i[r]|=1<<(31&n),SmallImmutableSet.create(this.items,i)}merge(e){const t=this.items|e.items;if(this.additionalItems===r&&e.additionalItems===r)return t===this.items?this:t===e.items?e:SmallImmutableSet.create(t,r);const n=[];for(let t=0;t<Math.max(this.additionalItems.length,e.additionalItems.length);t++){const r=this.additionalItems[t]||0,i=e.additionalItems[t]||0;n.push(r|i)}return SmallImmutableSet.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}const i={getKey:e=>e};class DenseKeyProvider{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}}},60779(e,t,n){"use strict";var r;n.d(t,{N6:()=>r,TH:()=>IndentGuide,pv:()=>IndentGuideHorizontalLine}),function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(r||(r={}));class IndentGuide{constructor(e,t,n,r,i,s){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=r,this.forWrappedLinesAfterColumn=i,this.forWrappedLinesBeforeOrAtColumn=s,-1!==e==(-1!==t))throw new Error}}class IndentGuideHorizontalLine{constructor(e,t){this.top=e,this.endColumn=t}}},62549(e,t,n){"use strict";n.d(t,{A:()=>CursorColumns});var r=n(16844);class CursorColumns{static _nextVisibleColumn(e,t,n){return 9===e?CursorColumns.nextRenderTabStop(t,n):r.ne(e)||r.Ss(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),o=new r.km(s);let a=0;for(;!o.eol();){const e=r.Z5(s,i,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(e,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new r.km(e);let o=0,a=1;for(;!s.eol();){const h=r.Z5(e,i,s.offset);s.nextGraphemeLength();const l=this._nextVisibleColumn(h,o,n),c=s.offset+1;if(l>=t){return l-t<t-o?c:a}o=l,a=c}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}},62992(e,t,n){"use strict";function clamp(e,t,n){return Math.min(Math.max(e,t),n)}n.d(t,{Uq:()=>MovingAverage,mu:()=>SlidingWindowAverage,qE:()=>clamp});class MovingAverage{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class SlidingWindowAverage{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}},64651(e,t,n){"use strict";n.d(t,{Gc:()=>InvalidBracketAstNode,Nn:()=>PairAstNode,Xw:()=>ListAstNode,rh:()=>BracketAstNode,yF:()=>TextAstNode});var r=n(94327),i=n(62549),s=n(34883),o=n(60756);class BaseAstNode{get length(){return this._length}constructor(e){this._length=e}}class PairAstNode extends BaseAstNode{static create(e,t,n){let r=e.length;return t&&(r=(0,s.QB)(r,t.length)),n&&(r=(0,s.QB)(r,n.length)),new PairAstNode(r,e,t,n,t?t.missingOpeningBracketIds:o.gV.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,r,i){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=i}canBeReused(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}deepClone(){return new PairAstNode(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation((0,s.QB)(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class ListAstNode extends BaseAstNode{static create23(e,t,n,r=!1){let i=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(i=(0,s.QB)(i,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");i=(0,s.QB)(i,n.length),o=o.merge(n.missingOpeningBracketIds)}return r?new Immutable23ListAstNode(i,e.listHeight+1,e,t,n,o):new TwoThreeListAstNode(i,e.listHeight+1,e,t,n,o)}static getEmpty(){return new ImmutableArrayListAstNode(s.Vp,0,[],o.gV.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const t=this.getChild(e-1),n=4===t.kind?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){this.throwIfImmutable();if(0===this.childrenLength)return;const e=this.getChild(0),t=4===e.kind?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;if(0===this.childrenLength)return!1;let t=this;for(;4===t.kind;){const e=t.childrenLength;if(0===e)throw new r.D7;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const e=this.getChild(r);t=(0,s.QB)(t,e.length),n=n.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,r=e;for(let e=0;e<this.childrenLength;e++){const i=this.getChild(e);i&&(n=Math.min(n,i.computeMinIndentation(r,t)),r=(0,s.QB)(r,i.length))}return this.cachedMinIndentation=n,n}}class TwoThreeListAstNode extends ListAstNode{get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,r,i,s){super(e,t,s),this._item1=n,this._item2=r,this._item3=i}deepClone(){return new TwoThreeListAstNode(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Immutable23ListAstNode extends TwoThreeListAstNode{toMutable(){return new TwoThreeListAstNode(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class ArrayListAstNode extends ListAstNode{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,r){super(e,t,r),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new ArrayListAstNode(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ImmutableArrayListAstNode extends ArrayListAstNode{toMutable(){return new ArrayListAstNode(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const a=[];class ImmutableLeafAstNode extends BaseAstNode{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return a}deepClone(){return this}}class TextAstNode extends ImmutableLeafAstNode{get kind(){return 0}get missingOpeningBracketIds(){return o.gV.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=(0,s.l4)(e),r=(0===n.columnCount?n.lineCount:n.lineCount+1)+1,o=(0,s.eu)((0,s.QB)(e,this.length))+1;let a=Number.MAX_SAFE_INTEGER;for(let e=r;e<=o;e++){const n=t.getLineFirstNonWhitespaceColumn(e),r=t.getLineContent(e);if(0===n)continue;const s=i.A.visibleColumnFromColumn(r,n,t.getOptions().tabSize);a=Math.min(a,s)}return a}}class BracketAstNode extends ImmutableLeafAstNode{static create(e,t,n){return new BracketAstNode(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return o.gV.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class InvalidBracketAstNode extends ImmutableLeafAstNode{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}},64830(e,t,n){"use strict";n.r(t),n.d(t,{IModelService:()=>r});const r=(0,n(82399).u1)("modelService")},66459(e,t,n){"use strict";n.d(t,{A:()=>s});var r,i=n(16844);!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={})),function(e){const t="error",n="warning",r="info";e.fromValue=function fromValue(s){return s?i.Q_(t,s)?e.Error:i.Q_(n,s)||i.Q_("warn",s)?e.Warning:i.Q_(r,s)?e.Info:e.Ignore:e.Ignore},e.toString=function toString(i){switch(i){case e.Error:return t;case e.Warning:return n;case e.Info:return r;default:return"ignore"}}}(r||(r={}));const s=r},66726(e,t,n){"use strict";n.d(t,{N:()=>getSingletonServiceDescriptors,v:()=>registerSingleton});var r=n(83312);const i=[];function registerSingleton(e,t,n){t instanceof r.d||(t=new r.d(t,[],Boolean(n))),i.push([e,t])}function getSingletonServiceDescriptors(){return i}},66995(e,t,n){"use strict";n.r(t),n.d(t,{LanguageIdCodec:()=>LanguageIdCodec,LanguagesRegistry:()=>LanguagesRegistry});var r=n(2106),i=n(10998),s=n(16844),o=n(55996),a=n(54957),h=n(27142),l=n(67167);const c=Object.prototype.hasOwnProperty,u="vs.editor.nullLanguage";class LanguageIdCodec{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(u,0),this._register(a.vH,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||u}}class LanguagesRegistry extends i.jG{static{this.instanceCount=0}constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new r.vl),this.onDidChange=this._onDidChange.event,LanguagesRegistry.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new LanguageIdCodec,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(a.W6.onDidChangeLanguages((e=>{this._initializeFromRegistry()}))))}dispose(){LanguagesRegistry.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},(0,o.clearPlatformLanguageAssociations)();const e=[].concat(a.W6.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{const t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier})),t.mimetypes.forEach((e=>{this._mimeTypesMap[e]=t.identifier}))})),l.O.as(h.Fd.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;c.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const e of t.extensions)(0,o.registerPlatformLanguageAssociation)({id:n,mime:r,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const i of t.filenames)(0,o.registerPlatformLanguageAssociation)({id:n,mime:r,filename:i},this._warnOnOverwrite),e.filenames.push(i);if(Array.isArray(t.filenamePatterns))for(const e of t.filenamePatterns)(0,o.registerPlatformLanguageAssociation)({id:n,mime:r,filepattern:e},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{const t=new RegExp(e);(0,s.eY)(t)||(0,o.registerPlatformLanguageAssociation)({id:n,mime:r,firstline:t},this._warnOnOverwrite)}catch(n){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,n)}}e.aliases.push(n);let i=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(i=0===t.aliases.length?[null]:t.aliases),null!==i)for(const t of i)t&&0!==t.length&&e.aliases.push(t);const a=null!==i&&i.length>0;if(a&&null===i[0]);else{const t=(a?i[0]:null)||n;!a&&e.name||(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&c.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return c.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&c.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?(0,o.getLanguageIds)(e,t):[]}}},67167(e,t,n){"use strict";n.d(t,{O:()=>s});var r=n(87110),i=n(79359);const s=new class RegistryImpl{constructor(){this.data=new Map}add(e,t){r.ok(i.Kg(e)),r.ok(i.Gv(t)),r.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}},67526(e,t){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function toByteArray(e){var t,n,s=getLens(e),o=s[0],a=s[1],h=new i(function _byteLength(e,t,n){return 3*(t+n)/4-n}(0,o,a)),l=0,c=a>0?o-4:o;for(n=0;n<c;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],h[l++]=t>>16&255,h[l++]=t>>8&255,h[l++]=255&t;2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,h[l++]=255&t);1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,h[l++]=t>>8&255,h[l++]=255&t);return h},t.fromByteArray=function fromByteArray(e){for(var t,r=e.length,i=r%3,s=[],o=16383,a=0,h=r-i;a<h;a+=o)s.push(encodeChunk(e,a,a+o>h?h:a+o));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,r){for(var i,s,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},68302(e,t,n){"use strict";n.d(t,{T:()=>parseDocument});var r=n(64651),i=n(22994),s=n(60756),o=n(34883);function concat23TreesOfSameHeight(e,t=!1){if(0===e.length)return null;if(1===e.length)return e[0];let n=e.length;for(;n>3;){const i=n>>1;for(let s=0;s<i;s++){const i=s<<1;e[s]=r.Xw.create23(e[i],e[i+1],i+3===n?e[i+2]:null,t)}n=i}return r.Xw.create23(e[0],e[1],n>=3?e[2]:null,t)}function heightDiff(e,t){return Math.abs(e.listHeight-t.listHeight)}function concat(e,t){return e.listHeight===t.listHeight?r.Xw.create23(e,t,null,!1):e.listHeight>t.listHeight?function append(e,t){let n=e=e.toMutable();const i=[];let s;for(;;){if(t.listHeight===n.listHeight){s=t;break}if(4!==n.kind)throw new Error("unexpected");i.push(n),n=n.makeLastElementMutable()}for(let e=i.length-1;e>=0;e--){const t=i[e];s?t.childrenLength>=3?s=r.Xw.create23(t.unappendChild(),s,null,!1):(t.appendChildOfSameHeight(s),s=void 0):t.handleChildrenChanged()}return s?r.Xw.create23(e,s,null,!1):e}(e,t):function prepend(e,t){let n=e=e.toMutable();const i=[];for(;t.listHeight!==n.listHeight;){if(4!==n.kind)throw new Error("unexpected");i.push(n),n=n.makeFirstElementMutable()}let s=t;for(let e=i.length-1;e>=0;e--){const t=i[e];s?t.childrenLength>=3?s=r.Xw.create23(s,t.unprependChild(),null,!1):(t.prependChildOfSameHeight(s),s=void 0):t.handleChildrenChanged()}return s?r.Xw.create23(s,e,null,!1):e}(t,e)}class NodeReader{constructor(e){this.lastOffset=o.Vp,this.nextNodes=[e],this.offsets=[o.Vp],this.idxs=[]}readLongestNodeAt(e,t){if((0,o.zG)(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=lastOrUndefined(this.nextNodes);if(!n)return;const r=lastOrUndefined(this.offsets);if((0,o.zG)(e,r))return;if((0,o.zG)(r,e))if((0,o.QB)(r,n.length)<=e)this.nextNodeAfterCurrent();else{const e=getNextChildIdx(n);-1!==e?(this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const e=getNextChildIdx(n);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(n.getChild(e)),this.offsets.push(r),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){const e=lastOrUndefined(this.offsets),t=lastOrUndefined(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const n=lastOrUndefined(this.nextNodes),r=getNextChildIdx(n,this.idxs[this.idxs.length-1]);if(-1!==r){this.nextNodes.push(n.getChild(r)),this.offsets.push((0,o.QB)(e,t.length)),this.idxs[this.idxs.length-1]=r;break}this.idxs.pop()}}}function getNextChildIdx(e,t=-1){for(;;){if(++t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function lastOrUndefined(e){return e.length>0?e[e.length-1]:void 0}function parseDocument(e,t,n,r){return new Parser(e,t,n,r).parseDocument()}class Parser{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw new Error("Not supported");this.oldNodeReader=n?new NodeReader(n):void 0,this.positionMapper=new i.W(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(s.gV.getEmpty(),0);return e||(e=r.Xw.getEmpty()),e}parseList(e,t){const n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const n=this.tokenizer.peek();if(!n||2===n.kind&&n.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}4===r.kind&&0===r.childrenLength||n.push(r)}const r=this.oldNodeReader?function concat23Trees(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function readNode(){if(t>=e.length)return null;const n=t,r=e[n].listHeight;for(t++;t<e.length&&e[t].listHeight===r;)t++;return t-n>=2?concat23TreesOfSameHeight(0===n&&t===e.length?e:e.slice(n,t),!1):e[n]}let n=readNode(),r=readNode();if(!r)return n;for(let e=readNode();e;e=readNode())heightDiff(n,r)<=heightDiff(r,e)?(n=concat(n,r),r=e):r=concat(r,e);return concat(n,r)}(n):concat23TreesOfSameHeight(n,this.createImmutableLists);return r}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!(0,o.Vh)(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(n=>{if(null!==t&&!(0,o.zG)(n.length,t))return!1;return n.canBeReused(e)}));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new r.Gc(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new r.yF(n.length);const i=e.merge(n.bracketIds),s=this.parseList(i,t+1),o=this.tokenizer.peek();return o&&2===o.kind&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),r.Nn.create(n.astNode,s,o.astNode)):r.Nn.create(n.astNode,s,null)}default:throw new Error("unexpected")}}}},70559(e,t,n){"use strict";n.d(t,{FdG:()=>r.Fd,buw:()=>c,GuP:()=>r.Gu,Bbc:()=>r.Bb,HP_:()=>r.HP,WMx:()=>d,zRE:()=>g,sAS:()=>ce,vV$:()=>he,etE:()=>le,mc0:()=>ae,XJc:()=>Xe,raQ:()=>tt,G_h:()=>Ye,T9h:()=>et,xOA:()=>rt,Inn:()=>nt,nZG:()=>it,Q1$:()=>Ze,OcU:()=>dt,C5U:()=>ft,t0B:()=>gt,b1q:()=>l,EY1:()=>Z,ZEf:()=>X,Gj6:()=>ee,ld8:()=>ne,$BZ:()=>re,GNm:()=>te,Ztu:()=>D,YtV:()=>b,AN$:()=>I,Rbi:()=>y,f3U:()=>P,Ubg:()=>z,ECk:()=>U,p8Y:()=>V,S5J:()=>H,By2:()=>C,i61:()=>A,WfR:()=>W,oZ8:()=>q,tan:()=>F,IIb:()=>O,pOz:()=>B,WL6:()=>G,P6i:()=>j,B2L:()=>J,sjA:()=>K,_pU:()=>Q,HwT:()=>$,seu:()=>N,rm4:()=>R,QwA:()=>M,whs:()=>w,Stt:()=>S,Hng:()=>T,CgL:()=>v,sIe:()=>L,FiB:()=>x,tAP:()=>h,CU6:()=>o,t4B:()=>a,c1f:()=>Fe,uNK:()=>Ne,$$0:()=>Me,L4c:()=>Oe,Zgs:()=>De,cws:()=>Ae,_$n:()=>qe,eYZ:()=>Ge,h9z:()=>je,I$A:()=>Pe,YSW:()=>Ve,L9Z:()=>ze,ULt:()=>Ue,C1n:()=>We,T5N:()=>He,HDX:()=>pt,zUX:()=>kt,Qfh:()=>_t,eUu:()=>mt,Rjz:()=>Lt,GVV:()=>yt,fED:()=>It,yIp:()=>Nt,Yoe:()=>Dt,pnl:()=>Mt,P9Z:()=>zt,fiM:()=>Pt,H8q:()=>Vt,gtq:()=>xt,VFX:()=>bt,efJ:()=>Ct,eMz:()=>Ft,p7Y:()=>vt,QI5:()=>Rt,lO1:()=>Ot,QRv:()=>At,CQ3:()=>Bt,ijf:()=>Et,uNx:()=>wt,f4y:()=>Tt,C9U:()=>St,c6Y:()=>$t,g$2:()=>jt,dd_:()=>Gt,Ux$:()=>Kt,SNb:()=>Jt,pmr:()=>Qt,D7X:()=>Yt,ILr:()=>Be,yLC:()=>Se,AjU:()=>Le,K1Z:()=>Ee,KoI:()=>we,yr0:()=>Ie,Xp1:()=>ye,uMG:()=>Te,yLr:()=>r.yL,fAP:()=>_e,z5H:()=>be,iwL:()=>nn,NBf:()=>tn,tYX:()=>Ce,bNw:()=>xe,JPj:()=>ve,BTi:()=>_,ELA:()=>Zt,HJZ:()=>Xt,AlL:()=>an,nH:()=>sn,c7i:()=>on,er1:()=>en,Ukx:()=>ot,Ips:()=>at,jOE:()=>st,xWN:()=>lt,ZBU:()=>ct,kPT:()=>ht,jr9:()=>ut,x1A:()=>r.x1,bXl:()=>f,mhZ:()=>k,gnV:()=>p,cI_:()=>m,rvE:()=>$e,HcB:()=>Je,yqq:()=>Ke,lWP:()=>Qe,k5u:()=>Wt,sbQ:()=>qt,vwp:()=>u,JO0:()=>r.JO,pft:()=>Ht,U4U:()=>Ut,DSL:()=>se,f9l:()=>ie});var r=n(87676),i=n(19746),s=n(94901);const o=(0,r.x1)("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},i.kg("foreground","Overall foreground color. This color is only used if not overridden by a component.")),a=((0,r.x1)("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},i.kg("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),(0,r.x1)("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},i.kg("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),(0,r.x1)("descriptionForeground",{light:"#717171",dark:(0,r.JO)(o,.7),hcDark:(0,r.JO)(o,.7),hcLight:(0,r.JO)(o,.7)},i.kg("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),(0,r.x1)("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},i.kg("iconForeground","The default color for icons in the workbench."))),h=(0,r.x1)("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},i.kg("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),l=(0,r.x1)("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},i.kg("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),c=(0,r.x1)("contrastActiveBorder",{light:null,dark:null,hcDark:h,hcLight:h},i.kg("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),u=((0,r.x1)("selection.background",null,i.kg("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),(0,r.x1)("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},i.kg("textLinkForeground","Foreground color for links in text."))),d=((0,r.x1)("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},i.kg("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),(0,r.x1)("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:s.Q1.black,hcLight:"#292929"},i.kg("textSeparatorForeground","Color for text separators.")),(0,r.x1)("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},i.kg("textPreformatForeground","Foreground color for preformatted text segments.")),(0,r.x1)("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},i.kg("textPreformatBackground","Background color for preformatted text segments.")),(0,r.x1)("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},i.kg("textBlockQuoteBackground","Background color for block quotes in text.")),(0,r.x1)("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:s.Q1.white,hcLight:"#292929"},i.kg("textBlockQuoteBorder","Border color for block quotes in text.")),(0,r.x1)("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:s.Q1.black,hcLight:"#F2F2F2"},i.kg("textCodeBlockBackground","Background color for code blocks in text.")),(0,r.x1)("sash.hoverBorder",h,i.kg("sashActiveBorder","Border color of active sashes.")),(0,r.x1)("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:s.Q1.black,hcLight:"#0F4A85"},i.kg("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count."))),g=(0,r.x1)("badge.foreground",{dark:s.Q1.white,light:"#333",hcDark:s.Q1.white,hcLight:s.Q1.white},i.kg("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),f=(0,r.x1)("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},i.kg("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),p=(0,r.x1)("scrollbarSlider.background",{dark:s.Q1.fromHex("#797979").transparent(.4),light:s.Q1.fromHex("#646464").transparent(.4),hcDark:(0,r.JO)(l,.6),hcLight:(0,r.JO)(l,.4)},i.kg("scrollbarSliderBackground","Scrollbar slider background color.")),m=(0,r.x1)("scrollbarSlider.hoverBackground",{dark:s.Q1.fromHex("#646464").transparent(.7),light:s.Q1.fromHex("#646464").transparent(.7),hcDark:(0,r.JO)(l,.8),hcLight:(0,r.JO)(l,.8)},i.kg("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),k=(0,r.x1)("scrollbarSlider.activeBackground",{dark:s.Q1.fromHex("#BFBFBF").transparent(.4),light:s.Q1.fromHex("#000000").transparent(.6),hcDark:l,hcLight:l},i.kg("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),_=(0,r.x1)("progressBar.background",{dark:s.Q1.fromHex("#0E70C0"),light:s.Q1.fromHex("#0E70C0"),hcDark:l,hcLight:l},i.kg("progressBarBackground","Background color of the progress bar that can show for long running operations.")),b=(0,r.x1)("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("editorBackground","Editor background color.")),C=(0,r.x1)("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:s.Q1.white,hcLight:o},i.kg("editorForeground","Editor default foreground color.")),v=((0,r.x1)("editorStickyScroll.background",b,i.kg("editorStickyScrollBackground","Background color of sticky scroll in the editor")),(0,r.x1)("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:s.Q1.fromHex("#0F4A85").transparent(.1)},i.kg("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),(0,r.x1)("editorStickyScroll.border",{dark:null,light:null,hcDark:l,hcLight:l},i.kg("editorStickyScrollBorder","Border color of sticky scroll in the editor")),(0,r.x1)("editorStickyScroll.shadow",f,i.kg("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),(0,r.x1)("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:s.Q1.white},i.kg("editorWidgetBackground","Background color of editor widgets, such as find/replace."))),x=(0,r.x1)("editorWidget.foreground",o,i.kg("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),L=(0,r.x1)("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:l,hcLight:l},i.kg("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),y=((0,r.x1)("editorWidget.resizeBorder",null,i.kg("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),(0,r.x1)("editorError.background",null,i.kg("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},i.kg("editorError.foreground","Foreground color of error squigglies in the editor."))),I=(0,r.x1)("editorError.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},i.kg("errorBorder","If set, color of double underlines for errors in the editor.")),w=(0,r.x1)("editorWarning.background",null,i.kg("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),T=(0,r.x1)("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},i.kg("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),S=(0,r.x1)("editorWarning.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#FFCC00").transparent(.8),hcLight:s.Q1.fromHex("#FFCC00").transparent(.8)},i.kg("warningBorder","If set, color of double underlines for warnings in the editor.")),B=((0,r.x1)("editorInfo.background",null,i.kg("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},i.kg("editorInfo.foreground","Foreground color of info squigglies in the editor."))),O=(0,r.x1)("editorInfo.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},i.kg("infoBorder","If set, color of double underlines for infos in the editor.")),A=(0,r.x1)("editorHint.foreground",{dark:s.Q1.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},i.kg("editorHint.foreground","Foreground color of hint squigglies in the editor.")),D=((0,r.x1)("editorHint.border",{dark:null,light:null,hcDark:s.Q1.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},i.kg("hintBorder","If set, color of double underlines for hints in the editor.")),(0,r.x1)("editorLink.activeForeground",{dark:"#4E94CE",light:s.Q1.blue,hcDark:s.Q1.cyan,hcLight:"#292929"},i.kg("activeLinkForeground","Color of active links."))),N=(0,r.x1)("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},i.kg("editorSelectionBackground","Color of the editor selection.")),R=(0,r.x1)("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:s.Q1.white},i.kg("editorSelectionForeground","Color of the selected text for high contrast.")),F=(0,r.x1)("editor.inactiveSelectionBackground",{light:(0,r.JO)(N,.5),dark:(0,r.JO)(N,.5),hcDark:(0,r.JO)(N,.7),hcLight:(0,r.JO)(N,.5)},i.kg("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),M=(0,r.x1)("editor.selectionHighlightBackground",{light:(0,r.oG)(N,b,.3,.6),dark:(0,r.oG)(N,b,.3,.6),hcDark:null,hcLight:null},i.kg("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),P=((0,r.x1)("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:c,hcLight:c},i.kg("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),(0,r.x1)("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},i.kg("editorFindMatch","Color of the current search match.")),(0,r.x1)("editor.findMatchForeground",null,i.kg("editorFindMatchForeground","Text color of the current search match."))),z=(0,r.x1)("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},i.kg("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),V=(0,r.x1)("editor.findMatchHighlightForeground",null,i.kg("findMatchHighlightForeground","Foreground color of the other search matches."),!0),U=((0,r.x1)("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},i.kg("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("editor.findMatchBorder",{light:null,dark:null,hcDark:c,hcLight:c},i.kg("editorFindMatchBorder","Border color of the current search match.")),(0,r.x1)("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:c,hcLight:c},i.kg("findMatchHighlightBorder","Border color of the other search matches."))),H=(0,r.x1)("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:(0,r.JO)(c,.4),hcLight:(0,r.JO)(c,.4)},i.kg("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),W=((0,r.x1)("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},i.kg("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("editorHoverWidget.background",v,i.kg("hoverBackground","Background color of the editor hover."))),q=((0,r.x1)("editorHoverWidget.foreground",x,i.kg("hoverForeground","Foreground color of the editor hover.")),(0,r.x1)("editorHoverWidget.border",L,i.kg("hoverBorder","Border color of the editor hover."))),j=((0,r.x1)("editorHoverWidget.statusBarBackground",{dark:(0,r.a)(W,.2),light:(0,r.e$)(W,.05),hcDark:v,hcLight:v},i.kg("statusBarBackground","Background color of the editor hover status bar.")),(0,r.x1)("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:s.Q1.white,hcLight:s.Q1.black},i.kg("editorInlayHintForeground","Foreground color of inline hints"))),G=(0,r.x1)("editorInlayHint.background",{dark:(0,r.JO)(d,.1),light:(0,r.JO)(d,.1),hcDark:(0,r.JO)(s.Q1.white,.1),hcLight:(0,r.JO)(d,.1)},i.kg("editorInlayHintBackground","Background color of inline hints")),$=(0,r.x1)("editorInlayHint.typeForeground",j,i.kg("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Q=(0,r.x1)("editorInlayHint.typeBackground",G,i.kg("editorInlayHintBackgroundTypes","Background color of inline hints for types")),K=(0,r.x1)("editorInlayHint.parameterForeground",j,i.kg("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),J=(0,r.x1)("editorInlayHint.parameterBackground",G,i.kg("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),Y=(0,r.x1)("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},i.kg("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Z=((0,r.x1)("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},i.kg("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),(0,r.x1)("editorLightBulbAi.foreground",Y,i.kg("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),(0,r.x1)("editor.snippetTabstopHighlightBackground",{dark:new s.Q1(new s.bU(124,124,124,.3)),light:new s.Q1(new s.bU(10,50,100,.2)),hcDark:new s.Q1(new s.bU(124,124,124,.3)),hcLight:new s.Q1(new s.bU(10,50,100,.2))},i.kg("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),(0,r.x1)("editor.snippetTabstopHighlightBorder",null,i.kg("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),(0,r.x1)("editor.snippetFinalTabstopHighlightBackground",null,i.kg("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),(0,r.x1)("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new s.Q1(new s.bU(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},i.kg("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),new s.Q1(new s.bU(155,185,85,.2))),X=new s.Q1(new s.bU(255,0,0,.2)),ee=(0,r.x1)("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},i.kg("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),te=(0,r.x1)("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},i.kg("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),ne=((0,r.x1)("diffEditor.insertedLineBackground",{dark:Z,light:Z,hcDark:null,hcLight:null},i.kg("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("diffEditor.removedLineBackground",{dark:X,light:X,hcDark:null,hcLight:null},i.kg("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("diffEditorGutter.insertedLineBackground",null,i.kg("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),(0,r.x1)("diffEditorGutter.removedLineBackground",null,i.kg("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),(0,r.x1)("diffEditorOverview.insertedForeground",null,i.kg("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content."))),re=(0,r.x1)("diffEditorOverview.removedForeground",null,i.kg("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),ie=((0,r.x1)("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},i.kg("diffEditorInsertedOutline","Outline color for the text that got inserted.")),(0,r.x1)("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},i.kg("diffEditorRemovedOutline","Outline color for text that got removed.")),(0,r.x1)("diffEditor.border",{dark:null,light:null,hcDark:l,hcLight:l},i.kg("diffEditorBorder","Border color between the two text editors.")),(0,r.x1)("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},i.kg("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),(0,r.x1)("diffEditor.unchangedRegionBackground","sideBar.background",i.kg("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),(0,r.x1)("diffEditor.unchangedRegionForeground","foreground",i.kg("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),(0,r.x1)("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},i.kg("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),(0,r.x1)("widget.shadow",{dark:(0,r.JO)(s.Q1.black,.36),light:(0,r.JO)(s.Q1.black,.16),hcDark:null,hcLight:null},i.kg("widgetShadow","Shadow color of widgets such as find/replace inside the editor."))),se=(0,r.x1)("widget.border",{dark:null,light:null,hcDark:l,hcLight:l},i.kg("widgetBorder","Border color of widgets such as find/replace inside the editor.")),oe=(0,r.x1)("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},i.kg("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),ae=((0,r.x1)("toolbar.hoverOutline",{dark:null,light:null,hcDark:c,hcLight:c},i.kg("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),(0,r.x1)("toolbar.activeBackground",{dark:(0,r.a)(oe,.1),light:(0,r.e$)(oe,.1),hcDark:null,hcLight:null},i.kg("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),(0,r.x1)("breadcrumb.foreground",(0,r.JO)(o,.8),i.kg("breadcrumbsFocusForeground","Color of focused breadcrumb items."))),he=(0,r.x1)("breadcrumb.background",b,i.kg("breadcrumbsBackground","Background color of breadcrumb items.")),le=(0,r.x1)("breadcrumb.focusForeground",{light:(0,r.e$)(o,.2),dark:(0,r.a)(o,.1),hcDark:(0,r.a)(o,.1),hcLight:(0,r.a)(o,.1)},i.kg("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),ce=(0,r.x1)("breadcrumb.activeSelectionForeground",{light:(0,r.e$)(o,.2),dark:(0,r.a)(o,.1),hcDark:(0,r.a)(o,.1),hcLight:(0,r.a)(o,.1)},i.kg("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),ue=((0,r.x1)("breadcrumbPicker.background",v,i.kg("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),s.Q1.fromHex("#40C8AE").transparent(.5)),de=s.Q1.fromHex("#40A6FF").transparent(.5),ge=s.Q1.fromHex("#606060").transparent(.4),fe=(0,r.x1)("merge.currentHeaderBackground",{dark:ue,light:ue,hcDark:null,hcLight:null},i.kg("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),pe=((0,r.x1)("merge.currentContentBackground",(0,r.JO)(fe,.4),i.kg("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("merge.incomingHeaderBackground",{dark:de,light:de,hcDark:null,hcLight:null},i.kg("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),me=((0,r.x1)("merge.incomingContentBackground",(0,r.JO)(pe,.4),i.kg("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("merge.commonHeaderBackground",{dark:ge,light:ge,hcDark:null,hcLight:null},i.kg("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),ke=((0,r.x1)("merge.commonContentBackground",(0,r.JO)(me,.4),i.kg("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),(0,r.x1)("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},i.kg("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."))),_e=((0,r.x1)("editorOverviewRuler.currentContentForeground",{dark:(0,r.JO)(fe,1),light:(0,r.JO)(fe,1),hcDark:ke,hcLight:ke},i.kg("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),(0,r.x1)("editorOverviewRuler.incomingContentForeground",{dark:(0,r.JO)(pe,1),light:(0,r.JO)(pe,1),hcDark:ke,hcLight:ke},i.kg("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),(0,r.x1)("editorOverviewRuler.commonContentForeground",{dark:(0,r.JO)(me,1),light:(0,r.JO)(me,1),hcDark:ke,hcLight:ke},i.kg("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),(0,r.x1)("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},i.kg("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0)),be=(0,r.x1)("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",i.kg("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Ce=(0,r.x1)("problemsErrorIcon.foreground",y,i.kg("problemsErrorIconForeground","The color used for the problems error icon.")),ve=(0,r.x1)("problemsWarningIcon.foreground",T,i.kg("problemsWarningIconForeground","The color used for the problems warning icon.")),xe=(0,r.x1)("problemsInfoIcon.foreground",B,i.kg("problemsInfoIconForeground","The color used for the problems info icon.")),Le=(0,r.x1)("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},i.kg("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),ye=(0,r.x1)("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},i.kg("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),Ie=(0,r.x1)("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},i.kg("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),we=(0,r.x1)("minimap.infoHighlight",{dark:B,light:B,hcDark:O,hcLight:O},i.kg("minimapInfo","Minimap marker color for infos.")),Te=(0,r.x1)("minimap.warningHighlight",{dark:T,light:T,hcDark:S,hcLight:S},i.kg("overviewRuleWarning","Minimap marker color for warnings.")),Se=(0,r.x1)("minimap.errorHighlight",{dark:new s.Q1(new s.bU(255,18,18,.7)),light:new s.Q1(new s.bU(255,18,18,.7)),hcDark:new s.Q1(new s.bU(255,50,50,1)),hcLight:"#B5200D"},i.kg("minimapError","Minimap marker color for errors.")),Be=(0,r.x1)("minimap.background",null,i.kg("minimapBackground","Minimap background color.")),Ee=(0,r.x1)("minimap.foregroundOpacity",s.Q1.fromHex("#000f"),i.kg("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Oe=((0,r.x1)("minimapSlider.background",(0,r.JO)(p,.5),i.kg("minimapSliderBackground","Minimap slider background color.")),(0,r.x1)("minimapSlider.hoverBackground",(0,r.JO)(m,.5),i.kg("minimapSliderHoverBackground","Minimap slider background color when hovering.")),(0,r.x1)("minimapSlider.activeBackground",(0,r.JO)(k,.5),i.kg("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),(0,r.x1)("charts.foreground",o,i.kg("chartsForeground","The foreground color used in charts.")),(0,r.x1)("charts.lines",(0,r.JO)(o,.5),i.kg("chartsLines","The color used for horizontal lines in charts.")),(0,r.x1)("charts.red",y,i.kg("chartsRed","The red color used in chart visualizations.")),(0,r.x1)("charts.blue",B,i.kg("chartsBlue","The blue color used in chart visualizations.")),(0,r.x1)("charts.yellow",T,i.kg("chartsYellow","The yellow color used in chart visualizations.")),(0,r.x1)("charts.orange",Le,i.kg("chartsOrange","The orange color used in chart visualizations.")),(0,r.x1)("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},i.kg("chartsGreen","The green color used in chart visualizations.")),(0,r.x1)("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},i.kg("chartsPurple","The purple color used in chart visualizations.")),(0,r.x1)("input.background",{dark:"#3C3C3C",light:s.Q1.white,hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("inputBoxBackground","Input box background."))),Ae=(0,r.x1)("input.foreground",o,i.kg("inputBoxForeground","Input box foreground.")),De=(0,r.x1)("input.border",{dark:null,light:null,hcDark:l,hcLight:l},i.kg("inputBoxBorder","Input box border.")),Ne=(0,r.x1)("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:l,hcLight:l},i.kg("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Re=(0,r.x1)("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},i.kg("inputOption.hoverBackground","Background color of activated options in input fields.")),Fe=(0,r.x1)("inputOption.activeBackground",{dark:(0,r.JO)(h,.4),light:(0,r.JO)(h,.2),hcDark:s.Q1.transparent,hcLight:s.Q1.transparent},i.kg("inputOption.activeBackground","Background hover color of options in input fields.")),Me=(0,r.x1)("inputOption.activeForeground",{dark:s.Q1.white,light:s.Q1.black,hcDark:o,hcLight:o},i.kg("inputOption.activeForeground","Foreground color of activated options in input fields.")),Pe=((0,r.x1)("input.placeholderForeground",{light:(0,r.JO)(o,.5),dark:(0,r.JO)(o,.5),hcDark:(0,r.JO)(o,.7),hcLight:(0,r.JO)(o,.7)},i.kg("inputPlaceholderForeground","Input box foreground color for placeholder text.")),(0,r.x1)("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("inputValidationInfoBackground","Input validation background color for information severity."))),ze=(0,r.x1)("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:o},i.kg("inputValidationInfoForeground","Input validation foreground color for information severity.")),Ve=(0,r.x1)("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:l,hcLight:l},i.kg("inputValidationInfoBorder","Input validation border color for information severity.")),Ue=(0,r.x1)("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("inputValidationWarningBackground","Input validation background color for warning severity.")),He=(0,r.x1)("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:o},i.kg("inputValidationWarningForeground","Input validation foreground color for warning severity.")),We=(0,r.x1)("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:l,hcLight:l},i.kg("inputValidationWarningBorder","Input validation border color for warning severity.")),qe=(0,r.x1)("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("inputValidationErrorBackground","Input validation background color for error severity.")),je=(0,r.x1)("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:o},i.kg("inputValidationErrorForeground","Input validation foreground color for error severity.")),Ge=(0,r.x1)("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:l,hcLight:l},i.kg("inputValidationErrorBorder","Input validation border color for error severity.")),$e=(0,r.x1)("dropdown.background",{dark:"#3C3C3C",light:s.Q1.white,hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("dropdownBackground","Dropdown background.")),Qe=(0,r.x1)("dropdown.listBackground",{dark:null,light:null,hcDark:s.Q1.black,hcLight:s.Q1.white},i.kg("dropdownListBackground","Dropdown list background.")),Ke=(0,r.x1)("dropdown.foreground",{dark:"#F0F0F0",light:o,hcDark:s.Q1.white,hcLight:o},i.kg("dropdownForeground","Dropdown foreground.")),Je=(0,r.x1)("dropdown.border",{dark:$e,light:"#CECECE",hcDark:l,hcLight:l},i.kg("dropdownBorder","Dropdown border.")),Ye=(0,r.x1)("button.foreground",s.Q1.white,i.kg("buttonForeground","Button foreground color.")),Ze=(0,r.x1)("button.separator",(0,r.JO)(Ye,.4),i.kg("buttonSeparator","Button separator color.")),Xe=(0,r.x1)("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},i.kg("buttonBackground","Button background color.")),et=(0,r.x1)("button.hoverBackground",{dark:(0,r.a)(Xe,.2),light:(0,r.e$)(Xe,.2),hcDark:Xe,hcLight:Xe},i.kg("buttonHoverBackground","Button background color when hovering.")),tt=(0,r.x1)("button.border",l,i.kg("buttonBorder","Button border color.")),nt=(0,r.x1)("button.secondaryForeground",{dark:s.Q1.white,light:s.Q1.white,hcDark:s.Q1.white,hcLight:o},i.kg("buttonSecondaryForeground","Secondary button foreground color.")),rt=(0,r.x1)("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:s.Q1.white},i.kg("buttonSecondaryBackground","Secondary button background color.")),it=(0,r.x1)("button.secondaryHoverBackground",{dark:(0,r.a)(rt,.2),light:(0,r.e$)(rt,.2),hcDark:null,hcLight:null},i.kg("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),st=(0,r.x1)("radio.activeForeground",Me,i.kg("radioActiveForeground","Foreground color of active radio option.")),ot=(0,r.x1)("radio.activeBackground",Fe,i.kg("radioBackground","Background color of active radio option.")),at=(0,r.x1)("radio.activeBorder",Ne,i.kg("radioActiveBorder","Border color of the active radio option.")),ht=(0,r.x1)("radio.inactiveForeground",null,i.kg("radioInactiveForeground","Foreground color of inactive radio option.")),lt=(0,r.x1)("radio.inactiveBackground",null,i.kg("radioInactiveBackground","Background color of inactive radio option.")),ct=(0,r.x1)("radio.inactiveBorder",{light:(0,r.JO)(st,.2),dark:(0,r.JO)(st,.2),hcDark:(0,r.JO)(st,.4),hcLight:(0,r.JO)(st,.2)},i.kg("radioInactiveBorder","Border color of the inactive radio option.")),ut=(0,r.x1)("radio.inactiveHoverBackground",Re,i.kg("radioHoverBackground","Background color of inactive active radio option when hovering.")),dt=(0,r.x1)("checkbox.background",$e,i.kg("checkbox.background","Background color of checkbox widget.")),gt=((0,r.x1)("checkbox.selectBackground",v,i.kg("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),(0,r.x1)("checkbox.foreground",Ke,i.kg("checkbox.foreground","Foreground color of checkbox widget."))),ft=(0,r.x1)("checkbox.border",Je,i.kg("checkbox.border","Border color of checkbox widget.")),pt=((0,r.x1)("checkbox.selectBorder",a,i.kg("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),(0,r.x1)("keybindingLabel.background",{dark:new s.Q1(new s.bU(128,128,128,.17)),light:new s.Q1(new s.bU(221,221,221,.4)),hcDark:s.Q1.transparent,hcLight:s.Q1.transparent},i.kg("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut."))),mt=(0,r.x1)("keybindingLabel.foreground",{dark:s.Q1.fromHex("#CCCCCC"),light:s.Q1.fromHex("#555555"),hcDark:s.Q1.white,hcLight:o},i.kg("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),kt=(0,r.x1)("keybindingLabel.border",{dark:new s.Q1(new s.bU(51,51,51,.6)),light:new s.Q1(new s.bU(204,204,204,.4)),hcDark:new s.Q1(new s.bU(111,195,223)),hcLight:l},i.kg("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),_t=(0,r.x1)("keybindingLabel.bottomBorder",{dark:new s.Q1(new s.bU(68,68,68,.6)),light:new s.Q1(new s.bU(187,187,187,.4)),hcDark:new s.Q1(new s.bU(111,195,223)),hcLight:o},i.kg("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),bt=(0,r.x1)("list.focusBackground",null,i.kg("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ct=(0,r.x1)("list.focusForeground",null,i.kg("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vt=(0,r.x1)("list.focusOutline",{dark:h,light:h,hcDark:c,hcLight:c},i.kg("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),xt=(0,r.x1)("list.focusAndSelectionOutline",null,i.kg("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Lt=(0,r.x1)("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:s.Q1.fromHex("#0F4A85").transparent(.1)},i.kg("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yt=(0,r.x1)("list.activeSelectionForeground",{dark:s.Q1.white,light:s.Q1.white,hcDark:null,hcLight:null},i.kg("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),It=(0,r.x1)("list.activeSelectionIconForeground",null,i.kg("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wt=(0,r.x1)("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:s.Q1.fromHex("#0F4A85").transparent(.1)},i.kg("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Tt=(0,r.x1)("list.inactiveSelectionForeground",null,i.kg("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),St=(0,r.x1)("list.inactiveSelectionIconForeground",null,i.kg("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Bt=(0,r.x1)("list.inactiveFocusBackground",null,i.kg("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Et=(0,r.x1)("list.inactiveFocusOutline",null,i.kg("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ot=(0,r.x1)("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:s.Q1.white.transparent(.1),hcLight:s.Q1.fromHex("#0F4A85").transparent(.1)},i.kg("listHoverBackground","List/Tree background when hovering over items using the mouse.")),At=(0,r.x1)("list.hoverForeground",null,i.kg("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Dt=(0,r.x1)("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},i.kg("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Nt=(0,r.x1)("list.dropBetweenBackground",{dark:a,light:a,hcDark:null,hcLight:null},i.kg("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Rt=(0,r.x1)("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:h,hcLight:h},i.kg("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Ft=(0,r.x1)("list.focusHighlightForeground",{dark:Rt,light:(0,r.Hz)(Lt,Rt,"#BBE7FF"),hcDark:Rt,hcLight:Rt},i.kg("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),Mt=((0,r.x1)("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},i.kg("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),(0,r.x1)("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},i.kg("listErrorForeground","Foreground color of list items containing errors.")),(0,r.x1)("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},i.kg("listWarningForeground","Foreground color of list items containing warnings.")),(0,r.x1)("listFilterWidget.background",{light:(0,r.e$)(v,0),dark:(0,r.a)(v,0),hcDark:v,hcLight:v},i.kg("listFilterWidgetBackground","Background color of the type filter widget in lists and trees."))),Pt=(0,r.x1)("listFilterWidget.outline",{dark:s.Q1.transparent,light:s.Q1.transparent,hcDark:"#f38518",hcLight:"#007ACC"},i.kg("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),zt=(0,r.x1)("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:l,hcLight:l},i.kg("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),Vt=(0,r.x1)("listFilterWidget.shadow",ie,i.kg("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),Ut=((0,r.x1)("list.filterMatchBackground",{dark:z,light:z,hcDark:null,hcLight:null},i.kg("listFilterMatchHighlight","Background color of the filtered match.")),(0,r.x1)("list.filterMatchBorder",{dark:U,light:U,hcDark:l,hcLight:c},i.kg("listFilterMatchHighlightBorder","Border color of the filtered match.")),(0,r.x1)("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},i.kg("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),(0,r.x1)("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},i.kg("treeIndentGuidesStroke","Tree stroke color for the indentation guides."))),Ht=(0,r.x1)("tree.inactiveIndentGuidesStroke",(0,r.JO)(Ut,.4),i.kg("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Wt=(0,r.x1)("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},i.kg("tableColumnsBorder","Table border color between columns.")),qt=(0,r.x1)("tree.tableOddRowsBackground",{dark:(0,r.JO)(o,.04),light:(0,r.JO)(o,.04),hcDark:null,hcLight:null},i.kg("tableOddRowsBackgroundColor","Background color for odd table rows.")),jt=((0,r.x1)("editorActionList.background",v,i.kg("editorActionListBackground","Action List background color.")),(0,r.x1)("editorActionList.foreground",x,i.kg("editorActionListForeground","Action List foreground color.")),(0,r.x1)("editorActionList.focusForeground",yt,i.kg("editorActionListFocusForeground","Action List foreground color for the focused item.")),(0,r.x1)("editorActionList.focusBackground",Lt,i.kg("editorActionListFocusBackground","Action List background color for the focused item.")),(0,r.x1)("menu.border",{dark:null,light:null,hcDark:l,hcLight:l},i.kg("menuBorder","Border color of menus."))),Gt=(0,r.x1)("menu.foreground",Ke,i.kg("menuForeground","Foreground color of menu items.")),$t=(0,r.x1)("menu.background",$e,i.kg("menuBackground","Background color of menu items.")),Qt=(0,r.x1)("menu.selectionForeground",yt,i.kg("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Kt=(0,r.x1)("menu.selectionBackground",Lt,i.kg("menuSelectionBackground","Background color of the selected menu item in menus.")),Jt=(0,r.x1)("menu.selectionBorder",{dark:null,light:null,hcDark:c,hcLight:c},i.kg("menuSelectionBorder","Border color of the selected menu item in menus.")),Yt=(0,r.x1)("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:l,hcLight:l},i.kg("menuSeparatorBackground","Color of a separator menu item in menus.")),Zt=(0,r.x1)("quickInput.background",v,i.kg("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Xt=(0,r.x1)("quickInput.foreground",x,i.kg("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),en=(0,r.x1)("quickInputTitle.background",{dark:new s.Q1(new s.bU(255,255,255,.105)),light:new s.Q1(new s.bU(0,0,0,.06)),hcDark:"#000000",hcLight:s.Q1.white},i.kg("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),tn=(0,r.x1)("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:s.Q1.white,hcLight:"#0F4A85"},i.kg("pickerGroupForeground","Quick picker color for grouping labels.")),nn=(0,r.x1)("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:s.Q1.white,hcLight:"#0F4A85"},i.kg("pickerGroupBorder","Quick picker color for grouping borders.")),rn=(0,r.x1)("quickInput.list.focusBackground",null,"",void 0,i.kg("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),sn=(0,r.x1)("quickInputList.focusForeground",yt,i.kg("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),on=(0,r.x1)("quickInputList.focusIconForeground",It,i.kg("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),an=(0,r.x1)("quickInputList.focusBackground",{dark:(0,r.yL)(rn,Lt),light:(0,r.yL)(rn,Lt),hcDark:null,hcLight:null},i.kg("quickInput.listFocusBackground","Quick picker background color for the focused item."));(0,r.x1)("search.resultsInfoForeground",{light:o,dark:(0,r.JO)(o,.65),hcDark:o,hcLight:o},i.kg("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),(0,r.x1)("searchEditor.findMatchBackground",{light:(0,r.JO)(z,.66),dark:(0,r.JO)(z,.66),hcDark:z,hcLight:z},i.kg("searchEditor.queryMatch","Color of the Search Editor query matches.")),(0,r.x1)("searchEditor.findMatchBorder",{light:(0,r.JO)(U,.66),dark:(0,r.JO)(U,.66),hcDark:U,hcLight:U},i.kg("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."))},74403(e,t,n){"use strict";n.d(t,{f:()=>score});var r=n(83958),i=n(18019);function score(e,t,n,s,o,a){if(Array.isArray(e)){let r=0;for(const i of e){const e=score(i,t,n,s,o,a);if(10===e)return e;e>r&&(r=e)}return r}if("string"==typeof e)return s?"*"===e?5:e===n?10:0:0;if(e){const{language:h,pattern:l,scheme:c,hasAccessToAllModels:u,notebookType:d}=e;if(!s&&!u)return 0;d&&o&&(t=o);let g=0;if(c)if(c===t.scheme)g=10;else{if("*"!==c)return 0;g=5}if(h)if(h===n)g=10;else{if("*"!==h)return 0;g=Math.max(g,5)}if(d)if(d===a)g=10;else{if("*"!==d||void 0===a)return 0;g=Math.max(g,5)}if(l){let e;if(e="string"==typeof l?l:{...l,base:(0,i.S8)(l.base)},e!==t.fsPath&&!(0,r.YW)(e,t.fsPath))return 0;g=10}return g}return 0}},77922(e,t,n){"use strict";n.d(t,{L:()=>r});const r=(0,n(82399).u1)("languageService")},78148(e,t,n){"use strict";n.r(t),n.d(t,{getIconClasses:()=>getIconClasses});var r=n(13072),i=n(22467),s=n(37264),o=n(54957),a=n(89971),h=n(58881);const l=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function getIconClasses(e,t,n,c,u){if(h.L.isThemeIcon(u))return[`codicon-${u.id}`,"predefined-file-icon"];if(s.r.isUri(u))return[];const d=c===a.p.ROOT_FOLDER?["rootfolder-icon"]:c===a.p.FOLDER?["folder-icon"]:["file-icon"];if(n){let s;if(n.scheme===r.ny.data){s=i.B6.parseMetaData(n).get(i.B6.META_DATA_LABEL)}else{const e=n.path.match(l);e?(s=cssEscape(e[2].toLowerCase()),e[1]&&d.push(`${cssEscape(e[1].toLowerCase())}-name-dir-icon`)):s=cssEscape(n.authority.toLowerCase())}if(c===a.p.ROOT_FOLDER)d.push(`${s}-root-name-folder-icon`);else if(c===a.p.FOLDER)d.push(`${s}-name-folder-icon`);else{if(s){if(d.push(`${s}-name-file-icon`),d.push("name-file-icon"),s.length<=255){const e=s.split(".");for(let t=1;t<e.length;t++)d.push(`${e.slice(t).join(".")}-ext-file-icon`)}d.push("ext-file-icon")}const a=function detectLanguageId(e,t,n){if(!n)return null;let s=null;if(n.scheme===r.ny.data){const e=i.B6.parseMetaData(n).get(i.B6.META_DATA_MIME);e&&(s=t.getLanguageIdByMimeType(e))}else{const t=e.getModel(n);t&&(s=t.getLanguageId())}if(s&&s!==o.vH)return s;return t.guessLanguageIdByFilepathOrFirstLine(n)}(e,t,n);a&&d.push(`${cssEscape(a)}-lang-file-icon`)}}return d}function cssEscape(e){return e.replace(/[\s]/g,"/")}},78518(e,t,n){"use strict";n.d(t,{No:()=>hasDriveLetter,TH:()=>toSlashes,Zn:()=>getRoot,_1:()=>isEqualOrParent,kb:()=>toPosixPath});var r=n(18019),i=n(63339),s=n(16844);function isPathSeparator(e){return 47===e||92===e}function toSlashes(e){return e.replace(/[\\/]/g,r.SA.sep)}function toPosixPath(e){return-1===e.indexOf("/")&&(e=toSlashes(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function getRoot(e,t=r.SA.sep){if(!e)return"";const n=e.length,i=e.charCodeAt(0);if(isPathSeparator(i)){if(isPathSeparator(e.charCodeAt(1))&&!isPathSeparator(e.charCodeAt(2))){let r=3;const i=r;for(;r<n&&!isPathSeparator(e.charCodeAt(r));r++);if(i!==r&&!isPathSeparator(e.charCodeAt(r+1)))for(r+=1;r<n;r++)if(isPathSeparator(e.charCodeAt(r)))return e.slice(0,r+1).replace(/[\\/]/g,t)}return t}if(isWindowsDriveLetter(i)&&58===e.charCodeAt(1))return isPathSeparator(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<n;s++)if(isPathSeparator(e.charCodeAt(s)))return e.slice(0,s+1);return""}function isEqualOrParent(e,t,n,i=r.Vn){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!(0,s.ns)(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function isWindowsDriveLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function hasDriveLetter(e,t=i.uF){return!!t&&(isWindowsDriveLetter(e.charCodeAt(0))&&58===e.charCodeAt(1))}},80886(e,t,n){"use strict";n.r(t),n.d(t,{IMarkerDecorationsService:()=>r});const r=(0,n(82399).u1)("markerDecorationsService")},81197(e,t,n){"use strict";n.r(t),n.d(t,{LanguageFeaturesService:()=>LanguageFeaturesService});var r=n(2106),i=n(10998),s=n(66055),o=n(74403);function isExclusive(e){return"string"!=typeof e&&(Array.isArray(e)?e.every(isExclusive):!!e.exclusive)}class MatchCandidate{constructor(e,t,n,r,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=r,this.recursive=i}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class LanguageFeatureRegistry{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new r.vl,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,i.s)((()=>{if(n){const e=this._entries.indexOf(n);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const e of this._entries)e._score>0&&t.push(e.provider);return t}ordered(e,t=!1){const n=[];return this._orderedForEach(e,t,(e=>n.push(e.provider))),n}orderedGroups(e){const t=[];let n,r;return this._orderedForEach(e,!1,(e=>{n&&r===e._score?n.push(e.provider):(r=e._score,n=[e.provider],t.push(n))})),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(const e of this._entries)e._score>0&&n(e)}_updateScores(e,t){const n=this._notebookInfoResolver?.(e.uri),r=n?new MatchCandidate(e.uri,e.getLanguageId(),n.uri,n.type,t):new MatchCandidate(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(r)){this._lastCandidate=r;for(const n of this._entries)if(n._score=(0,o.f)(n.selector,r.uri,r.languageId,(0,s.vd)(e),r.notebookUri,r.notebookType),isExclusive(n.selector)&&n._score>0){if(!t){for(const e of this._entries)e._score=0;n._score=1e3;break}n._score=0}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:isBuiltinSelector(e.selector)&&!isBuiltinSelector(t.selector)?1:!isBuiltinSelector(e.selector)&&isBuiltinSelector(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function isBuiltinSelector(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(isBuiltinSelector):Boolean(e.isBuiltin))}var a=n(52230),h=n(66726);class LanguageFeaturesService{constructor(){this.referenceProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.newSymbolNamesProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.multiDocumentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentDropEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentPasteEditProvider=new LanguageFeatureRegistry(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}(0,h.v)(a.ILanguageFeaturesService,LanguageFeaturesService,1)},82399(e,t,n){"use strict";var r;n.d(t,{_$:()=>r,_Y:()=>i,u1:()=>createDecorator}),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function getServiceDependencies(t){return t[e.DI_DEPENDENCIES]||[]}}(r||(r={}));const i=createDecorator("instantiationService");function createDecorator(e){if(r.serviceIds.has(e))return r.serviceIds.get(e);const id=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function storeServiceDependency(e,t,n){t[r.DI_TARGET]===t?t[r.DI_DEPENDENCIES].push({id:e,index:n}):(t[r.DI_DEPENDENCIES]=[{id:e,index:n}],t[r.DI_TARGET]=t)}(id,e,n)};return id.toString=()=>e,r.serviceIds.set(e,id),id}},82891(e,t,n){"use strict";n.r(t),n.d(t,{ISemanticTokensStylingService:()=>r});const r=(0,n(82399).u1)("semanticTokensStylingService")},83312(e,t,n){"use strict";n.d(t,{d:()=>SyncDescriptor});class SyncDescriptor{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}},83455(e,t,n){"use strict";n.d(t,{E$:()=>ModelRawLinesDeleted,HP:()=>ModelRawContentChangedEvent,Ic:()=>InternalModelContentChangeEvent,U0:()=>ModelRawLineChanged,Wn:()=>ModelRawFlush,bg:()=>ModelRawLinesInserted,mS:()=>ModelRawEOLChanged,uK:()=>LineInjectedText,vn:()=>ModelInjectedTextChangedEvent});class ModelRawFlush{constructor(){this.changeType=1}}class LineInjectedText{static applyInjectedText(e,t){if(!t||0===t.length)return e;let n="",r=0;for(const i of t)n+=e.substring(r,i.column-1),r=i.column-1,n+=i.options.content;return n+=e.substring(r),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new LineInjectedText(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new LineInjectedText(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber)),t}constructor(e,t,n,r,i){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=i}}class ModelRawLineChanged{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class ModelRawLinesDeleted{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class ModelRawLinesInserted{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class ModelRawEOLChanged{constructor(){this.changeType=5}}class ModelRawContentChangedEvent{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.versionId,i=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new ModelRawContentChangedEvent(n,r,i,s)}}class ModelInjectedTextChangedEvent{constructor(e){this.changes=e}}class InternalModelContentChangeEvent{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=ModelRawContentChangedEvent.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=InternalModelContentChangeEvent._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new InternalModelContentChangeEvent(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.eol,i=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:n,eol:r,isEolChange:e.isEolChange&&t.isEolChange,versionId:i,isUndoing:s,isRedoing:o,isFlush:a}}}},83930(e,t,n){"use strict";n.r(t),n.d(t,{LanguageService:()=>LanguageService});var r=n(2106),i=n(10998),s=n(66995),o=n(13338),a=n(44364),h=n(54957),l=n(16311);class LanguageService extends i.jG{static{this.instanceCount=0}constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new r.vl),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new r.vl),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new r.vl({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,LanguageService.instanceCount++,this._registry=this._register(new s.LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){LanguageService.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return(0,o.Fy)(n,null)}createById(e){return new LanguageSelection(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(e)))}createByFilepathOrFirstLine(e,t){return new LanguageSelection(this.onDidChange,(()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)}))}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=h.vH),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),a.dG.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}class LanguageSelection{constructor(e,t){this._value=(0,l.y0)(this,e,(()=>t())),this.onDidChange=r.Jh.fromObservable(this._value)}get languageId(){return this._value.get()}}},83958(e,t,n){"use strict";n.d(t,{YW:()=>match,qg:()=>parse});var r=n(65958),i=n(78518),s=n(27992),o=n(18019),a=n(63339),h=n(16844);const l="**",c="[/\\\\]",u="[^/\\\\]",d=/\//g;function starsToRegExp(e,t){switch(e){case 0:return"";case 1:return`${u}*?`;default:return`(?:${c}|${u}+${c}${t?`|${c}${u}+`:""})*?`}}function splitGlobAware(e,t){if(!e)return[];const n=[];let r=!1,i=!1,s="";for(const o of e){switch(o){case t:if(!r&&!i){n.push(s),s="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1}s+=o}return s&&n.push(s),n}function parseRegExp(e){if(!e)return"";let t="";const n=splitGlobAware(e,"/");if(n.every((e=>e===l)))t=".*";else{let e=!1;n.forEach(((r,i)=>{if(r===l){if(e)return;t+=starsToRegExp(2,i===n.length-1)}else{let e=!1,s="",o=!1,a="";for(const n of r)if("}"!==n&&e)s+=n;else if(!o||"]"===n&&a)switch(n){case"{":e=!0;continue;case"[":o=!0;continue;case"}":{const n=`(?:${splitGlobAware(s,",").map((e=>parseRegExp(e))).join("|")})`;t+=n,e=!1,s="";break}case"]":t+="["+a+"]",o=!1,a="";break;case"?":t+=u;continue;case"*":t+=starsToRegExp(1);continue;default:t+=(0,h.bm)(n)}else{let e;e="-"===n?n:"^"!==n&&"!"!==n||a?"/"===n?"":(0,h.bm)(n):"^",a+=e}i<n.length-1&&(n[i+1]!==l||i+2<n.length)&&(t+=c)}e=r===l}))}return t}const g=/^\*\*\/\*\.[\w\.-]+$/,f=/^\*\*\/([\w\.-]+)\/?$/,p=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,m=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,k=/^\*\*((\/[\w\.-]+)+)\/?$/,_=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,b=new s.qK(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(e,t){if(!e)return NULL;let n;n="string"!=typeof e?e.pattern:e,n=n.trim();const r=`${n}_${!!t.trimForExclusions}`;let i,s=b.get(r);return s||(s=g.test(n)?function trivia1(e,t){return function(n,r){return"string"==typeof n&&n.endsWith(e)?t:null}}(n.substr(4),n):(i=f.exec(trimForExclusions(n,t)))?function trivia2(e,t){const n=`/${e}`,r=`\\${e}`,parsedPattern=function(i,s){return"string"!=typeof i?null:s?s===e?t:null:i===e||i.endsWith(n)||i.endsWith(r)?t:null},i=[e];return parsedPattern.basenames=i,parsedPattern.patterns=[t],parsedPattern.allBasenames=i,parsedPattern}(i[1],n):(t.trimForExclusions?m:p).test(n)?function trivia3(e,t){const n=aggregateBasenameMatches(e.slice(1,-1).split(",").map((e=>parsePattern(e,t))).filter((e=>e!==NULL)),e),r=n.length;if(!r)return NULL;if(1===r)return n[0];const parsedPattern=function(t,r){for(let i=0,s=n.length;i<s;i++)if(n[i](t,r))return e;return null},i=n.find((e=>!!e.allBasenames));i&&(parsedPattern.allBasenames=i.allBasenames);const s=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);s.length&&(parsedPattern.allPaths=s);return parsedPattern}(n,t):(i=k.exec(trimForExclusions(n,t)))?trivia4and5(i[1].substr(1),n,!0):(i=_.exec(trimForExclusions(n,t)))?trivia4and5(i[1],n,!1):function toRegExp(e){try{const t=new RegExp(`^${parseRegExp(e)}$`);return function(n){return t.lastIndex=0,"string"==typeof n&&t.test(n)?e:null}}catch(e){return NULL}}(n),b.set(r,s)),wrapRelativePattern(s,e)}function wrapRelativePattern(e,t){if("string"==typeof t)return e;const wrappedPattern=function(n,r){return(0,i._1)(n,t.base,!a.j9)?e((0,h.NB)(n.substr(t.base.length),o.Vn),r):null};return wrappedPattern.allBasenames=e.allBasenames,wrappedPattern.allPaths=e.allPaths,wrappedPattern.basenames=e.basenames,wrappedPattern.patterns=e.patterns,wrappedPattern}function trimForExclusions(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function trivia4and5(e,t,n){const r=o.Vn===o.SA.sep,i=r?e:e.replace(d,o.Vn),s=o.Vn+i,a=o.SA.sep+e;let h;return h=n?function(n,o){return"string"!=typeof n||n!==i&&!n.endsWith(s)&&(r||n!==e&&!n.endsWith(a))?null:t}:function(n,s){return"string"!=typeof n||n!==i&&(r||n!==e)?null:t},h.allPaths=[(n?"*/":"./")+e],h}function match(e,t,n){return!(!e||"string"!=typeof t)&&parse(e)(t,void 0,n)}function parse(e,t={}){if(!e)return FALSE;if("string"==typeof e||function isRelativePattern(e){const t=e;if(!t)return!1;return"string"==typeof t.base&&"string"==typeof t.pattern}(e)){const n=parsePattern(e,t);if(n===NULL)return FALSE;const resultPattern=function(e,t){return!!n(e,t)};return n.allBasenames&&(resultPattern.allBasenames=n.allBasenames),n.allPaths&&(resultPattern.allPaths=n.allPaths),resultPattern}return function parsedExpression(e,t){const n=aggregateBasenameMatches(Object.getOwnPropertyNames(e).map((n=>function parseExpressionPattern(e,t,n){if(!1===t)return NULL;const i=parsePattern(e,n);if(i===NULL)return NULL;if("boolean"==typeof t)return i;if(t){const n=t.when;if("string"==typeof n){const result=(t,s,o,a)=>{if(!a||!i(t,s))return null;const h=a(n.replace("$(basename)",(()=>o)));return(0,r.Qg)(h)?h.then((t=>t?e:null)):h?e:null};return result.requiresSiblings=!0,result}}return i}(n,e[n],t))).filter((e=>e!==NULL))),i=n.length;if(!i)return NULL;if(!n.some((e=>!!e.requiresSiblings))){if(1===i)return n[0];const resultExpression=function(e,t){let i;for(let s=0,o=n.length;s<o;s++){const o=n[s](e,t);if("string"==typeof o)return o;(0,r.Qg)(o)&&(i||(i=[]),i.push(o))}return i?(async()=>{for(const e of i){const t=await e;if("string"==typeof t)return t}return null})():null},e=n.find((e=>!!e.allBasenames));e&&(resultExpression.allBasenames=e.allBasenames);const t=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return t.length&&(resultExpression.allPaths=t),resultExpression}const resultExpression=function(e,t,i){let s,a;for(let h=0,l=n.length;h<l;h++){const l=n[h];l.requiresSiblings&&i&&(t||(t=(0,o.P8)(e)),s||(s=t.substr(0,t.length-(0,o.LC)(e).length)));const c=l(e,t,s,i);if("string"==typeof c)return c;(0,r.Qg)(c)&&(a||(a=[]),a.push(c))}return a?(async()=>{for(const e of a){const t=await e;if("string"==typeof t)return t}return null})():null},s=n.find((e=>!!e.allBasenames));s&&(resultExpression.allBasenames=s.allBasenames);const a=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);a.length&&(resultExpression.allPaths=a);return resultExpression}(e,t)}function aggregateBasenameMatches(e,t){const n=e.filter((e=>!!e.basenames));if(n.length<2)return e;const r=n.reduce(((e,t)=>{const n=t.basenames;return n?e.concat(n):e}),[]);let i;if(t){i=[];for(let e=0,n=r.length;e<n;e++)i.push(t)}else i=n.reduce(((e,t)=>{const n=t.patterns;return n?e.concat(n):e}),[]);const aggregate=function(e,t){if("string"!=typeof e)return null;if(!t){let n;for(n=e.length;n>0;n--){const t=e.charCodeAt(n-1);if(47===t||92===t)break}t=e.substr(n)}const n=r.indexOf(t);return-1!==n?i[n]:null};aggregate.basenames=r,aggregate.patterns=i,aggregate.allBasenames=r;const s=e.filter((e=>!e.basenames));return s.push(aggregate),s}},85702(e,t,n){"use strict";n.d(t,{Z:()=>LanguageAgnosticBracketTokens});var r=n(16844),i=n(64651),s=n(34883),o=n(60756),a=n(33206);class BracketTokens{static createFromLanguage(e,t){function getId(e){return t.getKey(`${e.languageId}:::${e.bracketText}`)}const n=new Map;for(const t of e.bracketsNew.openingBrackets){const e=(0,s.qe)(0,t.bracketText.length),r=getId(t),h=o.gV.getEmpty().add(r,o.FD);n.set(t.bracketText,new a.ou(e,1,r,h,i.rh.create(e,t,h)))}for(const t of e.bracketsNew.closingBrackets){const e=(0,s.qe)(0,t.bracketText.length);let r=o.gV.getEmpty();const h=t.getOpeningBrackets();for(const e of h)r=r.add(getId(e),o.FD);n.set(t.bracketText,new a.ou(e,2,getId(h[0]),r,i.rh.create(e,t,r)))}return new BracketTokens(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map((e=>function prepareBracketForRegExp(e){let t=(0,r.bm)(e);/^[\w ]+/.test(e)&&(t=`\\b${t}`);/[\w ]+$/.test(e)&&(t=`${t}\\b`);return t}(e))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(2===n.kind&&n.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}}class LanguageAgnosticBracketTokens{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=BracketTokens.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}},85753(e,t,n){"use strict";n.d(t,{Mo:()=>getLanguageTagSettingPlainKey,ad:()=>toValuesTree,gD:()=>getConfigurationValue,iB:()=>removeFromValueTree,kW:()=>addToValueTree,pG:()=>r});const r=(0,n(82399).u1)("configurationService");function toValuesTree(e,t){const n=Object.create(null);for(const r in e)addToValueTree(n,r,e[r],t);return n}function addToValueTree(e,t,n,r){const i=t.split("."),s=i.pop();let o=e;for(let e=0;e<i.length;e++){const n=i[e];let s=o[n];switch(typeof s){case"undefined":s=o[n]=Object.create(null);break;case"object":if(null===s)return void r(`Ignoring ${t} as ${i.slice(0,e+1).join(".")} is null`);break;default:return void r(`Ignoring ${t} as ${i.slice(0,e+1).join(".")} is ${JSON.stringify(s)}`)}o=s}if("object"==typeof o&&null!==o)try{o[s]=n}catch(e){r(`Ignoring ${t} as ${i.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${i.join(".")} is ${JSON.stringify(o)}`)}function removeFromValueTree(e,t){doRemoveFromValueTree(e,t.split("."))}function doRemoveFromValueTree(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const r=e[n];"object"!=typeof r||Array.isArray(r)||(doRemoveFromValueTree(r,t),0===Object.keys(r).length&&delete e[n])}}else delete e[n]}function getConfigurationValue(e,t,n){const r=function accessSetting(e,t){let n=e;for(const e of t){if("object"!=typeof n||null===n)return;n=n[e]}return n}(e,t.split("."));return void 0===r?n:r}function getLanguageTagSettingPlainKey(e){return e.replace(/[\[\]]/g,"")}},87676(e,t,n){"use strict";n.d(t,{Bb:()=>asCssVariableName,Fd:()=>c,Gu:()=>asCssVariable,HP:()=>asCssVariableWithDefault,Hz:()=>ifDefinedThenElse,JO:()=>transparent,a:()=>lighten,e$:()=>darken,oG:()=>lessProminent,x1:()=>registerColor,yL:()=>oneOf});var r=n(87110),i=n(65958),s=n(94901),o=n(2106),a=n(51460),h=n(67167),l=n(19746);function asCssVariableName(e){return`--vscode-${e.replace(/\./g,"-")}`}function asCssVariable(e){return`var(${asCssVariableName(e)})`}function asCssVariableWithDefault(e,t){return`var(${asCssVariableName(e)}, ${t})`}const c={ColorContribution:"base.contributions.colors"};const u=new class ColorRegistry{constructor(){this._onDidChangeSchema=new o.vl,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,i){const s={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:i};this.colorsById[e]=s;const o={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return i&&(o.deprecationMessage=i),r&&(o.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",o.patternErrorMessage=l.kg("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[o,{type:"string",const:"default",description:l.kg("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map((e=>this.colorsById[e]))}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n?.defaults){return resolveColorValue(function isColorDefaults(e){return null!==e&&"object"==typeof e&&"light"in e&&"dark"in e}(n.defaults)?n.defaults[t.type]:n.defaults,t)}}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort(((e,t)=>{const n=-1===e.indexOf(".")?0:1,r=-1===t.indexOf(".")?0:1;return n!==r?n-r:e.localeCompare(t)})).map((e=>`- \`${e}\`: ${this.colorsById[e].description}`)).join("\n")}};function registerColor(e,t,n,r,i){return u.registerColor(e,t,n,r,i)}function darken(e,t){return{op:0,value:e,factor:t}}function lighten(e,t){return{op:1,value:e,factor:t}}function transparent(e,t){return{op:2,value:e,factor:t}}function oneOf(...e){return{op:4,values:e}}function ifDefinedThenElse(e,t,n){return{op:6,if:e,then:t,else:n}}function lessProminent(e,t,n,r){return{op:5,value:e,background:t,factor:n,transparency:r}}function resolveColorValue(e,t){if(null!==e)return"string"==typeof e?"#"===e[0]?s.Q1.fromHex(e):t.getColor(e):e instanceof s.Q1?e:"object"==typeof e?function executeTransform(e,t){switch(e.op){case 0:return resolveColorValue(e.value,t)?.darken(e.factor);case 1:return resolveColorValue(e.value,t)?.lighten(e.factor);case 2:return resolveColorValue(e.value,t)?.transparent(e.factor);case 3:{const n=resolveColorValue(e.background,t);return n?resolveColorValue(e.value,t)?.makeOpaque(n):resolveColorValue(e.value,t)}case 4:for(const n of e.values){const e=resolveColorValue(n,t);if(e)return e}return;case 6:return resolveColorValue(t.defines(e.if)?e.then:e.else,t);case 5:{const n=resolveColorValue(e.value,t);if(!n)return;const r=resolveColorValue(e.background,t);return r?n.isDarkerThan(r)?s.Q1.getLighterColor(n,r,e.factor).transparent(e.transparency):s.Q1.getDarkerColor(n,r,e.factor).transparent(e.transparency):n.transparent(e.factor*e.transparency)}default:throw(0,r.xb)(e)}}(e,t):void 0}h.O.add(c.ColorContribution,u);const d="vscode://schemas/workbench-colors",g=h.O.as(a.F.JSONContribution);g.registerSchema(d,u.getColorSchema());const f=new i.uC((()=>g.notifySchemaChanged(d)),200);u.onDidChangeSchema((()=>{f.isScheduled()||f.schedule()}))},88195(e,t,n){"use strict";n.d(t,{k:()=>r});const r=(0,n(82399).u1)("environmentService")},88436(e,t,n){"use strict";function diffSets(e,t){const n=[],r=[];for(const r of e)t.has(r)||n.push(r);for(const n of t)e.has(n)||r.push(n);return{removed:n,added:r}}function intersection(e,t){const n=new Set;for(const r of t)e.has(r)&&n.add(r);return n}n.d(t,{E:()=>intersection,Z:()=>diffSets})},89044(e,t,n){"use strict";n.d(t,{Fd:()=>l,Gy:()=>h,Pz:()=>getThemeTypeSelector,Yf:()=>themeColorFromId,lR:()=>Themable,zy:()=>registerThemingParticipant});var r=n(2106),i=n(10998),s=n(82399),o=n(67167),a=n(89563);const h=(0,s.u1)("themeService");function themeColorFromId(e){return{id:e}}function getThemeTypeSelector(e){switch(e){case a.zM.DARK:return"vs-dark";case a.zM.HIGH_CONTRAST_DARK:return"hc-black";case a.zM.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const l={ThemingContribution:"base.contributions.theming"};const c=new class ThemingRegistry{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new r.vl}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),(0,i.s)((()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}))}getThemingParticipants(){return this.themingParticipants}};function registerThemingParticipant(e){return c.onColorThemeChange(e)}o.O.add(l.ThemingContribution,c);class Themable extends i.jG{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}},89563(e,t,n){"use strict";var r;function isHighContrast(e){return e===r.HIGH_CONTRAST_DARK||e===r.HIGH_CONTRAST_LIGHT}function isDark(e){return e===r.DARK||e===r.HIGH_CONTRAST_DARK}n.d(t,{Bb:()=>isHighContrast,HD:()=>isDark,zM:()=>r}),function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(r||(r={}))},89971(e,t,n){"use strict";var r;n.d(t,{p:()=>r}),function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(r||(r={}))},90011(e,t,n){"use strict";n.r(t),n.d(t,{MarkerDecorationsService:()=>p});var r=n(27619),i=n(10998),s=n(66055),o=n(89044),a=n(48295),h=n(64830),l=n(28061),c=n(13072),u=n(2106),d=n(70559),g=n(27992),f=n(88436),__decorate=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},__param=function(e,t){return function(n,r){t(n,r,e)}};let p=class MarkerDecorationsService extends i.jG{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new u.vl),this._markerDecorations=new g.fT,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach((e=>{const t=this._markerDecorations.get(e);t&&this._updateDecorations(t)}))}_onModelAdded(e){const t=new MarkerDecorations(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==c.ny.inMemory&&e.uri.scheme!==c.ny.internal&&e.uri.scheme!==c.ny.vscode||this._markerService?.read({resource:e.uri}).map((e=>e.owner)).forEach((t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};p=__decorate([__param(0,h.IModelService),__param(1,r.DR)],p);class MarkerDecorations extends i.jG{constructor(e){super(),this.model=e,this._map=new g.cO,this._register((0,i.s)((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(e){const{added:t,removed:n}=(0,f.Z)(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===n.length)return!1;const r=n.map((e=>this._map.get(e))),i=t.map((e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)}))),s=this.model.deltaDecorations(r,i);for(const e of n)this._map.delete(e);for(let e=0;e<s.length;e++)this._map.set(t[e],s[e]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=l.Q.lift(t);if(t.severity!==r.cj.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const t=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(1===t||n.endColumn>=t)return n;const r=e.getWordAtPosition(n.getStartPosition());r&&(n=new l.Q(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&n.startLineNumber===n.endLineNumber){const r=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);r<n.endColumn&&(n=new l.Q(n.startLineNumber,r,n.endLineNumber,n.endColumn),t.startColumn=r)}return n}_createDecorationOption(e){let t,n,i,h,l;switch(e.severity){case r.cj.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",i=0;break;case r.cj.Info:t="squiggly-info",n=(0,o.Yf)(a.AQ),i=10,l={color:(0,o.Yf)(d.KoI),position:1};break;case r.cj.Warning:t="squiggly-warning",n=(0,o.Yf)(a.aZ),i=20,l={color:(0,o.Yf)(d.uMG),position:1};break;case r.cj.Error:default:t="squiggly-error",n=(0,o.Yf)(a.yI),i=30,l={color:(0,o.Yf)(d.yLC),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(h="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(h="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:s.A5.Right},minimap:l,zIndex:i,inlineClassName:h}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}}},90304(e,t,n){"use strict";n.r(t),n.d(t,{IEditorWorkerService:()=>r});const r=(0,n(82399).u1)("editorWorkerService")},97036(e,t,n){"use strict";n.d(t,{$H:()=>nullTokenize,Lh:()=>nullTokenizeEncoded,r3:()=>i});var r=n(44364);const i=new class{clone(){return this}equals(e){return this===e}};function nullTokenize(e,t){return new r.$M([new r.ou(0,"",e)],t)}function nullTokenizeEncoded(e,t){const n=new Uint32Array(2);return n[0]=0,n[1]=(32768|e|2<<24)>>>0,new r.rY(n,null===t?i:t)}}}]);